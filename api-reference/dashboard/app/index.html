
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://www.onesecondtrader.com/api-reference/dashboard/app/">
      
      
        <link rel="prev" href="../../core/strategies/examples/">
      
      
        <link rel="next" href="../registry/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>App - OneSecondTrader</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Robot+Serif:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Robot Serif";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#app" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="OneSecondTrader" class="md-header__button md-logo" aria-label="OneSecondTrader" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19 1-5 5v11l5-4.5zm2 4v13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6c-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1M10 18.41C8.75 18.09 7.5 18 6.5 18c-1.06 0-2.32.19-3.5.5V7.13c.91-.4 2.14-.63 3.5-.63s2.59.23 3.5.63z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OneSecondTrader
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              App
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 2c3.87 0 7 3.13 7 7 0 2.38-1.19 4.47-3 5.74V17c0 .55-.45 1-1 1H6c-.55 0-1-.45-1-1v-2.26C3.19 13.47 2 11.38 2 9c0-3.87 3.13-7 7-7M6 21v-1h6v1c0 .55-.45 1-1 1H7c-.55 0-1-.45-1-1M9 4C6.24 4 4 6.24 4 9c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58 0-2.76-2.24-5-5-5m10 9h-2l-3.2 9h1.9l.7-2h3.2l.7 2h1.9zm-2.15 5.65L18 15l1.15 3.65z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.5 2c-1.79 1.15-3 3.18-3 5.5s1.21 4.35 3.03 5.5C4.46 13 2 10.54 2 7.5A5.5 5.5 0 0 1 7.5 2m11.57 1.5 1.43 1.43L4.93 20.5 3.5 19.07zm-6.18 2.43L11.41 5 9.97 6l.42-1.7L9 3.24l1.75-.12.58-1.65L12 3.1l1.73.03-1.35 1.13zm-3.3 3.61-1.16-.73-1.12.78.34-1.32-1.09-.83 1.36-.09.45-1.29.51 1.27 1.36.03-1.05.87zM19 13.5a5.5 5.5 0 0 1-5.5 5.5c-1.22 0-2.35-.4-3.26-1.07l7.69-7.69c.67.91 1.07 2.04 1.07 3.26m-4.4 6.58 2.77-1.15-.24 3.35zm4.33-2.7 1.15-2.77 2.2 2.54zm1.15-4.96-1.14-2.78 3.34.24zM9.63 18.93l2.77 1.15-2.53 2.19z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.5 2c-1.79 1.15-3 3.18-3 5.5s1.21 4.35 3.03 5.5C4.46 13 2 10.54 2 7.5A5.5 5.5 0 0 1 7.5 2m11.57 1.5 1.43 1.43L4.93 20.5 3.5 19.07zm-6.18 2.43L11.41 5 9.97 6l.42-1.7L9 3.24l1.75-.12.58-1.65L12 3.1l1.73.03-1.35 1.13zm-3.3 3.61-1.16-.73-1.12.78.34-1.32-1.09-.83 1.36-.09.45-1.29.51 1.27 1.36.03-1.05.87zM19 13.5a5.5 5.5 0 0 1-5.5 5.5c-1.22 0-2.35-.4-3.26-1.07l7.69-7.69c.67.91 1.07 2.04 1.07 3.26m-4.4 6.58 2.77-1.15-.24 3.35zm4.33-2.7 1.15-2.77 2.2 2.54zm1.15-4.96-1.14-2.78 3.34.24zM9.63 18.93l2.77 1.15-2.53 2.19z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/NilsKujath/onesecondtrader" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    nilskujath/onesecondtrader
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../quickstart/" class="md-tabs__link">
        
  
  
    
  
  → Quickstart

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../documentation/overview/" class="md-tabs__link">
          
  
  
  Documentation

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../overview/" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="OneSecondTrader" class="md-nav__button md-logo" aria-label="OneSecondTrader" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19 1-5 5v11l5-4.5zm2 4v13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6c-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1M10 18.41C8.75 18.09 7.5 18 6.5 18c-1.06 0-2.32.19-3.5.5V7.13c.91-.4 2.14-.63 3.5-.63s2.59.23 3.5.63z"/></svg>

    </a>
    OneSecondTrader
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/NilsKujath/onesecondtrader" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    nilskujath/onesecondtrader
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    → Quickstart
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Documentation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../documentation/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Package Structure
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Package Structure
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../documentation/structure/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../documentation/structure/core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Core
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../documentation/structure/secmaster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Securities Master
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../documentation/structure/connectors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connectors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../documentation/structure/dashboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dashboard
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Connectors
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Connectors
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_1" >
        
          
          <label class="md-nav__link" for="__nav_4_2_1" id="__nav_4_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Brokers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_1">
            <span class="md-nav__icon md-icon"></span>
            Brokers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../connectors/brokers/ib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../connectors/brokers/simulated/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Simulated
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2_2" id="__nav_4_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Datafeeds
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_2">
            <span class="md-nav__icon md-icon"></span>
            Datafeeds
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../connectors/datafeeds/ib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../connectors/datafeeds/simulated/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Simulated
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_3" >
        
          
          <label class="md-nav__link" for="__nav_4_2_3" id="__nav_4_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Gateways
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_3">
            <span class="md-nav__icon md-icon"></span>
            Gateways
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../connectors/gateways/ib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IB
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Core
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_1" >
        
          
          <label class="md-nav__link" for="__nav_4_3_1" id="__nav_4_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Brokers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_1">
            <span class="md-nav__icon md-icon"></span>
            Brokers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/brokers/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_2" >
        
          
          <label class="md-nav__link" for="__nav_4_3_2" id="__nav_4_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Datafeeds
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_2">
            <span class="md-nav__icon md-icon"></span>
            Datafeeds
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/datafeeds/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3_3" id="__nav_4_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Events
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_3">
            <span class="md-nav__icon md-icon"></span>
            Events
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/events/bases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bases
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/events/market/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Market
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/events/requests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Requests
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/events/responses/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Responses
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_4" >
        
          
          <label class="md-nav__link" for="__nav_4_3_4" id="__nav_4_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Indicators
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_4">
            <span class="md-nav__icon md-icon"></span>
            Indicators
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/indicators/averages/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Averages
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/indicators/bar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bar
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/indicators/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_5" >
        
          
          <label class="md-nav__link" for="__nav_4_3_5" id="__nav_4_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Messaging
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_5">
            <span class="md-nav__icon md-icon"></span>
            Messaging
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/messaging/eventbus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Eventbus
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/messaging/subscriber/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Subscriber
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_6" >
        
          
          <label class="md-nav__link" for="__nav_4_3_6" id="__nav_4_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Models
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_6">
            <span class="md-nav__icon md-icon"></span>
            Models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/models/data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/models/orders/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Orders
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/models/params/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Params
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/models/records/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Records
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_7" >
        
          
          <label class="md-nav__link" for="__nav_4_3_7" id="__nav_4_3_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Strategies
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_7">
            <span class="md-nav__icon md-icon"></span>
            Strategies
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/strategies/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/strategies/examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Dashboard
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Dashboard
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    App
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    App
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.CHARTS_DIR" class="md-nav__link">
    <span class="md-ellipsis">
      CHARTS_DIR
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.app" class="md-nav__link">
    <span class="md-ellipsis">
      app
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._running_jobs" class="md-nav__link">
    <span class="md-ellipsis">
      _running_jobs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.RTYPE_TO_BAR_PERIOD" class="md-nav__link">
    <span class="md-ellipsis">
      RTYPE_TO_BAR_PERIOD
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.BAR_PERIOD_TO_RTYPE" class="md-nav__link">
    <span class="md-ellipsis">
      BAR_PERIOD_TO_RTYPE
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.BAR_PERIOD_ENUM_TO_NAME" class="md-nav__link">
    <span class="md-ellipsis">
      BAR_PERIOD_ENUM_TO_NAME
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.BASE_STYLE" class="md-nav__link">
    <span class="md-ellipsis">
      BASE_STYLE
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.SIDEBAR_HTML" class="md-nav__link">
    <span class="md-ellipsis">
      SIDEBAR_HTML
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.RUNS_STYLE" class="md-nav__link">
    <span class="md-ellipsis">
      RUNS_STYLE
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.RUNS_SCRIPT" class="md-nav__link">
    <span class="md-ellipsis">
      RUNS_SCRIPT
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.RUN_DETAIL_STYLE" class="md-nav__link">
    <span class="md-ellipsis">
      RUN_DETAIL_STYLE
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.RUN_DETAIL_SCRIPT" class="md-nav__link">
    <span class="md-ellipsis">
      RUN_DETAIL_SCRIPT
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._OHLCV_COLUMNS" class="md-nav__link">
    <span class="md-ellipsis">
      _OHLCV_COLUMNS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._MAIN_COLORS" class="md-nav__link">
    <span class="md-ellipsis">
      _MAIN_COLORS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._SUBPLOT_COLORS" class="md-nav__link">
    <span class="md-ellipsis">
      _SUBPLOT_COLORS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.BACKTEST_FORM_STYLE" class="md-nav__link">
    <span class="md-ellipsis">
      BACKTEST_FORM_STYLE
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.BACKTEST_FORM_SCRIPT" class="md-nav__link">
    <span class="md-ellipsis">
      BACKTEST_FORM_SCRIPT
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.SECMASTER_STYLE" class="md-nav__link">
    <span class="md-ellipsis">
      SECMASTER_STYLE
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.SECMASTER_SCRIPT" class="md-nav__link">
    <span class="md-ellipsis">
      SECMASTER_SCRIPT
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.PresetRequest" class="md-nav__link">
    <span class="md-ellipsis">
      PresetRequest
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.BacktestRequest" class="md-nav__link">
    <span class="md-ellipsis">
      BacktestRequest
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._normalize_bar_period" class="md-nav__link">
    <span class="md-ellipsis">
      _normalize_bar_period
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._get_secmaster_path" class="md-nav__link">
    <span class="md-ellipsis">
      _get_secmaster_path
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._get_available_symbols" class="md-nav__link">
    <span class="md-ellipsis">
      _get_available_symbols
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._get_symbols_with_coverage" class="md-nav__link">
    <span class="md-ellipsis">
      _get_symbols_with_coverage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._get_available_bar_periods" class="md-nav__link">
    <span class="md-ellipsis">
      _get_available_bar_periods
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.index" class="md-nav__link">
    <span class="md-ellipsis">
      index
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.run_detail_page" class="md-nav__link">
    <span class="md-ellipsis">
      run_detail_page
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._get_runs_db_path" class="md-nav__link">
    <span class="md-ellipsis">
      _get_runs_db_path
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._get_recent_runs" class="md-nav__link">
    <span class="md-ellipsis">
      _get_recent_runs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.list_runs" class="md-nav__link">
    <span class="md-ellipsis">
      list_runs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._get_run_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      _get_run_by_id
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.get_run" class="md-nav__link">
    <span class="md-ellipsis">
      get_run
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.delete_run" class="md-nav__link">
    <span class="md-ellipsis">
      delete_run
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._normalize_side" class="md-nav__link">
    <span class="md-ellipsis">
      _normalize_side
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._extract_positions" class="md-nav__link">
    <span class="md-ellipsis">
      _extract_positions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.get_run_positions" class="md-nav__link">
    <span class="md-ellipsis">
      get_run_positions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._load_bars_for_chart" class="md-nav__link">
    <span class="md-ellipsis">
      _load_bars_for_chart
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._load_fills_for_chart" class="md-nav__link">
    <span class="md-ellipsis">
      _load_fills_for_chart
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._parse_indicator_column" class="md-nav__link">
    <span class="md-ellipsis">
      _parse_indicator_column
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._get_indicator_columns" class="md-nav__link">
    <span class="md-ellipsis">
      _get_indicator_columns
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._main_indicator_columns" class="md-nav__link">
    <span class="md-ellipsis">
      _main_indicator_columns
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._subplot_groups_from_data" class="md-nav__link">
    <span class="md-ellipsis">
      _subplot_groups_from_data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._extract_positions_for_chart" class="md-nav__link">
    <span class="md-ellipsis">
      _extract_positions_for_chart
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._format_indicator_name" class="md-nav__link">
    <span class="md-ellipsis">
      _format_indicator_name
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._generate_position_chart" class="md-nav__link">
    <span class="md-ellipsis">
      _generate_position_chart
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._plot_pnl_tracking" class="md-nav__link">
    <span class="md-ellipsis">
      _plot_pnl_tracking
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._plot_price_data" class="md-nav__link">
    <span class="md-ellipsis">
      _plot_price_data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._plot_main_indicators" class="md-nav__link">
    <span class="md-ellipsis">
      _plot_main_indicators
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._plot_trade_markers" class="md-nav__link">
    <span class="md-ellipsis">
      _plot_trade_markers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.get_position_chart" class="md-nav__link">
    <span class="md-ellipsis">
      get_position_chart
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.health" class="md-nav__link">
    <span class="md-ellipsis">
      health
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.list_strategies" class="md-nav__link">
    <span class="md-ellipsis">
      list_strategies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.list_brokers" class="md-nav__link">
    <span class="md-ellipsis">
      list_brokers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.list_datafeeds" class="md-nav__link">
    <span class="md-ellipsis">
      list_datafeeds
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.get_strategy" class="md-nav__link">
    <span class="md-ellipsis">
      get_strategy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.get_broker" class="md-nav__link">
    <span class="md-ellipsis">
      get_broker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.get_datafeed" class="md-nav__link">
    <span class="md-ellipsis">
      get_datafeed
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.get_symbols" class="md-nav__link">
    <span class="md-ellipsis">
      get_symbols
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.get_symbols_coverage" class="md-nav__link">
    <span class="md-ellipsis">
      get_symbols_coverage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.get_bar_periods" class="md-nav__link">
    <span class="md-ellipsis">
      get_bar_periods
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.list_presets" class="md-nav__link">
    <span class="md-ellipsis">
      list_presets
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.get_preset" class="md-nav__link">
    <span class="md-ellipsis">
      get_preset
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.create_preset" class="md-nav__link">
    <span class="md-ellipsis">
      create_preset
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.update_preset" class="md-nav__link">
    <span class="md-ellipsis">
      update_preset
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.delete_preset" class="md-nav__link">
    <span class="md-ellipsis">
      delete_preset
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._run_backtest" class="md-nav__link">
    <span class="md-ellipsis">
      _run_backtest
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._deserialize_params" class="md-nav__link">
    <span class="md-ellipsis">
      _deserialize_params
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.run_backtest" class="md-nav__link">
    <span class="md-ellipsis">
      run_backtest
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.backtest_status" class="md-nav__link">
    <span class="md-ellipsis">
      backtest_status
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.backtest_form" class="md-nav__link">
    <span class="md-ellipsis">
      backtest_form
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._get_secmaster_summary" class="md-nav__link">
    <span class="md-ellipsis">
      _get_secmaster_summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._search_symbol" class="md-nav__link">
    <span class="md-ellipsis">
      _search_symbol
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.get_secmaster_summary" class="md-nav__link">
    <span class="md-ellipsis">
      get_secmaster_summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.search_secmaster" class="md-nav__link">
    <span class="md-ellipsis">
      search_secmaster
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.secmaster_page" class="md-nav__link">
    <span class="md-ellipsis">
      secmaster_page
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../registry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Registry
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Orchestrator
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Orchestrator
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../orchestrator/orchestrator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Orchestrator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../orchestrator/recorder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Recorder
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Secmaster
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            Secmaster
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../secmaster/schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Schema
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../secmaster/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.CHARTS_DIR" class="md-nav__link">
    <span class="md-ellipsis">
      CHARTS_DIR
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.app" class="md-nav__link">
    <span class="md-ellipsis">
      app
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._running_jobs" class="md-nav__link">
    <span class="md-ellipsis">
      _running_jobs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.RTYPE_TO_BAR_PERIOD" class="md-nav__link">
    <span class="md-ellipsis">
      RTYPE_TO_BAR_PERIOD
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.BAR_PERIOD_TO_RTYPE" class="md-nav__link">
    <span class="md-ellipsis">
      BAR_PERIOD_TO_RTYPE
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.BAR_PERIOD_ENUM_TO_NAME" class="md-nav__link">
    <span class="md-ellipsis">
      BAR_PERIOD_ENUM_TO_NAME
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.BASE_STYLE" class="md-nav__link">
    <span class="md-ellipsis">
      BASE_STYLE
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.SIDEBAR_HTML" class="md-nav__link">
    <span class="md-ellipsis">
      SIDEBAR_HTML
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.RUNS_STYLE" class="md-nav__link">
    <span class="md-ellipsis">
      RUNS_STYLE
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.RUNS_SCRIPT" class="md-nav__link">
    <span class="md-ellipsis">
      RUNS_SCRIPT
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.RUN_DETAIL_STYLE" class="md-nav__link">
    <span class="md-ellipsis">
      RUN_DETAIL_STYLE
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.RUN_DETAIL_SCRIPT" class="md-nav__link">
    <span class="md-ellipsis">
      RUN_DETAIL_SCRIPT
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._OHLCV_COLUMNS" class="md-nav__link">
    <span class="md-ellipsis">
      _OHLCV_COLUMNS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._MAIN_COLORS" class="md-nav__link">
    <span class="md-ellipsis">
      _MAIN_COLORS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._SUBPLOT_COLORS" class="md-nav__link">
    <span class="md-ellipsis">
      _SUBPLOT_COLORS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.BACKTEST_FORM_STYLE" class="md-nav__link">
    <span class="md-ellipsis">
      BACKTEST_FORM_STYLE
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.BACKTEST_FORM_SCRIPT" class="md-nav__link">
    <span class="md-ellipsis">
      BACKTEST_FORM_SCRIPT
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.SECMASTER_STYLE" class="md-nav__link">
    <span class="md-ellipsis">
      SECMASTER_STYLE
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.SECMASTER_SCRIPT" class="md-nav__link">
    <span class="md-ellipsis">
      SECMASTER_SCRIPT
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.PresetRequest" class="md-nav__link">
    <span class="md-ellipsis">
      PresetRequest
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.BacktestRequest" class="md-nav__link">
    <span class="md-ellipsis">
      BacktestRequest
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._normalize_bar_period" class="md-nav__link">
    <span class="md-ellipsis">
      _normalize_bar_period
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._get_secmaster_path" class="md-nav__link">
    <span class="md-ellipsis">
      _get_secmaster_path
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._get_available_symbols" class="md-nav__link">
    <span class="md-ellipsis">
      _get_available_symbols
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._get_symbols_with_coverage" class="md-nav__link">
    <span class="md-ellipsis">
      _get_symbols_with_coverage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._get_available_bar_periods" class="md-nav__link">
    <span class="md-ellipsis">
      _get_available_bar_periods
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.index" class="md-nav__link">
    <span class="md-ellipsis">
      index
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.run_detail_page" class="md-nav__link">
    <span class="md-ellipsis">
      run_detail_page
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._get_runs_db_path" class="md-nav__link">
    <span class="md-ellipsis">
      _get_runs_db_path
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._get_recent_runs" class="md-nav__link">
    <span class="md-ellipsis">
      _get_recent_runs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.list_runs" class="md-nav__link">
    <span class="md-ellipsis">
      list_runs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._get_run_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      _get_run_by_id
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.get_run" class="md-nav__link">
    <span class="md-ellipsis">
      get_run
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.delete_run" class="md-nav__link">
    <span class="md-ellipsis">
      delete_run
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._normalize_side" class="md-nav__link">
    <span class="md-ellipsis">
      _normalize_side
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._extract_positions" class="md-nav__link">
    <span class="md-ellipsis">
      _extract_positions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.get_run_positions" class="md-nav__link">
    <span class="md-ellipsis">
      get_run_positions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._load_bars_for_chart" class="md-nav__link">
    <span class="md-ellipsis">
      _load_bars_for_chart
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._load_fills_for_chart" class="md-nav__link">
    <span class="md-ellipsis">
      _load_fills_for_chart
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._parse_indicator_column" class="md-nav__link">
    <span class="md-ellipsis">
      _parse_indicator_column
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._get_indicator_columns" class="md-nav__link">
    <span class="md-ellipsis">
      _get_indicator_columns
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._main_indicator_columns" class="md-nav__link">
    <span class="md-ellipsis">
      _main_indicator_columns
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._subplot_groups_from_data" class="md-nav__link">
    <span class="md-ellipsis">
      _subplot_groups_from_data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._extract_positions_for_chart" class="md-nav__link">
    <span class="md-ellipsis">
      _extract_positions_for_chart
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._format_indicator_name" class="md-nav__link">
    <span class="md-ellipsis">
      _format_indicator_name
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._generate_position_chart" class="md-nav__link">
    <span class="md-ellipsis">
      _generate_position_chart
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._plot_pnl_tracking" class="md-nav__link">
    <span class="md-ellipsis">
      _plot_pnl_tracking
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._plot_price_data" class="md-nav__link">
    <span class="md-ellipsis">
      _plot_price_data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._plot_main_indicators" class="md-nav__link">
    <span class="md-ellipsis">
      _plot_main_indicators
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._plot_trade_markers" class="md-nav__link">
    <span class="md-ellipsis">
      _plot_trade_markers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.get_position_chart" class="md-nav__link">
    <span class="md-ellipsis">
      get_position_chart
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.health" class="md-nav__link">
    <span class="md-ellipsis">
      health
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.list_strategies" class="md-nav__link">
    <span class="md-ellipsis">
      list_strategies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.list_brokers" class="md-nav__link">
    <span class="md-ellipsis">
      list_brokers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.list_datafeeds" class="md-nav__link">
    <span class="md-ellipsis">
      list_datafeeds
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.get_strategy" class="md-nav__link">
    <span class="md-ellipsis">
      get_strategy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.get_broker" class="md-nav__link">
    <span class="md-ellipsis">
      get_broker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.get_datafeed" class="md-nav__link">
    <span class="md-ellipsis">
      get_datafeed
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.get_symbols" class="md-nav__link">
    <span class="md-ellipsis">
      get_symbols
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.get_symbols_coverage" class="md-nav__link">
    <span class="md-ellipsis">
      get_symbols_coverage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.get_bar_periods" class="md-nav__link">
    <span class="md-ellipsis">
      get_bar_periods
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.list_presets" class="md-nav__link">
    <span class="md-ellipsis">
      list_presets
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.get_preset" class="md-nav__link">
    <span class="md-ellipsis">
      get_preset
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.create_preset" class="md-nav__link">
    <span class="md-ellipsis">
      create_preset
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.update_preset" class="md-nav__link">
    <span class="md-ellipsis">
      update_preset
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.delete_preset" class="md-nav__link">
    <span class="md-ellipsis">
      delete_preset
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._run_backtest" class="md-nav__link">
    <span class="md-ellipsis">
      _run_backtest
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._deserialize_params" class="md-nav__link">
    <span class="md-ellipsis">
      _deserialize_params
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.run_backtest" class="md-nav__link">
    <span class="md-ellipsis">
      run_backtest
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.backtest_status" class="md-nav__link">
    <span class="md-ellipsis">
      backtest_status
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.backtest_form" class="md-nav__link">
    <span class="md-ellipsis">
      backtest_form
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._get_secmaster_summary" class="md-nav__link">
    <span class="md-ellipsis">
      _get_secmaster_summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app._search_symbol" class="md-nav__link">
    <span class="md-ellipsis">
      _search_symbol
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.get_secmaster_summary" class="md-nav__link">
    <span class="md-ellipsis">
      get_secmaster_summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.search_secmaster" class="md-nav__link">
    <span class="md-ellipsis">
      search_secmaster
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.app.secmaster_page" class="md-nav__link">
    <span class="md-ellipsis">
      secmaster_page
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="app">App</h1>


<div class="doc doc-object doc-module">




    <div class="doc doc-contents first">









  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.app.CHARTS_DIR" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">CHARTS_DIR</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CHARTS_DIR&#39;</span><span class="p">,</span> <span class="s1">&#39;charts&#39;</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.app.app" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;OneSecondTrader Dashboard&#39;</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.app._running_jobs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_running_jobs</span> <span class="o">=</span> <span class="p">{}</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.app.RTYPE_TO_BAR_PERIOD" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">RTYPE_TO_BAR_PERIOD</span> <span class="o">=</span> <span class="p">{</span><span class="mi">32</span><span class="p">:</span> <span class="s1">&#39;SECOND&#39;</span><span class="p">,</span> <span class="mi">33</span><span class="p">:</span> <span class="s1">&#39;MINUTE&#39;</span><span class="p">,</span> <span class="mi">34</span><span class="p">:</span> <span class="s1">&#39;HOUR&#39;</span><span class="p">,</span> <span class="mi">35</span><span class="p">:</span> <span class="s1">&#39;DAY&#39;</span><span class="p">}</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.app.BAR_PERIOD_TO_RTYPE" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">BAR_PERIOD_TO_RTYPE</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;SECOND&#39;</span><span class="p">:</span> <span class="mi">32</span><span class="p">,</span> <span class="s1">&#39;MINUTE&#39;</span><span class="p">:</span> <span class="mi">33</span><span class="p">,</span> <span class="s1">&#39;HOUR&#39;</span><span class="p">:</span> <span class="mi">34</span><span class="p">,</span> <span class="s1">&#39;DAY&#39;</span><span class="p">:</span> <span class="mi">35</span><span class="p">}</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.app.BAR_PERIOD_ENUM_TO_NAME" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">BAR_PERIOD_ENUM_TO_NAME</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;SECOND&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;MINUTE&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="s1">&#39;HOUR&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="s1">&#39;DAY&#39;</span><span class="p">}</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.app.BASE_STYLE" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">BASE_STYLE</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">* { margin: 0; padding: 0; box-sizing: border-box; }</span><span class="se">\n</span><span class="s1">body {</span><span class="se">\n</span><span class="s1">    font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, sans-serif;</span><span class="se">\n</span><span class="s1">    background: #0d1117;</span><span class="se">\n</span><span class="s1">    color: #e6edf3;</span><span class="se">\n</span><span class="s1">    min-height: 100vh;</span><span class="se">\n</span><span class="s1">    display: flex;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.sidebar {</span><span class="se">\n</span><span class="s1">    width: 220px;</span><span class="se">\n</span><span class="s1">    background: #161b22;</span><span class="se">\n</span><span class="s1">    border-right: 1px solid #30363d;</span><span class="se">\n</span><span class="s1">    min-height: 100vh;</span><span class="se">\n</span><span class="s1">    position: fixed;</span><span class="se">\n</span><span class="s1">    left: 0;</span><span class="se">\n</span><span class="s1">    top: 0;</span><span class="se">\n</span><span class="s1">    display: flex;</span><span class="se">\n</span><span class="s1">    flex-direction: column;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.sidebar-header {</span><span class="se">\n</span><span class="s1">    padding: 20px 16px;</span><span class="se">\n</span><span class="s1">    border-bottom: 1px solid #30363d;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.sidebar-header h1 {</span><span class="se">\n</span><span class="s1">    font-size: 16px;</span><span class="se">\n</span><span class="s1">    font-weight: 600;</span><span class="se">\n</span><span class="s1">    color: #e6edf3;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.sidebar-nav {</span><span class="se">\n</span><span class="s1">    padding: 12px 8px;</span><span class="se">\n</span><span class="s1">    flex: 1;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.sidebar-nav a {</span><span class="se">\n</span><span class="s1">    display: flex;</span><span class="se">\n</span><span class="s1">    align-items: center;</span><span class="se">\n</span><span class="s1">    gap: 10px;</span><span class="se">\n</span><span class="s1">    padding: 10px 12px;</span><span class="se">\n</span><span class="s1">    color: #8b949e;</span><span class="se">\n</span><span class="s1">    text-decoration: none;</span><span class="se">\n</span><span class="s1">    font-size: 14px;</span><span class="se">\n</span><span class="s1">    border-radius: 6px;</span><span class="se">\n</span><span class="s1">    margin-bottom: 2px;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.sidebar-nav a:hover {</span><span class="se">\n</span><span class="s1">    background: #21262d;</span><span class="se">\n</span><span class="s1">    color: #e6edf3;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.sidebar-nav a.active {</span><span class="se">\n</span><span class="s1">    background: #21262d;</span><span class="se">\n</span><span class="s1">    color: #e6edf3;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.sidebar-nav svg {</span><span class="se">\n</span><span class="s1">    width: 16px;</span><span class="se">\n</span><span class="s1">    height: 16px;</span><span class="se">\n</span><span class="s1">    flex-shrink: 0;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.main-content {</span><span class="se">\n</span><span class="s1">    margin-left: 220px;</span><span class="se">\n</span><span class="s1">    flex: 1;</span><span class="se">\n</span><span class="s1">    min-height: 100vh;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.container {</span><span class="se">\n</span><span class="s1">    max-width: 1200px;</span><span class="se">\n</span><span class="s1">    margin: 0 auto;</span><span class="se">\n</span><span class="s1">    padding: 32px 24px;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.card {</span><span class="se">\n</span><span class="s1">    background: #161b22;</span><span class="se">\n</span><span class="s1">    border: 1px solid #30363d;</span><span class="se">\n</span><span class="s1">    border-radius: 8px;</span><span class="se">\n</span><span class="s1">    padding: 24px;</span><span class="se">\n</span><span class="s1">    margin-bottom: 16px;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.card h2 {</span><span class="se">\n</span><span class="s1">    font-size: 16px;</span><span class="se">\n</span><span class="s1">    font-weight: 600;</span><span class="se">\n</span><span class="s1">    margin-bottom: 16px;</span><span class="se">\n</span><span class="s1">    color: #e6edf3;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.empty-state {</span><span class="se">\n</span><span class="s1">    text-align: center;</span><span class="se">\n</span><span class="s1">    padding: 48px;</span><span class="se">\n</span><span class="s1">    color: #8b949e;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.empty-state p { margin-top: 8px; font-size: 14px; }</span><span class="se">\n</span><span class="s1">.badge {</span><span class="se">\n</span><span class="s1">    display: inline-block;</span><span class="se">\n</span><span class="s1">    padding: 4px 10px;</span><span class="se">\n</span><span class="s1">    border-radius: 12px;</span><span class="se">\n</span><span class="s1">    font-size: 12px;</span><span class="se">\n</span><span class="s1">    font-weight: 500;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.badge-green { background: #238636; color: #fff; }</span><span class="se">\n</span><span class="s1">.badge-yellow { background: #9e6a03; color: #fff; }</span><span class="se">\n</span><span class="s1">.badge-red { background: #da3633; color: #fff; }</span><span class="se">\n</span><span class="s1">&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.app.SIDEBAR_HTML" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">SIDEBAR_HTML</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&lt;aside class=&quot;sidebar&quot;&gt;</span><span class="se">\n</span><span class="s1">    &lt;div class=&quot;sidebar-header&quot;&gt;</span><span class="se">\n</span><span class="s1">        &lt;h1&gt;OneSecondTrader&lt;/h1&gt;</span><span class="se">\n</span><span class="s1">    &lt;/div&gt;</span><span class="se">\n</span><span class="s1">    &lt;nav class=&quot;sidebar-nav&quot;&gt;</span><span class="se">\n</span><span class="s1">        &lt;a href=&quot;/&quot; class=&quot;</span><span class="si">{runs_active}</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;svg fill=&quot;none&quot; stroke=&quot;currentColor&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot; stroke-width=&quot;2&quot; d=&quot;M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;</span><span class="se">\n</span><span class="s1">            Runs</span><span class="se">\n</span><span class="s1">        &lt;/a&gt;</span><span class="se">\n</span><span class="s1">        &lt;a href=&quot;/backtest&quot; class=&quot;</span><span class="si">{backtest_active}</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;svg fill=&quot;none&quot; stroke=&quot;currentColor&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot; stroke-width=&quot;2&quot; d=&quot;M13 10V3L4 14h7v7l9-11h-7z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;</span><span class="se">\n</span><span class="s1">            Backtest</span><span class="se">\n</span><span class="s1">        &lt;/a&gt;</span><span class="se">\n</span><span class="s1">        &lt;a href=&quot;/secmaster&quot; class=&quot;</span><span class="si">{secmaster_active}</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;svg fill=&quot;none&quot; stroke=&quot;currentColor&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot; stroke-width=&quot;2&quot; d=&quot;M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4&quot;&gt;&lt;/path&gt;&lt;/svg&gt;</span><span class="se">\n</span><span class="s1">            Securities Master</span><span class="se">\n</span><span class="s1">        &lt;/a&gt;</span><span class="se">\n</span><span class="s1">    &lt;/nav&gt;</span><span class="se">\n</span><span class="s1">&lt;/aside&gt;</span><span class="se">\n</span><span class="s1">&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.app.RUNS_STYLE" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">RUNS_STYLE</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">.runs-table { width: 100%; border-collapse: collapse; }</span><span class="se">\n</span><span class="s1">.runs-table th, .runs-table td { padding: 12px; text-align: left; border-bottom: 1px solid #30363d; }</span><span class="se">\n</span><span class="s1">.runs-table th { font-size: 12px; color: #8b949e; text-transform: uppercase; font-weight: 500; }</span><span class="se">\n</span><span class="s1">.runs-table tbody tr { cursor: pointer; }</span><span class="se">\n</span><span class="s1">.runs-table tbody tr:hover { background: #21262d; }</span><span class="se">\n</span><span class="s1">.runs-table .symbols { font-family: monospace; font-size: 12px; color: #8b949e; }</span><span class="se">\n</span><span class="s1">.runs-table .date-range { font-size: 12px; color: #8b949e; }</span><span class="se">\n</span><span class="s1">.runs-table .delete-btn { background: none; border: none; cursor: pointer; padding: 4px 8px; color: #8b949e; font-size: 16px; border-radius: 4px; }</span><span class="se">\n</span><span class="s1">.runs-table .delete-btn:hover { background: #f8514926; color: #f85149; }</span><span class="se">\n</span><span class="s1">.runs-table .actions { text-align: center; width: 50px; }</span><span class="se">\n</span><span class="s1">&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.app.RUNS_SCRIPT" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">RUNS_SCRIPT</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">async function deleteRun(runId, event) {</span><span class="se">\n</span><span class="s1">    event.stopPropagation();</span><span class="se">\n</span><span class="s1">    if (!confirm(</span><span class="se">\&#39;</span><span class="s1">Delete this run? This cannot be undone.</span><span class="se">\&#39;</span><span class="s1">)) return;</span><span class="se">\n</span><span class="s1">    const res = await fetch(`/api/run/$</span><span class="si">{runId}</span><span class="s1">`, { method: </span><span class="se">\&#39;</span><span class="s1">DELETE</span><span class="se">\&#39;</span><span class="s1"> });</span><span class="se">\n</span><span class="s1">    if (res.ok) loadRuns();</span><span class="se">\n</span><span class="s1">    else alert(</span><span class="se">\&#39;</span><span class="s1">Failed to delete run</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">async function loadRuns() {</span><span class="se">\n</span><span class="s1">    const container = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">runs-content</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const res = await fetch(</span><span class="se">\&#39;</span><span class="s1">/api/runs</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const data = await res.json();</span><span class="se">\n</span><span class="s1">    if (!data.runs || data.runs.length === 0) {</span><span class="se">\n</span><span class="s1">        container.innerHTML = `</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;empty-state&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;p&gt;No runs yet.&lt;/p&gt;</span><span class="se">\n</span><span class="s1">                &lt;p&gt;Run a strategy with RunRecorder to see results here.&lt;/p&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">        `;</span><span class="se">\n</span><span class="s1">        return;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    const rows = data.runs.map(r =&gt; {</span><span class="se">\n</span><span class="s1">        const statusClass = r.status === </span><span class="se">\&#39;</span><span class="s1">completed</span><span class="se">\&#39;</span><span class="s1"> ? </span><span class="se">\&#39;</span><span class="s1">badge-green</span><span class="se">\&#39;</span><span class="s1"> : r.status === </span><span class="se">\&#39;</span><span class="s1">running</span><span class="se">\&#39;</span><span class="s1"> ? </span><span class="se">\&#39;</span><span class="s1">badge-yellow</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;</span><span class="s1">badge-red</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        const createdAt = r.created_at ? r.created_at.split(</span><span class="se">\&#39;</span><span class="s1">T</span><span class="se">\&#39;</span><span class="s1">)[0] + </span><span class="se">\&#39;</span><span class="s1"> </span><span class="se">\&#39;</span><span class="s1"> + r.created_at.split(</span><span class="se">\&#39;</span><span class="s1">T</span><span class="se">\&#39;</span><span class="s1">)[1].split(</span><span class="se">\&#39;</span><span class="s1">.</span><span class="se">\&#39;</span><span class="s1">)[0] : </span><span class="se">\&#39;</span><span class="s1">-</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        const dateRange = r.first_bar &amp;&amp; r.last_bar</span><span class="se">\n</span><span class="s1">            ? r.first_bar.split(</span><span class="se">\&#39;</span><span class="s1">T</span><span class="se">\&#39;</span><span class="s1">)[0] + </span><span class="se">\&#39;</span><span class="s1"> → </span><span class="se">\&#39;</span><span class="s1"> + r.last_bar.split(</span><span class="se">\&#39;</span><span class="s1">T</span><span class="se">\&#39;</span><span class="s1">)[0]</span><span class="se">\n</span><span class="s1">            : </span><span class="se">\&#39;</span><span class="s1">-</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        return `&lt;tr onclick=&quot;window.location=</span><span class="se">\&#39;</span><span class="s1">/run/$</span><span class="si">{r.run_id}</span><span class="se">\&#39;</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;td&gt;$</span><span class="si">{createdAt}</span><span class="s1">&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td&gt;$</span><span class="si">{r.strategy}</span><span class="s1">&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td class=&quot;symbols&quot;&gt;$</span><span class="si">{r.symbols.length}</span><span class="s1">&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td&gt;${r.bar_period || </span><span class="se">\&#39;</span><span class="s1">-</span><span class="se">\&#39;</span><span class="s1">}&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td class=&quot;date-range&quot;&gt;$</span><span class="si">{dateRange}</span><span class="s1">&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td&gt;&lt;span class=&quot;badge $</span><span class="si">{statusClass}</span><span class="s1">&quot;&gt;$</span><span class="si">{r.status}</span><span class="s1">&lt;/span&gt;&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td class=&quot;actions&quot;&gt;&lt;button class=&quot;delete-btn&quot; onclick=&quot;deleteRun(</span><span class="se">\&#39;</span><span class="s1">$</span><span class="si">{r.run_id}</span><span class="se">\&#39;</span><span class="s1">, event)&quot; title=&quot;Delete run&quot;&gt;🗑&lt;/button&gt;&lt;/td&gt;</span><span class="se">\n</span><span class="s1">        &lt;/tr&gt;`;</span><span class="se">\n</span><span class="s1">    }).join(</span><span class="se">\&#39;\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    container.innerHTML = `</span><span class="se">\n</span><span class="s1">        &lt;table class=&quot;runs-table&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;thead&gt;&lt;tr&gt;&lt;th&gt;Created&lt;/th&gt;&lt;th&gt;Strategy&lt;/th&gt;&lt;th&gt;Symbols&lt;/th&gt;&lt;th&gt;Bar Period&lt;/th&gt;&lt;th&gt;Date Range&lt;/th&gt;&lt;th&gt;Status&lt;/th&gt;&lt;th&gt;&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;</span><span class="se">\n</span><span class="s1">            &lt;tbody&gt;$</span><span class="si">{rows}</span><span class="s1">&lt;/tbody&gt;</span><span class="se">\n</span><span class="s1">        &lt;/table&gt;</span><span class="se">\n</span><span class="s1">    `;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">document.addEventListener(</span><span class="se">\&#39;</span><span class="s1">DOMContentLoaded</span><span class="se">\&#39;</span><span class="s1">, loadRuns);</span><span class="se">\n</span><span class="s1">&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.app.RUN_DETAIL_STYLE" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">RUN_DETAIL_STYLE</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">.run-header { margin-bottom: 24px; }</span><span class="se">\n</span><span class="s1">.run-header h2 { margin-bottom: 8px; }</span><span class="se">\n</span><span class="s1">.run-meta { display: flex; gap: 24px; flex-wrap: wrap; color: #8b949e; font-size: 14px; }</span><span class="se">\n</span><span class="s1">.run-meta span { display: flex; align-items: center; gap: 6px; }</span><span class="se">\n</span><span class="s1">.stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 16px; margin-bottom: 24px; }</span><span class="se">\n</span><span class="s1">.stat-card { background: #161b22; border: 1px solid #30363d; border-radius: 6px; padding: 16px; }</span><span class="se">\n</span><span class="s1">.stat-card .label { font-size: 12px; color: #8b949e; margin-bottom: 4px; }</span><span class="se">\n</span><span class="s1">.stat-card .value { font-size: 24px; font-weight: 600; }</span><span class="se">\n</span><span class="s1">.back-link { color: #58a6ff; text-decoration: none; font-size: 14px; display: inline-block; margin-bottom: 16px; }</span><span class="se">\n</span><span class="s1">.back-link:hover { text-decoration: underline; }</span><span class="se">\n</span><span class="s1">.positions-table { width: 100%; border-collapse: collapse; margin-top: 16px; font-size: 14px; }</span><span class="se">\n</span><span class="s1">.positions-table th { text-align: left; padding: 12px 8px; border-bottom: 1px solid #30363d; color: #8b949e; font-weight: 500; }</span><span class="se">\n</span><span class="s1">.positions-table td { padding: 10px 8px; border-bottom: 1px solid #21262d; }</span><span class="se">\n</span><span class="s1">.positions-table tr:hover { background: #161b22; }</span><span class="se">\n</span><span class="s1">.pnl-positive { color: #3fb950; }</span><span class="se">\n</span><span class="s1">.pnl-negative { color: #f85149; }</span><span class="se">\n</span><span class="s1">.side-long { color: #3fb950; }</span><span class="se">\n</span><span class="s1">.side-short { color: #f85149; }</span><span class="se">\n</span><span class="s1">.positions-summary { display: flex; gap: 24px; margin-bottom: 16px; padding: 12px; background: #161b22; border-radius: 6px; }</span><span class="se">\n</span><span class="s1">.positions-summary .item { display: flex; flex-direction: column; }</span><span class="se">\n</span><span class="s1">.positions-summary .item-label { font-size: 11px; color: #8b949e; text-transform: uppercase; }</span><span class="se">\n</span><span class="s1">.positions-summary .item-value { font-size: 18px; font-weight: 600; }</span><span class="se">\n</span><span class="s1">.positions-filter { display: flex; align-items: center; gap: 12px; margin-bottom: 16px; }</span><span class="se">\n</span><span class="s1">.positions-filter select { background: #21262d; border: 1px solid #30363d; border-radius: 6px; padding: 8px 12px; color: #c9d1d9; font-size: 14px; min-width: 150px; }</span><span class="se">\n</span><span class="s1">.positions-filter select:focus { outline: none; border-color: #58a6ff; }</span><span class="se">\n</span><span class="s1">.positions-filter label { color: #8b949e; font-size: 14px; }</span><span class="se">\n</span><span class="s1">.position-row { cursor: pointer; }</span><span class="se">\n</span><span class="s1">.position-row:hover { background: #21262d !important; }</span><span class="se">\n</span><span class="s1">.chart-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; justify-content: center; align-items: center; }</span><span class="se">\n</span><span class="s1">.chart-modal-content { background: #161b22; border: 1px solid #30363d; border-radius: 8px; max-width: 95%; max-height: 95%; overflow: auto; }</span><span class="se">\n</span><span class="s1">.chart-modal-header { display: flex; justify-content: space-between; align-items: center; padding: 16px 20px; border-bottom: 1px solid #30363d; }</span><span class="se">\n</span><span class="s1">.chart-modal-header h3 { margin: 0; font-size: 16px; }</span><span class="se">\n</span><span class="s1">.chart-modal-close { background: none; border: none; color: #8b949e; font-size: 24px; cursor: pointer; padding: 0; line-height: 1; }</span><span class="se">\n</span><span class="s1">.chart-modal-close:hover { color: #e6edf3; }</span><span class="se">\n</span><span class="s1">.chart-modal-body { padding: 20px; }</span><span class="se">\n</span><span class="s1">&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.app.RUN_DETAIL_SCRIPT" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">RUN_DETAIL_SCRIPT</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">let allPositions = [];</span><span class="se">\n</span><span class="s1">function formatTime(ts) {</span><span class="se">\n</span><span class="s1">    if (!ts) return </span><span class="se">\&#39;</span><span class="s1">-</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    return ts.split(</span><span class="se">\&#39;</span><span class="s1">T</span><span class="se">\&#39;</span><span class="s1">)[0] + </span><span class="se">\&#39;</span><span class="s1"> </span><span class="se">\&#39;</span><span class="s1"> + ts.split(</span><span class="se">\&#39;</span><span class="s1">T</span><span class="se">\&#39;</span><span class="s1">)[1].split(</span><span class="se">\&#39;</span><span class="s1">.</span><span class="se">\&#39;</span><span class="s1">)[0];</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">function formatPnl(pnl) {</span><span class="se">\n</span><span class="s1">    const cls = pnl &gt;= 0 ? </span><span class="se">\&#39;</span><span class="s1">pnl-positive</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;</span><span class="s1">pnl-negative</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    const sign = pnl &gt;= 0 ? </span><span class="se">\&#39;</span><span class="s1">+</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    return `&lt;span class=&quot;$</span><span class="si">{cls}</span><span class="s1">&quot;&gt;$</span><span class="si">{sign}</span><span class="s1">$${pnl.toFixed(2)}&lt;/span&gt;`;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">function computeSummary(positions) {</span><span class="se">\n</span><span class="s1">    const totalPnl = positions.reduce((sum, p) =&gt; sum + p.pnl, 0);</span><span class="se">\n</span><span class="s1">    const winners = positions.filter(p =&gt; p.pnl &gt; 0).length;</span><span class="se">\n</span><span class="s1">    const losers = positions.filter(p =&gt; p.pnl &lt; 0).length;</span><span class="se">\n</span><span class="s1">    const winRate = positions.length &gt; 0 ? winners / positions.length : 0;</span><span class="se">\n</span><span class="s1">    return { total_positions: positions.length, total_pnl: totalPnl, winners, losers, win_rate: winRate };</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">function renderPositions(positions, selectedSymbol) {</span><span class="se">\n</span><span class="s1">    const filtered = selectedSymbol ? positions.filter(p =&gt; p.symbol === selectedSymbol) : positions;</span><span class="se">\n</span><span class="s1">    const s = computeSummary(filtered);</span><span class="se">\n</span><span class="s1">    const winRate = s.win_rate ? (s.win_rate * 100).toFixed(1) + </span><span class="se">\&#39;</span><span class="s1">%</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;</span><span class="s1">-</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    const summaryPnlClass = s.total_pnl &gt;= 0 ? </span><span class="se">\&#39;</span><span class="s1">pnl-positive</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;</span><span class="s1">pnl-negative</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">summary-pnl</span><span class="se">\&#39;</span><span class="s1">).className = </span><span class="se">\&#39;</span><span class="s1">item-value </span><span class="se">\&#39;</span><span class="s1"> + summaryPnlClass;</span><span class="se">\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">summary-pnl</span><span class="se">\&#39;</span><span class="s1">).textContent = (s.total_pnl &gt;= 0 ? </span><span class="se">\&#39;</span><span class="s1">+</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">) + </span><span class="se">\&#39;</span><span class="s1">$</span><span class="se">\&#39;</span><span class="s1"> + s.total_pnl.toFixed(2);</span><span class="se">\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">summary-positions</span><span class="se">\&#39;</span><span class="s1">).textContent = s.total_positions;</span><span class="se">\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">summary-winners</span><span class="se">\&#39;</span><span class="s1">).textContent = s.winners;</span><span class="se">\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">summary-losers</span><span class="se">\&#39;</span><span class="s1">).textContent = s.losers;</span><span class="se">\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">summary-winrate</span><span class="se">\&#39;</span><span class="s1">).textContent = winRate;</span><span class="se">\n</span><span class="s1">    const tbody = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">positions-tbody</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    tbody.innerHTML = filtered.map((p, i) =&gt; `</span><span class="se">\n</span><span class="s1">        &lt;tr class=&quot;position-row&quot; data-symbol=&quot;$</span><span class="si">{p.symbol}</span><span class="s1">&quot; data-position-id=&quot;$</span><span class="si">{p.position_id}</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;td&gt;${i + 1}&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td&gt;$</span><span class="si">{p.symbol}</span><span class="s1">&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td class=&quot;${p.side === </span><span class="se">\&#39;</span><span class="s1">LONG</span><span class="se">\&#39;</span><span class="s1"> ? </span><span class="se">\&#39;</span><span class="s1">side-long</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;</span><span class="s1">side-short</span><span class="se">\&#39;</span><span class="s1">}&quot;&gt;$</span><span class="si">{p.side}</span><span class="s1">&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td&gt;$</span><span class="si">{p.quantity}</span><span class="s1">&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td&gt;${formatTime(p.entry_time)}&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td&gt;${formatTime(p.exit_time)}&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td&gt;$${p.avg_entry_price.toFixed(2)}&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td&gt;$${p.avg_exit_price.toFixed(2)}&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td&gt;${formatPnl(p.pnl)}&lt;/td&gt;</span><span class="se">\n</span><span class="s1">        &lt;/tr&gt;</span><span class="se">\n</span><span class="s1">    `).join(</span><span class="se">\&#39;\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    tbody.querySelectorAll(</span><span class="se">\&#39;</span><span class="s1">.position-row</span><span class="se">\&#39;</span><span class="s1">).forEach(row =&gt; {</span><span class="se">\n</span><span class="s1">        row.addEventListener(</span><span class="se">\&#39;</span><span class="s1">click</span><span class="se">\&#39;</span><span class="s1">, () =&gt; {</span><span class="se">\n</span><span class="s1">            const symbol = row.dataset.symbol;</span><span class="se">\n</span><span class="s1">            const positionId = row.dataset.positionId;</span><span class="se">\n</span><span class="s1">            showPositionChart(symbol, positionId);</span><span class="se">\n</span><span class="s1">        });</span><span class="se">\n</span><span class="s1">    });</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">function onSymbolFilterChange() {</span><span class="se">\n</span><span class="s1">    const sel = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">symbol-filter</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    renderPositions(allPositions, sel.value);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">async function loadRunDetail() {</span><span class="se">\n</span><span class="s1">    const runId = window.location.pathname.split(</span><span class="se">\&#39;</span><span class="s1">/run/</span><span class="se">\&#39;</span><span class="s1">)[1];</span><span class="se">\n</span><span class="s1">    const container = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">run-content</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const [runRes, posRes] = await Promise.all([</span><span class="se">\n</span><span class="s1">        fetch(`/api/run/$</span><span class="si">{runId}</span><span class="s1">`),</span><span class="se">\n</span><span class="s1">        fetch(`/api/run/$</span><span class="si">{runId}</span><span class="s1">/positions`)</span><span class="se">\n</span><span class="s1">    ]);</span><span class="se">\n</span><span class="s1">    if (!runRes.ok) {</span><span class="se">\n</span><span class="s1">        container.innerHTML = </span><span class="se">\&#39;</span><span class="s1">&lt;p style=&quot;color: #f85149;&quot;&gt;Run not found.&lt;/p&gt;</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        return;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    const r = await runRes.json();</span><span class="se">\n</span><span class="s1">    const posData = await posRes.json();</span><span class="se">\n</span><span class="s1">    allPositions = posData.positions || [];</span><span class="se">\n</span><span class="s1">    const statusClass = r.status === </span><span class="se">\&#39;</span><span class="s1">completed</span><span class="se">\&#39;</span><span class="s1"> ? </span><span class="se">\&#39;</span><span class="s1">badge-green</span><span class="se">\&#39;</span><span class="s1"> : r.status === </span><span class="se">\&#39;</span><span class="s1">running</span><span class="se">\&#39;</span><span class="s1"> ? </span><span class="se">\&#39;</span><span class="s1">badge-yellow</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;</span><span class="s1">badge-red</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    const createdAt = formatTime(r.created_at);</span><span class="se">\n</span><span class="s1">    const dateRange = r.first_bar &amp;&amp; r.last_bar</span><span class="se">\n</span><span class="s1">        ? r.first_bar.split(</span><span class="se">\&#39;</span><span class="s1">T</span><span class="se">\&#39;</span><span class="s1">)[0] + </span><span class="se">\&#39;</span><span class="s1"> → </span><span class="se">\&#39;</span><span class="s1"> + r.last_bar.split(</span><span class="se">\&#39;</span><span class="s1">T</span><span class="se">\&#39;</span><span class="s1">)[0]</span><span class="se">\n</span><span class="s1">        : </span><span class="se">\&#39;</span><span class="s1">-</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    const symbols = [...new Set(allPositions.map(p =&gt; p.symbol))].sort();</span><span class="se">\n</span><span class="s1">    const s = computeSummary(allPositions);</span><span class="se">\n</span><span class="s1">    const winRate = s.win_rate ? (s.win_rate * 100).toFixed(1) + </span><span class="se">\&#39;</span><span class="s1">%</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;</span><span class="s1">-</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    let positionsHtml = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    if (allPositions.length &gt; 0) {</span><span class="se">\n</span><span class="s1">        const summaryPnlClass = s.total_pnl &gt;= 0 ? </span><span class="se">\&#39;</span><span class="s1">pnl-positive</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;</span><span class="s1">pnl-negative</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        const symbolOptions = symbols.map(sym =&gt; `&lt;option value=&quot;$</span><span class="si">{sym}</span><span class="s1">&quot;&gt;$</span><span class="si">{sym}</span><span class="s1">&lt;/option&gt;`).join(</span><span class="se">\&#39;\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">        positionsHtml = `</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;card&quot; style=&quot;margin-top: 24px;&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;h3&gt;Positions (Round-Trip Trades)&lt;/h3&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;positions-filter&quot;&gt;</span><span class="se">\n</span><span class="s1">                    &lt;label for=&quot;symbol-filter&quot;&gt;Filter by Symbol:&lt;/label&gt;</span><span class="se">\n</span><span class="s1">                    &lt;select id=&quot;symbol-filter&quot; onchange=&quot;onSymbolFilterChange()&quot;&gt;</span><span class="se">\n</span><span class="s1">                        &lt;option value=&quot;&quot;&gt;All Symbols&lt;/option&gt;</span><span class="se">\n</span><span class="s1">                        $</span><span class="si">{symbolOptions}</span><span class="se">\n</span><span class="s1">                    &lt;/select&gt;</span><span class="se">\n</span><span class="s1">                &lt;/div&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;positions-summary&quot;&gt;</span><span class="se">\n</span><span class="s1">                    &lt;div class=&quot;item&quot;&gt;</span><span class="se">\n</span><span class="s1">                        &lt;span class=&quot;item-label&quot;&gt;Total P&amp;L&lt;/span&gt;</span><span class="se">\n</span><span class="s1">                        &lt;span id=&quot;summary-pnl&quot; class=&quot;item-value $</span><span class="si">{summaryPnlClass}</span><span class="s1">&quot;&gt;${s.total_pnl &gt;= 0 ? </span><span class="se">\&#39;</span><span class="s1">+</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">}$${s.total_pnl.toFixed(2)}&lt;/span&gt;</span><span class="se">\n</span><span class="s1">                    &lt;/div&gt;</span><span class="se">\n</span><span class="s1">                    &lt;div class=&quot;item&quot;&gt;</span><span class="se">\n</span><span class="s1">                        &lt;span class=&quot;item-label&quot;&gt;Positions&lt;/span&gt;</span><span class="se">\n</span><span class="s1">                        &lt;span id=&quot;summary-positions&quot; class=&quot;item-value&quot;&gt;$</span><span class="si">{s.total_positions}</span><span class="s1">&lt;/span&gt;</span><span class="se">\n</span><span class="s1">                    &lt;/div&gt;</span><span class="se">\n</span><span class="s1">                    &lt;div class=&quot;item&quot;&gt;</span><span class="se">\n</span><span class="s1">                        &lt;span class=&quot;item-label&quot;&gt;Winners&lt;/span&gt;</span><span class="se">\n</span><span class="s1">                        &lt;span id=&quot;summary-winners&quot; class=&quot;item-value pnl-positive&quot;&gt;$</span><span class="si">{s.winners}</span><span class="s1">&lt;/span&gt;</span><span class="se">\n</span><span class="s1">                    &lt;/div&gt;</span><span class="se">\n</span><span class="s1">                    &lt;div class=&quot;item&quot;&gt;</span><span class="se">\n</span><span class="s1">                        &lt;span class=&quot;item-label&quot;&gt;Losers&lt;/span&gt;</span><span class="se">\n</span><span class="s1">                        &lt;span id=&quot;summary-losers&quot; class=&quot;item-value pnl-negative&quot;&gt;$</span><span class="si">{s.losers}</span><span class="s1">&lt;/span&gt;</span><span class="se">\n</span><span class="s1">                    &lt;/div&gt;</span><span class="se">\n</span><span class="s1">                    &lt;div class=&quot;item&quot;&gt;</span><span class="se">\n</span><span class="s1">                        &lt;span class=&quot;item-label&quot;&gt;Win Rate&lt;/span&gt;</span><span class="se">\n</span><span class="s1">                        &lt;span id=&quot;summary-winrate&quot; class=&quot;item-value&quot;&gt;$</span><span class="si">{winRate}</span><span class="s1">&lt;/span&gt;</span><span class="se">\n</span><span class="s1">                    &lt;/div&gt;</span><span class="se">\n</span><span class="s1">                &lt;/div&gt;</span><span class="se">\n</span><span class="s1">                &lt;table class=&quot;positions-table&quot;&gt;</span><span class="se">\n</span><span class="s1">                    &lt;thead&gt;</span><span class="se">\n</span><span class="s1">                        &lt;tr&gt;</span><span class="se">\n</span><span class="s1">                            &lt;th&gt;#&lt;/th&gt;&lt;th&gt;Symbol&lt;/th&gt;&lt;th&gt;Side&lt;/th&gt;&lt;th&gt;Qty&lt;/th&gt;</span><span class="se">\n</span><span class="s1">                            &lt;th&gt;Entry Time&lt;/th&gt;&lt;th&gt;Exit Time&lt;/th&gt;&lt;th&gt;Avg Entry&lt;/th&gt;&lt;th&gt;Avg Exit&lt;/th&gt;&lt;th&gt;P&amp;L&lt;/th&gt;</span><span class="se">\n</span><span class="s1">                        &lt;/tr&gt;</span><span class="se">\n</span><span class="s1">                    &lt;/thead&gt;</span><span class="se">\n</span><span class="s1">                    &lt;tbody id=&quot;positions-tbody&quot;&gt;&lt;/tbody&gt;</span><span class="se">\n</span><span class="s1">                &lt;/table&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">        `;</span><span class="se">\n</span><span class="s1">    } else {</span><span class="se">\n</span><span class="s1">        positionsHtml = `</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;card&quot; style=&quot;margin-top: 24px;&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;h3&gt;Positions (Round-Trip Trades)&lt;/h3&gt;</span><span class="se">\n</span><span class="s1">                &lt;p style=&quot;color: #8b949e;&quot;&gt;No completed positions.&lt;/p&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">        `;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n\n</span><span class="s1">    container.innerHTML = `</span><span class="se">\n</span><span class="s1">        &lt;a href=&quot;/&quot; class=&quot;back-link&quot;&gt;← Back to Runs&lt;/a&gt;</span><span class="se">\n</span><span class="s1">        &lt;div class=&quot;run-header&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;h2&gt;$</span><span class="si">{r.strategy}</span><span class="s1">&lt;/h2&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;run-meta&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;span&gt;&lt;span class=&quot;badge $</span><span class="si">{statusClass}</span><span class="s1">&quot;&gt;$</span><span class="si">{r.status}</span><span class="s1">&lt;/span&gt;&lt;/span&gt;</span><span class="se">\n</span><span class="s1">                &lt;span&gt;Created: $</span><span class="si">{createdAt}</span><span class="s1">&lt;/span&gt;</span><span class="se">\n</span><span class="s1">                &lt;span&gt;Mode: $</span><span class="si">{r.mode}</span><span class="s1">&lt;/span&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">        &lt;/div&gt;</span><span class="se">\n</span><span class="s1">        &lt;div class=&quot;stats-grid&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;stat-card&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;label&quot;&gt;Symbols&lt;/div&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;value&quot;&gt;$</span><span class="si">{r.symbols.length}</span><span class="s1">&lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;stat-card&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;label&quot;&gt;Bar Period&lt;/div&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;value&quot;&gt;${r.bar_period || </span><span class="se">\&#39;</span><span class="s1">-</span><span class="se">\&#39;</span><span class="s1">}&lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;stat-card&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;label&quot;&gt;Total Bars&lt;/div&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;value&quot;&gt;${r.bar_count || 0}&lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;stat-card&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;label&quot;&gt;Date Range&lt;/div&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;value&quot; style=&quot;font-size: 14px;&quot;&gt;$</span><span class="si">{dateRange}</span><span class="s1">&lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">        &lt;/div&gt;</span><span class="se">\n</span><span class="s1">        &lt;div class=&quot;card&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;h3&gt;Symbols&lt;/h3&gt;</span><span class="se">\n</span><span class="s1">            &lt;p style=&quot;color: #8b949e; font-family: monospace;&quot;&gt;${r.symbols.join(</span><span class="se">\&#39;</span><span class="s1">, </span><span class="se">\&#39;</span><span class="s1">) || </span><span class="se">\&#39;</span><span class="s1">None</span><span class="se">\&#39;</span><span class="s1">}&lt;/p&gt;</span><span class="se">\n</span><span class="s1">        &lt;/div&gt;</span><span class="se">\n</span><span class="s1">        $</span><span class="si">{positionsHtml}</span><span class="se">\n</span><span class="s1">    `;</span><span class="se">\n</span><span class="s1">    if (allPositions.length &gt; 0) {</span><span class="se">\n</span><span class="s1">        renderPositions(allPositions, </span><span class="se">\&#39;\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">function showPositionChart(symbol, positionId) {</span><span class="se">\n</span><span class="s1">    const modal = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">chart-modal</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const modalTitle = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">chart-modal-title</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const modalBody = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">chart-modal-body</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const runId = window.location.pathname.split(</span><span class="se">\&#39;</span><span class="s1">/run/</span><span class="se">\&#39;</span><span class="s1">)[1];</span><span class="se">\n\n</span><span class="s1">    modalTitle.textContent = `Position Chart - $</span><span class="si">{symbol}</span><span class="s1"> #$</span><span class="si">{positionId}</span><span class="s1">`;</span><span class="se">\n</span><span class="s1">    modalBody.innerHTML = </span><span class="se">\&#39;</span><span class="s1">&lt;div style=&quot;text-align: center; padding: 40px;&quot;&gt;&lt;p&gt;Generating chart...&lt;/p&gt;&lt;/div&gt;</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    modal.style.display = </span><span class="se">\&#39;</span><span class="s1">flex</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n\n</span><span class="s1">    fetch(`/api/run/$</span><span class="si">{runId}</span><span class="s1">/positions/${encodeURIComponent(symbol)}/$</span><span class="si">{positionId}</span><span class="s1">/chart`)</span><span class="se">\n</span><span class="s1">        .then(response =&gt; {</span><span class="se">\n</span><span class="s1">            if (!response.ok) {</span><span class="se">\n</span><span class="s1">                return response.json().then(data =&gt; { throw new Error(data.error || </span><span class="se">\&#39;</span><span class="s1">Failed to load chart</span><span class="se">\&#39;</span><span class="s1">); });</span><span class="se">\n</span><span class="s1">            }</span><span class="se">\n</span><span class="s1">            return response.blob();</span><span class="se">\n</span><span class="s1">        })</span><span class="se">\n</span><span class="s1">        .then(blob =&gt; {</span><span class="se">\n</span><span class="s1">            const url = URL.createObjectURL(blob);</span><span class="se">\n</span><span class="s1">            modalBody.innerHTML = `&lt;img src=&quot;$</span><span class="si">{url}</span><span class="s1">&quot; style=&quot;max-width: 100%; max-height: 80vh;&quot;&gt;`;</span><span class="se">\n</span><span class="s1">        })</span><span class="se">\n</span><span class="s1">        .catch(error =&gt; {</span><span class="se">\n</span><span class="s1">            modalBody.innerHTML = `&lt;div style=&quot;color: #f85149; padding: 20px;&quot;&gt;$</span><span class="si">{error.message}</span><span class="s1">&lt;/div&gt;`;</span><span class="se">\n</span><span class="s1">        });</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">function closeChartModal() {</span><span class="se">\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">chart-modal</span><span class="se">\&#39;</span><span class="s1">).style.display = </span><span class="se">\&#39;</span><span class="s1">none</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">document.addEventListener(</span><span class="se">\&#39;</span><span class="s1">DOMContentLoaded</span><span class="se">\&#39;</span><span class="s1">, loadRunDetail);</span><span class="se">\n</span><span class="s1">&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.app._OHLCV_COLUMNS" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_OHLCV_COLUMNS</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ts_event&#39;</span><span class="p">,</span> <span class="s1">&#39;symbol&#39;</span><span class="p">,</span> <span class="s1">&#39;bar_period&#39;</span><span class="p">,</span> <span class="s1">&#39;open&#39;</span><span class="p">,</span> <span class="s1">&#39;high&#39;</span><span class="p">,</span> <span class="s1">&#39;low&#39;</span><span class="p">,</span> <span class="s1">&#39;close&#39;</span><span class="p">,</span> <span class="s1">&#39;volume&#39;</span><span class="p">,</span> <span class="s1">&#39;run_id&#39;</span><span class="p">,</span> <span class="s1">&#39;indicators&#39;</span><span class="p">}</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.app._MAIN_COLORS" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_MAIN_COLORS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="s1">&#39;purple&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">,</span> <span class="s1">&#39;pink&#39;</span><span class="p">,</span> <span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="s1">&#39;cyan&#39;</span><span class="p">,</span> <span class="s1">&#39;magenta&#39;</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.app._SUBPLOT_COLORS" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_SUBPLOT_COLORS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;#1f77b4&#39;</span><span class="p">,</span> <span class="s1">&#39;#ff7f0e&#39;</span><span class="p">,</span> <span class="s1">&#39;#2ca02c&#39;</span><span class="p">,</span> <span class="s1">&#39;#d62728&#39;</span><span class="p">,</span> <span class="s1">&#39;#9467bd&#39;</span><span class="p">,</span> <span class="s1">&#39;#8c564b&#39;</span><span class="p">,</span> <span class="s1">&#39;#e377c2&#39;</span><span class="p">,</span> <span class="s1">&#39;#7f7f7f&#39;</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.app.BACKTEST_FORM_STYLE" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">BACKTEST_FORM_STYLE</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">.form-group { margin-bottom: 16px; }</span><span class="se">\n</span><span class="s1">.form-group label { display: block; margin-bottom: 6px; font-size: 14px; color: #8b949e; }</span><span class="se">\n</span><span class="s1">.form-group select, .form-group input {</span><span class="se">\n</span><span class="s1">    width: 100%; padding: 8px 12px; background: #0d1117; border: 1px solid #30363d;</span><span class="se">\n</span><span class="s1">    border-radius: 6px; color: #e6edf3; font-size: 14px;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.form-group select:focus, .form-group input:focus { outline: none; border-color: #58a6ff; }</span><span class="se">\n</span><span class="s1">.params-container { margin-top: 12px; padding: 12px; background: #0d1117; border-radius: 6px; }</span><span class="se">\n</span><span class="s1">.param-row { display: flex; gap: 12px; margin-bottom: 8px; align-items: center; }</span><span class="se">\n</span><span class="s1">.param-row label { min-width: 120px; font-size: 13px; }</span><span class="se">\n</span><span class="s1">.param-row input, .param-row select { flex: 1; }</span><span class="se">\n</span><span class="s1">.btn { padding: 10px 20px; background: #238636; border: none; border-radius: 6px;</span><span class="se">\n</span><span class="s1">    color: #fff; font-size: 14px; cursor: pointer; }</span><span class="se">\n</span><span class="s1">.btn:hover { background: #2ea043; }</span><span class="se">\n</span><span class="s1">.btn:disabled { background: #30363d; cursor: not-allowed; }</span><span class="se">\n</span><span class="s1">.btn-sm { padding: 6px 12px; font-size: 12px; }</span><span class="se">\n</span><span class="s1">.btn-secondary { background: #30363d; }</span><span class="se">\n</span><span class="s1">.btn-secondary:hover { background: #484f58; }</span><span class="se">\n</span><span class="s1">.btn-danger { background: #da3633; }</span><span class="se">\n</span><span class="s1">.btn-danger:hover { background: #f85149; }</span><span class="se">\n</span><span class="s1">#status { margin-top: 16px; padding: 12px; border-radius: 6px; display: none; }</span><span class="se">\n</span><span class="s1">.status-running { background: #9e6a03; }</span><span class="se">\n</span><span class="s1">.status-completed { background: #238636; }</span><span class="se">\n</span><span class="s1">.status-error { background: #da3633; }</span><span class="se">\n</span><span class="s1">.date-row { display: flex; gap: 12px; }</span><span class="se">\n</span><span class="s1">.date-row .form-group { flex: 1; margin-bottom: 0; }</span><span class="se">\n</span><span class="s1">.symbol-section { background: #0d1117; border-radius: 6px; padding: 12px; }</span><span class="se">\n</span><span class="s1">.preset-row { display: flex; gap: 8px; margin-bottom: 12px; align-items: center; }</span><span class="se">\n</span><span class="s1">.preset-row select { flex: 1; }</span><span class="se">\n</span><span class="s1">.preset-row input { flex: 1; }</span><span class="se">\n</span><span class="s1">.search-row { display: flex; gap: 8px; margin-bottom: 8px; }</span><span class="se">\n</span><span class="s1">.search-row input { flex: 1; }</span><span class="se">\n</span><span class="s1">.search-results { max-height: 150px; overflow-y: auto; border: 1px solid #30363d; border-radius: 4px; margin-bottom: 12px; }</span><span class="se">\n</span><span class="s1">.search-results:empty { display: none; }</span><span class="se">\n</span><span class="s1">.search-result { display: flex; justify-content: space-between; align-items: center; padding: 6px 10px; border-bottom: 1px solid #21262d; }</span><span class="se">\n</span><span class="s1">.search-result:last-child { border-bottom: none; }</span><span class="se">\n</span><span class="s1">.search-result:hover { background: #161b22; }</span><span class="se">\n</span><span class="s1">.search-result .symbol { font-family: monospace; }</span><span class="se">\n</span><span class="s1">.selected-symbols { display: flex; flex-wrap: wrap; gap: 6px; min-height: 32px; max-height: 150px; overflow-y: auto; }</span><span class="se">\n</span><span class="s1">.selected-tag { display: inline-flex; align-items: center; gap: 4px; background: #238636; color: #fff; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-family: monospace; }</span><span class="se">\n</span><span class="s1">.selected-tag .remove { cursor: pointer; opacity: 0.7; }</span><span class="se">\n</span><span class="s1">.selected-tag .remove:hover { opacity: 1; }</span><span class="se">\n</span><span class="s1">.selected-label { font-size: 13px; color: #8b949e; margin-bottom: 6px; }</span><span class="se">\n</span><span class="s1">.section-header { font-size: 14px; color: #8b949e; margin-bottom: 6px; margin-top: 8px; }</span><span class="se">\n</span><span class="s1">&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.app.BACKTEST_FORM_SCRIPT" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">BACKTEST_FORM_SCRIPT</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">let strategyParams = [];</span><span class="se">\n</span><span class="s1">let symbolCoverage = </span><span class="si">{}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">let allSymbols = [];</span><span class="se">\n</span><span class="s1">let selectedSymbols = [];</span><span class="se">\n</span><span class="s1">let presets = [];</span><span class="se">\n</span><span class="s1">let barPeriods = [];</span><span class="se">\n</span><span class="s1">let currentBarPeriod = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">let globalMinTs = null;</span><span class="se">\n</span><span class="s1">let globalMaxTs = null;</span><span class="se">\n</span><span class="s1">let globalMinDate = null;</span><span class="se">\n</span><span class="s1">let globalMaxDate = null;</span><span class="se">\n\n</span><span class="s1">async function loadStrategies() {</span><span class="se">\n</span><span class="s1">    const res = await fetch(</span><span class="se">\&#39;</span><span class="s1">/api/strategies</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const data = await res.json();</span><span class="se">\n</span><span class="s1">    const sel = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">strategy</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    data.strategies.forEach(s =&gt; sel.innerHTML += `&lt;option value=&quot;$</span><span class="si">{s.class_name}</span><span class="s1">&quot;&gt;$</span><span class="si">{s.display_name}</span><span class="s1">&lt;/option&gt;`);</span><span class="se">\n</span><span class="s1">    if (data.strategies.length &gt; 0) { sel.value = data.strategies[0].class_name; loadStrategyParams(); }</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function loadBarPeriods() {</span><span class="se">\n</span><span class="s1">    const res = await fetch(</span><span class="se">\&#39;</span><span class="s1">/api/secmaster/bar_periods</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const data = await res.json();</span><span class="se">\n</span><span class="s1">    barPeriods = data.bar_periods || [];</span><span class="se">\n</span><span class="s1">    const sel = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">bar-period</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    sel.innerHTML = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    barPeriods.forEach(p =&gt; sel.innerHTML += `&lt;option value=&quot;$</span><span class="si">{p}</span><span class="s1">&quot;&gt;$</span><span class="si">{p}</span><span class="s1">&lt;/option&gt;`);</span><span class="se">\n</span><span class="s1">    if (barPeriods.length &gt; 0) {</span><span class="se">\n</span><span class="s1">        currentBarPeriod = barPeriods[0];</span><span class="se">\n</span><span class="s1">        sel.value = currentBarPeriod;</span><span class="se">\n</span><span class="s1">        await loadSymbolsForPeriod();</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function onBarPeriodChange() {</span><span class="se">\n</span><span class="s1">    currentBarPeriod = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">bar-period</span><span class="se">\&#39;</span><span class="s1">).value;</span><span class="se">\n</span><span class="s1">    selectedSymbols = [];</span><span class="se">\n</span><span class="s1">    renderSelectedSymbols();</span><span class="se">\n</span><span class="s1">    await loadSymbolsForPeriod();</span><span class="se">\n</span><span class="s1">    updateDateRange();</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function loadSymbolsForPeriod() {</span><span class="se">\n</span><span class="s1">    const res = await fetch(`/api/secmaster/symbols_coverage?bar_period=$</span><span class="si">{currentBarPeriod}</span><span class="s1">`);</span><span class="se">\n</span><span class="s1">    const data = await res.json();</span><span class="se">\n</span><span class="s1">    symbolCoverage = </span><span class="si">{}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    allSymbols = [];</span><span class="se">\n</span><span class="s1">    (data.symbols || []).forEach(s =&gt; {</span><span class="se">\n</span><span class="s1">        symbolCoverage[s.symbol] = {min_ts: s.min_ts, max_ts: s.max_ts};</span><span class="se">\n</span><span class="s1">        allSymbols.push(s.symbol);</span><span class="se">\n</span><span class="s1">    });</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function loadPresets() {</span><span class="se">\n</span><span class="s1">    const res = await fetch(</span><span class="se">\&#39;</span><span class="s1">/api/presets</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const data = await res.json();</span><span class="se">\n</span><span class="s1">    presets = data.presets || [];</span><span class="se">\n</span><span class="s1">    renderPresetSelect();</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function renderPresetSelect() {</span><span class="se">\n</span><span class="s1">    const sel = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">preset-select</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    sel.innerHTML = </span><span class="se">\&#39;</span><span class="s1">&lt;option value=&quot;&quot;&gt;-- Select Preset --&lt;/option&gt;</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    presets.forEach(p =&gt; sel.innerHTML += `&lt;option value=&quot;$</span><span class="si">{p}</span><span class="s1">&quot;&gt;$</span><span class="si">{p}</span><span class="s1">&lt;/option&gt;`);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function loadPreset() {</span><span class="se">\n</span><span class="s1">    const name = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">preset-select</span><span class="se">\&#39;</span><span class="s1">).value;</span><span class="se">\n</span><span class="s1">    if (!name) return;</span><span class="se">\n</span><span class="s1">    const res = await fetch(`/api/presets/${encodeURIComponent(name)}`);</span><span class="se">\n</span><span class="s1">    const data = await res.json();</span><span class="se">\n</span><span class="s1">    if (data.symbols) {</span><span class="se">\n</span><span class="s1">        selectedSymbols = data.symbols.filter(s =&gt; allSymbols.includes(s));</span><span class="se">\n</span><span class="s1">        renderSelectedSymbols();</span><span class="se">\n</span><span class="s1">        updateDateRange();</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function savePreset() {</span><span class="se">\n</span><span class="s1">    const nameInput = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">preset-name</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const name = nameInput.value.trim();</span><span class="se">\n</span><span class="s1">    if (!name) { alert(</span><span class="se">\&#39;</span><span class="s1">Enter a preset name</span><span class="se">\&#39;</span><span class="s1">); return; }</span><span class="se">\n</span><span class="s1">    if (selectedSymbols.length === 0) { alert(</span><span class="se">\&#39;</span><span class="s1">Select at least one symbol</span><span class="se">\&#39;</span><span class="s1">); return; }</span><span class="se">\n</span><span class="s1">    const exists = presets.includes(name);</span><span class="se">\n</span><span class="s1">    const method = exists ? </span><span class="se">\&#39;</span><span class="s1">PUT</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;</span><span class="s1">POST</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    const url = exists ? `/api/presets/${encodeURIComponent(name)}` : </span><span class="se">\&#39;</span><span class="s1">/api/presets</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    await fetch(url, {</span><span class="se">\n</span><span class="s1">        method, headers: {</span><span class="se">\&#39;</span><span class="s1">Content-Type</span><span class="se">\&#39;</span><span class="s1">: </span><span class="se">\&#39;</span><span class="s1">application/json</span><span class="se">\&#39;</span><span class="s1">},</span><span class="se">\n</span><span class="s1">        body: JSON.stringify({name, symbols: selectedSymbols})</span><span class="se">\n</span><span class="s1">    });</span><span class="se">\n</span><span class="s1">    nameInput.value = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    await loadPresets();</span><span class="se">\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">preset-select</span><span class="se">\&#39;</span><span class="s1">).value = name;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function deletePreset() {</span><span class="se">\n</span><span class="s1">    const name = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">preset-select</span><span class="se">\&#39;</span><span class="s1">).value;</span><span class="se">\n</span><span class="s1">    if (!name) { alert(</span><span class="se">\&#39;</span><span class="s1">Select a preset to delete</span><span class="se">\&#39;</span><span class="s1">); return; }</span><span class="se">\n</span><span class="s1">    if (!confirm(`Delete preset &quot;$</span><span class="si">{name}</span><span class="s1">&quot;?`)) return;</span><span class="se">\n</span><span class="s1">    await fetch(`/api/presets/${encodeURIComponent(name)}`, {method: </span><span class="se">\&#39;</span><span class="s1">DELETE</span><span class="se">\&#39;</span><span class="s1">});</span><span class="se">\n</span><span class="s1">    await loadPresets();</span><span class="se">\n</span><span class="s1">    selectedSymbols = [];</span><span class="se">\n</span><span class="s1">    renderSelectedSymbols();</span><span class="se">\n</span><span class="s1">    updateDateRange();</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function searchSymbols() {</span><span class="se">\n</span><span class="s1">    const query = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">symbol-search</span><span class="se">\&#39;</span><span class="s1">).value.toUpperCase();</span><span class="se">\n</span><span class="s1">    const container = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">search-results</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    if (query.length &lt; 1) { container.innerHTML = </span><span class="se">\&#39;\&#39;</span><span class="s1">; return; }</span><span class="se">\n</span><span class="s1">    const matches = allSymbols.filter(s =&gt; s.toUpperCase().includes(query) &amp;&amp; !selectedSymbols.includes(s)).slice(0, 20);</span><span class="se">\n</span><span class="s1">    container.innerHTML = matches.map(s =&gt; `&lt;div class=&quot;search-result&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;$</span><span class="si">{s}</span><span class="s1">&lt;/span&gt;&lt;button class=&quot;btn btn-sm&quot; onclick=&quot;addSymbol(</span><span class="se">\&#39;</span><span class="s1">$</span><span class="si">{s}</span><span class="se">\&#39;</span><span class="s1">)&quot;&gt;+&lt;/button&gt;&lt;/div&gt;`).join(</span><span class="se">\&#39;\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function addSymbol(symbol) {</span><span class="se">\n</span><span class="s1">    if (!selectedSymbols.includes(symbol)) {</span><span class="se">\n</span><span class="s1">        selectedSymbols.push(symbol);</span><span class="se">\n</span><span class="s1">        selectedSymbols.sort();</span><span class="se">\n</span><span class="s1">        renderSelectedSymbols();</span><span class="se">\n</span><span class="s1">        searchSymbols();</span><span class="se">\n</span><span class="s1">        updateDateRange();</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function removeSymbol(symbol) {</span><span class="se">\n</span><span class="s1">    selectedSymbols = selectedSymbols.filter(s =&gt; s !== symbol);</span><span class="se">\n</span><span class="s1">    renderSelectedSymbols();</span><span class="se">\n</span><span class="s1">    searchSymbols();</span><span class="se">\n</span><span class="s1">    updateDateRange();</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function renderSelectedSymbols() {</span><span class="se">\n</span><span class="s1">    const container = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">selected-symbols</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const label = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">selected-label</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    label.textContent = `Selected ($</span><span class="si">{selectedSymbols.length}</span><span class="s1">):`;</span><span class="se">\n</span><span class="s1">    container.innerHTML = selectedSymbols.map(s =&gt; `&lt;span class=&quot;selected-tag&quot;&gt;$</span><span class="si">{s}</span><span class="s1">&lt;span class=&quot;remove&quot; onclick=&quot;removeSymbol(</span><span class="se">\&#39;</span><span class="s1">$</span><span class="si">{s}</span><span class="se">\&#39;</span><span class="s1">)&quot;&gt;&amp;times;&lt;/span&gt;&lt;/span&gt;`).join(</span><span class="se">\&#39;\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function updateDateRange() {</span><span class="se">\n</span><span class="s1">    if (selectedSymbols.length === 0) {</span><span class="se">\n</span><span class="s1">        globalMinTs = null;</span><span class="se">\n</span><span class="s1">        globalMaxTs = null;</span><span class="se">\n</span><span class="s1">        document.getElementById(</span><span class="se">\&#39;</span><span class="s1">start-date</span><span class="se">\&#39;</span><span class="s1">).value = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        document.getElementById(</span><span class="se">\&#39;</span><span class="s1">end-date</span><span class="se">\&#39;</span><span class="s1">).value = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        document.getElementById(</span><span class="se">\&#39;</span><span class="s1">range-slider-container</span><span class="se">\&#39;</span><span class="s1">).style.display = </span><span class="se">\&#39;</span><span class="s1">none</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        return;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    let minTs = Infinity, maxTs = -Infinity;</span><span class="se">\n</span><span class="s1">    selectedSymbols.forEach(s =&gt; {</span><span class="se">\n</span><span class="s1">        const cov = symbolCoverage[s];</span><span class="se">\n</span><span class="s1">        if (cov) {</span><span class="se">\n</span><span class="s1">            if (cov.min_ts &lt; minTs) minTs = cov.min_ts;</span><span class="se">\n</span><span class="s1">            if (cov.max_ts &gt; maxTs) maxTs = cov.max_ts;</span><span class="se">\n</span><span class="s1">        }</span><span class="se">\n</span><span class="s1">    });</span><span class="se">\n</span><span class="s1">    if (minTs === Infinity) return;</span><span class="se">\n</span><span class="s1">    globalMinTs = minTs;</span><span class="se">\n</span><span class="s1">    globalMaxTs = maxTs;</span><span class="se">\n</span><span class="s1">    globalMinDate = tsToDate(minTs);</span><span class="se">\n</span><span class="s1">    globalMaxDate = tsToDate(maxTs);</span><span class="se">\n</span><span class="s1">    const startInput = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">start-date</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const endInput = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">end-date</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    startInput.min = globalMinDate;</span><span class="se">\n</span><span class="s1">    startInput.max = globalMaxDate;</span><span class="se">\n</span><span class="s1">    startInput.value = globalMinDate;</span><span class="se">\n</span><span class="s1">    endInput.min = globalMinDate;</span><span class="se">\n</span><span class="s1">    endInput.max = globalMaxDate;</span><span class="se">\n</span><span class="s1">    endInput.value = globalMaxDate;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function tsToDate(ts) {</span><span class="se">\n</span><span class="s1">    return new Date(ts / 1000000).toISOString().split(</span><span class="se">\&#39;</span><span class="s1">T</span><span class="se">\&#39;</span><span class="s1">)[0];</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function clampDate(inputId) {</span><span class="se">\n</span><span class="s1">    if (!globalMinDate || !globalMaxDate) return;</span><span class="se">\n</span><span class="s1">    const input = document.getElementById(inputId);</span><span class="se">\n</span><span class="s1">    if (input.value &lt; globalMinDate) input.value = globalMinDate;</span><span class="se">\n</span><span class="s1">    if (input.value &gt; globalMaxDate) input.value = globalMaxDate;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function loadStrategyParams() {</span><span class="se">\n</span><span class="s1">    const name = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">strategy</span><span class="se">\&#39;</span><span class="s1">).value;</span><span class="se">\n</span><span class="s1">    const res = await fetch(`/api/strategies/$</span><span class="si">{name}</span><span class="s1">`);</span><span class="se">\n</span><span class="s1">    const data = await res.json();</span><span class="se">\n</span><span class="s1">    strategyParams = (data.parameters || []).filter(p =&gt; p.name !== </span><span class="se">\&#39;</span><span class="s1">bar_period</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    renderParams(</span><span class="se">\&#39;</span><span class="s1">strategy-params</span><span class="se">\&#39;</span><span class="s1">, strategyParams, </span><span class="se">\&#39;</span><span class="s1">sp_</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function formatParamName(name) {</span><span class="se">\n</span><span class="s1">    return name.split(</span><span class="se">\&#39;</span><span class="s1">_</span><span class="se">\&#39;</span><span class="s1">).map(w =&gt; w.charAt(0).toUpperCase() + w.slice(1)).join(</span><span class="se">\&#39;</span><span class="s1"> </span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function renderParams(containerId, params, prefix) {</span><span class="se">\n</span><span class="s1">    const container = document.getElementById(containerId);</span><span class="se">\n</span><span class="s1">    container.innerHTML = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    params.forEach(p =&gt; {</span><span class="se">\n</span><span class="s1">        const row = document.createElement(</span><span class="se">\&#39;</span><span class="s1">div</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">        row.className = </span><span class="se">\&#39;</span><span class="s1">param-row</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        let input;</span><span class="se">\n</span><span class="s1">        if (p.choices) {</span><span class="se">\n</span><span class="s1">            input = `&lt;select id=&quot;$</span><span class="si">{prefix}</span><span class="s1">$</span><span class="si">{p.name}</span><span class="s1">&quot;&gt;` +</span><span class="se">\n</span><span class="s1">                p.choices.map(c =&gt; `&lt;option value=&quot;$</span><span class="si">{c}</span><span class="s1">&quot; ${c===p.default?</span><span class="se">\&#39;</span><span class="s1">selected</span><span class="se">\&#39;</span><span class="s1">:</span><span class="se">\&#39;\&#39;</span><span class="s1">}&gt;$</span><span class="si">{c}</span><span class="s1">&lt;/option&gt;`).join(</span><span class="se">\&#39;\&#39;</span><span class="s1">) +</span><span class="se">\n</span><span class="s1">                </span><span class="se">\&#39;</span><span class="s1">&lt;/select&gt;</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        } else if (p.type === </span><span class="se">\&#39;</span><span class="s1">bool</span><span class="se">\&#39;</span><span class="s1">) {</span><span class="se">\n</span><span class="s1">            input = `&lt;select id=&quot;$</span><span class="si">{prefix}</span><span class="s1">$</span><span class="si">{p.name}</span><span class="s1">&quot;&gt;&lt;option value=&quot;true&quot; ${p.default?</span><span class="se">\&#39;</span><span class="s1">selected</span><span class="se">\&#39;</span><span class="s1">:</span><span class="se">\&#39;\&#39;</span><span class="s1">}&gt;true&lt;/option&gt;&lt;option value=&quot;false&quot; ${!p.default?</span><span class="se">\&#39;</span><span class="s1">selected</span><span class="se">\&#39;</span><span class="s1">:</span><span class="se">\&#39;\&#39;</span><span class="s1">}&gt;false&lt;/option&gt;&lt;/select&gt;`;</span><span class="se">\n</span><span class="s1">        } else {</span><span class="se">\n</span><span class="s1">            const attrs = [];</span><span class="se">\n</span><span class="s1">            if (p.min !== undefined) attrs.push(`min=&quot;$</span><span class="si">{p.min}</span><span class="s1">&quot;`);</span><span class="se">\n</span><span class="s1">            if (p.max !== undefined) attrs.push(`max=&quot;$</span><span class="si">{p.max}</span><span class="s1">&quot;`);</span><span class="se">\n</span><span class="s1">            if (p.step !== undefined) attrs.push(`step=&quot;$</span><span class="si">{p.step}</span><span class="s1">&quot;`);</span><span class="se">\n</span><span class="s1">            input = `&lt;input type=&quot;${p.type===</span><span class="se">\&#39;</span><span class="s1">int</span><span class="se">\&#39;</span><span class="s1">||p.type===</span><span class="se">\&#39;</span><span class="s1">float</span><span class="se">\&#39;</span><span class="s1">?</span><span class="se">\&#39;</span><span class="s1">number</span><span class="se">\&#39;</span><span class="s1">:</span><span class="se">\&#39;</span><span class="s1">text</span><span class="se">\&#39;</span><span class="s1">}&quot; id=&quot;$</span><span class="si">{prefix}</span><span class="s1">$</span><span class="si">{p.name}</span><span class="s1">&quot; value=&quot;$</span><span class="si">{p.default}</span><span class="s1">&quot; ${attrs.join(</span><span class="se">\&#39;</span><span class="s1"> </span><span class="se">\&#39;</span><span class="s1">)}&gt;`;</span><span class="se">\n</span><span class="s1">        }</span><span class="se">\n</span><span class="s1">        row.innerHTML = `&lt;label&gt;${formatParamName(p.name)}&lt;/label&gt;$</span><span class="si">{input}</span><span class="s1">`;</span><span class="se">\n</span><span class="s1">        container.appendChild(row);</span><span class="se">\n</span><span class="s1">    });</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function collectParams(params, prefix) {</span><span class="se">\n</span><span class="s1">    const result = </span><span class="si">{}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    params.forEach(p =&gt; {</span><span class="se">\n</span><span class="s1">        const el = document.getElementById(prefix + p.name);</span><span class="se">\n</span><span class="s1">        let val = el.value;</span><span class="se">\n</span><span class="s1">        if (p.type === </span><span class="se">\&#39;</span><span class="s1">int</span><span class="se">\&#39;</span><span class="s1">) val = parseInt(val);</span><span class="se">\n</span><span class="s1">        else if (p.type === </span><span class="se">\&#39;</span><span class="s1">float</span><span class="se">\&#39;</span><span class="s1">) val = parseFloat(val);</span><span class="se">\n</span><span class="s1">        else if (p.type === </span><span class="se">\&#39;</span><span class="s1">bool</span><span class="se">\&#39;</span><span class="s1">) val = val === </span><span class="se">\&#39;</span><span class="s1">true</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        result[p.name] = val;</span><span class="se">\n</span><span class="s1">    });</span><span class="se">\n</span><span class="s1">    return result;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function runBacktest() {</span><span class="se">\n</span><span class="s1">    const btn = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">run-btn</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const status = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">status</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    if (selectedSymbols.length === 0) {</span><span class="se">\n</span><span class="s1">        alert(</span><span class="se">\&#39;</span><span class="s1">Please select at least one symbol</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">        return;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    btn.disabled = true;</span><span class="se">\n</span><span class="s1">    status.style.display = </span><span class="se">\&#39;</span><span class="s1">block</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    status.className = </span><span class="se">\&#39;</span><span class="s1">status-running</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    status.textContent = </span><span class="se">\&#39;</span><span class="s1">Starting backtest...</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n\n</span><span class="s1">    const params = collectParams(strategyParams, </span><span class="se">\&#39;</span><span class="s1">sp_</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    params.bar_period = currentBarPeriod;</span><span class="se">\n</span><span class="s1">    const payload = {</span><span class="se">\n</span><span class="s1">        strategy: document.getElementById(</span><span class="se">\&#39;</span><span class="s1">strategy</span><span class="se">\&#39;</span><span class="s1">).value,</span><span class="se">\n</span><span class="s1">        strategy_params: params,</span><span class="se">\n</span><span class="s1">        symbols: selectedSymbols,</span><span class="se">\n</span><span class="s1">        start_date: document.getElementById(</span><span class="se">\&#39;</span><span class="s1">start-date</span><span class="se">\&#39;</span><span class="s1">).value || null,</span><span class="se">\n</span><span class="s1">        end_date: document.getElementById(</span><span class="se">\&#39;</span><span class="s1">end-date</span><span class="se">\&#39;</span><span class="s1">).value || null</span><span class="se">\n</span><span class="s1">    };</span><span class="se">\n\n</span><span class="s1">    const res = await fetch(</span><span class="se">\&#39;</span><span class="s1">/api/backtest/run</span><span class="se">\&#39;</span><span class="s1">, {</span><span class="se">\n</span><span class="s1">        method: </span><span class="se">\&#39;</span><span class="s1">POST</span><span class="se">\&#39;</span><span class="s1">, headers: {</span><span class="se">\&#39;</span><span class="s1">Content-Type</span><span class="se">\&#39;</span><span class="s1">: </span><span class="se">\&#39;</span><span class="s1">application/json</span><span class="se">\&#39;</span><span class="s1">}, body: JSON.stringify(payload)</span><span class="se">\n</span><span class="s1">    });</span><span class="se">\n</span><span class="s1">    const data = await res.json();</span><span class="se">\n</span><span class="s1">    const runId = data.run_id;</span><span class="se">\n</span><span class="s1">    status.textContent = `Backtest $</span><span class="si">{runId}</span><span class="s1"> running...`;</span><span class="se">\n\n</span><span class="s1">    const poll = setInterval(async () =&gt; {</span><span class="se">\n</span><span class="s1">        const r = await fetch(`/api/backtest/status/$</span><span class="si">{runId}</span><span class="s1">`);</span><span class="se">\n</span><span class="s1">        const d = await r.json();</span><span class="se">\n</span><span class="s1">        if (d.status === </span><span class="se">\&#39;</span><span class="s1">completed</span><span class="se">\&#39;</span><span class="s1">) {</span><span class="se">\n</span><span class="s1">            clearInterval(poll);</span><span class="se">\n</span><span class="s1">            status.className = </span><span class="se">\&#39;</span><span class="s1">status-completed</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">            status.textContent = `Backtest $</span><span class="si">{runId}</span><span class="s1"> completed!`;</span><span class="se">\n</span><span class="s1">            btn.disabled = false;</span><span class="se">\n</span><span class="s1">        } else if (d.status.startsWith(</span><span class="se">\&#39;</span><span class="s1">error</span><span class="se">\&#39;</span><span class="s1">)) {</span><span class="se">\n</span><span class="s1">            clearInterval(poll);</span><span class="se">\n</span><span class="s1">            status.className = </span><span class="se">\&#39;</span><span class="s1">status-error</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">            status.textContent = `Backtest $</span><span class="si">{runId}</span><span class="s1">: $</span><span class="si">{d.status}</span><span class="s1">`;</span><span class="se">\n</span><span class="s1">            btn.disabled = false;</span><span class="se">\n</span><span class="s1">        }</span><span class="se">\n</span><span class="s1">    }, 1000);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">document.addEventListener(</span><span class="se">\&#39;</span><span class="s1">DOMContentLoaded</span><span class="se">\&#39;</span><span class="s1">, () =&gt; {</span><span class="se">\n</span><span class="s1">    loadStrategies();</span><span class="se">\n</span><span class="s1">    loadBarPeriods();</span><span class="se">\n</span><span class="s1">    loadPresets();</span><span class="se">\n</span><span class="s1">});</span><span class="se">\n</span><span class="s1">&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.app.SECMASTER_STYLE" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">SECMASTER_STYLE</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">.stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px; }</span><span class="se">\n</span><span class="s1">.stat-card { background: #0d1117; border-radius: 8px; padding: 20px; }</span><span class="se">\n</span><span class="s1">.stat-card .label { font-size: 12px; color: #8b949e; text-transform: uppercase; letter-spacing: 0.5px; }</span><span class="se">\n</span><span class="s1">.stat-card .value { font-size: 28px; font-weight: 600; margin-top: 4px; }</span><span class="se">\n</span><span class="s1">.stat-card .sub { font-size: 12px; color: #8b949e; margin-top: 4px; }</span><span class="se">\n</span><span class="s1">.asset-table { width: 100%; border-collapse: collapse; }</span><span class="se">\n</span><span class="s1">.asset-table th, .asset-table td { padding: 12px; text-align: left; border-bottom: 1px solid #30363d; }</span><span class="se">\n</span><span class="s1">.asset-table th { font-size: 12px; color: #8b949e; text-transform: uppercase; font-weight: 500; }</span><span class="se">\n</span><span class="s1">.asset-table tr:hover { background: #21262d; }</span><span class="se">\n</span><span class="s1">.search-box { width: 100%; padding: 12px 16px; background: #0d1117; border: 1px solid #30363d; border-radius: 6px; color: #e6edf3; font-size: 14px; margin-bottom: 16px; }</span><span class="se">\n</span><span class="s1">.search-box:focus { outline: none; border-color: #58a6ff; }</span><span class="se">\n</span><span class="s1">.search-results { max-height: 400px; overflow-y: auto; }</span><span class="se">\n</span><span class="s1">.no-db { text-align: center; padding: 48px; color: #8b949e; }</span><span class="se">\n</span><span class="s1">.no-db code { background: #21262d; padding: 2px 6px; border-radius: 4px; }</span><span class="se">\n</span><span class="s1">.loading { display: flex; align-items: center; gap: 12px; color: #8b949e; padding: 24px; }</span><span class="se">\n</span><span class="s1">.spinner { width: 20px; height: 20px; border: 2px solid #30363d; border-top-color: #58a6ff; border-radius: 50%; animation: spin 0.8s linear infinite; }</span><span class="se">\n</span><span class="s1">@keyframes spin { to { transform: rotate(360deg); } }</span><span class="se">\n</span><span class="s1">&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.app.SECMASTER_SCRIPT" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">SECMASTER_SCRIPT</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">function showLoading(elementId, message) {</span><span class="se">\n</span><span class="s1">    document.getElementById(elementId).innerHTML = `&lt;div class=&quot;loading&quot;&gt;&lt;div class=&quot;spinner&quot;&gt;&lt;/div&gt;&lt;span&gt;$</span><span class="si">{message}</span><span class="s1">&lt;/span&gt;&lt;/div&gt;`;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function loadSummary() {</span><span class="se">\n</span><span class="s1">    showLoading(</span><span class="se">\&#39;</span><span class="s1">content</span><span class="se">\&#39;</span><span class="s1">, </span><span class="se">\&#39;</span><span class="s1">Loading database summary...</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const res = await fetch(</span><span class="se">\&#39;</span><span class="s1">/api/secmaster/summary</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const data = await res.json();</span><span class="se">\n\n</span><span class="s1">    if (!data.exists) {</span><span class="se">\n</span><span class="s1">        document.getElementById(</span><span class="se">\&#39;</span><span class="s1">content</span><span class="se">\&#39;</span><span class="s1">).innerHTML = `</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;no-db&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;p&gt;No securities master database found.&lt;/p&gt;</span><span class="se">\n</span><span class="s1">                &lt;p style=&quot;margin-top: 8px;&quot;&gt;Set &lt;code&gt;SECMASTER_DB_PATH&lt;/code&gt; environment variable or place &lt;code&gt;secmaster.db&lt;/code&gt; in the working directory.&lt;/p&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">        `;</span><span class="se">\n</span><span class="s1">        return;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n\n</span><span class="s1">    if (data.needs_reindex) {</span><span class="se">\n</span><span class="s1">        document.getElementById(</span><span class="se">\&#39;</span><span class="s1">content</span><span class="se">\&#39;</span><span class="s1">).innerHTML = `</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;no-db&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;p&gt;Database metadata not found.&lt;/p&gt;</span><span class="se">\n</span><span class="s1">                &lt;p style=&quot;margin-top: 8px;&quot;&gt;Run &lt;code&gt;from onesecondtrader.secmaster.utils import update_meta; update_meta(path)&lt;/code&gt; to rebuild stats.&lt;/p&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">        `;</span><span class="se">\n</span><span class="s1">        return;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n\n</span><span class="s1">    const minDate = new Date(data.min_ts / 1000000).toISOString().split(</span><span class="se">\&#39;</span><span class="s1">T</span><span class="se">\&#39;</span><span class="s1">)[0];</span><span class="se">\n</span><span class="s1">    const maxDate = new Date(data.max_ts / 1000000).toISOString().split(</span><span class="se">\&#39;</span><span class="s1">T</span><span class="se">\&#39;</span><span class="s1">)[0];</span><span class="se">\n\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">content</span><span class="se">\&#39;</span><span class="s1">).innerHTML = `</span><span class="se">\n</span><span class="s1">        &lt;div class=&quot;stats-grid&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;stat-card&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;label&quot;&gt;Symbols&lt;/div&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;value&quot;&gt;${data.symbol_count.toLocaleString()}&lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;stat-card&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;label&quot;&gt;OHLCV Records&lt;/div&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;value&quot;&gt;${data.ohlcv_record_count.toLocaleString()}&lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;stat-card&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;label&quot;&gt;Date Range&lt;/div&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;value&quot; style=&quot;font-size: 18px;&quot;&gt;$</span><span class="si">{minDate}</span><span class="s1">&lt;/div&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;sub&quot;&gt;to $</span><span class="si">{maxDate}</span><span class="s1">&lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;stat-card&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;label&quot;&gt;Schemas&lt;/div&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;value&quot; style=&quot;font-size: 18px;&quot;&gt;${data.schemas.join(</span><span class="se">\&#39;</span><span class="s1">, </span><span class="se">\&#39;</span><span class="s1">)}&lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;stat-card&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;label&quot;&gt;Database Size&lt;/div&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;value&quot;&gt;$</span><span class="si">{data.db_size_mb}</span><span class="s1"> MB&lt;/div&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;sub&quot;&gt;$</span><span class="si">{data.db_path}</span><span class="s1">&lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">        &lt;/div&gt;</span><span class="se">\n</span><span class="s1">        &lt;div class=&quot;card&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;h2&gt;Symbol Search&lt;/h2&gt;</span><span class="se">\n</span><span class="s1">            &lt;input type=&quot;text&quot; class=&quot;search-box&quot; id=&quot;search-input&quot; placeholder=&quot;Search symbols...&quot; oninput=&quot;searchSymbols()&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;div id=&quot;search-results&quot; class=&quot;search-results&quot;&gt;&lt;/div&gt;</span><span class="se">\n</span><span class="s1">        &lt;/div&gt;</span><span class="se">\n</span><span class="s1">    `;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">let searchTimeout;</span><span class="se">\n</span><span class="s1">async function searchSymbols() {</span><span class="se">\n</span><span class="s1">    const q = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">search-input</span><span class="se">\&#39;</span><span class="s1">).value;</span><span class="se">\n</span><span class="s1">    clearTimeout(searchTimeout);</span><span class="se">\n</span><span class="s1">    if (q.length &lt; 1) {</span><span class="se">\n</span><span class="s1">        document.getElementById(</span><span class="se">\&#39;</span><span class="s1">search-results</span><span class="se">\&#39;</span><span class="s1">).innerHTML = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        return;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    showLoading(</span><span class="se">\&#39;</span><span class="s1">search-results</span><span class="se">\&#39;</span><span class="s1">, </span><span class="se">\&#39;</span><span class="s1">Searching...</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    searchTimeout = setTimeout(async () =&gt; {</span><span class="se">\n</span><span class="s1">        const res = await fetch(</span><span class="se">\&#39;</span><span class="s1">/api/secmaster/search?q=</span><span class="se">\&#39;</span><span class="s1"> + encodeURIComponent(q));</span><span class="se">\n</span><span class="s1">        const data = await res.json();</span><span class="se">\n</span><span class="s1">        if (data.results.length === 0) {</span><span class="se">\n</span><span class="s1">            document.getElementById(</span><span class="se">\&#39;</span><span class="s1">search-results</span><span class="se">\&#39;</span><span class="s1">).innerHTML = </span><span class="se">\&#39;</span><span class="s1">&lt;p style=&quot;color: #8b949e;&quot;&gt;No results found.&lt;/p&gt;</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">            return;</span><span class="se">\n</span><span class="s1">        }</span><span class="se">\n</span><span class="s1">        let rows = data.results.map(r =&gt; {</span><span class="se">\n</span><span class="s1">            const minDate = r.min_ts ? new Date(r.min_ts / 1000000).toISOString().split(</span><span class="se">\&#39;</span><span class="s1">T</span><span class="se">\&#39;</span><span class="s1">)[0] : </span><span class="se">\&#39;</span><span class="s1">-</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">            const maxDate = r.max_ts ? new Date(r.max_ts / 1000000).toISOString().split(</span><span class="se">\&#39;</span><span class="s1">T</span><span class="se">\&#39;</span><span class="s1">)[0] : </span><span class="se">\&#39;</span><span class="s1">-</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">            return `&lt;tr&gt;</span><span class="se">\n</span><span class="s1">                &lt;td&gt;$</span><span class="si">{r.symbol}</span><span class="s1">&lt;/td&gt;</span><span class="se">\n</span><span class="s1">                &lt;td&gt;${r.schema || </span><span class="se">\&#39;</span><span class="s1">-</span><span class="se">\&#39;</span><span class="s1">}&lt;/td&gt;</span><span class="se">\n</span><span class="s1">                &lt;td&gt;$</span><span class="si">{minDate}</span><span class="s1"> → $</span><span class="si">{maxDate}</span><span class="s1">&lt;/td&gt;</span><span class="se">\n</span><span class="s1">                &lt;td&gt;${r.record_count ? r.record_count.toLocaleString() : </span><span class="se">\&#39;</span><span class="s1">-</span><span class="se">\&#39;</span><span class="s1">}&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;/tr&gt;`;</span><span class="se">\n</span><span class="s1">        }).join(</span><span class="se">\&#39;\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">        document.getElementById(</span><span class="se">\&#39;</span><span class="s1">search-results</span><span class="se">\&#39;</span><span class="s1">).innerHTML = `</span><span class="se">\n</span><span class="s1">            &lt;table class=&quot;asset-table&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;thead&gt;&lt;tr&gt;&lt;th&gt;Symbol&lt;/th&gt;&lt;th&gt;Schema&lt;/th&gt;&lt;th&gt;Date Range&lt;/th&gt;&lt;th&gt;Records&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;</span><span class="se">\n</span><span class="s1">                &lt;tbody&gt;$</span><span class="si">{rows}</span><span class="s1">&lt;/tbody&gt;</span><span class="se">\n</span><span class="s1">            &lt;/table&gt;</span><span class="se">\n</span><span class="s1">        `;</span><span class="se">\n</span><span class="s1">    }, 300);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">document.addEventListener(</span><span class="se">\&#39;</span><span class="s1">DOMContentLoaded</span><span class="se">\&#39;</span><span class="s1">, loadSummary);</span><span class="se">\n</span><span class="s1">&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>



<div class="doc doc-object doc-class">



<h2 id="onesecondtrader.dashboard.app.PresetRequest" class="doc doc-heading">
            <code>PresetRequest</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>









                  <details class="quote">
                <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
                <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1462">1462</a></span>
<span class="normal"><a href="#__codelineno-0-1463">1463</a></span>
<span class="normal"><a href="#__codelineno-0-1464">1464</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1462"><a id="__codelineno-0-1462" name="__codelineno-0-1462"></a><span class="k">class</span><span class="w"> </span><span class="nc">PresetRequest</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span><span id="__span-0-1463"><a id="__codelineno-0-1463" name="__codelineno-0-1463"></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-0-1464"><a id="__codelineno-0-1464" name="__codelineno-0-1464"></a>    <span class="n">symbols</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span></code></pre></div></td></tr></table></div>
              </details>




  <div class="doc doc-children">











  </div>


    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="onesecondtrader.dashboard.app.BacktestRequest" class="doc doc-heading">
            <code>BacktestRequest</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>









                  <details class="quote">
                <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
                <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1510">1510</a></span>
<span class="normal"><a href="#__codelineno-0-1511">1511</a></span>
<span class="normal"><a href="#__codelineno-0-1512">1512</a></span>
<span class="normal"><a href="#__codelineno-0-1513">1513</a></span>
<span class="normal"><a href="#__codelineno-0-1514">1514</a></span>
<span class="normal"><a href="#__codelineno-0-1515">1515</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1510"><a id="__codelineno-0-1510" name="__codelineno-0-1510"></a><span class="k">class</span><span class="w"> </span><span class="nc">BacktestRequest</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span><span id="__span-0-1511"><a id="__codelineno-0-1511" name="__codelineno-0-1511"></a>    <span class="n">strategy</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-0-1512"><a id="__codelineno-0-1512" name="__codelineno-0-1512"></a>    <span class="n">strategy_params</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="__span-0-1513"><a id="__codelineno-0-1513" name="__codelineno-0-1513"></a>    <span class="n">symbols</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span id="__span-0-1514"><a id="__codelineno-0-1514" name="__codelineno-0-1514"></a>    <span class="n">start_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-0-1515"><a id="__codelineno-0-1515" name="__codelineno-0-1515"></a>    <span class="n">end_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span></code></pre></div></td></tr></table></div>
              </details>




  <div class="doc doc-children">











  </div>


    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._normalize_bar_period" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_normalize_bar_period</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="k">def</span><span class="w"> </span><span class="nf">_normalize_bar_period</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39"></a>    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40"></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42"></a>        <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">BAR_PERIOD_TO_RTYPE</span><span class="p">:</span>
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43"></a>            <span class="k">return</span> <span class="n">value</span>
</span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45"></a>            <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46"></a>        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="__span-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47"></a>            <span class="k">return</span> <span class="n">value</span>
</span><span id="__span-0-48"><a id="__codelineno-0-48" name="__codelineno-0-48"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="__span-0-49"><a id="__codelineno-0-49" name="__codelineno-0-49"></a>        <span class="k">return</span> <span class="n">BAR_PERIOD_ENUM_TO_NAME</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</span><span id="__span-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50"></a>    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._get_secmaster_path" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_get_secmaster_path</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-53"><a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="k">def</span><span class="w"> </span><span class="nf">_get_secmaster_path</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="__span-0-54"><a id="__codelineno-0-54" name="__codelineno-0-54"></a>    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;SECMASTER_DB_PATH&quot;</span><span class="p">,</span> <span class="s2">&quot;secmaster.db&quot;</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._get_available_symbols" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_get_available_symbols</span><span class="p">(</span><span class="n">bar_period</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-57"><a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="k">def</span><span class="w"> </span><span class="nf">_get_available_symbols</span><span class="p">(</span><span class="n">bar_period</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="__span-0-58"><a id="__codelineno-0-58" name="__codelineno-0-58"></a>    <span class="n">db_path</span> <span class="o">=</span> <span class="n">_get_secmaster_path</span><span class="p">()</span>
</span><span id="__span-0-59"><a id="__codelineno-0-59" name="__codelineno-0-59"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">db_path</span><span class="p">):</span>
</span><span id="__span-0-60"><a id="__codelineno-0-60" name="__codelineno-0-60"></a>        <span class="k">return</span> <span class="p">[]</span>
</span><span id="__span-0-61"><a id="__codelineno-0-61" name="__codelineno-0-61"></a>
</span><span id="__span-0-62"><a id="__codelineno-0-62" name="__codelineno-0-62"></a>    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
</span><span id="__span-0-63"><a id="__codelineno-0-63" name="__codelineno-0-63"></a>    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-0-64"><a id="__codelineno-0-64" name="__codelineno-0-64"></a>    <span class="k">if</span> <span class="n">bar_period</span> <span class="ow">and</span> <span class="n">bar_period</span> <span class="ow">in</span> <span class="n">BAR_PERIOD_TO_RTYPE</span><span class="p">:</span>
</span><span id="__span-0-65"><a id="__codelineno-0-65" name="__codelineno-0-65"></a>        <span class="n">rtype</span> <span class="o">=</span> <span class="n">BAR_PERIOD_TO_RTYPE</span><span class="p">[</span><span class="n">bar_period</span><span class="p">]</span>
</span><span id="__span-0-66"><a id="__codelineno-0-66" name="__codelineno-0-66"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
</span><span id="__span-0-67"><a id="__codelineno-0-67" name="__codelineno-0-67"></a>            <span class="s2">&quot;SELECT DISTINCT symbol FROM symbol_coverage WHERE rtype = ? ORDER BY symbol&quot;</span><span class="p">,</span>
</span><span id="__span-0-68"><a id="__codelineno-0-68" name="__codelineno-0-68"></a>            <span class="p">(</span><span class="n">rtype</span><span class="p">,),</span>
</span><span id="__span-0-69"><a id="__codelineno-0-69" name="__codelineno-0-69"></a>        <span class="p">)</span>
</span><span id="__span-0-70"><a id="__codelineno-0-70" name="__codelineno-0-70"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-71"><a id="__codelineno-0-71" name="__codelineno-0-71"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT DISTINCT symbol FROM symbol_coverage ORDER BY symbol&quot;</span><span class="p">)</span>
</span><span id="__span-0-72"><a id="__codelineno-0-72" name="__codelineno-0-72"></a>    <span class="n">symbols</span> <span class="o">=</span> <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()]</span>
</span><span id="__span-0-73"><a id="__codelineno-0-73" name="__codelineno-0-73"></a>    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-0-74"><a id="__codelineno-0-74" name="__codelineno-0-74"></a>    <span class="k">return</span> <span class="n">symbols</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._get_symbols_with_coverage" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_get_symbols_with_coverage</span><span class="p">(</span><span class="n">bar_period</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-77">77</a></span>
<span class="normal"><a href="#__codelineno-0-78">78</a></span>
<span class="normal"><a href="#__codelineno-0-79">79</a></span>
<span class="normal"><a href="#__codelineno-0-80">80</a></span>
<span class="normal"><a href="#__codelineno-0-81">81</a></span>
<span class="normal"><a href="#__codelineno-0-82">82</a></span>
<span class="normal"><a href="#__codelineno-0-83">83</a></span>
<span class="normal"><a href="#__codelineno-0-84">84</a></span>
<span class="normal"><a href="#__codelineno-0-85">85</a></span>
<span class="normal"><a href="#__codelineno-0-86">86</a></span>
<span class="normal"><a href="#__codelineno-0-87">87</a></span>
<span class="normal"><a href="#__codelineno-0-88">88</a></span>
<span class="normal"><a href="#__codelineno-0-89">89</a></span>
<span class="normal"><a href="#__codelineno-0-90">90</a></span>
<span class="normal"><a href="#__codelineno-0-91">91</a></span>
<span class="normal"><a href="#__codelineno-0-92">92</a></span>
<span class="normal"><a href="#__codelineno-0-93">93</a></span>
<span class="normal"><a href="#__codelineno-0-94">94</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-77"><a id="__codelineno-0-77" name="__codelineno-0-77"></a><span class="k">def</span><span class="w"> </span><span class="nf">_get_symbols_with_coverage</span><span class="p">(</span><span class="n">bar_period</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
</span><span id="__span-0-78"><a id="__codelineno-0-78" name="__codelineno-0-78"></a>    <span class="n">db_path</span> <span class="o">=</span> <span class="n">_get_secmaster_path</span><span class="p">()</span>
</span><span id="__span-0-79"><a id="__codelineno-0-79" name="__codelineno-0-79"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span> <span class="ow">or</span> <span class="n">bar_period</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">BAR_PERIOD_TO_RTYPE</span><span class="p">:</span>
</span><span id="__span-0-80"><a id="__codelineno-0-80" name="__codelineno-0-80"></a>        <span class="k">return</span> <span class="p">[]</span>
</span><span id="__span-0-81"><a id="__codelineno-0-81" name="__codelineno-0-81"></a>
</span><span id="__span-0-82"><a id="__codelineno-0-82" name="__codelineno-0-82"></a>    <span class="n">rtype</span> <span class="o">=</span> <span class="n">BAR_PERIOD_TO_RTYPE</span><span class="p">[</span><span class="n">bar_period</span><span class="p">]</span>
</span><span id="__span-0-83"><a id="__codelineno-0-83" name="__codelineno-0-83"></a>    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
</span><span id="__span-0-84"><a id="__codelineno-0-84" name="__codelineno-0-84"></a>    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-0-85"><a id="__codelineno-0-85" name="__codelineno-0-85"></a>    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
</span><span id="__span-0-86"><a id="__codelineno-0-86" name="__codelineno-0-86"></a>        <span class="s2">&quot;SELECT symbol, min_ts, max_ts FROM symbol_coverage WHERE rtype = ? ORDER BY symbol&quot;</span><span class="p">,</span>
</span><span id="__span-0-87"><a id="__codelineno-0-87" name="__codelineno-0-87"></a>        <span class="p">(</span><span class="n">rtype</span><span class="p">,),</span>
</span><span id="__span-0-88"><a id="__codelineno-0-88" name="__codelineno-0-88"></a>    <span class="p">)</span>
</span><span id="__span-0-89"><a id="__codelineno-0-89" name="__codelineno-0-89"></a>    <span class="n">symbols</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-0-90"><a id="__codelineno-0-90" name="__codelineno-0-90"></a>        <span class="p">{</span><span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;min_ts&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;max_ts&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">]}</span>
</span><span id="__span-0-91"><a id="__codelineno-0-91" name="__codelineno-0-91"></a>        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
</span><span id="__span-0-92"><a id="__codelineno-0-92" name="__codelineno-0-92"></a>    <span class="p">]</span>
</span><span id="__span-0-93"><a id="__codelineno-0-93" name="__codelineno-0-93"></a>    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-0-94"><a id="__codelineno-0-94" name="__codelineno-0-94"></a>    <span class="k">return</span> <span class="n">symbols</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._get_available_bar_periods" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_get_available_bar_periods</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-97"><a id="__codelineno-0-97" name="__codelineno-0-97"></a><span class="k">def</span><span class="w"> </span><span class="nf">_get_available_bar_periods</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="__span-0-98"><a id="__codelineno-0-98" name="__codelineno-0-98"></a>    <span class="n">db_path</span> <span class="o">=</span> <span class="n">_get_secmaster_path</span><span class="p">()</span>
</span><span id="__span-0-99"><a id="__codelineno-0-99" name="__codelineno-0-99"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">db_path</span><span class="p">):</span>
</span><span id="__span-0-100"><a id="__codelineno-0-100" name="__codelineno-0-100"></a>        <span class="k">return</span> <span class="p">[]</span>
</span><span id="__span-0-101"><a id="__codelineno-0-101" name="__codelineno-0-101"></a>
</span><span id="__span-0-102"><a id="__codelineno-0-102" name="__codelineno-0-102"></a>    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
</span><span id="__span-0-103"><a id="__codelineno-0-103" name="__codelineno-0-103"></a>    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-0-104"><a id="__codelineno-0-104" name="__codelineno-0-104"></a>    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT DISTINCT rtype FROM symbol_coverage ORDER BY rtype&quot;</span><span class="p">)</span>
</span><span id="__span-0-105"><a id="__codelineno-0-105" name="__codelineno-0-105"></a>    <span class="n">periods</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-0-106"><a id="__codelineno-0-106" name="__codelineno-0-106"></a>        <span class="n">RTYPE_TO_BAR_PERIOD</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
</span><span id="__span-0-107"><a id="__codelineno-0-107" name="__codelineno-0-107"></a>        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
</span><span id="__span-0-108"><a id="__codelineno-0-108" name="__codelineno-0-108"></a>        <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">RTYPE_TO_BAR_PERIOD</span>
</span><span id="__span-0-109"><a id="__codelineno-0-109" name="__codelineno-0-109"></a>    <span class="p">]</span>
</span><span id="__span-0-110"><a id="__codelineno-0-110" name="__codelineno-0-110"></a>    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-0-111"><a id="__codelineno-0-111" name="__codelineno-0-111"></a>    <span class="k">return</span> <span class="n">periods</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.index" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">index</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span>
<span class="normal"><a href="#__codelineno-0-310">310</a></span>
<span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-297"><a id="__codelineno-0-297" name="__codelineno-0-297"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">HTMLResponse</span><span class="p">)</span>
</span><span id="__span-0-298"><a id="__codelineno-0-298" name="__codelineno-0-298"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">index</span><span class="p">():</span>
</span><span id="__span-0-299"><a id="__codelineno-0-299" name="__codelineno-0-299"></a>    <span class="n">sidebar</span> <span class="o">=</span> <span class="n">SIDEBAR_HTML</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="__span-0-300"><a id="__codelineno-0-300" name="__codelineno-0-300"></a>        <span class="n">runs_active</span><span class="o">=</span><span class="s2">&quot;active&quot;</span><span class="p">,</span> <span class="n">backtest_active</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">secmaster_active</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span id="__span-0-301"><a id="__codelineno-0-301" name="__codelineno-0-301"></a>    <span class="p">)</span>
</span><span id="__span-0-302"><a id="__codelineno-0-302" name="__codelineno-0-302"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-0-303"><a id="__codelineno-0-303" name="__codelineno-0-303"></a><span class="s2">    &lt;!DOCTYPE html&gt;</span>
</span><span id="__span-0-304"><a id="__codelineno-0-304" name="__codelineno-0-304"></a><span class="s2">    &lt;html&gt;</span>
</span><span id="__span-0-305"><a id="__codelineno-0-305" name="__codelineno-0-305"></a><span class="s2">    &lt;head&gt;</span>
</span><span id="__span-0-306"><a id="__codelineno-0-306" name="__codelineno-0-306"></a><span class="s2">        &lt;title&gt;OneSecondTrader Dashboard&lt;/title&gt;</span>
</span><span id="__span-0-307"><a id="__codelineno-0-307" name="__codelineno-0-307"></a><span class="s2">        &lt;style&gt;</span><span class="si">{</span><span class="n">BASE_STYLE</span><span class="si">}{</span><span class="n">RUNS_STYLE</span><span class="si">}</span><span class="s2">&lt;/style&gt;</span>
</span><span id="__span-0-308"><a id="__codelineno-0-308" name="__codelineno-0-308"></a><span class="s2">    &lt;/head&gt;</span>
</span><span id="__span-0-309"><a id="__codelineno-0-309" name="__codelineno-0-309"></a><span class="s2">    &lt;body&gt;</span>
</span><span id="__span-0-310"><a id="__codelineno-0-310" name="__codelineno-0-310"></a><span class="s2">        </span><span class="si">{</span><span class="n">sidebar</span><span class="si">}</span>
</span><span id="__span-0-311"><a id="__codelineno-0-311" name="__codelineno-0-311"></a><span class="s2">        &lt;main class=&quot;main-content&quot;&gt;</span>
</span><span id="__span-0-312"><a id="__codelineno-0-312" name="__codelineno-0-312"></a><span class="s2">            &lt;div class=&quot;container&quot;&gt;</span>
</span><span id="__span-0-313"><a id="__codelineno-0-313" name="__codelineno-0-313"></a><span class="s2">                &lt;div class=&quot;card&quot;&gt;</span>
</span><span id="__span-0-314"><a id="__codelineno-0-314" name="__codelineno-0-314"></a><span class="s2">                    &lt;h2&gt;Recent Runs&lt;/h2&gt;</span>
</span><span id="__span-0-315"><a id="__codelineno-0-315" name="__codelineno-0-315"></a><span class="s2">                    &lt;div id=&quot;runs-content&quot;&gt;</span>
</span><span id="__span-0-316"><a id="__codelineno-0-316" name="__codelineno-0-316"></a><span class="s2">                        &lt;p style=&quot;color: #8b949e;&quot;&gt;Loading...&lt;/p&gt;</span>
</span><span id="__span-0-317"><a id="__codelineno-0-317" name="__codelineno-0-317"></a><span class="s2">                    &lt;/div&gt;</span>
</span><span id="__span-0-318"><a id="__codelineno-0-318" name="__codelineno-0-318"></a><span class="s2">                &lt;/div&gt;</span>
</span><span id="__span-0-319"><a id="__codelineno-0-319" name="__codelineno-0-319"></a><span class="s2">            &lt;/div&gt;</span>
</span><span id="__span-0-320"><a id="__codelineno-0-320" name="__codelineno-0-320"></a><span class="s2">        &lt;/main&gt;</span>
</span><span id="__span-0-321"><a id="__codelineno-0-321" name="__codelineno-0-321"></a><span class="s2">        &lt;script&gt;</span><span class="si">{</span><span class="n">RUNS_SCRIPT</span><span class="si">}</span><span class="s2">&lt;/script&gt;</span>
</span><span id="__span-0-322"><a id="__codelineno-0-322" name="__codelineno-0-322"></a><span class="s2">    &lt;/body&gt;</span>
</span><span id="__span-0-323"><a id="__codelineno-0-323" name="__codelineno-0-323"></a><span class="s2">    &lt;/html&gt;</span>
</span><span id="__span-0-324"><a id="__codelineno-0-324" name="__codelineno-0-324"></a><span class="s2">    &quot;&quot;&quot;</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.run_detail_page" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run_detail_page</span><span class="p">(</span><span class="n">run_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-568">568</a></span>
<span class="normal"><a href="#__codelineno-0-569">569</a></span>
<span class="normal"><a href="#__codelineno-0-570">570</a></span>
<span class="normal"><a href="#__codelineno-0-571">571</a></span>
<span class="normal"><a href="#__codelineno-0-572">572</a></span>
<span class="normal"><a href="#__codelineno-0-573">573</a></span>
<span class="normal"><a href="#__codelineno-0-574">574</a></span>
<span class="normal"><a href="#__codelineno-0-575">575</a></span>
<span class="normal"><a href="#__codelineno-0-576">576</a></span>
<span class="normal"><a href="#__codelineno-0-577">577</a></span>
<span class="normal"><a href="#__codelineno-0-578">578</a></span>
<span class="normal"><a href="#__codelineno-0-579">579</a></span>
<span class="normal"><a href="#__codelineno-0-580">580</a></span>
<span class="normal"><a href="#__codelineno-0-581">581</a></span>
<span class="normal"><a href="#__codelineno-0-582">582</a></span>
<span class="normal"><a href="#__codelineno-0-583">583</a></span>
<span class="normal"><a href="#__codelineno-0-584">584</a></span>
<span class="normal"><a href="#__codelineno-0-585">585</a></span>
<span class="normal"><a href="#__codelineno-0-586">586</a></span>
<span class="normal"><a href="#__codelineno-0-587">587</a></span>
<span class="normal"><a href="#__codelineno-0-588">588</a></span>
<span class="normal"><a href="#__codelineno-0-589">589</a></span>
<span class="normal"><a href="#__codelineno-0-590">590</a></span>
<span class="normal"><a href="#__codelineno-0-591">591</a></span>
<span class="normal"><a href="#__codelineno-0-592">592</a></span>
<span class="normal"><a href="#__codelineno-0-593">593</a></span>
<span class="normal"><a href="#__codelineno-0-594">594</a></span>
<span class="normal"><a href="#__codelineno-0-595">595</a></span>
<span class="normal"><a href="#__codelineno-0-596">596</a></span>
<span class="normal"><a href="#__codelineno-0-597">597</a></span>
<span class="normal"><a href="#__codelineno-0-598">598</a></span>
<span class="normal"><a href="#__codelineno-0-599">599</a></span>
<span class="normal"><a href="#__codelineno-0-600">600</a></span>
<span class="normal"><a href="#__codelineno-0-601">601</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-568"><a id="__codelineno-0-568" name="__codelineno-0-568"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/run/</span><span class="si">{run_id}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">HTMLResponse</span><span class="p">)</span>
</span><span id="__span-0-569"><a id="__codelineno-0-569" name="__codelineno-0-569"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run_detail_page</span><span class="p">(</span><span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="__span-0-570"><a id="__codelineno-0-570" name="__codelineno-0-570"></a>    <span class="n">sidebar</span> <span class="o">=</span> <span class="n">SIDEBAR_HTML</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="__span-0-571"><a id="__codelineno-0-571" name="__codelineno-0-571"></a>        <span class="n">runs_active</span><span class="o">=</span><span class="s2">&quot;active&quot;</span><span class="p">,</span> <span class="n">backtest_active</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">secmaster_active</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span id="__span-0-572"><a id="__codelineno-0-572" name="__codelineno-0-572"></a>    <span class="p">)</span>
</span><span id="__span-0-573"><a id="__codelineno-0-573" name="__codelineno-0-573"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-0-574"><a id="__codelineno-0-574" name="__codelineno-0-574"></a><span class="s2">    &lt;!DOCTYPE html&gt;</span>
</span><span id="__span-0-575"><a id="__codelineno-0-575" name="__codelineno-0-575"></a><span class="s2">    &lt;html&gt;</span>
</span><span id="__span-0-576"><a id="__codelineno-0-576" name="__codelineno-0-576"></a><span class="s2">    &lt;head&gt;</span>
</span><span id="__span-0-577"><a id="__codelineno-0-577" name="__codelineno-0-577"></a><span class="s2">        &lt;title&gt;Run Detail - OneSecondTrader&lt;/title&gt;</span>
</span><span id="__span-0-578"><a id="__codelineno-0-578" name="__codelineno-0-578"></a><span class="s2">        &lt;style&gt;</span><span class="si">{</span><span class="n">BASE_STYLE</span><span class="si">}{</span><span class="n">RUN_DETAIL_STYLE</span><span class="si">}</span><span class="s2">&lt;/style&gt;</span>
</span><span id="__span-0-579"><a id="__codelineno-0-579" name="__codelineno-0-579"></a><span class="s2">    &lt;/head&gt;</span>
</span><span id="__span-0-580"><a id="__codelineno-0-580" name="__codelineno-0-580"></a><span class="s2">    &lt;body&gt;</span>
</span><span id="__span-0-581"><a id="__codelineno-0-581" name="__codelineno-0-581"></a><span class="s2">        </span><span class="si">{</span><span class="n">sidebar</span><span class="si">}</span>
</span><span id="__span-0-582"><a id="__codelineno-0-582" name="__codelineno-0-582"></a><span class="s2">        &lt;main class=&quot;main-content&quot;&gt;</span>
</span><span id="__span-0-583"><a id="__codelineno-0-583" name="__codelineno-0-583"></a><span class="s2">            &lt;div class=&quot;container&quot;&gt;</span>
</span><span id="__span-0-584"><a id="__codelineno-0-584" name="__codelineno-0-584"></a><span class="s2">                &lt;div id=&quot;run-content&quot;&gt;</span>
</span><span id="__span-0-585"><a id="__codelineno-0-585" name="__codelineno-0-585"></a><span class="s2">                    &lt;p style=&quot;color: #8b949e;&quot;&gt;Loading...&lt;/p&gt;</span>
</span><span id="__span-0-586"><a id="__codelineno-0-586" name="__codelineno-0-586"></a><span class="s2">                &lt;/div&gt;</span>
</span><span id="__span-0-587"><a id="__codelineno-0-587" name="__codelineno-0-587"></a><span class="s2">            &lt;/div&gt;</span>
</span><span id="__span-0-588"><a id="__codelineno-0-588" name="__codelineno-0-588"></a><span class="s2">        &lt;/main&gt;</span>
</span><span id="__span-0-589"><a id="__codelineno-0-589" name="__codelineno-0-589"></a><span class="s2">        &lt;div id=&quot;chart-modal&quot; class=&quot;chart-modal&quot; onclick=&quot;if(event.target===this)closeChartModal()&quot;&gt;</span>
</span><span id="__span-0-590"><a id="__codelineno-0-590" name="__codelineno-0-590"></a><span class="s2">            &lt;div class=&quot;chart-modal-content&quot;&gt;</span>
</span><span id="__span-0-591"><a id="__codelineno-0-591" name="__codelineno-0-591"></a><span class="s2">                &lt;div class=&quot;chart-modal-header&quot;&gt;</span>
</span><span id="__span-0-592"><a id="__codelineno-0-592" name="__codelineno-0-592"></a><span class="s2">                    &lt;h3 id=&quot;chart-modal-title&quot;&gt;Position Chart&lt;/h3&gt;</span>
</span><span id="__span-0-593"><a id="__codelineno-0-593" name="__codelineno-0-593"></a><span class="s2">                    &lt;button class=&quot;chart-modal-close&quot; onclick=&quot;closeChartModal()&quot;&gt;&amp;times;&lt;/button&gt;</span>
</span><span id="__span-0-594"><a id="__codelineno-0-594" name="__codelineno-0-594"></a><span class="s2">                &lt;/div&gt;</span>
</span><span id="__span-0-595"><a id="__codelineno-0-595" name="__codelineno-0-595"></a><span class="s2">                &lt;div id=&quot;chart-modal-body&quot; class=&quot;chart-modal-body&quot;&gt;&lt;/div&gt;</span>
</span><span id="__span-0-596"><a id="__codelineno-0-596" name="__codelineno-0-596"></a><span class="s2">            &lt;/div&gt;</span>
</span><span id="__span-0-597"><a id="__codelineno-0-597" name="__codelineno-0-597"></a><span class="s2">        &lt;/div&gt;</span>
</span><span id="__span-0-598"><a id="__codelineno-0-598" name="__codelineno-0-598"></a><span class="s2">        &lt;script&gt;</span><span class="si">{</span><span class="n">RUN_DETAIL_SCRIPT</span><span class="si">}</span><span class="s2">&lt;/script&gt;</span>
</span><span id="__span-0-599"><a id="__codelineno-0-599" name="__codelineno-0-599"></a><span class="s2">    &lt;/body&gt;</span>
</span><span id="__span-0-600"><a id="__codelineno-0-600" name="__codelineno-0-600"></a><span class="s2">    &lt;/html&gt;</span>
</span><span id="__span-0-601"><a id="__codelineno-0-601" name="__codelineno-0-601"></a><span class="s2">    &quot;&quot;&quot;</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._get_runs_db_path" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_get_runs_db_path</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-604">604</a></span>
<span class="normal"><a href="#__codelineno-0-605">605</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-604"><a id="__codelineno-0-604" name="__codelineno-0-604"></a><span class="k">def</span><span class="w"> </span><span class="nf">_get_runs_db_path</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="__span-0-605"><a id="__codelineno-0-605" name="__codelineno-0-605"></a>    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;RUNS_DB_PATH&quot;</span><span class="p">,</span> <span class="s2">&quot;runs.db&quot;</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._get_recent_runs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_get_recent_runs</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-608">608</a></span>
<span class="normal"><a href="#__codelineno-0-609">609</a></span>
<span class="normal"><a href="#__codelineno-0-610">610</a></span>
<span class="normal"><a href="#__codelineno-0-611">611</a></span>
<span class="normal"><a href="#__codelineno-0-612">612</a></span>
<span class="normal"><a href="#__codelineno-0-613">613</a></span>
<span class="normal"><a href="#__codelineno-0-614">614</a></span>
<span class="normal"><a href="#__codelineno-0-615">615</a></span>
<span class="normal"><a href="#__codelineno-0-616">616</a></span>
<span class="normal"><a href="#__codelineno-0-617">617</a></span>
<span class="normal"><a href="#__codelineno-0-618">618</a></span>
<span class="normal"><a href="#__codelineno-0-619">619</a></span>
<span class="normal"><a href="#__codelineno-0-620">620</a></span>
<span class="normal"><a href="#__codelineno-0-621">621</a></span>
<span class="normal"><a href="#__codelineno-0-622">622</a></span>
<span class="normal"><a href="#__codelineno-0-623">623</a></span>
<span class="normal"><a href="#__codelineno-0-624">624</a></span>
<span class="normal"><a href="#__codelineno-0-625">625</a></span>
<span class="normal"><a href="#__codelineno-0-626">626</a></span>
<span class="normal"><a href="#__codelineno-0-627">627</a></span>
<span class="normal"><a href="#__codelineno-0-628">628</a></span>
<span class="normal"><a href="#__codelineno-0-629">629</a></span>
<span class="normal"><a href="#__codelineno-0-630">630</a></span>
<span class="normal"><a href="#__codelineno-0-631">631</a></span>
<span class="normal"><a href="#__codelineno-0-632">632</a></span>
<span class="normal"><a href="#__codelineno-0-633">633</a></span>
<span class="normal"><a href="#__codelineno-0-634">634</a></span>
<span class="normal"><a href="#__codelineno-0-635">635</a></span>
<span class="normal"><a href="#__codelineno-0-636">636</a></span>
<span class="normal"><a href="#__codelineno-0-637">637</a></span>
<span class="normal"><a href="#__codelineno-0-638">638</a></span>
<span class="normal"><a href="#__codelineno-0-639">639</a></span>
<span class="normal"><a href="#__codelineno-0-640">640</a></span>
<span class="normal"><a href="#__codelineno-0-641">641</a></span>
<span class="normal"><a href="#__codelineno-0-642">642</a></span>
<span class="normal"><a href="#__codelineno-0-643">643</a></span>
<span class="normal"><a href="#__codelineno-0-644">644</a></span>
<span class="normal"><a href="#__codelineno-0-645">645</a></span>
<span class="normal"><a href="#__codelineno-0-646">646</a></span>
<span class="normal"><a href="#__codelineno-0-647">647</a></span>
<span class="normal"><a href="#__codelineno-0-648">648</a></span>
<span class="normal"><a href="#__codelineno-0-649">649</a></span>
<span class="normal"><a href="#__codelineno-0-650">650</a></span>
<span class="normal"><a href="#__codelineno-0-651">651</a></span>
<span class="normal"><a href="#__codelineno-0-652">652</a></span>
<span class="normal"><a href="#__codelineno-0-653">653</a></span>
<span class="normal"><a href="#__codelineno-0-654">654</a></span>
<span class="normal"><a href="#__codelineno-0-655">655</a></span>
<span class="normal"><a href="#__codelineno-0-656">656</a></span>
<span class="normal"><a href="#__codelineno-0-657">657</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-608"><a id="__codelineno-0-608" name="__codelineno-0-608"></a><span class="k">def</span><span class="w"> </span><span class="nf">_get_recent_runs</span><span class="p">(</span><span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">50</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
</span><span id="__span-0-609"><a id="__codelineno-0-609" name="__codelineno-0-609"></a>    <span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
</span><span id="__span-0-610"><a id="__codelineno-0-610" name="__codelineno-0-610"></a>
</span><span id="__span-0-611"><a id="__codelineno-0-611" name="__codelineno-0-611"></a>    <span class="n">db_path</span> <span class="o">=</span> <span class="n">_get_runs_db_path</span><span class="p">()</span>
</span><span id="__span-0-612"><a id="__codelineno-0-612" name="__codelineno-0-612"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">db_path</span><span class="p">):</span>
</span><span id="__span-0-613"><a id="__codelineno-0-613" name="__codelineno-0-613"></a>        <span class="k">return</span> <span class="p">[]</span>
</span><span id="__span-0-614"><a id="__codelineno-0-614" name="__codelineno-0-614"></a>
</span><span id="__span-0-615"><a id="__codelineno-0-615" name="__codelineno-0-615"></a>    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
</span><span id="__span-0-616"><a id="__codelineno-0-616" name="__codelineno-0-616"></a>    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-0-617"><a id="__codelineno-0-617" name="__codelineno-0-617"></a>    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
</span><span id="__span-0-618"><a id="__codelineno-0-618" name="__codelineno-0-618"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-619"><a id="__codelineno-0-619" name="__codelineno-0-619"></a><span class="sd">        SELECT</span>
</span><span id="__span-0-620"><a id="__codelineno-0-620" name="__codelineno-0-620"></a><span class="sd">            r.run_id,</span>
</span><span id="__span-0-621"><a id="__codelineno-0-621" name="__codelineno-0-621"></a><span class="sd">            r.strategy,</span>
</span><span id="__span-0-622"><a id="__codelineno-0-622" name="__codelineno-0-622"></a><span class="sd">            r.symbols,</span>
</span><span id="__span-0-623"><a id="__codelineno-0-623" name="__codelineno-0-623"></a><span class="sd">            r.bar_period,</span>
</span><span id="__span-0-624"><a id="__codelineno-0-624" name="__codelineno-0-624"></a><span class="sd">            r.mode,</span>
</span><span id="__span-0-625"><a id="__codelineno-0-625" name="__codelineno-0-625"></a><span class="sd">            r.status,</span>
</span><span id="__span-0-626"><a id="__codelineno-0-626" name="__codelineno-0-626"></a><span class="sd">            r.created_at,</span>
</span><span id="__span-0-627"><a id="__codelineno-0-627" name="__codelineno-0-627"></a><span class="sd">            r.completed_at,</span>
</span><span id="__span-0-628"><a id="__codelineno-0-628" name="__codelineno-0-628"></a><span class="sd">            COUNT(b.id) as bar_count,</span>
</span><span id="__span-0-629"><a id="__codelineno-0-629" name="__codelineno-0-629"></a><span class="sd">            MIN(b.ts_event) as first_bar,</span>
</span><span id="__span-0-630"><a id="__codelineno-0-630" name="__codelineno-0-630"></a><span class="sd">            MAX(b.ts_event) as last_bar</span>
</span><span id="__span-0-631"><a id="__codelineno-0-631" name="__codelineno-0-631"></a><span class="sd">        FROM runs r</span>
</span><span id="__span-0-632"><a id="__codelineno-0-632" name="__codelineno-0-632"></a><span class="sd">        LEFT JOIN bars b ON r.run_id = b.run_id</span>
</span><span id="__span-0-633"><a id="__codelineno-0-633" name="__codelineno-0-633"></a><span class="sd">        GROUP BY r.run_id</span>
</span><span id="__span-0-634"><a id="__codelineno-0-634" name="__codelineno-0-634"></a><span class="sd">        ORDER BY r.created_at DESC</span>
</span><span id="__span-0-635"><a id="__codelineno-0-635" name="__codelineno-0-635"></a><span class="sd">        LIMIT ?</span>
</span><span id="__span-0-636"><a id="__codelineno-0-636" name="__codelineno-0-636"></a><span class="sd">        &quot;&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-0-637"><a id="__codelineno-0-637" name="__codelineno-0-637"></a>        <span class="p">(</span><span class="n">limit</span><span class="p">,),</span>
</span><span id="__span-0-638"><a id="__codelineno-0-638" name="__codelineno-0-638"></a>    <span class="p">)</span>
</span><span id="__span-0-639"><a id="__codelineno-0-639" name="__codelineno-0-639"></a>    <span class="n">runs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-640"><a id="__codelineno-0-640" name="__codelineno-0-640"></a>    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span>
</span><span id="__span-0-641"><a id="__codelineno-0-641" name="__codelineno-0-641"></a>        <span class="n">runs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="__span-0-642"><a id="__codelineno-0-642" name="__codelineno-0-642"></a>            <span class="p">{</span>
</span><span id="__span-0-643"><a id="__codelineno-0-643" name="__codelineno-0-643"></a>                <span class="s2">&quot;run_id&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="__span-0-644"><a id="__codelineno-0-644" name="__codelineno-0-644"></a>                <span class="s2">&quot;strategy&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="__span-0-645"><a id="__codelineno-0-645" name="__codelineno-0-645"></a>                <span class="s2">&quot;symbols&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="k">else</span> <span class="p">[],</span>
</span><span id="__span-0-646"><a id="__codelineno-0-646" name="__codelineno-0-646"></a>                <span class="s2">&quot;bar_period&quot;</span><span class="p">:</span> <span class="n">_normalize_bar_period</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]),</span>
</span><span id="__span-0-647"><a id="__codelineno-0-647" name="__codelineno-0-647"></a>                <span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
</span><span id="__span-0-648"><a id="__codelineno-0-648" name="__codelineno-0-648"></a>                <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span>
</span><span id="__span-0-649"><a id="__codelineno-0-649" name="__codelineno-0-649"></a>                <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span>
</span><span id="__span-0-650"><a id="__codelineno-0-650" name="__codelineno-0-650"></a>                <span class="s2">&quot;completed_at&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">7</span><span class="p">],</span>
</span><span id="__span-0-651"><a id="__codelineno-0-651" name="__codelineno-0-651"></a>                <span class="s2">&quot;bar_count&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span>
</span><span id="__span-0-652"><a id="__codelineno-0-652" name="__codelineno-0-652"></a>                <span class="s2">&quot;first_bar&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span>
</span><span id="__span-0-653"><a id="__codelineno-0-653" name="__codelineno-0-653"></a>                <span class="s2">&quot;last_bar&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span>
</span><span id="__span-0-654"><a id="__codelineno-0-654" name="__codelineno-0-654"></a>            <span class="p">}</span>
</span><span id="__span-0-655"><a id="__codelineno-0-655" name="__codelineno-0-655"></a>        <span class="p">)</span>
</span><span id="__span-0-656"><a id="__codelineno-0-656" name="__codelineno-0-656"></a>    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-0-657"><a id="__codelineno-0-657" name="__codelineno-0-657"></a>    <span class="k">return</span> <span class="n">runs</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.list_runs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_runs</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-660">660</a></span>
<span class="normal"><a href="#__codelineno-0-661">661</a></span>
<span class="normal"><a href="#__codelineno-0-662">662</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-660"><a id="__codelineno-0-660" name="__codelineno-0-660"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/runs&quot;</span><span class="p">)</span>
</span><span id="__span-0-661"><a id="__codelineno-0-661" name="__codelineno-0-661"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">list_runs</span><span class="p">(</span><span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">50</span><span class="p">):</span>
</span><span id="__span-0-662"><a id="__codelineno-0-662" name="__codelineno-0-662"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;runs&quot;</span><span class="p">:</span> <span class="n">_get_recent_runs</span><span class="p">(</span><span class="n">limit</span><span class="p">)}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._get_run_by_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_get_run_by_id</span><span class="p">(</span><span class="n">run_id</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-665">665</a></span>
<span class="normal"><a href="#__codelineno-0-666">666</a></span>
<span class="normal"><a href="#__codelineno-0-667">667</a></span>
<span class="normal"><a href="#__codelineno-0-668">668</a></span>
<span class="normal"><a href="#__codelineno-0-669">669</a></span>
<span class="normal"><a href="#__codelineno-0-670">670</a></span>
<span class="normal"><a href="#__codelineno-0-671">671</a></span>
<span class="normal"><a href="#__codelineno-0-672">672</a></span>
<span class="normal"><a href="#__codelineno-0-673">673</a></span>
<span class="normal"><a href="#__codelineno-0-674">674</a></span>
<span class="normal"><a href="#__codelineno-0-675">675</a></span>
<span class="normal"><a href="#__codelineno-0-676">676</a></span>
<span class="normal"><a href="#__codelineno-0-677">677</a></span>
<span class="normal"><a href="#__codelineno-0-678">678</a></span>
<span class="normal"><a href="#__codelineno-0-679">679</a></span>
<span class="normal"><a href="#__codelineno-0-680">680</a></span>
<span class="normal"><a href="#__codelineno-0-681">681</a></span>
<span class="normal"><a href="#__codelineno-0-682">682</a></span>
<span class="normal"><a href="#__codelineno-0-683">683</a></span>
<span class="normal"><a href="#__codelineno-0-684">684</a></span>
<span class="normal"><a href="#__codelineno-0-685">685</a></span>
<span class="normal"><a href="#__codelineno-0-686">686</a></span>
<span class="normal"><a href="#__codelineno-0-687">687</a></span>
<span class="normal"><a href="#__codelineno-0-688">688</a></span>
<span class="normal"><a href="#__codelineno-0-689">689</a></span>
<span class="normal"><a href="#__codelineno-0-690">690</a></span>
<span class="normal"><a href="#__codelineno-0-691">691</a></span>
<span class="normal"><a href="#__codelineno-0-692">692</a></span>
<span class="normal"><a href="#__codelineno-0-693">693</a></span>
<span class="normal"><a href="#__codelineno-0-694">694</a></span>
<span class="normal"><a href="#__codelineno-0-695">695</a></span>
<span class="normal"><a href="#__codelineno-0-696">696</a></span>
<span class="normal"><a href="#__codelineno-0-697">697</a></span>
<span class="normal"><a href="#__codelineno-0-698">698</a></span>
<span class="normal"><a href="#__codelineno-0-699">699</a></span>
<span class="normal"><a href="#__codelineno-0-700">700</a></span>
<span class="normal"><a href="#__codelineno-0-701">701</a></span>
<span class="normal"><a href="#__codelineno-0-702">702</a></span>
<span class="normal"><a href="#__codelineno-0-703">703</a></span>
<span class="normal"><a href="#__codelineno-0-704">704</a></span>
<span class="normal"><a href="#__codelineno-0-705">705</a></span>
<span class="normal"><a href="#__codelineno-0-706">706</a></span>
<span class="normal"><a href="#__codelineno-0-707">707</a></span>
<span class="normal"><a href="#__codelineno-0-708">708</a></span>
<span class="normal"><a href="#__codelineno-0-709">709</a></span>
<span class="normal"><a href="#__codelineno-0-710">710</a></span>
<span class="normal"><a href="#__codelineno-0-711">711</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-665"><a id="__codelineno-0-665" name="__codelineno-0-665"></a><span class="k">def</span><span class="w"> </span><span class="nf">_get_run_by_id</span><span class="p">(</span><span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-666"><a id="__codelineno-0-666" name="__codelineno-0-666"></a>    <span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
</span><span id="__span-0-667"><a id="__codelineno-0-667" name="__codelineno-0-667"></a>
</span><span id="__span-0-668"><a id="__codelineno-0-668" name="__codelineno-0-668"></a>    <span class="n">db_path</span> <span class="o">=</span> <span class="n">_get_runs_db_path</span><span class="p">()</span>
</span><span id="__span-0-669"><a id="__codelineno-0-669" name="__codelineno-0-669"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">db_path</span><span class="p">):</span>
</span><span id="__span-0-670"><a id="__codelineno-0-670" name="__codelineno-0-670"></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="__span-0-671"><a id="__codelineno-0-671" name="__codelineno-0-671"></a>
</span><span id="__span-0-672"><a id="__codelineno-0-672" name="__codelineno-0-672"></a>    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
</span><span id="__span-0-673"><a id="__codelineno-0-673" name="__codelineno-0-673"></a>    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-0-674"><a id="__codelineno-0-674" name="__codelineno-0-674"></a>    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
</span><span id="__span-0-675"><a id="__codelineno-0-675" name="__codelineno-0-675"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-676"><a id="__codelineno-0-676" name="__codelineno-0-676"></a><span class="sd">        SELECT</span>
</span><span id="__span-0-677"><a id="__codelineno-0-677" name="__codelineno-0-677"></a><span class="sd">            r.run_id,</span>
</span><span id="__span-0-678"><a id="__codelineno-0-678" name="__codelineno-0-678"></a><span class="sd">            r.strategy,</span>
</span><span id="__span-0-679"><a id="__codelineno-0-679" name="__codelineno-0-679"></a><span class="sd">            r.symbols,</span>
</span><span id="__span-0-680"><a id="__codelineno-0-680" name="__codelineno-0-680"></a><span class="sd">            r.bar_period,</span>
</span><span id="__span-0-681"><a id="__codelineno-0-681" name="__codelineno-0-681"></a><span class="sd">            r.mode,</span>
</span><span id="__span-0-682"><a id="__codelineno-0-682" name="__codelineno-0-682"></a><span class="sd">            r.status,</span>
</span><span id="__span-0-683"><a id="__codelineno-0-683" name="__codelineno-0-683"></a><span class="sd">            r.created_at,</span>
</span><span id="__span-0-684"><a id="__codelineno-0-684" name="__codelineno-0-684"></a><span class="sd">            r.completed_at,</span>
</span><span id="__span-0-685"><a id="__codelineno-0-685" name="__codelineno-0-685"></a><span class="sd">            COUNT(b.id) as bar_count,</span>
</span><span id="__span-0-686"><a id="__codelineno-0-686" name="__codelineno-0-686"></a><span class="sd">            MIN(b.ts_event) as first_bar,</span>
</span><span id="__span-0-687"><a id="__codelineno-0-687" name="__codelineno-0-687"></a><span class="sd">            MAX(b.ts_event) as last_bar</span>
</span><span id="__span-0-688"><a id="__codelineno-0-688" name="__codelineno-0-688"></a><span class="sd">        FROM runs r</span>
</span><span id="__span-0-689"><a id="__codelineno-0-689" name="__codelineno-0-689"></a><span class="sd">        LEFT JOIN bars b ON r.run_id = b.run_id</span>
</span><span id="__span-0-690"><a id="__codelineno-0-690" name="__codelineno-0-690"></a><span class="sd">        WHERE r.run_id = ?</span>
</span><span id="__span-0-691"><a id="__codelineno-0-691" name="__codelineno-0-691"></a><span class="sd">        GROUP BY r.run_id</span>
</span><span id="__span-0-692"><a id="__codelineno-0-692" name="__codelineno-0-692"></a><span class="sd">        &quot;&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-0-693"><a id="__codelineno-0-693" name="__codelineno-0-693"></a>        <span class="p">(</span><span class="n">run_id</span><span class="p">,),</span>
</span><span id="__span-0-694"><a id="__codelineno-0-694" name="__codelineno-0-694"></a>    <span class="p">)</span>
</span><span id="__span-0-695"><a id="__codelineno-0-695" name="__codelineno-0-695"></a>    <span class="n">row</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
</span><span id="__span-0-696"><a id="__codelineno-0-696" name="__codelineno-0-696"></a>    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-0-697"><a id="__codelineno-0-697" name="__codelineno-0-697"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">row</span><span class="p">:</span>
</span><span id="__span-0-698"><a id="__codelineno-0-698" name="__codelineno-0-698"></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="__span-0-699"><a id="__codelineno-0-699" name="__codelineno-0-699"></a>    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-0-700"><a id="__codelineno-0-700" name="__codelineno-0-700"></a>        <span class="s2">&quot;run_id&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="__span-0-701"><a id="__codelineno-0-701" name="__codelineno-0-701"></a>        <span class="s2">&quot;strategy&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="__span-0-702"><a id="__codelineno-0-702" name="__codelineno-0-702"></a>        <span class="s2">&quot;symbols&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="k">else</span> <span class="p">[],</span>
</span><span id="__span-0-703"><a id="__codelineno-0-703" name="__codelineno-0-703"></a>        <span class="s2">&quot;bar_period&quot;</span><span class="p">:</span> <span class="n">_normalize_bar_period</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]),</span>
</span><span id="__span-0-704"><a id="__codelineno-0-704" name="__codelineno-0-704"></a>        <span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
</span><span id="__span-0-705"><a id="__codelineno-0-705" name="__codelineno-0-705"></a>        <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span>
</span><span id="__span-0-706"><a id="__codelineno-0-706" name="__codelineno-0-706"></a>        <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span>
</span><span id="__span-0-707"><a id="__codelineno-0-707" name="__codelineno-0-707"></a>        <span class="s2">&quot;completed_at&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">7</span><span class="p">],</span>
</span><span id="__span-0-708"><a id="__codelineno-0-708" name="__codelineno-0-708"></a>        <span class="s2">&quot;bar_count&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span>
</span><span id="__span-0-709"><a id="__codelineno-0-709" name="__codelineno-0-709"></a>        <span class="s2">&quot;first_bar&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span>
</span><span id="__span-0-710"><a id="__codelineno-0-710" name="__codelineno-0-710"></a>        <span class="s2">&quot;last_bar&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span>
</span><span id="__span-0-711"><a id="__codelineno-0-711" name="__codelineno-0-711"></a>    <span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.get_run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_run</span><span class="p">(</span><span class="n">run_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-714">714</a></span>
<span class="normal"><a href="#__codelineno-0-715">715</a></span>
<span class="normal"><a href="#__codelineno-0-716">716</a></span>
<span class="normal"><a href="#__codelineno-0-717">717</a></span>
<span class="normal"><a href="#__codelineno-0-718">718</a></span>
<span class="normal"><a href="#__codelineno-0-719">719</a></span>
<span class="normal"><a href="#__codelineno-0-720">720</a></span>
<span class="normal"><a href="#__codelineno-0-721">721</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-714"><a id="__codelineno-0-714" name="__codelineno-0-714"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/run/</span><span class="si">{run_id}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-715"><a id="__codelineno-0-715" name="__codelineno-0-715"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_run</span><span class="p">(</span><span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="__span-0-716"><a id="__codelineno-0-716" name="__codelineno-0-716"></a>    <span class="n">run</span> <span class="o">=</span> <span class="n">_get_run_by_id</span><span class="p">(</span><span class="n">run_id</span><span class="p">)</span>
</span><span id="__span-0-717"><a id="__codelineno-0-717" name="__codelineno-0-717"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">run</span><span class="p">:</span>
</span><span id="__span-0-718"><a id="__codelineno-0-718" name="__codelineno-0-718"></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">HTTPException</span>
</span><span id="__span-0-719"><a id="__codelineno-0-719" name="__codelineno-0-719"></a>
</span><span id="__span-0-720"><a id="__codelineno-0-720" name="__codelineno-0-720"></a>        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;Run not found&quot;</span><span class="p">)</span>
</span><span id="__span-0-721"><a id="__codelineno-0-721" name="__codelineno-0-721"></a>    <span class="k">return</span> <span class="n">run</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.delete_run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_run</span><span class="p">(</span><span class="n">run_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-724">724</a></span>
<span class="normal"><a href="#__codelineno-0-725">725</a></span>
<span class="normal"><a href="#__codelineno-0-726">726</a></span>
<span class="normal"><a href="#__codelineno-0-727">727</a></span>
<span class="normal"><a href="#__codelineno-0-728">728</a></span>
<span class="normal"><a href="#__codelineno-0-729">729</a></span>
<span class="normal"><a href="#__codelineno-0-730">730</a></span>
<span class="normal"><a href="#__codelineno-0-731">731</a></span>
<span class="normal"><a href="#__codelineno-0-732">732</a></span>
<span class="normal"><a href="#__codelineno-0-733">733</a></span>
<span class="normal"><a href="#__codelineno-0-734">734</a></span>
<span class="normal"><a href="#__codelineno-0-735">735</a></span>
<span class="normal"><a href="#__codelineno-0-736">736</a></span>
<span class="normal"><a href="#__codelineno-0-737">737</a></span>
<span class="normal"><a href="#__codelineno-0-738">738</a></span>
<span class="normal"><a href="#__codelineno-0-739">739</a></span>
<span class="normal"><a href="#__codelineno-0-740">740</a></span>
<span class="normal"><a href="#__codelineno-0-741">741</a></span>
<span class="normal"><a href="#__codelineno-0-742">742</a></span>
<span class="normal"><a href="#__codelineno-0-743">743</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-724"><a id="__codelineno-0-724" name="__codelineno-0-724"></a><span class="nd">@app</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s2">&quot;/api/run/</span><span class="si">{run_id}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-725"><a id="__codelineno-0-725" name="__codelineno-0-725"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">delete_run</span><span class="p">(</span><span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="__span-0-726"><a id="__codelineno-0-726" name="__codelineno-0-726"></a>    <span class="n">db_path</span> <span class="o">=</span> <span class="n">_get_runs_db_path</span><span class="p">()</span>
</span><span id="__span-0-727"><a id="__codelineno-0-727" name="__codelineno-0-727"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">db_path</span><span class="p">):</span>
</span><span id="__span-0-728"><a id="__codelineno-0-728" name="__codelineno-0-728"></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">HTTPException</span>
</span><span id="__span-0-729"><a id="__codelineno-0-729" name="__codelineno-0-729"></a>
</span><span id="__span-0-730"><a id="__codelineno-0-730" name="__codelineno-0-730"></a>        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;Run not found&quot;</span><span class="p">)</span>
</span><span id="__span-0-731"><a id="__codelineno-0-731" name="__codelineno-0-731"></a>    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
</span><span id="__span-0-732"><a id="__codelineno-0-732" name="__codelineno-0-732"></a>    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-0-733"><a id="__codelineno-0-733" name="__codelineno-0-733"></a>    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM bars WHERE run_id = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">run_id</span><span class="p">,))</span>
</span><span id="__span-0-734"><a id="__codelineno-0-734" name="__codelineno-0-734"></a>    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM order_requests WHERE run_id = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">run_id</span><span class="p">,))</span>
</span><span id="__span-0-735"><a id="__codelineno-0-735" name="__codelineno-0-735"></a>    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM order_responses WHERE run_id = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">run_id</span><span class="p">,))</span>
</span><span id="__span-0-736"><a id="__codelineno-0-736" name="__codelineno-0-736"></a>    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM fills WHERE run_id = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">run_id</span><span class="p">,))</span>
</span><span id="__span-0-737"><a id="__codelineno-0-737" name="__codelineno-0-737"></a>    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM runs WHERE run_id = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">run_id</span><span class="p">,))</span>
</span><span id="__span-0-738"><a id="__codelineno-0-738" name="__codelineno-0-738"></a>    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span><span id="__span-0-739"><a id="__codelineno-0-739" name="__codelineno-0-739"></a>    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-0-740"><a id="__codelineno-0-740" name="__codelineno-0-740"></a>    <span class="n">charts_path</span> <span class="o">=</span> <span class="n">CHARTS_DIR</span> <span class="o">/</span> <span class="n">run_id</span>
</span><span id="__span-0-741"><a id="__codelineno-0-741" name="__codelineno-0-741"></a>    <span class="k">if</span> <span class="n">charts_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="__span-0-742"><a id="__codelineno-0-742" name="__codelineno-0-742"></a>        <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">charts_path</span><span class="p">)</span>
</span><span id="__span-0-743"><a id="__codelineno-0-743" name="__codelineno-0-743"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;deleted&quot;</span><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._normalize_side" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_normalize_side</span><span class="p">(</span><span class="n">side</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-746">746</a></span>
<span class="normal"><a href="#__codelineno-0-747">747</a></span>
<span class="normal"><a href="#__codelineno-0-748">748</a></span>
<span class="normal"><a href="#__codelineno-0-749">749</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-746"><a id="__codelineno-0-746" name="__codelineno-0-746"></a><span class="k">def</span><span class="w"> </span><span class="nf">_normalize_side</span><span class="p">(</span><span class="n">side</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="__span-0-747"><a id="__codelineno-0-747" name="__codelineno-0-747"></a>    <span class="k">if</span> <span class="n">side</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;BUY&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">):</span>
</span><span id="__span-0-748"><a id="__codelineno-0-748" name="__codelineno-0-748"></a>        <span class="k">return</span> <span class="s2">&quot;BUY&quot;</span>
</span><span id="__span-0-749"><a id="__codelineno-0-749" name="__codelineno-0-749"></a>    <span class="k">return</span> <span class="s2">&quot;SELL&quot;</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._extract_positions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_extract_positions</span><span class="p">(</span><span class="n">fills</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-752">752</a></span>
<span class="normal"><a href="#__codelineno-0-753">753</a></span>
<span class="normal"><a href="#__codelineno-0-754">754</a></span>
<span class="normal"><a href="#__codelineno-0-755">755</a></span>
<span class="normal"><a href="#__codelineno-0-756">756</a></span>
<span class="normal"><a href="#__codelineno-0-757">757</a></span>
<span class="normal"><a href="#__codelineno-0-758">758</a></span>
<span class="normal"><a href="#__codelineno-0-759">759</a></span>
<span class="normal"><a href="#__codelineno-0-760">760</a></span>
<span class="normal"><a href="#__codelineno-0-761">761</a></span>
<span class="normal"><a href="#__codelineno-0-762">762</a></span>
<span class="normal"><a href="#__codelineno-0-763">763</a></span>
<span class="normal"><a href="#__codelineno-0-764">764</a></span>
<span class="normal"><a href="#__codelineno-0-765">765</a></span>
<span class="normal"><a href="#__codelineno-0-766">766</a></span>
<span class="normal"><a href="#__codelineno-0-767">767</a></span>
<span class="normal"><a href="#__codelineno-0-768">768</a></span>
<span class="normal"><a href="#__codelineno-0-769">769</a></span>
<span class="normal"><a href="#__codelineno-0-770">770</a></span>
<span class="normal"><a href="#__codelineno-0-771">771</a></span>
<span class="normal"><a href="#__codelineno-0-772">772</a></span>
<span class="normal"><a href="#__codelineno-0-773">773</a></span>
<span class="normal"><a href="#__codelineno-0-774">774</a></span>
<span class="normal"><a href="#__codelineno-0-775">775</a></span>
<span class="normal"><a href="#__codelineno-0-776">776</a></span>
<span class="normal"><a href="#__codelineno-0-777">777</a></span>
<span class="normal"><a href="#__codelineno-0-778">778</a></span>
<span class="normal"><a href="#__codelineno-0-779">779</a></span>
<span class="normal"><a href="#__codelineno-0-780">780</a></span>
<span class="normal"><a href="#__codelineno-0-781">781</a></span>
<span class="normal"><a href="#__codelineno-0-782">782</a></span>
<span class="normal"><a href="#__codelineno-0-783">783</a></span>
<span class="normal"><a href="#__codelineno-0-784">784</a></span>
<span class="normal"><a href="#__codelineno-0-785">785</a></span>
<span class="normal"><a href="#__codelineno-0-786">786</a></span>
<span class="normal"><a href="#__codelineno-0-787">787</a></span>
<span class="normal"><a href="#__codelineno-0-788">788</a></span>
<span class="normal"><a href="#__codelineno-0-789">789</a></span>
<span class="normal"><a href="#__codelineno-0-790">790</a></span>
<span class="normal"><a href="#__codelineno-0-791">791</a></span>
<span class="normal"><a href="#__codelineno-0-792">792</a></span>
<span class="normal"><a href="#__codelineno-0-793">793</a></span>
<span class="normal"><a href="#__codelineno-0-794">794</a></span>
<span class="normal"><a href="#__codelineno-0-795">795</a></span>
<span class="normal"><a href="#__codelineno-0-796">796</a></span>
<span class="normal"><a href="#__codelineno-0-797">797</a></span>
<span class="normal"><a href="#__codelineno-0-798">798</a></span>
<span class="normal"><a href="#__codelineno-0-799">799</a></span>
<span class="normal"><a href="#__codelineno-0-800">800</a></span>
<span class="normal"><a href="#__codelineno-0-801">801</a></span>
<span class="normal"><a href="#__codelineno-0-802">802</a></span>
<span class="normal"><a href="#__codelineno-0-803">803</a></span>
<span class="normal"><a href="#__codelineno-0-804">804</a></span>
<span class="normal"><a href="#__codelineno-0-805">805</a></span>
<span class="normal"><a href="#__codelineno-0-806">806</a></span>
<span class="normal"><a href="#__codelineno-0-807">807</a></span>
<span class="normal"><a href="#__codelineno-0-808">808</a></span>
<span class="normal"><a href="#__codelineno-0-809">809</a></span>
<span class="normal"><a href="#__codelineno-0-810">810</a></span>
<span class="normal"><a href="#__codelineno-0-811">811</a></span>
<span class="normal"><a href="#__codelineno-0-812">812</a></span>
<span class="normal"><a href="#__codelineno-0-813">813</a></span>
<span class="normal"><a href="#__codelineno-0-814">814</a></span>
<span class="normal"><a href="#__codelineno-0-815">815</a></span>
<span class="normal"><a href="#__codelineno-0-816">816</a></span>
<span class="normal"><a href="#__codelineno-0-817">817</a></span>
<span class="normal"><a href="#__codelineno-0-818">818</a></span>
<span class="normal"><a href="#__codelineno-0-819">819</a></span>
<span class="normal"><a href="#__codelineno-0-820">820</a></span>
<span class="normal"><a href="#__codelineno-0-821">821</a></span>
<span class="normal"><a href="#__codelineno-0-822">822</a></span>
<span class="normal"><a href="#__codelineno-0-823">823</a></span>
<span class="normal"><a href="#__codelineno-0-824">824</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-752"><a id="__codelineno-0-752" name="__codelineno-0-752"></a><span class="k">def</span><span class="w"> </span><span class="nf">_extract_positions</span><span class="p">(</span><span class="n">fills</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
</span><span id="__span-0-753"><a id="__codelineno-0-753" name="__codelineno-0-753"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">fills</span><span class="p">:</span>
</span><span id="__span-0-754"><a id="__codelineno-0-754" name="__codelineno-0-754"></a>        <span class="k">return</span> <span class="p">[]</span>
</span><span id="__span-0-755"><a id="__codelineno-0-755" name="__codelineno-0-755"></a>    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fills</span><span class="p">:</span>
</span><span id="__span-0-756"><a id="__codelineno-0-756" name="__codelineno-0-756"></a>        <span class="n">f</span><span class="p">[</span><span class="s2">&quot;side&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_normalize_side</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s2">&quot;side&quot;</span><span class="p">])</span>
</span><span id="__span-0-757"><a id="__codelineno-0-757" name="__codelineno-0-757"></a>    <span class="n">positions</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-758"><a id="__codelineno-0-758" name="__codelineno-0-758"></a>    <span class="n">by_symbol</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-0-759"><a id="__codelineno-0-759" name="__codelineno-0-759"></a>    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fills</span><span class="p">:</span>
</span><span id="__span-0-760"><a id="__codelineno-0-760" name="__codelineno-0-760"></a>        <span class="n">by_symbol</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s2">&quot;symbol&quot;</span><span class="p">],</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</span><span id="__span-0-761"><a id="__codelineno-0-761" name="__codelineno-0-761"></a>    <span class="k">for</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">symbol_fills</span> <span class="ow">in</span> <span class="n">by_symbol</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="__span-0-762"><a id="__codelineno-0-762" name="__codelineno-0-762"></a>        <span class="n">symbol_fills</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;ts_event&quot;</span><span class="p">])</span>
</span><span id="__span-0-763"><a id="__codelineno-0-763" name="__codelineno-0-763"></a>        <span class="n">position</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="__span-0-764"><a id="__codelineno-0-764" name="__codelineno-0-764"></a>        <span class="n">position_fills</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-765"><a id="__codelineno-0-765" name="__codelineno-0-765"></a>        <span class="n">position_id</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-0-766"><a id="__codelineno-0-766" name="__codelineno-0-766"></a>        <span class="k">for</span> <span class="n">fill</span> <span class="ow">in</span> <span class="n">symbol_fills</span><span class="p">:</span>
</span><span id="__span-0-767"><a id="__codelineno-0-767" name="__codelineno-0-767"></a>            <span class="n">qty</span> <span class="o">=</span> <span class="n">fill</span><span class="p">[</span><span class="s2">&quot;quantity&quot;</span><span class="p">]</span>
</span><span id="__span-0-768"><a id="__codelineno-0-768" name="__codelineno-0-768"></a>            <span class="n">signed_qty</span> <span class="o">=</span> <span class="n">qty</span> <span class="k">if</span> <span class="n">fill</span><span class="p">[</span><span class="s2">&quot;side&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;BUY&quot;</span> <span class="k">else</span> <span class="o">-</span><span class="n">qty</span>
</span><span id="__span-0-769"><a id="__codelineno-0-769" name="__codelineno-0-769"></a>            <span class="n">new_position</span> <span class="o">=</span> <span class="n">position</span> <span class="o">+</span> <span class="n">signed_qty</span>
</span><span id="__span-0-770"><a id="__codelineno-0-770" name="__codelineno-0-770"></a>            <span class="n">position_fills</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fill</span><span class="p">)</span>
</span><span id="__span-0-771"><a id="__codelineno-0-771" name="__codelineno-0-771"></a>            <span class="k">if</span> <span class="n">new_position</span> <span class="o">==</span> <span class="mf">0.0</span> <span class="ow">and</span> <span class="n">position</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
</span><span id="__span-0-772"><a id="__codelineno-0-772" name="__codelineno-0-772"></a>                <span class="n">position_id</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-0-773"><a id="__codelineno-0-773" name="__codelineno-0-773"></a>                <span class="n">pnl</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="__span-0-774"><a id="__codelineno-0-774" name="__codelineno-0-774"></a>                <span class="n">total_commission</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="__span-0-775"><a id="__codelineno-0-775" name="__codelineno-0-775"></a>                <span class="k">for</span> <span class="n">pf</span> <span class="ow">in</span> <span class="n">position_fills</span><span class="p">:</span>
</span><span id="__span-0-776"><a id="__codelineno-0-776" name="__codelineno-0-776"></a>                    <span class="n">value</span> <span class="o">=</span> <span class="n">pf</span><span class="p">[</span><span class="s2">&quot;price&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">pf</span><span class="p">[</span><span class="s2">&quot;quantity&quot;</span><span class="p">]</span>
</span><span id="__span-0-777"><a id="__codelineno-0-777" name="__codelineno-0-777"></a>                    <span class="n">commission</span> <span class="o">=</span> <span class="n">pf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;commission&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="mf">0.0</span>
</span><span id="__span-0-778"><a id="__codelineno-0-778" name="__codelineno-0-778"></a>                    <span class="n">total_commission</span> <span class="o">+=</span> <span class="n">commission</span>
</span><span id="__span-0-779"><a id="__codelineno-0-779" name="__codelineno-0-779"></a>                    <span class="k">if</span> <span class="n">pf</span><span class="p">[</span><span class="s2">&quot;side&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;BUY&quot;</span><span class="p">:</span>
</span><span id="__span-0-780"><a id="__codelineno-0-780" name="__codelineno-0-780"></a>                        <span class="n">pnl</span> <span class="o">-=</span> <span class="n">value</span>
</span><span id="__span-0-781"><a id="__codelineno-0-781" name="__codelineno-0-781"></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-782"><a id="__codelineno-0-782" name="__codelineno-0-782"></a>                        <span class="n">pnl</span> <span class="o">+=</span> <span class="n">value</span>
</span><span id="__span-0-783"><a id="__codelineno-0-783" name="__codelineno-0-783"></a>                <span class="n">pnl</span> <span class="o">-=</span> <span class="n">total_commission</span>
</span><span id="__span-0-784"><a id="__codelineno-0-784" name="__codelineno-0-784"></a>                <span class="n">entry_fill</span> <span class="o">=</span> <span class="n">position_fills</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-0-785"><a id="__codelineno-0-785" name="__codelineno-0-785"></a>                <span class="n">exit_fill</span> <span class="o">=</span> <span class="n">position_fills</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="__span-0-786"><a id="__codelineno-0-786" name="__codelineno-0-786"></a>                <span class="n">entry_side</span> <span class="o">=</span> <span class="n">entry_fill</span><span class="p">[</span><span class="s2">&quot;side&quot;</span><span class="p">]</span>
</span><span id="__span-0-787"><a id="__codelineno-0-787" name="__codelineno-0-787"></a>                <span class="n">entry_qty</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
</span><span id="__span-0-788"><a id="__codelineno-0-788" name="__codelineno-0-788"></a>                    <span class="n">pf</span><span class="p">[</span><span class="s2">&quot;quantity&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">pf</span> <span class="ow">in</span> <span class="n">position_fills</span> <span class="k">if</span> <span class="n">pf</span><span class="p">[</span><span class="s2">&quot;side&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">entry_side</span>
</span><span id="__span-0-789"><a id="__codelineno-0-789" name="__codelineno-0-789"></a>                <span class="p">)</span>
</span><span id="__span-0-790"><a id="__codelineno-0-790" name="__codelineno-0-790"></a>                <span class="n">entry_value</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
</span><span id="__span-0-791"><a id="__codelineno-0-791" name="__codelineno-0-791"></a>                    <span class="n">pf</span><span class="p">[</span><span class="s2">&quot;quantity&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">pf</span><span class="p">[</span><span class="s2">&quot;price&quot;</span><span class="p">]</span>
</span><span id="__span-0-792"><a id="__codelineno-0-792" name="__codelineno-0-792"></a>                    <span class="k">for</span> <span class="n">pf</span> <span class="ow">in</span> <span class="n">position_fills</span>
</span><span id="__span-0-793"><a id="__codelineno-0-793" name="__codelineno-0-793"></a>                    <span class="k">if</span> <span class="n">pf</span><span class="p">[</span><span class="s2">&quot;side&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">entry_side</span>
</span><span id="__span-0-794"><a id="__codelineno-0-794" name="__codelineno-0-794"></a>                <span class="p">)</span>
</span><span id="__span-0-795"><a id="__codelineno-0-795" name="__codelineno-0-795"></a>                <span class="n">avg_entry</span> <span class="o">=</span> <span class="n">entry_value</span> <span class="o">/</span> <span class="n">entry_qty</span> <span class="k">if</span> <span class="n">entry_qty</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="__span-0-796"><a id="__codelineno-0-796" name="__codelineno-0-796"></a>                <span class="n">exit_side</span> <span class="o">=</span> <span class="s2">&quot;SELL&quot;</span> <span class="k">if</span> <span class="n">entry_side</span> <span class="o">==</span> <span class="s2">&quot;BUY&quot;</span> <span class="k">else</span> <span class="s2">&quot;BUY&quot;</span>
</span><span id="__span-0-797"><a id="__codelineno-0-797" name="__codelineno-0-797"></a>                <span class="n">exit_qty</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
</span><span id="__span-0-798"><a id="__codelineno-0-798" name="__codelineno-0-798"></a>                    <span class="n">pf</span><span class="p">[</span><span class="s2">&quot;quantity&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">pf</span> <span class="ow">in</span> <span class="n">position_fills</span> <span class="k">if</span> <span class="n">pf</span><span class="p">[</span><span class="s2">&quot;side&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">exit_side</span>
</span><span id="__span-0-799"><a id="__codelineno-0-799" name="__codelineno-0-799"></a>                <span class="p">)</span>
</span><span id="__span-0-800"><a id="__codelineno-0-800" name="__codelineno-0-800"></a>                <span class="n">exit_value</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
</span><span id="__span-0-801"><a id="__codelineno-0-801" name="__codelineno-0-801"></a>                    <span class="n">pf</span><span class="p">[</span><span class="s2">&quot;quantity&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">pf</span><span class="p">[</span><span class="s2">&quot;price&quot;</span><span class="p">]</span>
</span><span id="__span-0-802"><a id="__codelineno-0-802" name="__codelineno-0-802"></a>                    <span class="k">for</span> <span class="n">pf</span> <span class="ow">in</span> <span class="n">position_fills</span>
</span><span id="__span-0-803"><a id="__codelineno-0-803" name="__codelineno-0-803"></a>                    <span class="k">if</span> <span class="n">pf</span><span class="p">[</span><span class="s2">&quot;side&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">exit_side</span>
</span><span id="__span-0-804"><a id="__codelineno-0-804" name="__codelineno-0-804"></a>                <span class="p">)</span>
</span><span id="__span-0-805"><a id="__codelineno-0-805" name="__codelineno-0-805"></a>                <span class="n">avg_exit</span> <span class="o">=</span> <span class="n">exit_value</span> <span class="o">/</span> <span class="n">exit_qty</span> <span class="k">if</span> <span class="n">exit_qty</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="__span-0-806"><a id="__codelineno-0-806" name="__codelineno-0-806"></a>                <span class="n">positions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="__span-0-807"><a id="__codelineno-0-807" name="__codelineno-0-807"></a>                    <span class="p">{</span>
</span><span id="__span-0-808"><a id="__codelineno-0-808" name="__codelineno-0-808"></a>                        <span class="s2">&quot;position_id&quot;</span><span class="p">:</span> <span class="n">position_id</span><span class="p">,</span>
</span><span id="__span-0-809"><a id="__codelineno-0-809" name="__codelineno-0-809"></a>                        <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">symbol</span><span class="p">,</span>
</span><span id="__span-0-810"><a id="__codelineno-0-810" name="__codelineno-0-810"></a>                        <span class="s2">&quot;side&quot;</span><span class="p">:</span> <span class="s2">&quot;LONG&quot;</span> <span class="k">if</span> <span class="n">entry_side</span> <span class="o">==</span> <span class="s2">&quot;BUY&quot;</span> <span class="k">else</span> <span class="s2">&quot;SHORT&quot;</span><span class="p">,</span>
</span><span id="__span-0-811"><a id="__codelineno-0-811" name="__codelineno-0-811"></a>                        <span class="s2">&quot;quantity&quot;</span><span class="p">:</span> <span class="n">entry_qty</span><span class="p">,</span>
</span><span id="__span-0-812"><a id="__codelineno-0-812" name="__codelineno-0-812"></a>                        <span class="s2">&quot;entry_time&quot;</span><span class="p">:</span> <span class="n">entry_fill</span><span class="p">[</span><span class="s2">&quot;ts_event&quot;</span><span class="p">],</span>
</span><span id="__span-0-813"><a id="__codelineno-0-813" name="__codelineno-0-813"></a>                        <span class="s2">&quot;exit_time&quot;</span><span class="p">:</span> <span class="n">exit_fill</span><span class="p">[</span><span class="s2">&quot;ts_event&quot;</span><span class="p">],</span>
</span><span id="__span-0-814"><a id="__codelineno-0-814" name="__codelineno-0-814"></a>                        <span class="s2">&quot;avg_entry_price&quot;</span><span class="p">:</span> <span class="n">avg_entry</span><span class="p">,</span>
</span><span id="__span-0-815"><a id="__codelineno-0-815" name="__codelineno-0-815"></a>                        <span class="s2">&quot;avg_exit_price&quot;</span><span class="p">:</span> <span class="n">avg_exit</span><span class="p">,</span>
</span><span id="__span-0-816"><a id="__codelineno-0-816" name="__codelineno-0-816"></a>                        <span class="s2">&quot;pnl&quot;</span><span class="p">:</span> <span class="n">pnl</span><span class="p">,</span>
</span><span id="__span-0-817"><a id="__codelineno-0-817" name="__codelineno-0-817"></a>                        <span class="s2">&quot;commission&quot;</span><span class="p">:</span> <span class="n">total_commission</span><span class="p">,</span>
</span><span id="__span-0-818"><a id="__codelineno-0-818" name="__codelineno-0-818"></a>                        <span class="s2">&quot;num_fills&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">position_fills</span><span class="p">),</span>
</span><span id="__span-0-819"><a id="__codelineno-0-819" name="__codelineno-0-819"></a>                    <span class="p">}</span>
</span><span id="__span-0-820"><a id="__codelineno-0-820" name="__codelineno-0-820"></a>                <span class="p">)</span>
</span><span id="__span-0-821"><a id="__codelineno-0-821" name="__codelineno-0-821"></a>                <span class="n">position_fills</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-822"><a id="__codelineno-0-822" name="__codelineno-0-822"></a>            <span class="n">position</span> <span class="o">=</span> <span class="n">new_position</span>
</span><span id="__span-0-823"><a id="__codelineno-0-823" name="__codelineno-0-823"></a>    <span class="n">positions</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;entry_time&quot;</span><span class="p">])</span>
</span><span id="__span-0-824"><a id="__codelineno-0-824" name="__codelineno-0-824"></a>    <span class="k">return</span> <span class="n">positions</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.get_run_positions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_run_positions</span><span class="p">(</span><span class="n">run_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-827">827</a></span>
<span class="normal"><a href="#__codelineno-0-828">828</a></span>
<span class="normal"><a href="#__codelineno-0-829">829</a></span>
<span class="normal"><a href="#__codelineno-0-830">830</a></span>
<span class="normal"><a href="#__codelineno-0-831">831</a></span>
<span class="normal"><a href="#__codelineno-0-832">832</a></span>
<span class="normal"><a href="#__codelineno-0-833">833</a></span>
<span class="normal"><a href="#__codelineno-0-834">834</a></span>
<span class="normal"><a href="#__codelineno-0-835">835</a></span>
<span class="normal"><a href="#__codelineno-0-836">836</a></span>
<span class="normal"><a href="#__codelineno-0-837">837</a></span>
<span class="normal"><a href="#__codelineno-0-838">838</a></span>
<span class="normal"><a href="#__codelineno-0-839">839</a></span>
<span class="normal"><a href="#__codelineno-0-840">840</a></span>
<span class="normal"><a href="#__codelineno-0-841">841</a></span>
<span class="normal"><a href="#__codelineno-0-842">842</a></span>
<span class="normal"><a href="#__codelineno-0-843">843</a></span>
<span class="normal"><a href="#__codelineno-0-844">844</a></span>
<span class="normal"><a href="#__codelineno-0-845">845</a></span>
<span class="normal"><a href="#__codelineno-0-846">846</a></span>
<span class="normal"><a href="#__codelineno-0-847">847</a></span>
<span class="normal"><a href="#__codelineno-0-848">848</a></span>
<span class="normal"><a href="#__codelineno-0-849">849</a></span>
<span class="normal"><a href="#__codelineno-0-850">850</a></span>
<span class="normal"><a href="#__codelineno-0-851">851</a></span>
<span class="normal"><a href="#__codelineno-0-852">852</a></span>
<span class="normal"><a href="#__codelineno-0-853">853</a></span>
<span class="normal"><a href="#__codelineno-0-854">854</a></span>
<span class="normal"><a href="#__codelineno-0-855">855</a></span>
<span class="normal"><a href="#__codelineno-0-856">856</a></span>
<span class="normal"><a href="#__codelineno-0-857">857</a></span>
<span class="normal"><a href="#__codelineno-0-858">858</a></span>
<span class="normal"><a href="#__codelineno-0-859">859</a></span>
<span class="normal"><a href="#__codelineno-0-860">860</a></span>
<span class="normal"><a href="#__codelineno-0-861">861</a></span>
<span class="normal"><a href="#__codelineno-0-862">862</a></span>
<span class="normal"><a href="#__codelineno-0-863">863</a></span>
<span class="normal"><a href="#__codelineno-0-864">864</a></span>
<span class="normal"><a href="#__codelineno-0-865">865</a></span>
<span class="normal"><a href="#__codelineno-0-866">866</a></span>
<span class="normal"><a href="#__codelineno-0-867">867</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-827"><a id="__codelineno-0-827" name="__codelineno-0-827"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/run/</span><span class="si">{run_id}</span><span class="s2">/positions&quot;</span><span class="p">)</span>
</span><span id="__span-0-828"><a id="__codelineno-0-828" name="__codelineno-0-828"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_run_positions</span><span class="p">(</span><span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="__span-0-829"><a id="__codelineno-0-829" name="__codelineno-0-829"></a>    <span class="n">db_path</span> <span class="o">=</span> <span class="n">_get_runs_db_path</span><span class="p">()</span>
</span><span id="__span-0-830"><a id="__codelineno-0-830" name="__codelineno-0-830"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">db_path</span><span class="p">):</span>
</span><span id="__span-0-831"><a id="__codelineno-0-831" name="__codelineno-0-831"></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;positions&quot;</span><span class="p">:</span> <span class="p">[]}</span>
</span><span id="__span-0-832"><a id="__codelineno-0-832" name="__codelineno-0-832"></a>    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
</span><span id="__span-0-833"><a id="__codelineno-0-833" name="__codelineno-0-833"></a>    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-0-834"><a id="__codelineno-0-834" name="__codelineno-0-834"></a>    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
</span><span id="__span-0-835"><a id="__codelineno-0-835" name="__codelineno-0-835"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-836"><a id="__codelineno-0-836" name="__codelineno-0-836"></a><span class="sd">        SELECT ts_event, symbol, side, quantity, price, commission</span>
</span><span id="__span-0-837"><a id="__codelineno-0-837" name="__codelineno-0-837"></a><span class="sd">        FROM fills WHERE run_id = ? ORDER BY ts_event</span>
</span><span id="__span-0-838"><a id="__codelineno-0-838" name="__codelineno-0-838"></a><span class="sd">        &quot;&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-0-839"><a id="__codelineno-0-839" name="__codelineno-0-839"></a>        <span class="p">(</span><span class="n">run_id</span><span class="p">,),</span>
</span><span id="__span-0-840"><a id="__codelineno-0-840" name="__codelineno-0-840"></a>    <span class="p">)</span>
</span><span id="__span-0-841"><a id="__codelineno-0-841" name="__codelineno-0-841"></a>    <span class="n">rows</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
</span><span id="__span-0-842"><a id="__codelineno-0-842" name="__codelineno-0-842"></a>    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-0-843"><a id="__codelineno-0-843" name="__codelineno-0-843"></a>    <span class="n">fills</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-0-844"><a id="__codelineno-0-844" name="__codelineno-0-844"></a>        <span class="p">{</span>
</span><span id="__span-0-845"><a id="__codelineno-0-845" name="__codelineno-0-845"></a>            <span class="s2">&quot;ts_event&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="__span-0-846"><a id="__codelineno-0-846" name="__codelineno-0-846"></a>            <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="__span-0-847"><a id="__codelineno-0-847" name="__codelineno-0-847"></a>            <span class="s2">&quot;side&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
</span><span id="__span-0-848"><a id="__codelineno-0-848" name="__codelineno-0-848"></a>            <span class="s2">&quot;quantity&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
</span><span id="__span-0-849"><a id="__codelineno-0-849" name="__codelineno-0-849"></a>            <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
</span><span id="__span-0-850"><a id="__codelineno-0-850" name="__codelineno-0-850"></a>            <span class="s2">&quot;commission&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span>
</span><span id="__span-0-851"><a id="__codelineno-0-851" name="__codelineno-0-851"></a>        <span class="p">}</span>
</span><span id="__span-0-852"><a id="__codelineno-0-852" name="__codelineno-0-852"></a>        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span>
</span><span id="__span-0-853"><a id="__codelineno-0-853" name="__codelineno-0-853"></a>    <span class="p">]</span>
</span><span id="__span-0-854"><a id="__codelineno-0-854" name="__codelineno-0-854"></a>    <span class="n">positions</span> <span class="o">=</span> <span class="n">_extract_positions</span><span class="p">(</span><span class="n">fills</span><span class="p">)</span>
</span><span id="__span-0-855"><a id="__codelineno-0-855" name="__codelineno-0-855"></a>    <span class="n">total_pnl</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s2">&quot;pnl&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">positions</span><span class="p">)</span>
</span><span id="__span-0-856"><a id="__codelineno-0-856" name="__codelineno-0-856"></a>    <span class="n">winners</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">positions</span> <span class="k">if</span> <span class="n">p</span><span class="p">[</span><span class="s2">&quot;pnl&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-0-857"><a id="__codelineno-0-857" name="__codelineno-0-857"></a>    <span class="n">losers</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">positions</span> <span class="k">if</span> <span class="n">p</span><span class="p">[</span><span class="s2">&quot;pnl&quot;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-0-858"><a id="__codelineno-0-858" name="__codelineno-0-858"></a>    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-0-859"><a id="__codelineno-0-859" name="__codelineno-0-859"></a>        <span class="s2">&quot;positions&quot;</span><span class="p">:</span> <span class="n">positions</span><span class="p">,</span>
</span><span id="__span-0-860"><a id="__codelineno-0-860" name="__codelineno-0-860"></a>        <span class="s2">&quot;summary&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-0-861"><a id="__codelineno-0-861" name="__codelineno-0-861"></a>            <span class="s2">&quot;total_positions&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">positions</span><span class="p">),</span>
</span><span id="__span-0-862"><a id="__codelineno-0-862" name="__codelineno-0-862"></a>            <span class="s2">&quot;total_pnl&quot;</span><span class="p">:</span> <span class="n">total_pnl</span><span class="p">,</span>
</span><span id="__span-0-863"><a id="__codelineno-0-863" name="__codelineno-0-863"></a>            <span class="s2">&quot;winners&quot;</span><span class="p">:</span> <span class="n">winners</span><span class="p">,</span>
</span><span id="__span-0-864"><a id="__codelineno-0-864" name="__codelineno-0-864"></a>            <span class="s2">&quot;losers&quot;</span><span class="p">:</span> <span class="n">losers</span><span class="p">,</span>
</span><span id="__span-0-865"><a id="__codelineno-0-865" name="__codelineno-0-865"></a>            <span class="s2">&quot;win_rate&quot;</span><span class="p">:</span> <span class="n">winners</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">positions</span><span class="p">)</span> <span class="k">if</span> <span class="n">positions</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="__span-0-866"><a id="__codelineno-0-866" name="__codelineno-0-866"></a>        <span class="p">},</span>
</span><span id="__span-0-867"><a id="__codelineno-0-867" name="__codelineno-0-867"></a>    <span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._load_bars_for_chart" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_load_bars_for_chart</span><span class="p">(</span><span class="n">run_id</span><span class="p">,</span> <span class="n">symbol</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-870">870</a></span>
<span class="normal"><a href="#__codelineno-0-871">871</a></span>
<span class="normal"><a href="#__codelineno-0-872">872</a></span>
<span class="normal"><a href="#__codelineno-0-873">873</a></span>
<span class="normal"><a href="#__codelineno-0-874">874</a></span>
<span class="normal"><a href="#__codelineno-0-875">875</a></span>
<span class="normal"><a href="#__codelineno-0-876">876</a></span>
<span class="normal"><a href="#__codelineno-0-877">877</a></span>
<span class="normal"><a href="#__codelineno-0-878">878</a></span>
<span class="normal"><a href="#__codelineno-0-879">879</a></span>
<span class="normal"><a href="#__codelineno-0-880">880</a></span>
<span class="normal"><a href="#__codelineno-0-881">881</a></span>
<span class="normal"><a href="#__codelineno-0-882">882</a></span>
<span class="normal"><a href="#__codelineno-0-883">883</a></span>
<span class="normal"><a href="#__codelineno-0-884">884</a></span>
<span class="normal"><a href="#__codelineno-0-885">885</a></span>
<span class="normal"><a href="#__codelineno-0-886">886</a></span>
<span class="normal"><a href="#__codelineno-0-887">887</a></span>
<span class="normal"><a href="#__codelineno-0-888">888</a></span>
<span class="normal"><a href="#__codelineno-0-889">889</a></span>
<span class="normal"><a href="#__codelineno-0-890">890</a></span>
<span class="normal"><a href="#__codelineno-0-891">891</a></span>
<span class="normal"><a href="#__codelineno-0-892">892</a></span>
<span class="normal"><a href="#__codelineno-0-893">893</a></span>
<span class="normal"><a href="#__codelineno-0-894">894</a></span>
<span class="normal"><a href="#__codelineno-0-895">895</a></span>
<span class="normal"><a href="#__codelineno-0-896">896</a></span>
<span class="normal"><a href="#__codelineno-0-897">897</a></span>
<span class="normal"><a href="#__codelineno-0-898">898</a></span>
<span class="normal"><a href="#__codelineno-0-899">899</a></span>
<span class="normal"><a href="#__codelineno-0-900">900</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-870"><a id="__codelineno-0-870" name="__codelineno-0-870"></a><span class="k">def</span><span class="w"> </span><span class="nf">_load_bars_for_chart</span><span class="p">(</span><span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">symbol</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-871"><a id="__codelineno-0-871" name="__codelineno-0-871"></a>    <span class="n">db_path</span> <span class="o">=</span> <span class="n">_get_runs_db_path</span><span class="p">()</span>
</span><span id="__span-0-872"><a id="__codelineno-0-872" name="__codelineno-0-872"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">db_path</span><span class="p">):</span>
</span><span id="__span-0-873"><a id="__codelineno-0-873" name="__codelineno-0-873"></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="__span-0-874"><a id="__codelineno-0-874" name="__codelineno-0-874"></a>    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
</span><span id="__span-0-875"><a id="__codelineno-0-875" name="__codelineno-0-875"></a>    <span class="n">bars_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span>
</span><span id="__span-0-876"><a id="__codelineno-0-876" name="__codelineno-0-876"></a>        <span class="s2">&quot;SELECT * FROM bars WHERE run_id = ? AND symbol = ? ORDER BY ts_event&quot;</span><span class="p">,</span>
</span><span id="__span-0-877"><a id="__codelineno-0-877" name="__codelineno-0-877"></a>        <span class="n">conn</span><span class="p">,</span>
</span><span id="__span-0-878"><a id="__codelineno-0-878" name="__codelineno-0-878"></a>        <span class="n">params</span><span class="o">=</span><span class="p">(</span><span class="n">run_id</span><span class="p">,</span> <span class="n">symbol</span><span class="p">),</span>
</span><span id="__span-0-879"><a id="__codelineno-0-879" name="__codelineno-0-879"></a>    <span class="p">)</span>
</span><span id="__span-0-880"><a id="__codelineno-0-880" name="__codelineno-0-880"></a>    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-0-881"><a id="__codelineno-0-881" name="__codelineno-0-881"></a>    <span class="k">if</span> <span class="n">bars_df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
</span><span id="__span-0-882"><a id="__codelineno-0-882" name="__codelineno-0-882"></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="__span-0-883"><a id="__codelineno-0-883" name="__codelineno-0-883"></a>    <span class="n">bars_df</span><span class="p">[</span><span class="s2">&quot;ts_event&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">bars_df</span><span class="p">[</span><span class="s2">&quot;ts_event&quot;</span><span class="p">])</span>
</span><span id="__span-0-884"><a id="__codelineno-0-884" name="__codelineno-0-884"></a>    <span class="k">if</span> <span class="s2">&quot;indicators&quot;</span> <span class="ow">in</span> <span class="n">bars_df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
</span><span id="__span-0-885"><a id="__codelineno-0-885" name="__codelineno-0-885"></a>        <span class="n">indicator_rows</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-886"><a id="__codelineno-0-886" name="__codelineno-0-886"></a>        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">bars_df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
</span><span id="__span-0-887"><a id="__codelineno-0-887" name="__codelineno-0-887"></a>            <span class="n">indicators_json</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;indicators&quot;</span><span class="p">)</span>
</span><span id="__span-0-888"><a id="__codelineno-0-888" name="__codelineno-0-888"></a>            <span class="k">if</span> <span class="n">indicators_json</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">indicators_json</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="__span-0-889"><a id="__codelineno-0-889" name="__codelineno-0-889"></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-890"><a id="__codelineno-0-890" name="__codelineno-0-890"></a>                    <span class="n">indicators</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">indicators_json</span><span class="p">)</span>
</span><span id="__span-0-891"><a id="__codelineno-0-891" name="__codelineno-0-891"></a>                    <span class="n">indicator_rows</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">indicators</span><span class="p">)</span>
</span><span id="__span-0-892"><a id="__codelineno-0-892" name="__codelineno-0-892"></a>                <span class="k">except</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">:</span>
</span><span id="__span-0-893"><a id="__codelineno-0-893" name="__codelineno-0-893"></a>                    <span class="n">indicator_rows</span><span class="o">.</span><span class="n">append</span><span class="p">({})</span>
</span><span id="__span-0-894"><a id="__codelineno-0-894" name="__codelineno-0-894"></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-895"><a id="__codelineno-0-895" name="__codelineno-0-895"></a>                <span class="n">indicator_rows</span><span class="o">.</span><span class="n">append</span><span class="p">({})</span>
</span><span id="__span-0-896"><a id="__codelineno-0-896" name="__codelineno-0-896"></a>        <span class="k">if</span> <span class="n">indicator_rows</span><span class="p">:</span>
</span><span id="__span-0-897"><a id="__codelineno-0-897" name="__codelineno-0-897"></a>            <span class="n">indicators_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">indicator_rows</span><span class="p">)</span>
</span><span id="__span-0-898"><a id="__codelineno-0-898" name="__codelineno-0-898"></a>            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">indicators_df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
</span><span id="__span-0-899"><a id="__codelineno-0-899" name="__codelineno-0-899"></a>                <span class="n">bars_df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">indicators_df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
</span><span id="__span-0-900"><a id="__codelineno-0-900" name="__codelineno-0-900"></a>    <span class="k">return</span> <span class="n">bars_df</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._load_fills_for_chart" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_load_fills_for_chart</span><span class="p">(</span><span class="n">run_id</span><span class="p">,</span> <span class="n">symbol</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-903">903</a></span>
<span class="normal"><a href="#__codelineno-0-904">904</a></span>
<span class="normal"><a href="#__codelineno-0-905">905</a></span>
<span class="normal"><a href="#__codelineno-0-906">906</a></span>
<span class="normal"><a href="#__codelineno-0-907">907</a></span>
<span class="normal"><a href="#__codelineno-0-908">908</a></span>
<span class="normal"><a href="#__codelineno-0-909">909</a></span>
<span class="normal"><a href="#__codelineno-0-910">910</a></span>
<span class="normal"><a href="#__codelineno-0-911">911</a></span>
<span class="normal"><a href="#__codelineno-0-912">912</a></span>
<span class="normal"><a href="#__codelineno-0-913">913</a></span>
<span class="normal"><a href="#__codelineno-0-914">914</a></span>
<span class="normal"><a href="#__codelineno-0-915">915</a></span>
<span class="normal"><a href="#__codelineno-0-916">916</a></span>
<span class="normal"><a href="#__codelineno-0-917">917</a></span>
<span class="normal"><a href="#__codelineno-0-918">918</a></span>
<span class="normal"><a href="#__codelineno-0-919">919</a></span>
<span class="normal"><a href="#__codelineno-0-920">920</a></span>
<span class="normal"><a href="#__codelineno-0-921">921</a></span>
<span class="normal"><a href="#__codelineno-0-922">922</a></span>
<span class="normal"><a href="#__codelineno-0-923">923</a></span>
<span class="normal"><a href="#__codelineno-0-924">924</a></span>
<span class="normal"><a href="#__codelineno-0-925">925</a></span>
<span class="normal"><a href="#__codelineno-0-926">926</a></span>
<span class="normal"><a href="#__codelineno-0-927">927</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-903"><a id="__codelineno-0-903" name="__codelineno-0-903"></a><span class="k">def</span><span class="w"> </span><span class="nf">_load_fills_for_chart</span><span class="p">(</span><span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">symbol</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
</span><span id="__span-0-904"><a id="__codelineno-0-904" name="__codelineno-0-904"></a>    <span class="n">db_path</span> <span class="o">=</span> <span class="n">_get_runs_db_path</span><span class="p">()</span>
</span><span id="__span-0-905"><a id="__codelineno-0-905" name="__codelineno-0-905"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">db_path</span><span class="p">):</span>
</span><span id="__span-0-906"><a id="__codelineno-0-906" name="__codelineno-0-906"></a>        <span class="k">return</span> <span class="p">[]</span>
</span><span id="__span-0-907"><a id="__codelineno-0-907" name="__codelineno-0-907"></a>    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
</span><span id="__span-0-908"><a id="__codelineno-0-908" name="__codelineno-0-908"></a>    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-0-909"><a id="__codelineno-0-909" name="__codelineno-0-909"></a>    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
</span><span id="__span-0-910"><a id="__codelineno-0-910" name="__codelineno-0-910"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;SELECT ts_event, symbol, side, quantity, price, commission, order_id</span>
</span><span id="__span-0-911"><a id="__codelineno-0-911" name="__codelineno-0-911"></a><span class="sd">           FROM fills WHERE run_id = ? AND symbol = ? ORDER BY ts_event&quot;&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-0-912"><a id="__codelineno-0-912" name="__codelineno-0-912"></a>        <span class="p">(</span><span class="n">run_id</span><span class="p">,</span> <span class="n">symbol</span><span class="p">),</span>
</span><span id="__span-0-913"><a id="__codelineno-0-913" name="__codelineno-0-913"></a>    <span class="p">)</span>
</span><span id="__span-0-914"><a id="__codelineno-0-914" name="__codelineno-0-914"></a>    <span class="n">rows</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
</span><span id="__span-0-915"><a id="__codelineno-0-915" name="__codelineno-0-915"></a>    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-0-916"><a id="__codelineno-0-916" name="__codelineno-0-916"></a>    <span class="k">return</span> <span class="p">[</span>
</span><span id="__span-0-917"><a id="__codelineno-0-917" name="__codelineno-0-917"></a>        <span class="p">{</span>
</span><span id="__span-0-918"><a id="__codelineno-0-918" name="__codelineno-0-918"></a>            <span class="s2">&quot;ts_event&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="__span-0-919"><a id="__codelineno-0-919" name="__codelineno-0-919"></a>            <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="__span-0-920"><a id="__codelineno-0-920" name="__codelineno-0-920"></a>            <span class="s2">&quot;side&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
</span><span id="__span-0-921"><a id="__codelineno-0-921" name="__codelineno-0-921"></a>            <span class="s2">&quot;quantity&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
</span><span id="__span-0-922"><a id="__codelineno-0-922" name="__codelineno-0-922"></a>            <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
</span><span id="__span-0-923"><a id="__codelineno-0-923" name="__codelineno-0-923"></a>            <span class="s2">&quot;commission&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="ow">or</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="__span-0-924"><a id="__codelineno-0-924" name="__codelineno-0-924"></a>            <span class="s2">&quot;order_id&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span>
</span><span id="__span-0-925"><a id="__codelineno-0-925" name="__codelineno-0-925"></a>        <span class="p">}</span>
</span><span id="__span-0-926"><a id="__codelineno-0-926" name="__codelineno-0-926"></a>        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span>
</span><span id="__span-0-927"><a id="__codelineno-0-927" name="__codelineno-0-927"></a>    <span class="p">]</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._parse_indicator_column" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_parse_indicator_column</span><span class="p">(</span><span class="n">col</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-955">955</a></span>
<span class="normal"><a href="#__codelineno-0-956">956</a></span>
<span class="normal"><a href="#__codelineno-0-957">957</a></span>
<span class="normal"><a href="#__codelineno-0-958">958</a></span>
<span class="normal"><a href="#__codelineno-0-959">959</a></span>
<span class="normal"><a href="#__codelineno-0-960">960</a></span>
<span class="normal"><a href="#__codelineno-0-961">961</a></span>
<span class="normal"><a href="#__codelineno-0-962">962</a></span>
<span class="normal"><a href="#__codelineno-0-963">963</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-955"><a id="__codelineno-0-955" name="__codelineno-0-955"></a><span class="k">def</span><span class="w"> </span><span class="nf">_parse_indicator_column</span><span class="p">(</span><span class="n">col</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-956"><a id="__codelineno-0-956" name="__codelineno-0-956"></a>    <span class="k">if</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">_OHLCV_COLUMNS</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">4</span> <span class="ow">or</span> <span class="n">col</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;_&quot;</span><span class="p">:</span>
</span><span id="__span-0-957"><a id="__codelineno-0-957" name="__codelineno-0-957"></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="__span-0-958"><a id="__codelineno-0-958" name="__codelineno-0-958"></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-959"><a id="__codelineno-0-959" name="__codelineno-0-959"></a>        <span class="n">plot_at</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">col</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
</span><span id="__span-0-960"><a id="__codelineno-0-960" name="__codelineno-0-960"></a>        <span class="n">display_name</span> <span class="o">=</span> <span class="n">col</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
</span><span id="__span-0-961"><a id="__codelineno-0-961" name="__codelineno-0-961"></a>        <span class="k">return</span> <span class="p">(</span><span class="n">plot_at</span><span class="p">,</span> <span class="n">display_name</span><span class="p">)</span>
</span><span id="__span-0-962"><a id="__codelineno-0-962" name="__codelineno-0-962"></a>    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="__span-0-963"><a id="__codelineno-0-963" name="__codelineno-0-963"></a>        <span class="k">return</span> <span class="kc">None</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._get_indicator_columns" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_get_indicator_columns</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-966">966</a></span>
<span class="normal"><a href="#__codelineno-0-967">967</a></span>
<span class="normal"><a href="#__codelineno-0-968">968</a></span>
<span class="normal"><a href="#__codelineno-0-969">969</a></span>
<span class="normal"><a href="#__codelineno-0-970">970</a></span>
<span class="normal"><a href="#__codelineno-0-971">971</a></span>
<span class="normal"><a href="#__codelineno-0-972">972</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-966"><a id="__codelineno-0-966" name="__codelineno-0-966"></a><span class="k">def</span><span class="w"> </span><span class="nf">_get_indicator_columns</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
</span><span id="__span-0-967"><a id="__codelineno-0-967" name="__codelineno-0-967"></a>    <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-0-968"><a id="__codelineno-0-968" name="__codelineno-0-968"></a>    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
</span><span id="__span-0-969"><a id="__codelineno-0-969" name="__codelineno-0-969"></a>        <span class="n">parsed</span> <span class="o">=</span> <span class="n">_parse_indicator_column</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
</span><span id="__span-0-970"><a id="__codelineno-0-970" name="__codelineno-0-970"></a>        <span class="k">if</span> <span class="n">parsed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-971"><a id="__codelineno-0-971" name="__codelineno-0-971"></a>            <span class="n">result</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">parsed</span>
</span><span id="__span-0-972"><a id="__codelineno-0-972" name="__codelineno-0-972"></a>    <span class="k">return</span> <span class="n">result</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._main_indicator_columns" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_main_indicator_columns</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-975">975</a></span>
<span class="normal"><a href="#__codelineno-0-976">976</a></span>
<span class="normal"><a href="#__codelineno-0-977">977</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-975"><a id="__codelineno-0-975" name="__codelineno-0-975"></a><span class="k">def</span><span class="w"> </span><span class="nf">_main_indicator_columns</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
</span><span id="__span-0-976"><a id="__codelineno-0-976" name="__codelineno-0-976"></a>    <span class="n">indicators</span> <span class="o">=</span> <span class="n">_get_indicator_columns</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="__span-0-977"><a id="__codelineno-0-977" name="__codelineno-0-977"></a>    <span class="k">return</span> <span class="p">[(</span><span class="n">col</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span><span class="p">,</span> <span class="p">(</span><span class="n">plot_at</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="ow">in</span> <span class="n">indicators</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">plot_at</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._subplot_groups_from_data" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_subplot_groups_from_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-980">980</a></span>
<span class="normal"><a href="#__codelineno-0-981">981</a></span>
<span class="normal"><a href="#__codelineno-0-982">982</a></span>
<span class="normal"><a href="#__codelineno-0-983">983</a></span>
<span class="normal"><a href="#__codelineno-0-984">984</a></span>
<span class="normal"><a href="#__codelineno-0-985">985</a></span>
<span class="normal"><a href="#__codelineno-0-986">986</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-980"><a id="__codelineno-0-980" name="__codelineno-0-980"></a><span class="k">def</span><span class="w"> </span><span class="nf">_subplot_groups_from_data</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]:</span>
</span><span id="__span-0-981"><a id="__codelineno-0-981" name="__codelineno-0-981"></a>    <span class="n">indicators</span> <span class="o">=</span> <span class="n">_get_indicator_columns</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="__span-0-982"><a id="__codelineno-0-982" name="__codelineno-0-982"></a>    <span class="n">groups</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-0-983"><a id="__codelineno-0-983" name="__codelineno-0-983"></a>    <span class="k">for</span> <span class="n">col</span><span class="p">,</span> <span class="p">(</span><span class="n">plot_at</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="ow">in</span> <span class="n">indicators</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="__span-0-984"><a id="__codelineno-0-984" name="__codelineno-0-984"></a>        <span class="k">if</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">plot_at</span> <span class="o">&lt;=</span> <span class="mi">98</span><span class="p">:</span>
</span><span id="__span-0-985"><a id="__codelineno-0-985" name="__codelineno-0-985"></a>            <span class="n">groups</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">plot_at</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">col</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
</span><span id="__span-0-986"><a id="__codelineno-0-986" name="__codelineno-0-986"></a>    <span class="k">return</span> <span class="n">groups</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._extract_positions_for_chart" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_extract_positions_for_chart</span><span class="p">(</span><span class="n">run_id</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-989"> 989</a></span>
<span class="normal"><a href="#__codelineno-0-990"> 990</a></span>
<span class="normal"><a href="#__codelineno-0-991"> 991</a></span>
<span class="normal"><a href="#__codelineno-0-992"> 992</a></span>
<span class="normal"><a href="#__codelineno-0-993"> 993</a></span>
<span class="normal"><a href="#__codelineno-0-994"> 994</a></span>
<span class="normal"><a href="#__codelineno-0-995"> 995</a></span>
<span class="normal"><a href="#__codelineno-0-996"> 996</a></span>
<span class="normal"><a href="#__codelineno-0-997"> 997</a></span>
<span class="normal"><a href="#__codelineno-0-998"> 998</a></span>
<span class="normal"><a href="#__codelineno-0-999"> 999</a></span>
<span class="normal"><a href="#__codelineno-0-1000">1000</a></span>
<span class="normal"><a href="#__codelineno-0-1001">1001</a></span>
<span class="normal"><a href="#__codelineno-0-1002">1002</a></span>
<span class="normal"><a href="#__codelineno-0-1003">1003</a></span>
<span class="normal"><a href="#__codelineno-0-1004">1004</a></span>
<span class="normal"><a href="#__codelineno-0-1005">1005</a></span>
<span class="normal"><a href="#__codelineno-0-1006">1006</a></span>
<span class="normal"><a href="#__codelineno-0-1007">1007</a></span>
<span class="normal"><a href="#__codelineno-0-1008">1008</a></span>
<span class="normal"><a href="#__codelineno-0-1009">1009</a></span>
<span class="normal"><a href="#__codelineno-0-1010">1010</a></span>
<span class="normal"><a href="#__codelineno-0-1011">1011</a></span>
<span class="normal"><a href="#__codelineno-0-1012">1012</a></span>
<span class="normal"><a href="#__codelineno-0-1013">1013</a></span>
<span class="normal"><a href="#__codelineno-0-1014">1014</a></span>
<span class="normal"><a href="#__codelineno-0-1015">1015</a></span>
<span class="normal"><a href="#__codelineno-0-1016">1016</a></span>
<span class="normal"><a href="#__codelineno-0-1017">1017</a></span>
<span class="normal"><a href="#__codelineno-0-1018">1018</a></span>
<span class="normal"><a href="#__codelineno-0-1019">1019</a></span>
<span class="normal"><a href="#__codelineno-0-1020">1020</a></span>
<span class="normal"><a href="#__codelineno-0-1021">1021</a></span>
<span class="normal"><a href="#__codelineno-0-1022">1022</a></span>
<span class="normal"><a href="#__codelineno-0-1023">1023</a></span>
<span class="normal"><a href="#__codelineno-0-1024">1024</a></span>
<span class="normal"><a href="#__codelineno-0-1025">1025</a></span>
<span class="normal"><a href="#__codelineno-0-1026">1026</a></span>
<span class="normal"><a href="#__codelineno-0-1027">1027</a></span>
<span class="normal"><a href="#__codelineno-0-1028">1028</a></span>
<span class="normal"><a href="#__codelineno-0-1029">1029</a></span>
<span class="normal"><a href="#__codelineno-0-1030">1030</a></span>
<span class="normal"><a href="#__codelineno-0-1031">1031</a></span>
<span class="normal"><a href="#__codelineno-0-1032">1032</a></span>
<span class="normal"><a href="#__codelineno-0-1033">1033</a></span>
<span class="normal"><a href="#__codelineno-0-1034">1034</a></span>
<span class="normal"><a href="#__codelineno-0-1035">1035</a></span>
<span class="normal"><a href="#__codelineno-0-1036">1036</a></span>
<span class="normal"><a href="#__codelineno-0-1037">1037</a></span>
<span class="normal"><a href="#__codelineno-0-1038">1038</a></span>
<span class="normal"><a href="#__codelineno-0-1039">1039</a></span>
<span class="normal"><a href="#__codelineno-0-1040">1040</a></span>
<span class="normal"><a href="#__codelineno-0-1041">1041</a></span>
<span class="normal"><a href="#__codelineno-0-1042">1042</a></span>
<span class="normal"><a href="#__codelineno-0-1043">1043</a></span>
<span class="normal"><a href="#__codelineno-0-1044">1044</a></span>
<span class="normal"><a href="#__codelineno-0-1045">1045</a></span>
<span class="normal"><a href="#__codelineno-0-1046">1046</a></span>
<span class="normal"><a href="#__codelineno-0-1047">1047</a></span>
<span class="normal"><a href="#__codelineno-0-1048">1048</a></span>
<span class="normal"><a href="#__codelineno-0-1049">1049</a></span>
<span class="normal"><a href="#__codelineno-0-1050">1050</a></span>
<span class="normal"><a href="#__codelineno-0-1051">1051</a></span>
<span class="normal"><a href="#__codelineno-0-1052">1052</a></span>
<span class="normal"><a href="#__codelineno-0-1053">1053</a></span>
<span class="normal"><a href="#__codelineno-0-1054">1054</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-989"><a id="__codelineno-0-989" name="__codelineno-0-989"></a><span class="k">def</span><span class="w"> </span><span class="nf">_extract_positions_for_chart</span><span class="p">(</span><span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
</span><span id="__span-0-990"><a id="__codelineno-0-990" name="__codelineno-0-990"></a>    <span class="n">db_path</span> <span class="o">=</span> <span class="n">_get_runs_db_path</span><span class="p">()</span>
</span><span id="__span-0-991"><a id="__codelineno-0-991" name="__codelineno-0-991"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">db_path</span><span class="p">):</span>
</span><span id="__span-0-992"><a id="__codelineno-0-992" name="__codelineno-0-992"></a>        <span class="k">return</span> <span class="p">[]</span>
</span><span id="__span-0-993"><a id="__codelineno-0-993" name="__codelineno-0-993"></a>    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
</span><span id="__span-0-994"><a id="__codelineno-0-994" name="__codelineno-0-994"></a>    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-0-995"><a id="__codelineno-0-995" name="__codelineno-0-995"></a>    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
</span><span id="__span-0-996"><a id="__codelineno-0-996" name="__codelineno-0-996"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;SELECT ts_event, symbol, side, quantity, price, commission, order_id</span>
</span><span id="__span-0-997"><a id="__codelineno-0-997" name="__codelineno-0-997"></a><span class="sd">           FROM fills WHERE run_id = ? ORDER BY ts_event&quot;&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-0-998"><a id="__codelineno-0-998" name="__codelineno-0-998"></a>        <span class="p">(</span><span class="n">run_id</span><span class="p">,),</span>
</span><span id="__span-0-999"><a id="__codelineno-0-999" name="__codelineno-0-999"></a>    <span class="p">)</span>
</span><span id="__span-0-1000"><a id="__codelineno-0-1000" name="__codelineno-0-1000"></a>    <span class="n">rows</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
</span><span id="__span-0-1001"><a id="__codelineno-0-1001" name="__codelineno-0-1001"></a>    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-0-1002"><a id="__codelineno-0-1002" name="__codelineno-0-1002"></a>    <span class="n">fills</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-0-1003"><a id="__codelineno-0-1003" name="__codelineno-0-1003"></a>        <span class="p">{</span>
</span><span id="__span-0-1004"><a id="__codelineno-0-1004" name="__codelineno-0-1004"></a>            <span class="s2">&quot;ts_event&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="__span-0-1005"><a id="__codelineno-0-1005" name="__codelineno-0-1005"></a>            <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="__span-0-1006"><a id="__codelineno-0-1006" name="__codelineno-0-1006"></a>            <span class="s2">&quot;side&quot;</span><span class="p">:</span> <span class="n">_normalize_side</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span>
</span><span id="__span-0-1007"><a id="__codelineno-0-1007" name="__codelineno-0-1007"></a>            <span class="s2">&quot;quantity&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
</span><span id="__span-0-1008"><a id="__codelineno-0-1008" name="__codelineno-0-1008"></a>            <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
</span><span id="__span-0-1009"><a id="__codelineno-0-1009" name="__codelineno-0-1009"></a>            <span class="s2">&quot;commission&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="ow">or</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="__span-0-1010"><a id="__codelineno-0-1010" name="__codelineno-0-1010"></a>            <span class="s2">&quot;order_id&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span>
</span><span id="__span-0-1011"><a id="__codelineno-0-1011" name="__codelineno-0-1011"></a>        <span class="p">}</span>
</span><span id="__span-0-1012"><a id="__codelineno-0-1012" name="__codelineno-0-1012"></a>        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span>
</span><span id="__span-0-1013"><a id="__codelineno-0-1013" name="__codelineno-0-1013"></a>    <span class="p">]</span>
</span><span id="__span-0-1014"><a id="__codelineno-0-1014" name="__codelineno-0-1014"></a>    <span class="n">by_symbol</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-0-1015"><a id="__codelineno-0-1015" name="__codelineno-0-1015"></a>    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fills</span><span class="p">:</span>
</span><span id="__span-0-1016"><a id="__codelineno-0-1016" name="__codelineno-0-1016"></a>        <span class="n">by_symbol</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s2">&quot;symbol&quot;</span><span class="p">],</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</span><span id="__span-0-1017"><a id="__codelineno-0-1017" name="__codelineno-0-1017"></a>    <span class="n">positions</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-1018"><a id="__codelineno-0-1018" name="__codelineno-0-1018"></a>    <span class="k">for</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">symbol_fills</span> <span class="ow">in</span> <span class="n">by_symbol</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="__span-0-1019"><a id="__codelineno-0-1019" name="__codelineno-0-1019"></a>        <span class="n">symbol_fills</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;ts_event&quot;</span><span class="p">])</span>
</span><span id="__span-0-1020"><a id="__codelineno-0-1020" name="__codelineno-0-1020"></a>        <span class="n">position</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="__span-0-1021"><a id="__codelineno-0-1021" name="__codelineno-0-1021"></a>        <span class="n">position_fills</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-1022"><a id="__codelineno-0-1022" name="__codelineno-0-1022"></a>        <span class="n">position_id</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-0-1023"><a id="__codelineno-0-1023" name="__codelineno-0-1023"></a>        <span class="k">for</span> <span class="n">fill</span> <span class="ow">in</span> <span class="n">symbol_fills</span><span class="p">:</span>
</span><span id="__span-0-1024"><a id="__codelineno-0-1024" name="__codelineno-0-1024"></a>            <span class="n">qty</span> <span class="o">=</span> <span class="n">fill</span><span class="p">[</span><span class="s2">&quot;quantity&quot;</span><span class="p">]</span>
</span><span id="__span-0-1025"><a id="__codelineno-0-1025" name="__codelineno-0-1025"></a>            <span class="n">signed_qty</span> <span class="o">=</span> <span class="n">qty</span> <span class="k">if</span> <span class="n">fill</span><span class="p">[</span><span class="s2">&quot;side&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;BUY&quot;</span> <span class="k">else</span> <span class="o">-</span><span class="n">qty</span>
</span><span id="__span-0-1026"><a id="__codelineno-0-1026" name="__codelineno-0-1026"></a>            <span class="n">new_position</span> <span class="o">=</span> <span class="n">position</span> <span class="o">+</span> <span class="n">signed_qty</span>
</span><span id="__span-0-1027"><a id="__codelineno-0-1027" name="__codelineno-0-1027"></a>            <span class="n">position_fills</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fill</span><span class="p">)</span>
</span><span id="__span-0-1028"><a id="__codelineno-0-1028" name="__codelineno-0-1028"></a>            <span class="k">if</span> <span class="n">new_position</span> <span class="o">==</span> <span class="mf">0.0</span> <span class="ow">and</span> <span class="n">position</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
</span><span id="__span-0-1029"><a id="__codelineno-0-1029" name="__codelineno-0-1029"></a>                <span class="n">position_id</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-0-1030"><a id="__codelineno-0-1030" name="__codelineno-0-1030"></a>                <span class="n">pnl</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="__span-0-1031"><a id="__codelineno-0-1031" name="__codelineno-0-1031"></a>                <span class="n">total_commission</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="__span-0-1032"><a id="__codelineno-0-1032" name="__codelineno-0-1032"></a>                <span class="k">for</span> <span class="n">pf</span> <span class="ow">in</span> <span class="n">position_fills</span><span class="p">:</span>
</span><span id="__span-0-1033"><a id="__codelineno-0-1033" name="__codelineno-0-1033"></a>                    <span class="n">value</span> <span class="o">=</span> <span class="n">pf</span><span class="p">[</span><span class="s2">&quot;price&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">pf</span><span class="p">[</span><span class="s2">&quot;quantity&quot;</span><span class="p">]</span>
</span><span id="__span-0-1034"><a id="__codelineno-0-1034" name="__codelineno-0-1034"></a>                    <span class="n">commission</span> <span class="o">=</span> <span class="n">pf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;commission&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="mf">0.0</span>
</span><span id="__span-0-1035"><a id="__codelineno-0-1035" name="__codelineno-0-1035"></a>                    <span class="n">total_commission</span> <span class="o">+=</span> <span class="n">commission</span>
</span><span id="__span-0-1036"><a id="__codelineno-0-1036" name="__codelineno-0-1036"></a>                    <span class="k">if</span> <span class="n">pf</span><span class="p">[</span><span class="s2">&quot;side&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;BUY&quot;</span><span class="p">:</span>
</span><span id="__span-0-1037"><a id="__codelineno-0-1037" name="__codelineno-0-1037"></a>                        <span class="n">pnl</span> <span class="o">-=</span> <span class="n">value</span>
</span><span id="__span-0-1038"><a id="__codelineno-0-1038" name="__codelineno-0-1038"></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-1039"><a id="__codelineno-0-1039" name="__codelineno-0-1039"></a>                        <span class="n">pnl</span> <span class="o">+=</span> <span class="n">value</span>
</span><span id="__span-0-1040"><a id="__codelineno-0-1040" name="__codelineno-0-1040"></a>                <span class="n">pnl</span> <span class="o">-=</span> <span class="n">total_commission</span>
</span><span id="__span-0-1041"><a id="__codelineno-0-1041" name="__codelineno-0-1041"></a>                <span class="n">positions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="__span-0-1042"><a id="__codelineno-0-1042" name="__codelineno-0-1042"></a>                    <span class="p">{</span>
</span><span id="__span-0-1043"><a id="__codelineno-0-1043" name="__codelineno-0-1043"></a>                        <span class="s2">&quot;position_id&quot;</span><span class="p">:</span> <span class="n">position_id</span><span class="p">,</span>
</span><span id="__span-0-1044"><a id="__codelineno-0-1044" name="__codelineno-0-1044"></a>                        <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">symbol</span><span class="p">,</span>
</span><span id="__span-0-1045"><a id="__codelineno-0-1045" name="__codelineno-0-1045"></a>                        <span class="s2">&quot;fills&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">position_fills</span><span class="p">),</span>
</span><span id="__span-0-1046"><a id="__codelineno-0-1046" name="__codelineno-0-1046"></a>                        <span class="s2">&quot;first_fill_time&quot;</span><span class="p">:</span> <span class="n">position_fills</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;ts_event&quot;</span><span class="p">],</span>
</span><span id="__span-0-1047"><a id="__codelineno-0-1047" name="__codelineno-0-1047"></a>                        <span class="s2">&quot;last_fill_time&quot;</span><span class="p">:</span> <span class="n">position_fills</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;ts_event&quot;</span><span class="p">],</span>
</span><span id="__span-0-1048"><a id="__codelineno-0-1048" name="__codelineno-0-1048"></a>                        <span class="s2">&quot;pnl&quot;</span><span class="p">:</span> <span class="n">pnl</span><span class="p">,</span>
</span><span id="__span-0-1049"><a id="__codelineno-0-1049" name="__codelineno-0-1049"></a>                    <span class="p">}</span>
</span><span id="__span-0-1050"><a id="__codelineno-0-1050" name="__codelineno-0-1050"></a>                <span class="p">)</span>
</span><span id="__span-0-1051"><a id="__codelineno-0-1051" name="__codelineno-0-1051"></a>                <span class="n">position_fills</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-1052"><a id="__codelineno-0-1052" name="__codelineno-0-1052"></a>            <span class="n">position</span> <span class="o">=</span> <span class="n">new_position</span>
</span><span id="__span-0-1053"><a id="__codelineno-0-1053" name="__codelineno-0-1053"></a>    <span class="n">positions</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;first_fill_time&quot;</span><span class="p">])</span>
</span><span id="__span-0-1054"><a id="__codelineno-0-1054" name="__codelineno-0-1054"></a>    <span class="k">return</span> <span class="n">positions</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._format_indicator_name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_format_indicator_name</span><span class="p">(</span><span class="n">raw_name</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1057">1057</a></span>
<span class="normal"><a href="#__codelineno-0-1058">1058</a></span>
<span class="normal"><a href="#__codelineno-0-1059">1059</a></span>
<span class="normal"><a href="#__codelineno-0-1060">1060</a></span>
<span class="normal"><a href="#__codelineno-0-1061">1061</a></span>
<span class="normal"><a href="#__codelineno-0-1062">1062</a></span>
<span class="normal"><a href="#__codelineno-0-1063">1063</a></span>
<span class="normal"><a href="#__codelineno-0-1064">1064</a></span>
<span class="normal"><a href="#__codelineno-0-1065">1065</a></span>
<span class="normal"><a href="#__codelineno-0-1066">1066</a></span>
<span class="normal"><a href="#__codelineno-0-1067">1067</a></span>
<span class="normal"><a href="#__codelineno-0-1068">1068</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1057"><a id="__codelineno-0-1057" name="__codelineno-0-1057"></a><span class="k">def</span><span class="w"> </span><span class="nf">_format_indicator_name</span><span class="p">(</span><span class="n">raw_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="__span-0-1058"><a id="__codelineno-0-1058" name="__codelineno-0-1058"></a>    <span class="n">name_with_spaces</span> <span class="o">=</span> <span class="n">raw_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
</span><span id="__span-0-1059"><a id="__codelineno-0-1059" name="__codelineno-0-1059"></a>    <span class="n">words</span> <span class="o">=</span> <span class="n">name_with_spaces</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
</span><span id="__span-0-1060"><a id="__codelineno-0-1060" name="__codelineno-0-1060"></a>    <span class="n">formatted_words</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-1061"><a id="__codelineno-0-1061" name="__codelineno-0-1061"></a>    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span><span class="p">:</span>
</span><span id="__span-0-1062"><a id="__codelineno-0-1062" name="__codelineno-0-1062"></a>        <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">isupper</span><span class="p">():</span>
</span><span id="__span-0-1063"><a id="__codelineno-0-1063" name="__codelineno-0-1063"></a>            <span class="n">formatted_words</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
</span><span id="__span-0-1064"><a id="__codelineno-0-1064" name="__codelineno-0-1064"></a>        <span class="k">elif</span> <span class="n">word</span><span class="o">.</span><span class="n">islower</span><span class="p">():</span>
</span><span id="__span-0-1065"><a id="__codelineno-0-1065" name="__codelineno-0-1065"></a>            <span class="n">formatted_words</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">word</span><span class="o">.</span><span class="n">capitalize</span><span class="p">())</span>
</span><span id="__span-0-1066"><a id="__codelineno-0-1066" name="__codelineno-0-1066"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-1067"><a id="__codelineno-0-1067" name="__codelineno-0-1067"></a>            <span class="n">formatted_words</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
</span><span id="__span-0-1068"><a id="__codelineno-0-1068" name="__codelineno-0-1068"></a>    <span class="k">return</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">formatted_words</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._generate_position_chart" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_generate_position_chart</span><span class="p">(</span><span class="n">output_path</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">target_pos</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">position_id</span><span class="p">,</span> <span class="n">highlight_start</span><span class="p">,</span> <span class="n">highlight_end</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1071">1071</a></span>
<span class="normal"><a href="#__codelineno-0-1072">1072</a></span>
<span class="normal"><a href="#__codelineno-0-1073">1073</a></span>
<span class="normal"><a href="#__codelineno-0-1074">1074</a></span>
<span class="normal"><a href="#__codelineno-0-1075">1075</a></span>
<span class="normal"><a href="#__codelineno-0-1076">1076</a></span>
<span class="normal"><a href="#__codelineno-0-1077">1077</a></span>
<span class="normal"><a href="#__codelineno-0-1078">1078</a></span>
<span class="normal"><a href="#__codelineno-0-1079">1079</a></span>
<span class="normal"><a href="#__codelineno-0-1080">1080</a></span>
<span class="normal"><a href="#__codelineno-0-1081">1081</a></span>
<span class="normal"><a href="#__codelineno-0-1082">1082</a></span>
<span class="normal"><a href="#__codelineno-0-1083">1083</a></span>
<span class="normal"><a href="#__codelineno-0-1084">1084</a></span>
<span class="normal"><a href="#__codelineno-0-1085">1085</a></span>
<span class="normal"><a href="#__codelineno-0-1086">1086</a></span>
<span class="normal"><a href="#__codelineno-0-1087">1087</a></span>
<span class="normal"><a href="#__codelineno-0-1088">1088</a></span>
<span class="normal"><a href="#__codelineno-0-1089">1089</a></span>
<span class="normal"><a href="#__codelineno-0-1090">1090</a></span>
<span class="normal"><a href="#__codelineno-0-1091">1091</a></span>
<span class="normal"><a href="#__codelineno-0-1092">1092</a></span>
<span class="normal"><a href="#__codelineno-0-1093">1093</a></span>
<span class="normal"><a href="#__codelineno-0-1094">1094</a></span>
<span class="normal"><a href="#__codelineno-0-1095">1095</a></span>
<span class="normal"><a href="#__codelineno-0-1096">1096</a></span>
<span class="normal"><a href="#__codelineno-0-1097">1097</a></span>
<span class="normal"><a href="#__codelineno-0-1098">1098</a></span>
<span class="normal"><a href="#__codelineno-0-1099">1099</a></span>
<span class="normal"><a href="#__codelineno-0-1100">1100</a></span>
<span class="normal"><a href="#__codelineno-0-1101">1101</a></span>
<span class="normal"><a href="#__codelineno-0-1102">1102</a></span>
<span class="normal"><a href="#__codelineno-0-1103">1103</a></span>
<span class="normal"><a href="#__codelineno-0-1104">1104</a></span>
<span class="normal"><a href="#__codelineno-0-1105">1105</a></span>
<span class="normal"><a href="#__codelineno-0-1106">1106</a></span>
<span class="normal"><a href="#__codelineno-0-1107">1107</a></span>
<span class="normal"><a href="#__codelineno-0-1108">1108</a></span>
<span class="normal"><a href="#__codelineno-0-1109">1109</a></span>
<span class="normal"><a href="#__codelineno-0-1110">1110</a></span>
<span class="normal"><a href="#__codelineno-0-1111">1111</a></span>
<span class="normal"><a href="#__codelineno-0-1112">1112</a></span>
<span class="normal"><a href="#__codelineno-0-1113">1113</a></span>
<span class="normal"><a href="#__codelineno-0-1114">1114</a></span>
<span class="normal"><a href="#__codelineno-0-1115">1115</a></span>
<span class="normal"><a href="#__codelineno-0-1116">1116</a></span>
<span class="normal"><a href="#__codelineno-0-1117">1117</a></span>
<span class="normal"><a href="#__codelineno-0-1118">1118</a></span>
<span class="normal"><a href="#__codelineno-0-1119">1119</a></span>
<span class="normal"><a href="#__codelineno-0-1120">1120</a></span>
<span class="normal"><a href="#__codelineno-0-1121">1121</a></span>
<span class="normal"><a href="#__codelineno-0-1122">1122</a></span>
<span class="normal"><a href="#__codelineno-0-1123">1123</a></span>
<span class="normal"><a href="#__codelineno-0-1124">1124</a></span>
<span class="normal"><a href="#__codelineno-0-1125">1125</a></span>
<span class="normal"><a href="#__codelineno-0-1126">1126</a></span>
<span class="normal"><a href="#__codelineno-0-1127">1127</a></span>
<span class="normal"><a href="#__codelineno-0-1128">1128</a></span>
<span class="normal"><a href="#__codelineno-0-1129">1129</a></span>
<span class="normal"><a href="#__codelineno-0-1130">1130</a></span>
<span class="normal"><a href="#__codelineno-0-1131">1131</a></span>
<span class="normal"><a href="#__codelineno-0-1132">1132</a></span>
<span class="normal"><a href="#__codelineno-0-1133">1133</a></span>
<span class="normal"><a href="#__codelineno-0-1134">1134</a></span>
<span class="normal"><a href="#__codelineno-0-1135">1135</a></span>
<span class="normal"><a href="#__codelineno-0-1136">1136</a></span>
<span class="normal"><a href="#__codelineno-0-1137">1137</a></span>
<span class="normal"><a href="#__codelineno-0-1138">1138</a></span>
<span class="normal"><a href="#__codelineno-0-1139">1139</a></span>
<span class="normal"><a href="#__codelineno-0-1140">1140</a></span>
<span class="normal"><a href="#__codelineno-0-1141">1141</a></span>
<span class="normal"><a href="#__codelineno-0-1142">1142</a></span>
<span class="normal"><a href="#__codelineno-0-1143">1143</a></span>
<span class="normal"><a href="#__codelineno-0-1144">1144</a></span>
<span class="normal"><a href="#__codelineno-0-1145">1145</a></span>
<span class="normal"><a href="#__codelineno-0-1146">1146</a></span>
<span class="normal"><a href="#__codelineno-0-1147">1147</a></span>
<span class="normal"><a href="#__codelineno-0-1148">1148</a></span>
<span class="normal"><a href="#__codelineno-0-1149">1149</a></span>
<span class="normal"><a href="#__codelineno-0-1150">1150</a></span>
<span class="normal"><a href="#__codelineno-0-1151">1151</a></span>
<span class="normal"><a href="#__codelineno-0-1152">1152</a></span>
<span class="normal"><a href="#__codelineno-0-1153">1153</a></span>
<span class="normal"><a href="#__codelineno-0-1154">1154</a></span>
<span class="normal"><a href="#__codelineno-0-1155">1155</a></span>
<span class="normal"><a href="#__codelineno-0-1156">1156</a></span>
<span class="normal"><a href="#__codelineno-0-1157">1157</a></span>
<span class="normal"><a href="#__codelineno-0-1158">1158</a></span>
<span class="normal"><a href="#__codelineno-0-1159">1159</a></span>
<span class="normal"><a href="#__codelineno-0-1160">1160</a></span>
<span class="normal"><a href="#__codelineno-0-1161">1161</a></span>
<span class="normal"><a href="#__codelineno-0-1162">1162</a></span>
<span class="normal"><a href="#__codelineno-0-1163">1163</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1071"><a id="__codelineno-0-1071" name="__codelineno-0-1071"></a><span class="k">def</span><span class="w"> </span><span class="nf">_generate_position_chart</span><span class="p">(</span>
</span><span id="__span-0-1072"><a id="__codelineno-0-1072" name="__codelineno-0-1072"></a>    <span class="n">output_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
</span><span id="__span-0-1073"><a id="__codelineno-0-1073" name="__codelineno-0-1073"></a>    <span class="n">data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span><span id="__span-0-1074"><a id="__codelineno-0-1074" name="__codelineno-0-1074"></a>    <span class="n">target_pos</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
</span><span id="__span-0-1075"><a id="__codelineno-0-1075" name="__codelineno-0-1075"></a>    <span class="n">symbol</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="__span-0-1076"><a id="__codelineno-0-1076" name="__codelineno-0-1076"></a>    <span class="n">position_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="__span-0-1077"><a id="__codelineno-0-1077" name="__codelineno-0-1077"></a>    <span class="n">highlight_start</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="__span-0-1078"><a id="__codelineno-0-1078" name="__codelineno-0-1078"></a>    <span class="n">highlight_end</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="__span-0-1079"><a id="__codelineno-0-1079" name="__codelineno-0-1079"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-1080"><a id="__codelineno-0-1080" name="__codelineno-0-1080"></a>    <span class="n">groups</span> <span class="o">=</span> <span class="n">_subplot_groups_from_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="__span-0-1081"><a id="__codelineno-0-1081" name="__codelineno-0-1081"></a>    <span class="n">n</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
</span><span id="__span-0-1082"><a id="__codelineno-0-1082" name="__codelineno-0-1082"></a>    <span class="n">ratios</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
</span><span id="__span-0-1083"><a id="__codelineno-0-1083" name="__codelineno-0-1083"></a>    <span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span>
</span><span id="__span-0-1084"><a id="__codelineno-0-1084" name="__codelineno-0-1084"></a>        <span class="n">n</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">gridspec_kw</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;height_ratios&quot;</span><span class="p">:</span> <span class="n">ratios</span><span class="p">}</span>
</span><span id="__span-0-1085"><a id="__codelineno-0-1085" name="__codelineno-0-1085"></a>    <span class="p">)</span>
</span><span id="__span-0-1086"><a id="__codelineno-0-1086" name="__codelineno-0-1086"></a>    <span class="n">axes</span> <span class="o">=</span> <span class="p">[</span><span class="n">axes</span><span class="p">]</span> <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="nb">list</span><span class="p">(</span><span class="n">axes</span><span class="p">)</span>
</span><span id="__span-0-1087"><a id="__codelineno-0-1087" name="__codelineno-0-1087"></a>
</span><span id="__span-0-1088"><a id="__codelineno-0-1088" name="__codelineno-0-1088"></a>    <span class="n">ax_pnl</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-0-1089"><a id="__codelineno-0-1089" name="__codelineno-0-1089"></a>    <span class="n">ax_main</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="__span-0-1090"><a id="__codelineno-0-1090" name="__codelineno-0-1090"></a>
</span><span id="__span-0-1091"><a id="__codelineno-0-1091" name="__codelineno-0-1091"></a>    <span class="n">_plot_pnl_tracking</span><span class="p">(</span><span class="n">ax_pnl</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">target_pos</span><span class="p">,</span> <span class="n">highlight_start</span><span class="p">,</span> <span class="n">highlight_end</span><span class="p">)</span>
</span><span id="__span-0-1092"><a id="__codelineno-0-1092" name="__codelineno-0-1092"></a>    <span class="n">_plot_price_data</span><span class="p">(</span><span class="n">ax_main</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">highlight_start</span><span class="p">,</span> <span class="n">highlight_end</span><span class="p">)</span>
</span><span id="__span-0-1093"><a id="__codelineno-0-1093" name="__codelineno-0-1093"></a>    <span class="n">_plot_main_indicators</span><span class="p">(</span><span class="n">ax_main</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</span><span id="__span-0-1094"><a id="__codelineno-0-1094" name="__codelineno-0-1094"></a>    <span class="n">_plot_trade_markers</span><span class="p">(</span><span class="n">ax_main</span><span class="p">,</span> <span class="n">target_pos</span><span class="p">)</span>
</span><span id="__span-0-1095"><a id="__codelineno-0-1095" name="__codelineno-0-1095"></a>
</span><span id="__span-0-1096"><a id="__codelineno-0-1096" name="__codelineno-0-1096"></a>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">ind_cols</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">groups</span><span class="o">.</span><span class="n">items</span><span class="p">())):</span>
</span><span id="__span-0-1097"><a id="__codelineno-0-1097" name="__codelineno-0-1097"></a>        <span class="n">ax_sub</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span>
</span><span id="__span-0-1098"><a id="__codelineno-0-1098" name="__codelineno-0-1098"></a>        <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">display_name</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ind_cols</span><span class="p">):</span>
</span><span id="__span-0-1099"><a id="__codelineno-0-1099" name="__codelineno-0-1099"></a>            <span class="k">if</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
</span><span id="__span-0-1100"><a id="__codelineno-0-1100" name="__codelineno-0-1100"></a>                <span class="n">ax_sub</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="__span-0-1101"><a id="__codelineno-0-1101" name="__codelineno-0-1101"></a>                    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;ts_event&quot;</span><span class="p">],</span>
</span><span id="__span-0-1102"><a id="__codelineno-0-1102" name="__codelineno-0-1102"></a>                    <span class="n">data</span><span class="p">[</span><span class="n">col</span><span class="p">],</span>
</span><span id="__span-0-1103"><a id="__codelineno-0-1103" name="__codelineno-0-1103"></a>                    <span class="n">label</span><span class="o">=</span><span class="n">display_name</span><span class="p">,</span>
</span><span id="__span-0-1104"><a id="__codelineno-0-1104" name="__codelineno-0-1104"></a>                    <span class="n">linewidth</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span>
</span><span id="__span-0-1105"><a id="__codelineno-0-1105" name="__codelineno-0-1105"></a>                    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
</span><span id="__span-0-1106"><a id="__codelineno-0-1106" name="__codelineno-0-1106"></a>                    <span class="n">color</span><span class="o">=</span><span class="n">_SUBPLOT_COLORS</span><span class="p">[</span><span class="n">j</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">_SUBPLOT_COLORS</span><span class="p">)],</span>
</span><span id="__span-0-1107"><a id="__codelineno-0-1107" name="__codelineno-0-1107"></a>                <span class="p">)</span>
</span><span id="__span-0-1108"><a id="__codelineno-0-1108" name="__codelineno-0-1108"></a>        <span class="n">ax_sub</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
</span><span id="__span-0-1109"><a id="__codelineno-0-1109" name="__codelineno-0-1109"></a>        <span class="n">ax_sub</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
</span><span id="__span-0-1110"><a id="__codelineno-0-1110" name="__codelineno-0-1110"></a>
</span><span id="__span-0-1111"><a id="__codelineno-0-1111" name="__codelineno-0-1111"></a>    <span class="n">label</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="__span-0-1112"><a id="__codelineno-0-1112" name="__codelineno-0-1112"></a>        <span class="s2">&quot;WIN&quot;</span>
</span><span id="__span-0-1113"><a id="__codelineno-0-1113" name="__codelineno-0-1113"></a>        <span class="k">if</span> <span class="n">target_pos</span><span class="p">[</span><span class="s2">&quot;pnl&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span id="__span-0-1114"><a id="__codelineno-0-1114" name="__codelineno-0-1114"></a>        <span class="k">else</span> <span class="s2">&quot;LOSS&quot;</span>
</span><span id="__span-0-1115"><a id="__codelineno-0-1115" name="__codelineno-0-1115"></a>        <span class="k">if</span> <span class="n">target_pos</span><span class="p">[</span><span class="s2">&quot;pnl&quot;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span>
</span><span id="__span-0-1116"><a id="__codelineno-0-1116" name="__codelineno-0-1116"></a>        <span class="k">else</span> <span class="s2">&quot;BREAK-EVEN&quot;</span>
</span><span id="__span-0-1117"><a id="__codelineno-0-1117" name="__codelineno-0-1117"></a>    <span class="p">)</span>
</span><span id="__span-0-1118"><a id="__codelineno-0-1118" name="__codelineno-0-1118"></a>    <span class="n">duration_secs</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="__span-0-1119"><a id="__codelineno-0-1119" name="__codelineno-0-1119"></a>        <span class="n">target_pos</span><span class="p">[</span><span class="s2">&quot;last_fill_time&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">target_pos</span><span class="p">[</span><span class="s2">&quot;first_fill_time&quot;</span><span class="p">]</span>
</span><span id="__span-0-1120"><a id="__codelineno-0-1120" name="__codelineno-0-1120"></a>    <span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
</span><span id="__span-0-1121"><a id="__codelineno-0-1121" name="__codelineno-0-1121"></a>    <span class="n">duration_mins</span> <span class="o">=</span> <span class="n">duration_secs</span> <span class="o">/</span> <span class="mi">60</span>
</span><span id="__span-0-1122"><a id="__codelineno-0-1122" name="__codelineno-0-1122"></a>    <span class="n">ax_pnl</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
</span><span id="__span-0-1123"><a id="__codelineno-0-1123" name="__codelineno-0-1123"></a>        <span class="sa">f</span><span class="s2">&quot;Position #</span><span class="si">{</span><span class="n">position_id</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2"> - P&amp;L: $</span><span class="si">{</span><span class="n">target_pos</span><span class="p">[</span><span class="s1">&#39;pnl&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> - Duration: </span><span class="si">{</span><span class="n">duration_mins</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2">min&quot;</span><span class="p">,</span>
</span><span id="__span-0-1124"><a id="__codelineno-0-1124" name="__codelineno-0-1124"></a>        <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
</span><span id="__span-0-1125"><a id="__codelineno-0-1125" name="__codelineno-0-1125"></a>        <span class="n">fontweight</span><span class="o">=</span><span class="s2">&quot;bold&quot;</span><span class="p">,</span>
</span><span id="__span-0-1126"><a id="__codelineno-0-1126" name="__codelineno-0-1126"></a>    <span class="p">)</span>
</span><span id="__span-0-1127"><a id="__codelineno-0-1127" name="__codelineno-0-1127"></a>
</span><span id="__span-0-1128"><a id="__codelineno-0-1128" name="__codelineno-0-1128"></a>    <span class="n">total_seconds</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="__span-0-1129"><a id="__codelineno-0-1129" name="__codelineno-0-1129"></a>        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;ts_event&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;ts_event&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-0-1130"><a id="__codelineno-0-1130" name="__codelineno-0-1130"></a>    <span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
</span><span id="__span-0-1131"><a id="__codelineno-0-1131" name="__codelineno-0-1131"></a>    <span class="n">hours</span> <span class="o">=</span> <span class="n">total_seconds</span> <span class="o">/</span> <span class="mi">3600</span>
</span><span id="__span-0-1132"><a id="__codelineno-0-1132" name="__codelineno-0-1132"></a>    <span class="n">days</span> <span class="o">=</span> <span class="n">total_seconds</span> <span class="o">/</span> <span class="mi">86400</span>
</span><span id="__span-0-1133"><a id="__codelineno-0-1133" name="__codelineno-0-1133"></a>
</span><span id="__span-0-1134"><a id="__codelineno-0-1134" name="__codelineno-0-1134"></a>    <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">axes</span><span class="p">:</span>
</span><span id="__span-0-1135"><a id="__codelineno-0-1135" name="__codelineno-0-1135"></a>        <span class="k">if</span> <span class="n">days</span> <span class="o">&gt;</span> <span class="mi">30</span><span class="p">:</span>
</span><span id="__span-0-1136"><a id="__codelineno-0-1136" name="__codelineno-0-1136"></a>            <span class="n">a</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">))</span>
</span><span id="__span-0-1137"><a id="__codelineno-0-1137" name="__codelineno-0-1137"></a>            <span class="n">a</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">WeekdayLocator</span><span class="p">(</span><span class="n">interval</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</span><span id="__span-0-1138"><a id="__codelineno-0-1138" name="__codelineno-0-1138"></a>        <span class="k">elif</span> <span class="n">days</span> <span class="o">&gt;</span> <span class="mi">7</span><span class="p">:</span>
</span><span id="__span-0-1139"><a id="__codelineno-0-1139" name="__codelineno-0-1139"></a>            <span class="n">a</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s2">&quot;%m/</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">))</span>
</span><span id="__span-0-1140"><a id="__codelineno-0-1140" name="__codelineno-0-1140"></a>            <span class="n">a</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">DayLocator</span><span class="p">(</span><span class="n">interval</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</span><span id="__span-0-1141"><a id="__codelineno-0-1141" name="__codelineno-0-1141"></a>        <span class="k">elif</span> <span class="n">days</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="__span-0-1142"><a id="__codelineno-0-1142" name="__codelineno-0-1142"></a>            <span class="n">a</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s2">&quot;%m/</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">))</span>
</span><span id="__span-0-1143"><a id="__codelineno-0-1143" name="__codelineno-0-1143"></a>            <span class="n">a</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">DayLocator</span><span class="p">(</span><span class="n">interval</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</span><span id="__span-0-1144"><a id="__codelineno-0-1144" name="__codelineno-0-1144"></a>        <span class="k">elif</span> <span class="n">hours</span> <span class="o">&gt;</span> <span class="mi">24</span><span class="p">:</span>
</span><span id="__span-0-1145"><a id="__codelineno-0-1145" name="__codelineno-0-1145"></a>            <span class="n">a</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s2">&quot;%m/</span><span class="si">%d</span><span class="s2"> %H:%M&quot;</span><span class="p">))</span>
</span><span id="__span-0-1146"><a id="__codelineno-0-1146" name="__codelineno-0-1146"></a>            <span class="n">a</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">HourLocator</span><span class="p">(</span><span class="n">interval</span><span class="o">=</span><span class="mi">6</span><span class="p">))</span>
</span><span id="__span-0-1147"><a id="__codelineno-0-1147" name="__codelineno-0-1147"></a>        <span class="k">elif</span> <span class="n">hours</span> <span class="o">&gt;</span> <span class="mi">8</span><span class="p">:</span>
</span><span id="__span-0-1148"><a id="__codelineno-0-1148" name="__codelineno-0-1148"></a>            <span class="n">a</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s2">&quot;%H:%M&quot;</span><span class="p">))</span>
</span><span id="__span-0-1149"><a id="__codelineno-0-1149" name="__codelineno-0-1149"></a>            <span class="n">a</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">HourLocator</span><span class="p">(</span><span class="n">interval</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</span><span id="__span-0-1150"><a id="__codelineno-0-1150" name="__codelineno-0-1150"></a>        <span class="k">elif</span> <span class="n">hours</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="__span-0-1151"><a id="__codelineno-0-1151" name="__codelineno-0-1151"></a>            <span class="n">a</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s2">&quot;%H:%M&quot;</span><span class="p">))</span>
</span><span id="__span-0-1152"><a id="__codelineno-0-1152" name="__codelineno-0-1152"></a>            <span class="n">a</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">HourLocator</span><span class="p">(</span><span class="n">interval</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</span><span id="__span-0-1153"><a id="__codelineno-0-1153" name="__codelineno-0-1153"></a>        <span class="k">elif</span> <span class="n">hours</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
</span><span id="__span-0-1154"><a id="__codelineno-0-1154" name="__codelineno-0-1154"></a>            <span class="n">a</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s2">&quot;%H:%M&quot;</span><span class="p">))</span>
</span><span id="__span-0-1155"><a id="__codelineno-0-1155" name="__codelineno-0-1155"></a>            <span class="n">a</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">MinuteLocator</span><span class="p">(</span><span class="n">interval</span><span class="o">=</span><span class="mi">15</span><span class="p">))</span>
</span><span id="__span-0-1156"><a id="__codelineno-0-1156" name="__codelineno-0-1156"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-1157"><a id="__codelineno-0-1157" name="__codelineno-0-1157"></a>            <span class="n">a</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s2">&quot;%H:%M:%S&quot;</span><span class="p">))</span>
</span><span id="__span-0-1158"><a id="__codelineno-0-1158" name="__codelineno-0-1158"></a>            <span class="n">a</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">MinuteLocator</span><span class="p">(</span><span class="n">interval</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>
</span><span id="__span-0-1159"><a id="__codelineno-0-1159" name="__codelineno-0-1159"></a>
</span><span id="__span-0-1160"><a id="__codelineno-0-1160" name="__codelineno-0-1160"></a>    <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span>
</span><span id="__span-0-1161"><a id="__codelineno-0-1161" name="__codelineno-0-1161"></a>    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="__span-0-1162"><a id="__codelineno-0-1162" name="__codelineno-0-1162"></a>    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">output_path</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s2">&quot;tight&quot;</span><span class="p">)</span>
</span><span id="__span-0-1163"><a id="__codelineno-0-1163" name="__codelineno-0-1163"></a>    <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._plot_pnl_tracking" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_plot_pnl_tracking</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">target_pos</span><span class="p">,</span> <span class="n">highlight_start</span><span class="p">,</span> <span class="n">highlight_end</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1166">1166</a></span>
<span class="normal"><a href="#__codelineno-0-1167">1167</a></span>
<span class="normal"><a href="#__codelineno-0-1168">1168</a></span>
<span class="normal"><a href="#__codelineno-0-1169">1169</a></span>
<span class="normal"><a href="#__codelineno-0-1170">1170</a></span>
<span class="normal"><a href="#__codelineno-0-1171">1171</a></span>
<span class="normal"><a href="#__codelineno-0-1172">1172</a></span>
<span class="normal"><a href="#__codelineno-0-1173">1173</a></span>
<span class="normal"><a href="#__codelineno-0-1174">1174</a></span>
<span class="normal"><a href="#__codelineno-0-1175">1175</a></span>
<span class="normal"><a href="#__codelineno-0-1176">1176</a></span>
<span class="normal"><a href="#__codelineno-0-1177">1177</a></span>
<span class="normal"><a href="#__codelineno-0-1178">1178</a></span>
<span class="normal"><a href="#__codelineno-0-1179">1179</a></span>
<span class="normal"><a href="#__codelineno-0-1180">1180</a></span>
<span class="normal"><a href="#__codelineno-0-1181">1181</a></span>
<span class="normal"><a href="#__codelineno-0-1182">1182</a></span>
<span class="normal"><a href="#__codelineno-0-1183">1183</a></span>
<span class="normal"><a href="#__codelineno-0-1184">1184</a></span>
<span class="normal"><a href="#__codelineno-0-1185">1185</a></span>
<span class="normal"><a href="#__codelineno-0-1186">1186</a></span>
<span class="normal"><a href="#__codelineno-0-1187">1187</a></span>
<span class="normal"><a href="#__codelineno-0-1188">1188</a></span>
<span class="normal"><a href="#__codelineno-0-1189">1189</a></span>
<span class="normal"><a href="#__codelineno-0-1190">1190</a></span>
<span class="normal"><a href="#__codelineno-0-1191">1191</a></span>
<span class="normal"><a href="#__codelineno-0-1192">1192</a></span>
<span class="normal"><a href="#__codelineno-0-1193">1193</a></span>
<span class="normal"><a href="#__codelineno-0-1194">1194</a></span>
<span class="normal"><a href="#__codelineno-0-1195">1195</a></span>
<span class="normal"><a href="#__codelineno-0-1196">1196</a></span>
<span class="normal"><a href="#__codelineno-0-1197">1197</a></span>
<span class="normal"><a href="#__codelineno-0-1198">1198</a></span>
<span class="normal"><a href="#__codelineno-0-1199">1199</a></span>
<span class="normal"><a href="#__codelineno-0-1200">1200</a></span>
<span class="normal"><a href="#__codelineno-0-1201">1201</a></span>
<span class="normal"><a href="#__codelineno-0-1202">1202</a></span>
<span class="normal"><a href="#__codelineno-0-1203">1203</a></span>
<span class="normal"><a href="#__codelineno-0-1204">1204</a></span>
<span class="normal"><a href="#__codelineno-0-1205">1205</a></span>
<span class="normal"><a href="#__codelineno-0-1206">1206</a></span>
<span class="normal"><a href="#__codelineno-0-1207">1207</a></span>
<span class="normal"><a href="#__codelineno-0-1208">1208</a></span>
<span class="normal"><a href="#__codelineno-0-1209">1209</a></span>
<span class="normal"><a href="#__codelineno-0-1210">1210</a></span>
<span class="normal"><a href="#__codelineno-0-1211">1211</a></span>
<span class="normal"><a href="#__codelineno-0-1212">1212</a></span>
<span class="normal"><a href="#__codelineno-0-1213">1213</a></span>
<span class="normal"><a href="#__codelineno-0-1214">1214</a></span>
<span class="normal"><a href="#__codelineno-0-1215">1215</a></span>
<span class="normal"><a href="#__codelineno-0-1216">1216</a></span>
<span class="normal"><a href="#__codelineno-0-1217">1217</a></span>
<span class="normal"><a href="#__codelineno-0-1218">1218</a></span>
<span class="normal"><a href="#__codelineno-0-1219">1219</a></span>
<span class="normal"><a href="#__codelineno-0-1220">1220</a></span>
<span class="normal"><a href="#__codelineno-0-1221">1221</a></span>
<span class="normal"><a href="#__codelineno-0-1222">1222</a></span>
<span class="normal"><a href="#__codelineno-0-1223">1223</a></span>
<span class="normal"><a href="#__codelineno-0-1224">1224</a></span>
<span class="normal"><a href="#__codelineno-0-1225">1225</a></span>
<span class="normal"><a href="#__codelineno-0-1226">1226</a></span>
<span class="normal"><a href="#__codelineno-0-1227">1227</a></span>
<span class="normal"><a href="#__codelineno-0-1228">1228</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1166"><a id="__codelineno-0-1166" name="__codelineno-0-1166"></a><span class="k">def</span><span class="w"> </span><span class="nf">_plot_pnl_tracking</span><span class="p">(</span>
</span><span id="__span-0-1167"><a id="__codelineno-0-1167" name="__codelineno-0-1167"></a>    <span class="n">ax</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">target_pos</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">highlight_start</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">highlight_end</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="__span-0-1168"><a id="__codelineno-0-1168" name="__codelineno-0-1168"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-1169"><a id="__codelineno-0-1169" name="__codelineno-0-1169"></a>    <span class="n">pnl_series</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-1170"><a id="__codelineno-0-1170" name="__codelineno-0-1170"></a>    <span class="n">max_pnl</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-0-1171"><a id="__codelineno-0-1171" name="__codelineno-0-1171"></a>    <span class="n">drawdown_series</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-1172"><a id="__codelineno-0-1172" name="__codelineno-0-1172"></a>
</span><span id="__span-0-1173"><a id="__codelineno-0-1173" name="__codelineno-0-1173"></a>    <span class="n">entry_price</span> <span class="o">=</span> <span class="n">target_pos</span><span class="p">[</span><span class="s2">&quot;fills&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;price&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">target_pos</span><span class="p">[</span><span class="s2">&quot;fills&quot;</span><span class="p">]</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="__span-0-1174"><a id="__codelineno-0-1174" name="__codelineno-0-1174"></a>    <span class="n">direction</span> <span class="o">=</span> <span class="n">target_pos</span><span class="p">[</span><span class="s2">&quot;fills&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;side&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">target_pos</span><span class="p">[</span><span class="s2">&quot;fills&quot;</span><span class="p">]</span> <span class="k">else</span> <span class="s2">&quot;BUY&quot;</span>
</span><span id="__span-0-1175"><a id="__codelineno-0-1175" name="__codelineno-0-1175"></a>    <span class="n">in_position</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-0-1176"><a id="__codelineno-0-1176" name="__codelineno-0-1176"></a>
</span><span id="__span-0-1177"><a id="__codelineno-0-1177" name="__codelineno-0-1177"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)):</span>
</span><span id="__span-0-1178"><a id="__codelineno-0-1178" name="__codelineno-0-1178"></a>        <span class="n">ts</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;ts_event&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="__span-0-1179"><a id="__codelineno-0-1179" name="__codelineno-0-1179"></a>        <span class="n">close</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="__span-0-1180"><a id="__codelineno-0-1180" name="__codelineno-0-1180"></a>
</span><span id="__span-0-1181"><a id="__codelineno-0-1181" name="__codelineno-0-1181"></a>        <span class="k">if</span> <span class="n">ts</span> <span class="o">&gt;=</span> <span class="n">target_pos</span><span class="p">[</span><span class="s2">&quot;first_fill_time&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">ts</span> <span class="o">&lt;=</span> <span class="n">target_pos</span><span class="p">[</span><span class="s2">&quot;last_fill_time&quot;</span><span class="p">]:</span>
</span><span id="__span-0-1182"><a id="__codelineno-0-1182" name="__codelineno-0-1182"></a>            <span class="n">in_position</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-0-1183"><a id="__codelineno-0-1183" name="__codelineno-0-1183"></a>            <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;BUY&quot;</span><span class="p">:</span>
</span><span id="__span-0-1184"><a id="__codelineno-0-1184" name="__codelineno-0-1184"></a>                <span class="n">pnl</span> <span class="o">=</span> <span class="n">close</span> <span class="o">-</span> <span class="n">entry_price</span>
</span><span id="__span-0-1185"><a id="__codelineno-0-1185" name="__codelineno-0-1185"></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-1186"><a id="__codelineno-0-1186" name="__codelineno-0-1186"></a>                <span class="n">pnl</span> <span class="o">=</span> <span class="n">entry_price</span> <span class="o">-</span> <span class="n">close</span>
</span><span id="__span-0-1187"><a id="__codelineno-0-1187" name="__codelineno-0-1187"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-1188"><a id="__codelineno-0-1188" name="__codelineno-0-1188"></a>            <span class="n">in_position</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-0-1189"><a id="__codelineno-0-1189" name="__codelineno-0-1189"></a>            <span class="n">pnl</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-0-1190"><a id="__codelineno-0-1190" name="__codelineno-0-1190"></a>
</span><span id="__span-0-1191"><a id="__codelineno-0-1191" name="__codelineno-0-1191"></a>        <span class="k">if</span> <span class="n">in_position</span><span class="p">:</span>
</span><span id="__span-0-1192"><a id="__codelineno-0-1192" name="__codelineno-0-1192"></a>            <span class="n">max_pnl</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">max_pnl</span><span class="p">,</span> <span class="n">pnl</span><span class="p">)</span>
</span><span id="__span-0-1193"><a id="__codelineno-0-1193" name="__codelineno-0-1193"></a>            <span class="n">drawdown</span> <span class="o">=</span> <span class="n">pnl</span> <span class="o">-</span> <span class="n">max_pnl</span>
</span><span id="__span-0-1194"><a id="__codelineno-0-1194" name="__codelineno-0-1194"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-1195"><a id="__codelineno-0-1195" name="__codelineno-0-1195"></a>            <span class="n">drawdown</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-0-1196"><a id="__codelineno-0-1196" name="__codelineno-0-1196"></a>
</span><span id="__span-0-1197"><a id="__codelineno-0-1197" name="__codelineno-0-1197"></a>        <span class="n">pnl_series</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pnl</span><span class="p">)</span>
</span><span id="__span-0-1198"><a id="__codelineno-0-1198" name="__codelineno-0-1198"></a>        <span class="n">drawdown_series</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">drawdown</span><span class="p">)</span>
</span><span id="__span-0-1199"><a id="__codelineno-0-1199" name="__codelineno-0-1199"></a>
</span><span id="__span-0-1200"><a id="__codelineno-0-1200" name="__codelineno-0-1200"></a>    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="__span-0-1201"><a id="__codelineno-0-1201" name="__codelineno-0-1201"></a>        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;ts_event&quot;</span><span class="p">],</span>
</span><span id="__span-0-1202"><a id="__codelineno-0-1202" name="__codelineno-0-1202"></a>        <span class="n">pnl_series</span><span class="p">,</span>
</span><span id="__span-0-1203"><a id="__codelineno-0-1203" name="__codelineno-0-1203"></a>        <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span>
</span><span id="__span-0-1204"><a id="__codelineno-0-1204" name="__codelineno-0-1204"></a>        <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="__span-0-1205"><a id="__codelineno-0-1205" name="__codelineno-0-1205"></a>        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Unrealized P&amp;L&quot;</span><span class="p">,</span>
</span><span id="__span-0-1206"><a id="__codelineno-0-1206" name="__codelineno-0-1206"></a>        <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
</span><span id="__span-0-1207"><a id="__codelineno-0-1207" name="__codelineno-0-1207"></a>    <span class="p">)</span>
</span><span id="__span-0-1208"><a id="__codelineno-0-1208" name="__codelineno-0-1208"></a>    <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span>
</span><span id="__span-0-1209"><a id="__codelineno-0-1209" name="__codelineno-0-1209"></a>        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;ts_event&quot;</span><span class="p">],</span> <span class="n">drawdown_series</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Drawdown&quot;</span>
</span><span id="__span-0-1210"><a id="__codelineno-0-1210" name="__codelineno-0-1210"></a>    <span class="p">)</span>
</span><span id="__span-0-1211"><a id="__codelineno-0-1211" name="__codelineno-0-1211"></a>    <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
</span><span id="__span-0-1212"><a id="__codelineno-0-1212" name="__codelineno-0-1212"></a>
</span><span id="__span-0-1213"><a id="__codelineno-0-1213" name="__codelineno-0-1213"></a>    <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">highlight_start</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">highlight_end</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
</span><span id="__span-0-1214"><a id="__codelineno-0-1214" name="__codelineno-0-1214"></a>        <span class="n">start_time</span> <span class="o">=</span> <span class="n">mdates</span><span class="o">.</span><span class="n">date2num</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;ts_event&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">highlight_start</span><span class="p">])</span>
</span><span id="__span-0-1215"><a id="__codelineno-0-1215" name="__codelineno-0-1215"></a>        <span class="n">end_time</span> <span class="o">=</span> <span class="n">mdates</span><span class="o">.</span><span class="n">date2num</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;ts_event&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">highlight_end</span><span class="p">])</span>
</span><span id="__span-0-1216"><a id="__codelineno-0-1216" name="__codelineno-0-1216"></a>        <span class="n">y_min</span><span class="p">,</span> <span class="n">y_max</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
</span><span id="__span-0-1217"><a id="__codelineno-0-1217" name="__codelineno-0-1217"></a>        <span class="n">rect</span> <span class="o">=</span> <span class="n">Rectangle</span><span class="p">(</span>
</span><span id="__span-0-1218"><a id="__codelineno-0-1218" name="__codelineno-0-1218"></a>            <span class="p">(</span><span class="n">start_time</span><span class="p">,</span> <span class="n">y_min</span><span class="p">),</span>
</span><span id="__span-0-1219"><a id="__codelineno-0-1219" name="__codelineno-0-1219"></a>            <span class="n">end_time</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">,</span>
</span><span id="__span-0-1220"><a id="__codelineno-0-1220" name="__codelineno-0-1220"></a>            <span class="n">y_max</span> <span class="o">-</span> <span class="n">y_min</span><span class="p">,</span>
</span><span id="__span-0-1221"><a id="__codelineno-0-1221" name="__codelineno-0-1221"></a>            <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;lightblue&quot;</span><span class="p">,</span>
</span><span id="__span-0-1222"><a id="__codelineno-0-1222" name="__codelineno-0-1222"></a>            <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
</span><span id="__span-0-1223"><a id="__codelineno-0-1223" name="__codelineno-0-1223"></a>        <span class="p">)</span>
</span><span id="__span-0-1224"><a id="__codelineno-0-1224" name="__codelineno-0-1224"></a>        <span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>
</span><span id="__span-0-1225"><a id="__codelineno-0-1225" name="__codelineno-0-1225"></a>
</span><span id="__span-0-1226"><a id="__codelineno-0-1226" name="__codelineno-0-1226"></a>    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
</span><span id="__span-0-1227"><a id="__codelineno-0-1227" name="__codelineno-0-1227"></a>    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
</span><span id="__span-0-1228"><a id="__codelineno-0-1228" name="__codelineno-0-1228"></a>    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;P&amp;L ($)&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._plot_price_data" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_plot_price_data</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">highlight_start</span><span class="p">,</span> <span class="n">highlight_end</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1231">1231</a></span>
<span class="normal"><a href="#__codelineno-0-1232">1232</a></span>
<span class="normal"><a href="#__codelineno-0-1233">1233</a></span>
<span class="normal"><a href="#__codelineno-0-1234">1234</a></span>
<span class="normal"><a href="#__codelineno-0-1235">1235</a></span>
<span class="normal"><a href="#__codelineno-0-1236">1236</a></span>
<span class="normal"><a href="#__codelineno-0-1237">1237</a></span>
<span class="normal"><a href="#__codelineno-0-1238">1238</a></span>
<span class="normal"><a href="#__codelineno-0-1239">1239</a></span>
<span class="normal"><a href="#__codelineno-0-1240">1240</a></span>
<span class="normal"><a href="#__codelineno-0-1241">1241</a></span>
<span class="normal"><a href="#__codelineno-0-1242">1242</a></span>
<span class="normal"><a href="#__codelineno-0-1243">1243</a></span>
<span class="normal"><a href="#__codelineno-0-1244">1244</a></span>
<span class="normal"><a href="#__codelineno-0-1245">1245</a></span>
<span class="normal"><a href="#__codelineno-0-1246">1246</a></span>
<span class="normal"><a href="#__codelineno-0-1247">1247</a></span>
<span class="normal"><a href="#__codelineno-0-1248">1248</a></span>
<span class="normal"><a href="#__codelineno-0-1249">1249</a></span>
<span class="normal"><a href="#__codelineno-0-1250">1250</a></span>
<span class="normal"><a href="#__codelineno-0-1251">1251</a></span>
<span class="normal"><a href="#__codelineno-0-1252">1252</a></span>
<span class="normal"><a href="#__codelineno-0-1253">1253</a></span>
<span class="normal"><a href="#__codelineno-0-1254">1254</a></span>
<span class="normal"><a href="#__codelineno-0-1255">1255</a></span>
<span class="normal"><a href="#__codelineno-0-1256">1256</a></span>
<span class="normal"><a href="#__codelineno-0-1257">1257</a></span>
<span class="normal"><a href="#__codelineno-0-1258">1258</a></span>
<span class="normal"><a href="#__codelineno-0-1259">1259</a></span>
<span class="normal"><a href="#__codelineno-0-1260">1260</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1231"><a id="__codelineno-0-1231" name="__codelineno-0-1231"></a><span class="k">def</span><span class="w"> </span><span class="nf">_plot_price_data</span><span class="p">(</span>
</span><span id="__span-0-1232"><a id="__codelineno-0-1232" name="__codelineno-0-1232"></a>    <span class="n">ax</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">highlight_start</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">highlight_end</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="__span-0-1233"><a id="__codelineno-0-1233" name="__codelineno-0-1233"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-1234"><a id="__codelineno-0-1234" name="__codelineno-0-1234"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)):</span>
</span><span id="__span-0-1235"><a id="__codelineno-0-1235" name="__codelineno-0-1235"></a>        <span class="n">date</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;ts_event&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="__span-0-1236"><a id="__codelineno-0-1236" name="__codelineno-0-1236"></a>        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="__span-0-1237"><a id="__codelineno-0-1237" name="__codelineno-0-1237"></a>            <span class="p">[</span><span class="n">date</span><span class="p">,</span> <span class="n">date</span><span class="p">],</span>
</span><span id="__span-0-1238"><a id="__codelineno-0-1238" name="__codelineno-0-1238"></a>            <span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;low&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;high&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span>
</span><span id="__span-0-1239"><a id="__codelineno-0-1239" name="__codelineno-0-1239"></a>            <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
</span><span id="__span-0-1240"><a id="__codelineno-0-1240" name="__codelineno-0-1240"></a>            <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
</span><span id="__span-0-1241"><a id="__codelineno-0-1241" name="__codelineno-0-1241"></a>            <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
</span><span id="__span-0-1242"><a id="__codelineno-0-1242" name="__codelineno-0-1242"></a>        <span class="p">)</span>
</span><span id="__span-0-1243"><a id="__codelineno-0-1243" name="__codelineno-0-1243"></a>        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">date</span><span class="p">],</span> <span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span><span id="__span-0-1244"><a id="__codelineno-0-1244" name="__codelineno-0-1244"></a>
</span><span id="__span-0-1245"><a id="__codelineno-0-1245" name="__codelineno-0-1245"></a>    <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">highlight_start</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">highlight_end</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
</span><span id="__span-0-1246"><a id="__codelineno-0-1246" name="__codelineno-0-1246"></a>        <span class="n">start_time</span> <span class="o">=</span> <span class="n">mdates</span><span class="o">.</span><span class="n">date2num</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;ts_event&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">highlight_start</span><span class="p">])</span>
</span><span id="__span-0-1247"><a id="__codelineno-0-1247" name="__codelineno-0-1247"></a>        <span class="n">end_time</span> <span class="o">=</span> <span class="n">mdates</span><span class="o">.</span><span class="n">date2num</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;ts_event&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">highlight_end</span><span class="p">])</span>
</span><span id="__span-0-1248"><a id="__codelineno-0-1248" name="__codelineno-0-1248"></a>        <span class="n">y_min</span><span class="p">,</span> <span class="n">y_max</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
</span><span id="__span-0-1249"><a id="__codelineno-0-1249" name="__codelineno-0-1249"></a>        <span class="n">rect</span> <span class="o">=</span> <span class="n">Rectangle</span><span class="p">(</span>
</span><span id="__span-0-1250"><a id="__codelineno-0-1250" name="__codelineno-0-1250"></a>            <span class="p">(</span><span class="n">start_time</span><span class="p">,</span> <span class="n">y_min</span><span class="p">),</span>
</span><span id="__span-0-1251"><a id="__codelineno-0-1251" name="__codelineno-0-1251"></a>            <span class="n">end_time</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">,</span>
</span><span id="__span-0-1252"><a id="__codelineno-0-1252" name="__codelineno-0-1252"></a>            <span class="n">y_max</span> <span class="o">-</span> <span class="n">y_min</span><span class="p">,</span>
</span><span id="__span-0-1253"><a id="__codelineno-0-1253" name="__codelineno-0-1253"></a>            <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;lightblue&quot;</span><span class="p">,</span>
</span><span id="__span-0-1254"><a id="__codelineno-0-1254" name="__codelineno-0-1254"></a>            <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
</span><span id="__span-0-1255"><a id="__codelineno-0-1255" name="__codelineno-0-1255"></a>            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Position Period&quot;</span><span class="p">,</span>
</span><span id="__span-0-1256"><a id="__codelineno-0-1256" name="__codelineno-0-1256"></a>        <span class="p">)</span>
</span><span id="__span-0-1257"><a id="__codelineno-0-1257" name="__codelineno-0-1257"></a>        <span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>
</span><span id="__span-0-1258"><a id="__codelineno-0-1258" name="__codelineno-0-1258"></a>
</span><span id="__span-0-1259"><a id="__codelineno-0-1259" name="__codelineno-0-1259"></a>    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Price&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="__span-0-1260"><a id="__codelineno-0-1260" name="__codelineno-0-1260"></a>    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._plot_main_indicators" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_plot_main_indicators</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1263">1263</a></span>
<span class="normal"><a href="#__codelineno-0-1264">1264</a></span>
<span class="normal"><a href="#__codelineno-0-1265">1265</a></span>
<span class="normal"><a href="#__codelineno-0-1266">1266</a></span>
<span class="normal"><a href="#__codelineno-0-1267">1267</a></span>
<span class="normal"><a href="#__codelineno-0-1268">1268</a></span>
<span class="normal"><a href="#__codelineno-0-1269">1269</a></span>
<span class="normal"><a href="#__codelineno-0-1270">1270</a></span>
<span class="normal"><a href="#__codelineno-0-1271">1271</a></span>
<span class="normal"><a href="#__codelineno-0-1272">1272</a></span>
<span class="normal"><a href="#__codelineno-0-1273">1273</a></span>
<span class="normal"><a href="#__codelineno-0-1274">1274</a></span>
<span class="normal"><a href="#__codelineno-0-1275">1275</a></span>
<span class="normal"><a href="#__codelineno-0-1276">1276</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1263"><a id="__codelineno-0-1263" name="__codelineno-0-1263"></a><span class="k">def</span><span class="w"> </span><span class="nf">_plot_main_indicators</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-1264"><a id="__codelineno-0-1264" name="__codelineno-0-1264"></a>    <span class="n">main_indicators</span> <span class="o">=</span> <span class="n">_main_indicator_columns</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="__span-0-1265"><a id="__codelineno-0-1265" name="__codelineno-0-1265"></a>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">display_name</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">main_indicators</span><span class="p">):</span>
</span><span id="__span-0-1266"><a id="__codelineno-0-1266" name="__codelineno-0-1266"></a>        <span class="k">if</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
</span><span id="__span-0-1267"><a id="__codelineno-0-1267" name="__codelineno-0-1267"></a>            <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="__span-0-1268"><a id="__codelineno-0-1268" name="__codelineno-0-1268"></a>                <span class="n">data</span><span class="p">[</span><span class="s2">&quot;ts_event&quot;</span><span class="p">],</span>
</span><span id="__span-0-1269"><a id="__codelineno-0-1269" name="__codelineno-0-1269"></a>                <span class="n">data</span><span class="p">[</span><span class="n">col</span><span class="p">],</span>
</span><span id="__span-0-1270"><a id="__codelineno-0-1270" name="__codelineno-0-1270"></a>                <span class="n">label</span><span class="o">=</span><span class="n">display_name</span><span class="p">,</span>
</span><span id="__span-0-1271"><a id="__codelineno-0-1271" name="__codelineno-0-1271"></a>                <span class="n">linewidth</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span>
</span><span id="__span-0-1272"><a id="__codelineno-0-1272" name="__codelineno-0-1272"></a>                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
</span><span id="__span-0-1273"><a id="__codelineno-0-1273" name="__codelineno-0-1273"></a>                <span class="n">color</span><span class="o">=</span><span class="n">_MAIN_COLORS</span><span class="p">[</span><span class="n">i</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">_MAIN_COLORS</span><span class="p">)],</span>
</span><span id="__span-0-1274"><a id="__codelineno-0-1274" name="__codelineno-0-1274"></a>            <span class="p">)</span>
</span><span id="__span-0-1275"><a id="__codelineno-0-1275" name="__codelineno-0-1275"></a>    <span class="k">if</span> <span class="n">main_indicators</span><span class="p">:</span>
</span><span id="__span-0-1276"><a id="__codelineno-0-1276" name="__codelineno-0-1276"></a>        <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper right&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._plot_trade_markers" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_plot_trade_markers</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">target_pos</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1279">1279</a></span>
<span class="normal"><a href="#__codelineno-0-1280">1280</a></span>
<span class="normal"><a href="#__codelineno-0-1281">1281</a></span>
<span class="normal"><a href="#__codelineno-0-1282">1282</a></span>
<span class="normal"><a href="#__codelineno-0-1283">1283</a></span>
<span class="normal"><a href="#__codelineno-0-1284">1284</a></span>
<span class="normal"><a href="#__codelineno-0-1285">1285</a></span>
<span class="normal"><a href="#__codelineno-0-1286">1286</a></span>
<span class="normal"><a href="#__codelineno-0-1287">1287</a></span>
<span class="normal"><a href="#__codelineno-0-1288">1288</a></span>
<span class="normal"><a href="#__codelineno-0-1289">1289</a></span>
<span class="normal"><a href="#__codelineno-0-1290">1290</a></span>
<span class="normal"><a href="#__codelineno-0-1291">1291</a></span>
<span class="normal"><a href="#__codelineno-0-1292">1292</a></span>
<span class="normal"><a href="#__codelineno-0-1293">1293</a></span>
<span class="normal"><a href="#__codelineno-0-1294">1294</a></span>
<span class="normal"><a href="#__codelineno-0-1295">1295</a></span>
<span class="normal"><a href="#__codelineno-0-1296">1296</a></span>
<span class="normal"><a href="#__codelineno-0-1297">1297</a></span>
<span class="normal"><a href="#__codelineno-0-1298">1298</a></span>
<span class="normal"><a href="#__codelineno-0-1299">1299</a></span>
<span class="normal"><a href="#__codelineno-0-1300">1300</a></span>
<span class="normal"><a href="#__codelineno-0-1301">1301</a></span>
<span class="normal"><a href="#__codelineno-0-1302">1302</a></span>
<span class="normal"><a href="#__codelineno-0-1303">1303</a></span>
<span class="normal"><a href="#__codelineno-0-1304">1304</a></span>
<span class="normal"><a href="#__codelineno-0-1305">1305</a></span>
<span class="normal"><a href="#__codelineno-0-1306">1306</a></span>
<span class="normal"><a href="#__codelineno-0-1307">1307</a></span>
<span class="normal"><a href="#__codelineno-0-1308">1308</a></span>
<span class="normal"><a href="#__codelineno-0-1309">1309</a></span>
<span class="normal"><a href="#__codelineno-0-1310">1310</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1279"><a id="__codelineno-0-1279" name="__codelineno-0-1279"></a><span class="k">def</span><span class="w"> </span><span class="nf">_plot_trade_markers</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">target_pos</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-1280"><a id="__codelineno-0-1280" name="__codelineno-0-1280"></a>    <span class="k">for</span> <span class="n">fill</span> <span class="ow">in</span> <span class="n">target_pos</span><span class="p">[</span><span class="s2">&quot;fills&quot;</span><span class="p">]:</span>
</span><span id="__span-0-1281"><a id="__codelineno-0-1281" name="__codelineno-0-1281"></a>        <span class="n">marker</span> <span class="o">=</span> <span class="s2">&quot;^&quot;</span> <span class="k">if</span> <span class="n">fill</span><span class="p">[</span><span class="s2">&quot;side&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;BUY&quot;</span> <span class="k">else</span> <span class="s2">&quot;v&quot;</span>
</span><span id="__span-0-1282"><a id="__codelineno-0-1282" name="__codelineno-0-1282"></a>        <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;green&quot;</span> <span class="k">if</span> <span class="n">fill</span><span class="p">[</span><span class="s2">&quot;side&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;BUY&quot;</span> <span class="k">else</span> <span class="s2">&quot;red&quot;</span>
</span><span id="__span-0-1283"><a id="__codelineno-0-1283" name="__codelineno-0-1283"></a>        <span class="n">qty</span> <span class="o">=</span> <span class="n">fill</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;quantity&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-0-1284"><a id="__codelineno-0-1284" name="__codelineno-0-1284"></a>        <span class="n">base_size</span> <span class="o">=</span> <span class="mi">120</span>
</span><span id="__span-0-1285"><a id="__codelineno-0-1285" name="__codelineno-0-1285"></a>        <span class="n">quantity_multiplier</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">qty</span><span class="p">))</span>
</span><span id="__span-0-1286"><a id="__codelineno-0-1286" name="__codelineno-0-1286"></a>        <span class="n">size</span> <span class="o">=</span> <span class="n">base_size</span> <span class="o">*</span> <span class="n">quantity_multiplier</span>
</span><span id="__span-0-1287"><a id="__codelineno-0-1287" name="__codelineno-0-1287"></a>
</span><span id="__span-0-1288"><a id="__codelineno-0-1288" name="__codelineno-0-1288"></a>        <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
</span><span id="__span-0-1289"><a id="__codelineno-0-1289" name="__codelineno-0-1289"></a>            <span class="n">fill</span><span class="p">[</span><span class="s2">&quot;ts_event&quot;</span><span class="p">],</span>
</span><span id="__span-0-1290"><a id="__codelineno-0-1290" name="__codelineno-0-1290"></a>            <span class="n">fill</span><span class="p">[</span><span class="s2">&quot;price&quot;</span><span class="p">],</span>
</span><span id="__span-0-1291"><a id="__codelineno-0-1291" name="__codelineno-0-1291"></a>            <span class="n">marker</span><span class="o">=</span><span class="n">marker</span><span class="p">,</span>
</span><span id="__span-0-1292"><a id="__codelineno-0-1292" name="__codelineno-0-1292"></a>            <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
</span><span id="__span-0-1293"><a id="__codelineno-0-1293" name="__codelineno-0-1293"></a>            <span class="n">s</span><span class="o">=</span><span class="n">size</span><span class="p">,</span>
</span><span id="__span-0-1294"><a id="__codelineno-0-1294" name="__codelineno-0-1294"></a>            <span class="n">edgecolors</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
</span><span id="__span-0-1295"><a id="__codelineno-0-1295" name="__codelineno-0-1295"></a>            <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="__span-0-1296"><a id="__codelineno-0-1296" name="__codelineno-0-1296"></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
</span><span id="__span-0-1297"><a id="__codelineno-0-1297" name="__codelineno-0-1297"></a>            <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
</span><span id="__span-0-1298"><a id="__codelineno-0-1298" name="__codelineno-0-1298"></a>        <span class="p">)</span>
</span><span id="__span-0-1299"><a id="__codelineno-0-1299" name="__codelineno-0-1299"></a>
</span><span id="__span-0-1300"><a id="__codelineno-0-1300" name="__codelineno-0-1300"></a>        <span class="n">y_lim</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
</span><span id="__span-0-1301"><a id="__codelineno-0-1301" name="__codelineno-0-1301"></a>        <span class="n">offset_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_lim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">y_lim</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="mf">0.02</span>
</span><span id="__span-0-1302"><a id="__codelineno-0-1302" name="__codelineno-0-1302"></a>        <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
</span><span id="__span-0-1303"><a id="__codelineno-0-1303" name="__codelineno-0-1303"></a>            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">qty</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="__span-0-1304"><a id="__codelineno-0-1304" name="__codelineno-0-1304"></a>            <span class="p">(</span><span class="n">fill</span><span class="p">[</span><span class="s2">&quot;ts_event&quot;</span><span class="p">],</span> <span class="n">fill</span><span class="p">[</span><span class="s2">&quot;price&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">offset_y</span><span class="p">),</span>
</span><span id="__span-0-1305"><a id="__codelineno-0-1305" name="__codelineno-0-1305"></a>            <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
</span><span id="__span-0-1306"><a id="__codelineno-0-1306" name="__codelineno-0-1306"></a>            <span class="n">va</span><span class="o">=</span><span class="s2">&quot;bottom&quot;</span><span class="p">,</span>
</span><span id="__span-0-1307"><a id="__codelineno-0-1307" name="__codelineno-0-1307"></a>            <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
</span><span id="__span-0-1308"><a id="__codelineno-0-1308" name="__codelineno-0-1308"></a>            <span class="n">fontweight</span><span class="o">=</span><span class="s2">&quot;bold&quot;</span><span class="p">,</span>
</span><span id="__span-0-1309"><a id="__codelineno-0-1309" name="__codelineno-0-1309"></a>            <span class="n">bbox</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span><span class="o">=</span><span class="s2">&quot;round,pad=0.2&quot;</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">),</span>
</span><span id="__span-0-1310"><a id="__codelineno-0-1310" name="__codelineno-0-1310"></a>        <span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.get_position_chart" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_position_chart</span><span class="p">(</span><span class="n">run_id</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">position_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1313">1313</a></span>
<span class="normal"><a href="#__codelineno-0-1314">1314</a></span>
<span class="normal"><a href="#__codelineno-0-1315">1315</a></span>
<span class="normal"><a href="#__codelineno-0-1316">1316</a></span>
<span class="normal"><a href="#__codelineno-0-1317">1317</a></span>
<span class="normal"><a href="#__codelineno-0-1318">1318</a></span>
<span class="normal"><a href="#__codelineno-0-1319">1319</a></span>
<span class="normal"><a href="#__codelineno-0-1320">1320</a></span>
<span class="normal"><a href="#__codelineno-0-1321">1321</a></span>
<span class="normal"><a href="#__codelineno-0-1322">1322</a></span>
<span class="normal"><a href="#__codelineno-0-1323">1323</a></span>
<span class="normal"><a href="#__codelineno-0-1324">1324</a></span>
<span class="normal"><a href="#__codelineno-0-1325">1325</a></span>
<span class="normal"><a href="#__codelineno-0-1326">1326</a></span>
<span class="normal"><a href="#__codelineno-0-1327">1327</a></span>
<span class="normal"><a href="#__codelineno-0-1328">1328</a></span>
<span class="normal"><a href="#__codelineno-0-1329">1329</a></span>
<span class="normal"><a href="#__codelineno-0-1330">1330</a></span>
<span class="normal"><a href="#__codelineno-0-1331">1331</a></span>
<span class="normal"><a href="#__codelineno-0-1332">1332</a></span>
<span class="normal"><a href="#__codelineno-0-1333">1333</a></span>
<span class="normal"><a href="#__codelineno-0-1334">1334</a></span>
<span class="normal"><a href="#__codelineno-0-1335">1335</a></span>
<span class="normal"><a href="#__codelineno-0-1336">1336</a></span>
<span class="normal"><a href="#__codelineno-0-1337">1337</a></span>
<span class="normal"><a href="#__codelineno-0-1338">1338</a></span>
<span class="normal"><a href="#__codelineno-0-1339">1339</a></span>
<span class="normal"><a href="#__codelineno-0-1340">1340</a></span>
<span class="normal"><a href="#__codelineno-0-1341">1341</a></span>
<span class="normal"><a href="#__codelineno-0-1342">1342</a></span>
<span class="normal"><a href="#__codelineno-0-1343">1343</a></span>
<span class="normal"><a href="#__codelineno-0-1344">1344</a></span>
<span class="normal"><a href="#__codelineno-0-1345">1345</a></span>
<span class="normal"><a href="#__codelineno-0-1346">1346</a></span>
<span class="normal"><a href="#__codelineno-0-1347">1347</a></span>
<span class="normal"><a href="#__codelineno-0-1348">1348</a></span>
<span class="normal"><a href="#__codelineno-0-1349">1349</a></span>
<span class="normal"><a href="#__codelineno-0-1350">1350</a></span>
<span class="normal"><a href="#__codelineno-0-1351">1351</a></span>
<span class="normal"><a href="#__codelineno-0-1352">1352</a></span>
<span class="normal"><a href="#__codelineno-0-1353">1353</a></span>
<span class="normal"><a href="#__codelineno-0-1354">1354</a></span>
<span class="normal"><a href="#__codelineno-0-1355">1355</a></span>
<span class="normal"><a href="#__codelineno-0-1356">1356</a></span>
<span class="normal"><a href="#__codelineno-0-1357">1357</a></span>
<span class="normal"><a href="#__codelineno-0-1358">1358</a></span>
<span class="normal"><a href="#__codelineno-0-1359">1359</a></span>
<span class="normal"><a href="#__codelineno-0-1360">1360</a></span>
<span class="normal"><a href="#__codelineno-0-1361">1361</a></span>
<span class="normal"><a href="#__codelineno-0-1362">1362</a></span>
<span class="normal"><a href="#__codelineno-0-1363">1363</a></span>
<span class="normal"><a href="#__codelineno-0-1364">1364</a></span>
<span class="normal"><a href="#__codelineno-0-1365">1365</a></span>
<span class="normal"><a href="#__codelineno-0-1366">1366</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1313"><a id="__codelineno-0-1313" name="__codelineno-0-1313"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/run/</span><span class="si">{run_id}</span><span class="s2">/positions/</span><span class="si">{symbol}</span><span class="s2">/</span><span class="si">{position_id}</span><span class="s2">/chart&quot;</span><span class="p">)</span>
</span><span id="__span-0-1314"><a id="__codelineno-0-1314" name="__codelineno-0-1314"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_position_chart</span><span class="p">(</span><span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">symbol</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">position_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="__span-0-1315"><a id="__codelineno-0-1315" name="__codelineno-0-1315"></a>    <span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">HTTPException</span>
</span><span id="__span-0-1316"><a id="__codelineno-0-1316" name="__codelineno-0-1316"></a>
</span><span id="__span-0-1317"><a id="__codelineno-0-1317" name="__codelineno-0-1317"></a>    <span class="n">chart_dir</span> <span class="o">=</span> <span class="n">CHARTS_DIR</span> <span class="o">/</span> <span class="n">run_id</span>
</span><span id="__span-0-1318"><a id="__codelineno-0-1318" name="__codelineno-0-1318"></a>    <span class="n">chart_path</span> <span class="o">=</span> <span class="n">chart_dir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">position_id</span><span class="si">}</span><span class="s2">.png&quot;</span>
</span><span id="__span-0-1319"><a id="__codelineno-0-1319" name="__codelineno-0-1319"></a>
</span><span id="__span-0-1320"><a id="__codelineno-0-1320" name="__codelineno-0-1320"></a>    <span class="k">if</span> <span class="n">chart_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="__span-0-1321"><a id="__codelineno-0-1321" name="__codelineno-0-1321"></a>        <span class="k">return</span> <span class="n">FileResponse</span><span class="p">(</span><span class="n">chart_path</span><span class="p">,</span> <span class="n">media_type</span><span class="o">=</span><span class="s2">&quot;image/png&quot;</span><span class="p">)</span>
</span><span id="__span-0-1322"><a id="__codelineno-0-1322" name="__codelineno-0-1322"></a>
</span><span id="__span-0-1323"><a id="__codelineno-0-1323" name="__codelineno-0-1323"></a>    <span class="n">bars_df</span> <span class="o">=</span> <span class="n">_load_bars_for_chart</span><span class="p">(</span><span class="n">run_id</span><span class="p">,</span> <span class="n">symbol</span><span class="p">)</span>
</span><span id="__span-0-1324"><a id="__codelineno-0-1324" name="__codelineno-0-1324"></a>    <span class="k">if</span> <span class="n">bars_df</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">bars_df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
</span><span id="__span-0-1325"><a id="__codelineno-0-1325" name="__codelineno-0-1325"></a>        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;No bar data found for this symbol&quot;</span><span class="p">)</span>
</span><span id="__span-0-1326"><a id="__codelineno-0-1326" name="__codelineno-0-1326"></a>
</span><span id="__span-0-1327"><a id="__codelineno-0-1327" name="__codelineno-0-1327"></a>    <span class="n">all_positions</span> <span class="o">=</span> <span class="n">_extract_positions_for_chart</span><span class="p">(</span><span class="n">run_id</span><span class="p">)</span>
</span><span id="__span-0-1328"><a id="__codelineno-0-1328" name="__codelineno-0-1328"></a>    <span class="n">target_pos</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-0-1329"><a id="__codelineno-0-1329" name="__codelineno-0-1329"></a>    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">all_positions</span><span class="p">:</span>
</span><span id="__span-0-1330"><a id="__codelineno-0-1330" name="__codelineno-0-1330"></a>        <span class="k">if</span> <span class="n">p</span><span class="p">[</span><span class="s2">&quot;symbol&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">symbol</span> <span class="ow">and</span> <span class="n">p</span><span class="p">[</span><span class="s2">&quot;position_id&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">position_id</span><span class="p">:</span>
</span><span id="__span-0-1331"><a id="__codelineno-0-1331" name="__codelineno-0-1331"></a>            <span class="n">target_pos</span> <span class="o">=</span> <span class="n">p</span>
</span><span id="__span-0-1332"><a id="__codelineno-0-1332" name="__codelineno-0-1332"></a>            <span class="k">break</span>
</span><span id="__span-0-1333"><a id="__codelineno-0-1333" name="__codelineno-0-1333"></a>
</span><span id="__span-0-1334"><a id="__codelineno-0-1334" name="__codelineno-0-1334"></a>    <span class="k">if</span> <span class="n">target_pos</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-1335"><a id="__codelineno-0-1335" name="__codelineno-0-1335"></a>        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span>
</span><span id="__span-0-1336"><a id="__codelineno-0-1336" name="__codelineno-0-1336"></a>            <span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Position </span><span class="si">{</span><span class="n">position_id</span><span class="si">}</span><span class="s2"> not found for </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-0-1337"><a id="__codelineno-0-1337" name="__codelineno-0-1337"></a>        <span class="p">)</span>
</span><span id="__span-0-1338"><a id="__codelineno-0-1338" name="__codelineno-0-1338"></a>
</span><span id="__span-0-1339"><a id="__codelineno-0-1339" name="__codelineno-0-1339"></a>    <span class="n">bars_before</span><span class="p">,</span> <span class="n">bars_after</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span>
</span><span id="__span-0-1340"><a id="__codelineno-0-1340" name="__codelineno-0-1340"></a>    <span class="n">mask_start</span> <span class="o">=</span> <span class="n">bars_df</span><span class="p">[</span><span class="s2">&quot;ts_event&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">target_pos</span><span class="p">[</span><span class="s2">&quot;first_fill_time&quot;</span><span class="p">]</span>
</span><span id="__span-0-1341"><a id="__codelineno-0-1341" name="__codelineno-0-1341"></a>    <span class="n">mask_end</span> <span class="o">=</span> <span class="n">bars_df</span><span class="p">[</span><span class="s2">&quot;ts_event&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">target_pos</span><span class="p">[</span><span class="s2">&quot;last_fill_time&quot;</span><span class="p">]</span>
</span><span id="__span-0-1342"><a id="__codelineno-0-1342" name="__codelineno-0-1342"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">mask_start</span><span class="o">.</span><span class="n">any</span><span class="p">()</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">mask_end</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
</span><span id="__span-0-1343"><a id="__codelineno-0-1343" name="__codelineno-0-1343"></a>        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span>
</span><span id="__span-0-1344"><a id="__codelineno-0-1344" name="__codelineno-0-1344"></a>            <span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;Position time range not found in bar data&quot;</span>
</span><span id="__span-0-1345"><a id="__codelineno-0-1345" name="__codelineno-0-1345"></a>        <span class="p">)</span>
</span><span id="__span-0-1346"><a id="__codelineno-0-1346" name="__codelineno-0-1346"></a>
</span><span id="__span-0-1347"><a id="__codelineno-0-1347" name="__codelineno-0-1347"></a>    <span class="n">start_idx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">bars_df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="n">bars_df</span><span class="p">[</span><span class="n">mask_start</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>  <span class="c1"># type: ignore[arg-type]</span>
</span><span id="__span-0-1348"><a id="__codelineno-0-1348" name="__codelineno-0-1348"></a>    <span class="n">end_idx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">bars_df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="n">bars_df</span><span class="p">[</span><span class="n">mask_end</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>  <span class="c1"># type: ignore[arg-type]</span>
</span><span id="__span-0-1349"><a id="__codelineno-0-1349" name="__codelineno-0-1349"></a>    <span class="n">chart_start</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">start_idx</span> <span class="o">-</span> <span class="n">bars_before</span><span class="p">)</span>
</span><span id="__span-0-1350"><a id="__codelineno-0-1350" name="__codelineno-0-1350"></a>    <span class="n">chart_end</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">bars_df</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">end_idx</span> <span class="o">+</span> <span class="n">bars_after</span><span class="p">)</span>
</span><span id="__span-0-1351"><a id="__codelineno-0-1351" name="__codelineno-0-1351"></a>    <span class="n">data</span> <span class="o">=</span> <span class="n">bars_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">chart_start</span> <span class="p">:</span> <span class="n">chart_end</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="__span-0-1352"><a id="__codelineno-0-1352" name="__codelineno-0-1352"></a>    <span class="n">highlight_start</span> <span class="o">=</span> <span class="n">start_idx</span> <span class="o">-</span> <span class="n">chart_start</span>
</span><span id="__span-0-1353"><a id="__codelineno-0-1353" name="__codelineno-0-1353"></a>    <span class="n">highlight_end</span> <span class="o">=</span> <span class="n">end_idx</span> <span class="o">-</span> <span class="n">chart_start</span>
</span><span id="__span-0-1354"><a id="__codelineno-0-1354" name="__codelineno-0-1354"></a>
</span><span id="__span-0-1355"><a id="__codelineno-0-1355" name="__codelineno-0-1355"></a>    <span class="n">chart_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-0-1356"><a id="__codelineno-0-1356" name="__codelineno-0-1356"></a>    <span class="n">_generate_position_chart</span><span class="p">(</span>
</span><span id="__span-0-1357"><a id="__codelineno-0-1357" name="__codelineno-0-1357"></a>        <span class="n">chart_path</span><span class="p">,</span>
</span><span id="__span-0-1358"><a id="__codelineno-0-1358" name="__codelineno-0-1358"></a>        <span class="n">data</span><span class="p">,</span>
</span><span id="__span-0-1359"><a id="__codelineno-0-1359" name="__codelineno-0-1359"></a>        <span class="n">target_pos</span><span class="p">,</span>
</span><span id="__span-0-1360"><a id="__codelineno-0-1360" name="__codelineno-0-1360"></a>        <span class="n">symbol</span><span class="p">,</span>
</span><span id="__span-0-1361"><a id="__codelineno-0-1361" name="__codelineno-0-1361"></a>        <span class="n">position_id</span><span class="p">,</span>
</span><span id="__span-0-1362"><a id="__codelineno-0-1362" name="__codelineno-0-1362"></a>        <span class="n">highlight_start</span><span class="p">,</span>
</span><span id="__span-0-1363"><a id="__codelineno-0-1363" name="__codelineno-0-1363"></a>        <span class="n">highlight_end</span><span class="p">,</span>
</span><span id="__span-0-1364"><a id="__codelineno-0-1364" name="__codelineno-0-1364"></a>    <span class="p">)</span>
</span><span id="__span-0-1365"><a id="__codelineno-0-1365" name="__codelineno-0-1365"></a>
</span><span id="__span-0-1366"><a id="__codelineno-0-1366" name="__codelineno-0-1366"></a>    <span class="k">return</span> <span class="n">FileResponse</span><span class="p">(</span><span class="n">chart_path</span><span class="p">,</span> <span class="n">media_type</span><span class="o">=</span><span class="s2">&quot;image/png&quot;</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.health" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">health</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1369">1369</a></span>
<span class="normal"><a href="#__codelineno-0-1370">1370</a></span>
<span class="normal"><a href="#__codelineno-0-1371">1371</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1369"><a id="__codelineno-0-1369" name="__codelineno-0-1369"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/health&quot;</span><span class="p">)</span>
</span><span id="__span-0-1370"><a id="__codelineno-0-1370" name="__codelineno-0-1370"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">health</span><span class="p">():</span>
</span><span id="__span-0-1371"><a id="__codelineno-0-1371" name="__codelineno-0-1371"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;ok&quot;</span><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.list_strategies" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_strategies</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1374">1374</a></span>
<span class="normal"><a href="#__codelineno-0-1375">1375</a></span>
<span class="normal"><a href="#__codelineno-0-1376">1376</a></span>
<span class="normal"><a href="#__codelineno-0-1377">1377</a></span>
<span class="normal"><a href="#__codelineno-0-1378">1378</a></span>
<span class="normal"><a href="#__codelineno-0-1379">1379</a></span>
<span class="normal"><a href="#__codelineno-0-1380">1380</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1374"><a id="__codelineno-0-1374" name="__codelineno-0-1374"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/strategies&quot;</span><span class="p">)</span>
</span><span id="__span-0-1375"><a id="__codelineno-0-1375" name="__codelineno-0-1375"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">list_strategies</span><span class="p">():</span>
</span><span id="__span-0-1376"><a id="__codelineno-0-1376" name="__codelineno-0-1376"></a>    <span class="n">strategies</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-1377"><a id="__codelineno-0-1377" name="__codelineno-0-1377"></a>    <span class="k">for</span> <span class="n">class_name</span><span class="p">,</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">registry</span><span class="o">.</span><span class="n">get_strategies</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="__span-0-1378"><a id="__codelineno-0-1378" name="__codelineno-0-1378"></a>        <span class="n">display_name</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">class_name</span>
</span><span id="__span-0-1379"><a id="__codelineno-0-1379" name="__codelineno-0-1379"></a>        <span class="n">strategies</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;class_name&quot;</span><span class="p">:</span> <span class="n">class_name</span><span class="p">,</span> <span class="s2">&quot;display_name&quot;</span><span class="p">:</span> <span class="n">display_name</span><span class="p">})</span>
</span><span id="__span-0-1380"><a id="__codelineno-0-1380" name="__codelineno-0-1380"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;strategies&quot;</span><span class="p">:</span> <span class="n">strategies</span><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.list_brokers" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_brokers</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1383">1383</a></span>
<span class="normal"><a href="#__codelineno-0-1384">1384</a></span>
<span class="normal"><a href="#__codelineno-0-1385">1385</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1383"><a id="__codelineno-0-1383" name="__codelineno-0-1383"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/brokers&quot;</span><span class="p">)</span>
</span><span id="__span-0-1384"><a id="__codelineno-0-1384" name="__codelineno-0-1384"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">list_brokers</span><span class="p">():</span>
</span><span id="__span-0-1385"><a id="__codelineno-0-1385" name="__codelineno-0-1385"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;brokers&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">registry</span><span class="o">.</span><span class="n">get_brokers</span><span class="p">()</span><span class="o">.</span><span class="n">keys</span><span class="p">())}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.list_datafeeds" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_datafeeds</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1388">1388</a></span>
<span class="normal"><a href="#__codelineno-0-1389">1389</a></span>
<span class="normal"><a href="#__codelineno-0-1390">1390</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1388"><a id="__codelineno-0-1388" name="__codelineno-0-1388"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/datafeeds&quot;</span><span class="p">)</span>
</span><span id="__span-0-1389"><a id="__codelineno-0-1389" name="__codelineno-0-1389"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">list_datafeeds</span><span class="p">():</span>
</span><span id="__span-0-1390"><a id="__codelineno-0-1390" name="__codelineno-0-1390"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;datafeeds&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">registry</span><span class="o">.</span><span class="n">get_datafeeds</span><span class="p">()</span><span class="o">.</span><span class="n">keys</span><span class="p">())}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.get_strategy" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_strategy</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1393">1393</a></span>
<span class="normal"><a href="#__codelineno-0-1394">1394</a></span>
<span class="normal"><a href="#__codelineno-0-1395">1395</a></span>
<span class="normal"><a href="#__codelineno-0-1396">1396</a></span>
<span class="normal"><a href="#__codelineno-0-1397">1397</a></span>
<span class="normal"><a href="#__codelineno-0-1398">1398</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1393"><a id="__codelineno-0-1393" name="__codelineno-0-1393"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/strategies/</span><span class="si">{name}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-1394"><a id="__codelineno-0-1394" name="__codelineno-0-1394"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_strategy</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="__span-0-1395"><a id="__codelineno-0-1395" name="__codelineno-0-1395"></a>    <span class="n">schema</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">get_strategy_schema</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="__span-0-1396"><a id="__codelineno-0-1396" name="__codelineno-0-1396"></a>    <span class="k">if</span> <span class="n">schema</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-1397"><a id="__codelineno-0-1397" name="__codelineno-0-1397"></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Strategy not found&quot;</span><span class="p">}</span>
</span><span id="__span-0-1398"><a id="__codelineno-0-1398" name="__codelineno-0-1398"></a>    <span class="k">return</span> <span class="n">schema</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.get_broker" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_broker</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1401">1401</a></span>
<span class="normal"><a href="#__codelineno-0-1402">1402</a></span>
<span class="normal"><a href="#__codelineno-0-1403">1403</a></span>
<span class="normal"><a href="#__codelineno-0-1404">1404</a></span>
<span class="normal"><a href="#__codelineno-0-1405">1405</a></span>
<span class="normal"><a href="#__codelineno-0-1406">1406</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1401"><a id="__codelineno-0-1401" name="__codelineno-0-1401"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/brokers/</span><span class="si">{name}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-1402"><a id="__codelineno-0-1402" name="__codelineno-0-1402"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_broker</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="__span-0-1403"><a id="__codelineno-0-1403" name="__codelineno-0-1403"></a>    <span class="n">schema</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">get_broker_schema</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="__span-0-1404"><a id="__codelineno-0-1404" name="__codelineno-0-1404"></a>    <span class="k">if</span> <span class="n">schema</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-1405"><a id="__codelineno-0-1405" name="__codelineno-0-1405"></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Broker not found&quot;</span><span class="p">}</span>
</span><span id="__span-0-1406"><a id="__codelineno-0-1406" name="__codelineno-0-1406"></a>    <span class="k">return</span> <span class="n">schema</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.get_datafeed" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_datafeed</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1409">1409</a></span>
<span class="normal"><a href="#__codelineno-0-1410">1410</a></span>
<span class="normal"><a href="#__codelineno-0-1411">1411</a></span>
<span class="normal"><a href="#__codelineno-0-1412">1412</a></span>
<span class="normal"><a href="#__codelineno-0-1413">1413</a></span>
<span class="normal"><a href="#__codelineno-0-1414">1414</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1409"><a id="__codelineno-0-1409" name="__codelineno-0-1409"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/datafeeds/</span><span class="si">{name}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-1410"><a id="__codelineno-0-1410" name="__codelineno-0-1410"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_datafeed</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="__span-0-1411"><a id="__codelineno-0-1411" name="__codelineno-0-1411"></a>    <span class="n">schema</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">get_datafeed_schema</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="__span-0-1412"><a id="__codelineno-0-1412" name="__codelineno-0-1412"></a>    <span class="k">if</span> <span class="n">schema</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-1413"><a id="__codelineno-0-1413" name="__codelineno-0-1413"></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Datafeed not found&quot;</span><span class="p">}</span>
</span><span id="__span-0-1414"><a id="__codelineno-0-1414" name="__codelineno-0-1414"></a>    <span class="k">return</span> <span class="n">schema</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.get_symbols" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_symbols</span><span class="p">(</span><span class="n">bar_period</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1417">1417</a></span>
<span class="normal"><a href="#__codelineno-0-1418">1418</a></span>
<span class="normal"><a href="#__codelineno-0-1419">1419</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1417"><a id="__codelineno-0-1417" name="__codelineno-0-1417"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/secmaster/symbols&quot;</span><span class="p">)</span>
</span><span id="__span-0-1418"><a id="__codelineno-0-1418" name="__codelineno-0-1418"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_symbols</span><span class="p">(</span><span class="n">bar_period</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="__span-0-1419"><a id="__codelineno-0-1419" name="__codelineno-0-1419"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;symbols&quot;</span><span class="p">:</span> <span class="n">_get_available_symbols</span><span class="p">(</span><span class="n">bar_period</span><span class="p">)}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.get_symbols_coverage" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_symbols_coverage</span><span class="p">(</span><span class="n">bar_period</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1422">1422</a></span>
<span class="normal"><a href="#__codelineno-0-1423">1423</a></span>
<span class="normal"><a href="#__codelineno-0-1424">1424</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1422"><a id="__codelineno-0-1422" name="__codelineno-0-1422"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/secmaster/symbols_coverage&quot;</span><span class="p">)</span>
</span><span id="__span-0-1423"><a id="__codelineno-0-1423" name="__codelineno-0-1423"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_symbols_coverage</span><span class="p">(</span><span class="n">bar_period</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="__span-0-1424"><a id="__codelineno-0-1424" name="__codelineno-0-1424"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;symbols&quot;</span><span class="p">:</span> <span class="n">_get_symbols_with_coverage</span><span class="p">(</span><span class="n">bar_period</span><span class="p">)}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.get_bar_periods" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_bar_periods</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1427">1427</a></span>
<span class="normal"><a href="#__codelineno-0-1428">1428</a></span>
<span class="normal"><a href="#__codelineno-0-1429">1429</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1427"><a id="__codelineno-0-1427" name="__codelineno-0-1427"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/secmaster/bar_periods&quot;</span><span class="p">)</span>
</span><span id="__span-0-1428"><a id="__codelineno-0-1428" name="__codelineno-0-1428"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_bar_periods</span><span class="p">():</span>
</span><span id="__span-0-1429"><a id="__codelineno-0-1429" name="__codelineno-0-1429"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;bar_periods&quot;</span><span class="p">:</span> <span class="n">_get_available_bar_periods</span><span class="p">()}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.list_presets" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_presets</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1432">1432</a></span>
<span class="normal"><a href="#__codelineno-0-1433">1433</a></span>
<span class="normal"><a href="#__codelineno-0-1434">1434</a></span>
<span class="normal"><a href="#__codelineno-0-1435">1435</a></span>
<span class="normal"><a href="#__codelineno-0-1436">1436</a></span>
<span class="normal"><a href="#__codelineno-0-1437">1437</a></span>
<span class="normal"><a href="#__codelineno-0-1438">1438</a></span>
<span class="normal"><a href="#__codelineno-0-1439">1439</a></span>
<span class="normal"><a href="#__codelineno-0-1440">1440</a></span>
<span class="normal"><a href="#__codelineno-0-1441">1441</a></span>
<span class="normal"><a href="#__codelineno-0-1442">1442</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1432"><a id="__codelineno-0-1432" name="__codelineno-0-1432"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/presets&quot;</span><span class="p">)</span>
</span><span id="__span-0-1433"><a id="__codelineno-0-1433" name="__codelineno-0-1433"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">list_presets</span><span class="p">():</span>
</span><span id="__span-0-1434"><a id="__codelineno-0-1434" name="__codelineno-0-1434"></a>    <span class="n">db_path</span> <span class="o">=</span> <span class="n">_get_secmaster_path</span><span class="p">()</span>
</span><span id="__span-0-1435"><a id="__codelineno-0-1435" name="__codelineno-0-1435"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">db_path</span><span class="p">):</span>
</span><span id="__span-0-1436"><a id="__codelineno-0-1436" name="__codelineno-0-1436"></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;presets&quot;</span><span class="p">:</span> <span class="p">[]}</span>
</span><span id="__span-0-1437"><a id="__codelineno-0-1437" name="__codelineno-0-1437"></a>    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
</span><span id="__span-0-1438"><a id="__codelineno-0-1438" name="__codelineno-0-1438"></a>    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-0-1439"><a id="__codelineno-0-1439" name="__codelineno-0-1439"></a>    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT name FROM symbol_presets ORDER BY name&quot;</span><span class="p">)</span>
</span><span id="__span-0-1440"><a id="__codelineno-0-1440" name="__codelineno-0-1440"></a>    <span class="n">presets</span> <span class="o">=</span> <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()]</span>
</span><span id="__span-0-1441"><a id="__codelineno-0-1441" name="__codelineno-0-1441"></a>    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-0-1442"><a id="__codelineno-0-1442" name="__codelineno-0-1442"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;presets&quot;</span><span class="p">:</span> <span class="n">presets</span><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.get_preset" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_preset</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1445">1445</a></span>
<span class="normal"><a href="#__codelineno-0-1446">1446</a></span>
<span class="normal"><a href="#__codelineno-0-1447">1447</a></span>
<span class="normal"><a href="#__codelineno-0-1448">1448</a></span>
<span class="normal"><a href="#__codelineno-0-1449">1449</a></span>
<span class="normal"><a href="#__codelineno-0-1450">1450</a></span>
<span class="normal"><a href="#__codelineno-0-1451">1451</a></span>
<span class="normal"><a href="#__codelineno-0-1452">1452</a></span>
<span class="normal"><a href="#__codelineno-0-1453">1453</a></span>
<span class="normal"><a href="#__codelineno-0-1454">1454</a></span>
<span class="normal"><a href="#__codelineno-0-1455">1455</a></span>
<span class="normal"><a href="#__codelineno-0-1456">1456</a></span>
<span class="normal"><a href="#__codelineno-0-1457">1457</a></span>
<span class="normal"><a href="#__codelineno-0-1458">1458</a></span>
<span class="normal"><a href="#__codelineno-0-1459">1459</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1445"><a id="__codelineno-0-1445" name="__codelineno-0-1445"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/presets/</span><span class="si">{name}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-1446"><a id="__codelineno-0-1446" name="__codelineno-0-1446"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_preset</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="__span-0-1447"><a id="__codelineno-0-1447" name="__codelineno-0-1447"></a>    <span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
</span><span id="__span-0-1448"><a id="__codelineno-0-1448" name="__codelineno-0-1448"></a>
</span><span id="__span-0-1449"><a id="__codelineno-0-1449" name="__codelineno-0-1449"></a>    <span class="n">db_path</span> <span class="o">=</span> <span class="n">_get_secmaster_path</span><span class="p">()</span>
</span><span id="__span-0-1450"><a id="__codelineno-0-1450" name="__codelineno-0-1450"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">db_path</span><span class="p">):</span>
</span><span id="__span-0-1451"><a id="__codelineno-0-1451" name="__codelineno-0-1451"></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Preset not found&quot;</span><span class="p">}</span>
</span><span id="__span-0-1452"><a id="__codelineno-0-1452" name="__codelineno-0-1452"></a>    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
</span><span id="__span-0-1453"><a id="__codelineno-0-1453" name="__codelineno-0-1453"></a>    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-0-1454"><a id="__codelineno-0-1454" name="__codelineno-0-1454"></a>    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT symbols FROM symbol_presets WHERE name = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">name</span><span class="p">,))</span>
</span><span id="__span-0-1455"><a id="__codelineno-0-1455" name="__codelineno-0-1455"></a>    <span class="n">row</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
</span><span id="__span-0-1456"><a id="__codelineno-0-1456" name="__codelineno-0-1456"></a>    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-0-1457"><a id="__codelineno-0-1457" name="__codelineno-0-1457"></a>    <span class="k">if</span> <span class="n">row</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-1458"><a id="__codelineno-0-1458" name="__codelineno-0-1458"></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Preset not found&quot;</span><span class="p">}</span>
</span><span id="__span-0-1459"><a id="__codelineno-0-1459" name="__codelineno-0-1459"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span> <span class="s2">&quot;symbols&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">])}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.create_preset" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_preset</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1467">1467</a></span>
<span class="normal"><a href="#__codelineno-0-1468">1468</a></span>
<span class="normal"><a href="#__codelineno-0-1469">1469</a></span>
<span class="normal"><a href="#__codelineno-0-1470">1470</a></span>
<span class="normal"><a href="#__codelineno-0-1471">1471</a></span>
<span class="normal"><a href="#__codelineno-0-1472">1472</a></span>
<span class="normal"><a href="#__codelineno-0-1473">1473</a></span>
<span class="normal"><a href="#__codelineno-0-1474">1474</a></span>
<span class="normal"><a href="#__codelineno-0-1475">1475</a></span>
<span class="normal"><a href="#__codelineno-0-1476">1476</a></span>
<span class="normal"><a href="#__codelineno-0-1477">1477</a></span>
<span class="normal"><a href="#__codelineno-0-1478">1478</a></span>
<span class="normal"><a href="#__codelineno-0-1479">1479</a></span>
<span class="normal"><a href="#__codelineno-0-1480">1480</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1467"><a id="__codelineno-0-1467" name="__codelineno-0-1467"></a><span class="nd">@app</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/api/presets&quot;</span><span class="p">)</span>
</span><span id="__span-0-1468"><a id="__codelineno-0-1468" name="__codelineno-0-1468"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_preset</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">PresetRequest</span><span class="p">):</span>
</span><span id="__span-0-1469"><a id="__codelineno-0-1469" name="__codelineno-0-1469"></a>    <span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
</span><span id="__span-0-1470"><a id="__codelineno-0-1470" name="__codelineno-0-1470"></a>
</span><span id="__span-0-1471"><a id="__codelineno-0-1471" name="__codelineno-0-1471"></a>    <span class="n">db_path</span> <span class="o">=</span> <span class="n">_get_secmaster_path</span><span class="p">()</span>
</span><span id="__span-0-1472"><a id="__codelineno-0-1472" name="__codelineno-0-1472"></a>    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
</span><span id="__span-0-1473"><a id="__codelineno-0-1473" name="__codelineno-0-1473"></a>    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-0-1474"><a id="__codelineno-0-1474" name="__codelineno-0-1474"></a>    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
</span><span id="__span-0-1475"><a id="__codelineno-0-1475" name="__codelineno-0-1475"></a>        <span class="s2">&quot;INSERT INTO symbol_presets (name, symbols) VALUES (?, ?)&quot;</span><span class="p">,</span>
</span><span id="__span-0-1476"><a id="__codelineno-0-1476" name="__codelineno-0-1476"></a>        <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">symbols</span><span class="p">)),</span>
</span><span id="__span-0-1477"><a id="__codelineno-0-1477" name="__codelineno-0-1477"></a>    <span class="p">)</span>
</span><span id="__span-0-1478"><a id="__codelineno-0-1478" name="__codelineno-0-1478"></a>    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span><span id="__span-0-1479"><a id="__codelineno-0-1479" name="__codelineno-0-1479"></a>    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-0-1480"><a id="__codelineno-0-1480" name="__codelineno-0-1480"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;created&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">name</span><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.update_preset" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_preset</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1483">1483</a></span>
<span class="normal"><a href="#__codelineno-0-1484">1484</a></span>
<span class="normal"><a href="#__codelineno-0-1485">1485</a></span>
<span class="normal"><a href="#__codelineno-0-1486">1486</a></span>
<span class="normal"><a href="#__codelineno-0-1487">1487</a></span>
<span class="normal"><a href="#__codelineno-0-1488">1488</a></span>
<span class="normal"><a href="#__codelineno-0-1489">1489</a></span>
<span class="normal"><a href="#__codelineno-0-1490">1490</a></span>
<span class="normal"><a href="#__codelineno-0-1491">1491</a></span>
<span class="normal"><a href="#__codelineno-0-1492">1492</a></span>
<span class="normal"><a href="#__codelineno-0-1493">1493</a></span>
<span class="normal"><a href="#__codelineno-0-1494">1494</a></span>
<span class="normal"><a href="#__codelineno-0-1495">1495</a></span>
<span class="normal"><a href="#__codelineno-0-1496">1496</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1483"><a id="__codelineno-0-1483" name="__codelineno-0-1483"></a><span class="nd">@app</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;/api/presets/</span><span class="si">{name}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-1484"><a id="__codelineno-0-1484" name="__codelineno-0-1484"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">update_preset</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">PresetRequest</span><span class="p">):</span>
</span><span id="__span-0-1485"><a id="__codelineno-0-1485" name="__codelineno-0-1485"></a>    <span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
</span><span id="__span-0-1486"><a id="__codelineno-0-1486" name="__codelineno-0-1486"></a>
</span><span id="__span-0-1487"><a id="__codelineno-0-1487" name="__codelineno-0-1487"></a>    <span class="n">db_path</span> <span class="o">=</span> <span class="n">_get_secmaster_path</span><span class="p">()</span>
</span><span id="__span-0-1488"><a id="__codelineno-0-1488" name="__codelineno-0-1488"></a>    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
</span><span id="__span-0-1489"><a id="__codelineno-0-1489" name="__codelineno-0-1489"></a>    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-0-1490"><a id="__codelineno-0-1490" name="__codelineno-0-1490"></a>    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
</span><span id="__span-0-1491"><a id="__codelineno-0-1491" name="__codelineno-0-1491"></a>        <span class="s2">&quot;UPDATE symbol_presets SET symbols = ? WHERE name = ?&quot;</span><span class="p">,</span>
</span><span id="__span-0-1492"><a id="__codelineno-0-1492" name="__codelineno-0-1492"></a>        <span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">symbols</span><span class="p">),</span> <span class="n">name</span><span class="p">),</span>
</span><span id="__span-0-1493"><a id="__codelineno-0-1493" name="__codelineno-0-1493"></a>    <span class="p">)</span>
</span><span id="__span-0-1494"><a id="__codelineno-0-1494" name="__codelineno-0-1494"></a>    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span><span id="__span-0-1495"><a id="__codelineno-0-1495" name="__codelineno-0-1495"></a>    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-0-1496"><a id="__codelineno-0-1496" name="__codelineno-0-1496"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;updated&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.delete_preset" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_preset</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1499">1499</a></span>
<span class="normal"><a href="#__codelineno-0-1500">1500</a></span>
<span class="normal"><a href="#__codelineno-0-1501">1501</a></span>
<span class="normal"><a href="#__codelineno-0-1502">1502</a></span>
<span class="normal"><a href="#__codelineno-0-1503">1503</a></span>
<span class="normal"><a href="#__codelineno-0-1504">1504</a></span>
<span class="normal"><a href="#__codelineno-0-1505">1505</a></span>
<span class="normal"><a href="#__codelineno-0-1506">1506</a></span>
<span class="normal"><a href="#__codelineno-0-1507">1507</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1499"><a id="__codelineno-0-1499" name="__codelineno-0-1499"></a><span class="nd">@app</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s2">&quot;/api/presets/</span><span class="si">{name}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-1500"><a id="__codelineno-0-1500" name="__codelineno-0-1500"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">delete_preset</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="__span-0-1501"><a id="__codelineno-0-1501" name="__codelineno-0-1501"></a>    <span class="n">db_path</span> <span class="o">=</span> <span class="n">_get_secmaster_path</span><span class="p">()</span>
</span><span id="__span-0-1502"><a id="__codelineno-0-1502" name="__codelineno-0-1502"></a>    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
</span><span id="__span-0-1503"><a id="__codelineno-0-1503" name="__codelineno-0-1503"></a>    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-0-1504"><a id="__codelineno-0-1504" name="__codelineno-0-1504"></a>    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM symbol_presets WHERE name = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">name</span><span class="p">,))</span>
</span><span id="__span-0-1505"><a id="__codelineno-0-1505" name="__codelineno-0-1505"></a>    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span><span id="__span-0-1506"><a id="__codelineno-0-1506" name="__codelineno-0-1506"></a>    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-0-1507"><a id="__codelineno-0-1507" name="__codelineno-0-1507"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;deleted&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._run_backtest" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_run_backtest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">run_id</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1518">1518</a></span>
<span class="normal"><a href="#__codelineno-0-1519">1519</a></span>
<span class="normal"><a href="#__codelineno-0-1520">1520</a></span>
<span class="normal"><a href="#__codelineno-0-1521">1521</a></span>
<span class="normal"><a href="#__codelineno-0-1522">1522</a></span>
<span class="normal"><a href="#__codelineno-0-1523">1523</a></span>
<span class="normal"><a href="#__codelineno-0-1524">1524</a></span>
<span class="normal"><a href="#__codelineno-0-1525">1525</a></span>
<span class="normal"><a href="#__codelineno-0-1526">1526</a></span>
<span class="normal"><a href="#__codelineno-0-1527">1527</a></span>
<span class="normal"><a href="#__codelineno-0-1528">1528</a></span>
<span class="normal"><a href="#__codelineno-0-1529">1529</a></span>
<span class="normal"><a href="#__codelineno-0-1530">1530</a></span>
<span class="normal"><a href="#__codelineno-0-1531">1531</a></span>
<span class="normal"><a href="#__codelineno-0-1532">1532</a></span>
<span class="normal"><a href="#__codelineno-0-1533">1533</a></span>
<span class="normal"><a href="#__codelineno-0-1534">1534</a></span>
<span class="normal"><a href="#__codelineno-0-1535">1535</a></span>
<span class="normal"><a href="#__codelineno-0-1536">1536</a></span>
<span class="normal"><a href="#__codelineno-0-1537">1537</a></span>
<span class="normal"><a href="#__codelineno-0-1538">1538</a></span>
<span class="normal"><a href="#__codelineno-0-1539">1539</a></span>
<span class="normal"><a href="#__codelineno-0-1540">1540</a></span>
<span class="normal"><a href="#__codelineno-0-1541">1541</a></span>
<span class="normal"><a href="#__codelineno-0-1542">1542</a></span>
<span class="normal"><a href="#__codelineno-0-1543">1543</a></span>
<span class="normal"><a href="#__codelineno-0-1544">1544</a></span>
<span class="normal"><a href="#__codelineno-0-1545">1545</a></span>
<span class="normal"><a href="#__codelineno-0-1546">1546</a></span>
<span class="normal"><a href="#__codelineno-0-1547">1547</a></span>
<span class="normal"><a href="#__codelineno-0-1548">1548</a></span>
<span class="normal"><a href="#__codelineno-0-1549">1549</a></span>
<span class="normal"><a href="#__codelineno-0-1550">1550</a></span>
<span class="normal"><a href="#__codelineno-0-1551">1551</a></span>
<span class="normal"><a href="#__codelineno-0-1552">1552</a></span>
<span class="normal"><a href="#__codelineno-0-1553">1553</a></span>
<span class="normal"><a href="#__codelineno-0-1554">1554</a></span>
<span class="normal"><a href="#__codelineno-0-1555">1555</a></span>
<span class="normal"><a href="#__codelineno-0-1556">1556</a></span>
<span class="normal"><a href="#__codelineno-0-1557">1557</a></span>
<span class="normal"><a href="#__codelineno-0-1558">1558</a></span>
<span class="normal"><a href="#__codelineno-0-1559">1559</a></span>
<span class="normal"><a href="#__codelineno-0-1560">1560</a></span>
<span class="normal"><a href="#__codelineno-0-1561">1561</a></span>
<span class="normal"><a href="#__codelineno-0-1562">1562</a></span>
<span class="normal"><a href="#__codelineno-0-1563">1563</a></span>
<span class="normal"><a href="#__codelineno-0-1564">1564</a></span>
<span class="normal"><a href="#__codelineno-0-1565">1565</a></span>
<span class="normal"><a href="#__codelineno-0-1566">1566</a></span>
<span class="normal"><a href="#__codelineno-0-1567">1567</a></span>
<span class="normal"><a href="#__codelineno-0-1568">1568</a></span>
<span class="normal"><a href="#__codelineno-0-1569">1569</a></span>
<span class="normal"><a href="#__codelineno-0-1570">1570</a></span>
<span class="normal"><a href="#__codelineno-0-1571">1571</a></span>
<span class="normal"><a href="#__codelineno-0-1572">1572</a></span>
<span class="normal"><a href="#__codelineno-0-1573">1573</a></span>
<span class="normal"><a href="#__codelineno-0-1574">1574</a></span>
<span class="normal"><a href="#__codelineno-0-1575">1575</a></span>
<span class="normal"><a href="#__codelineno-0-1576">1576</a></span>
<span class="normal"><a href="#__codelineno-0-1577">1577</a></span>
<span class="normal"><a href="#__codelineno-0-1578">1578</a></span>
<span class="normal"><a href="#__codelineno-0-1579">1579</a></span>
<span class="normal"><a href="#__codelineno-0-1580">1580</a></span>
<span class="normal"><a href="#__codelineno-0-1581">1581</a></span>
<span class="normal"><a href="#__codelineno-0-1582">1582</a></span>
<span class="normal"><a href="#__codelineno-0-1583">1583</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1518"><a id="__codelineno-0-1518" name="__codelineno-0-1518"></a><span class="k">def</span><span class="w"> </span><span class="nf">_run_backtest</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">BacktestRequest</span><span class="p">,</span> <span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-1519"><a id="__codelineno-0-1519" name="__codelineno-0-1519"></a>    <span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
</span><span id="__span-0-1520"><a id="__codelineno-0-1520" name="__codelineno-0-1520"></a>
</span><span id="__span-0-1521"><a id="__codelineno-0-1521" name="__codelineno-0-1521"></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-1522"><a id="__codelineno-0-1522" name="__codelineno-0-1522"></a>        <span class="n">_running_jobs</span><span class="p">[</span><span class="n">run_id</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;running&quot;</span>
</span><span id="__span-0-1523"><a id="__codelineno-0-1523" name="__codelineno-0-1523"></a>
</span><span id="__span-0-1524"><a id="__codelineno-0-1524" name="__codelineno-0-1524"></a>        <span class="n">strategy_cls</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">get_strategies</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">strategy</span><span class="p">)</span>
</span><span id="__span-0-1525"><a id="__codelineno-0-1525" name="__codelineno-0-1525"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">strategy_cls</span><span class="p">:</span>
</span><span id="__span-0-1526"><a id="__codelineno-0-1526" name="__codelineno-0-1526"></a>            <span class="n">_running_jobs</span><span class="p">[</span><span class="n">run_id</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;error: invalid strategy&quot;</span>
</span><span id="__span-0-1527"><a id="__codelineno-0-1527" name="__codelineno-0-1527"></a>            <span class="k">return</span>
</span><span id="__span-0-1528"><a id="__codelineno-0-1528" name="__codelineno-0-1528"></a>
</span><span id="__span-0-1529"><a id="__codelineno-0-1529" name="__codelineno-0-1529"></a>        <span class="n">strategy_params</span> <span class="o">=</span> <span class="n">_deserialize_params</span><span class="p">(</span>
</span><span id="__span-0-1530"><a id="__codelineno-0-1530" name="__codelineno-0-1530"></a>            <span class="n">request</span><span class="o">.</span><span class="n">strategy_params</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">strategy_cls</span><span class="p">,</span> <span class="s2">&quot;parameters&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="__span-0-1531"><a id="__codelineno-0-1531" name="__codelineno-0-1531"></a>        <span class="p">)</span>
</span><span id="__span-0-1532"><a id="__codelineno-0-1532" name="__codelineno-0-1532"></a>
</span><span id="__span-0-1533"><a id="__codelineno-0-1533" name="__codelineno-0-1533"></a>        <span class="n">updated_parameters</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-0-1534"><a id="__codelineno-0-1534" name="__codelineno-0-1534"></a>        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">spec</span> <span class="ow">in</span> <span class="n">strategy_cls</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="__span-0-1535"><a id="__codelineno-0-1535" name="__codelineno-0-1535"></a>            <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">strategy_params</span><span class="p">:</span>
</span><span id="__span-0-1536"><a id="__codelineno-0-1536" name="__codelineno-0-1536"></a>                <span class="n">updated_parameters</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">spec</span><span class="p">)(</span>
</span><span id="__span-0-1537"><a id="__codelineno-0-1537" name="__codelineno-0-1537"></a>                    <span class="n">default</span><span class="o">=</span><span class="n">strategy_params</span><span class="p">[</span><span class="n">name</span><span class="p">],</span>
</span><span id="__span-0-1538"><a id="__codelineno-0-1538" name="__codelineno-0-1538"></a>                    <span class="o">**</span><span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">spec</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="o">!=</span> <span class="s2">&quot;default&quot;</span><span class="p">},</span>
</span><span id="__span-0-1539"><a id="__codelineno-0-1539" name="__codelineno-0-1539"></a>                <span class="p">)</span>
</span><span id="__span-0-1540"><a id="__codelineno-0-1540" name="__codelineno-0-1540"></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-1541"><a id="__codelineno-0-1541" name="__codelineno-0-1541"></a>                <span class="n">updated_parameters</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">spec</span>
</span><span id="__span-0-1542"><a id="__codelineno-0-1542" name="__codelineno-0-1542"></a>
</span><span id="__span-0-1543"><a id="__codelineno-0-1543" name="__codelineno-0-1543"></a>        <span class="n">configured_strategy</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span>
</span><span id="__span-0-1544"><a id="__codelineno-0-1544" name="__codelineno-0-1544"></a>            <span class="sa">f</span><span class="s2">&quot;Configured</span><span class="si">{</span><span class="n">request</span><span class="o">.</span><span class="n">strategy</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="__span-0-1545"><a id="__codelineno-0-1545" name="__codelineno-0-1545"></a>            <span class="p">(</span><span class="n">strategy_cls</span><span class="p">,),</span>
</span><span id="__span-0-1546"><a id="__codelineno-0-1546" name="__codelineno-0-1546"></a>            <span class="p">{</span><span class="s2">&quot;symbols&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">symbols</span><span class="p">,</span> <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="n">updated_parameters</span><span class="p">},</span>
</span><span id="__span-0-1547"><a id="__codelineno-0-1547" name="__codelineno-0-1547"></a>        <span class="p">)</span>
</span><span id="__span-0-1548"><a id="__codelineno-0-1548" name="__codelineno-0-1548"></a>
</span><span id="__span-0-1549"><a id="__codelineno-0-1549" name="__codelineno-0-1549"></a>        <span class="n">datafeed_attrs</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-0-1550"><a id="__codelineno-0-1550" name="__codelineno-0-1550"></a>        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">start_date</span><span class="p">:</span>
</span><span id="__span-0-1551"><a id="__codelineno-0-1551" name="__codelineno-0-1551"></a>            <span class="n">datafeed_attrs</span><span class="p">[</span><span class="s2">&quot;start_ts&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span>
</span><span id="__span-0-1552"><a id="__codelineno-0-1552" name="__codelineno-0-1552"></a>                <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">start_date</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s2">&quot;UTC&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>
</span><span id="__span-0-1553"><a id="__codelineno-0-1553" name="__codelineno-0-1553"></a>            <span class="p">)</span>
</span><span id="__span-0-1554"><a id="__codelineno-0-1554" name="__codelineno-0-1554"></a>        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">end_date</span><span class="p">:</span>
</span><span id="__span-0-1555"><a id="__codelineno-0-1555" name="__codelineno-0-1555"></a>            <span class="n">end_dt</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="__span-0-1556"><a id="__codelineno-0-1556" name="__codelineno-0-1556"></a>                <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">end_date</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s2">&quot;UTC&quot;</span><span class="p">)</span>
</span><span id="__span-0-1557"><a id="__codelineno-0-1557" name="__codelineno-0-1557"></a>                <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-0-1558"><a id="__codelineno-0-1558" name="__codelineno-0-1558"></a>                <span class="o">-</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;ns&quot;</span><span class="p">)</span>
</span><span id="__span-0-1559"><a id="__codelineno-0-1559" name="__codelineno-0-1559"></a>            <span class="p">)</span>
</span><span id="__span-0-1560"><a id="__codelineno-0-1560" name="__codelineno-0-1560"></a>            <span class="n">datafeed_attrs</span><span class="p">[</span><span class="s2">&quot;end_ts&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">end_dt</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</span><span id="__span-0-1561"><a id="__codelineno-0-1561" name="__codelineno-0-1561"></a>
</span><span id="__span-0-1562"><a id="__codelineno-0-1562" name="__codelineno-0-1562"></a>        <span class="n">configured_datafeed</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span>
</span><span id="__span-0-1563"><a id="__codelineno-0-1563" name="__codelineno-0-1563"></a>            <span class="s2">&quot;ConfiguredSimulatedDatafeed&quot;</span><span class="p">,</span>
</span><span id="__span-0-1564"><a id="__codelineno-0-1564" name="__codelineno-0-1564"></a>            <span class="p">(</span><span class="n">SimulatedDatafeed</span><span class="p">,),</span>
</span><span id="__span-0-1565"><a id="__codelineno-0-1565" name="__codelineno-0-1565"></a>            <span class="n">datafeed_attrs</span><span class="p">,</span>
</span><span id="__span-0-1566"><a id="__codelineno-0-1566" name="__codelineno-0-1566"></a>        <span class="p">)</span>
</span><span id="__span-0-1567"><a id="__codelineno-0-1567" name="__codelineno-0-1567"></a>
</span><span id="__span-0-1568"><a id="__codelineno-0-1568" name="__codelineno-0-1568"></a>        <span class="n">configured_orchestrator</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span>
</span><span id="__span-0-1569"><a id="__codelineno-0-1569" name="__codelineno-0-1569"></a>            <span class="s2">&quot;ConfiguredOrchestrator&quot;</span><span class="p">,</span>
</span><span id="__span-0-1570"><a id="__codelineno-0-1570" name="__codelineno-0-1570"></a>            <span class="p">(</span><span class="n">Orchestrator</span><span class="p">,),</span>
</span><span id="__span-0-1571"><a id="__codelineno-0-1571" name="__codelineno-0-1571"></a>            <span class="p">{</span><span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="s2">&quot;backtest&quot;</span><span class="p">},</span>
</span><span id="__span-0-1572"><a id="__codelineno-0-1572" name="__codelineno-0-1572"></a>        <span class="p">)</span>
</span><span id="__span-0-1573"><a id="__codelineno-0-1573" name="__codelineno-0-1573"></a>
</span><span id="__span-0-1574"><a id="__codelineno-0-1574" name="__codelineno-0-1574"></a>        <span class="n">orchestrator</span> <span class="o">=</span> <span class="n">configured_orchestrator</span><span class="p">(</span>
</span><span id="__span-0-1575"><a id="__codelineno-0-1575" name="__codelineno-0-1575"></a>            <span class="n">strategies</span><span class="o">=</span><span class="p">[</span><span class="n">configured_strategy</span><span class="p">],</span>
</span><span id="__span-0-1576"><a id="__codelineno-0-1576" name="__codelineno-0-1576"></a>            <span class="n">broker</span><span class="o">=</span><span class="n">SimulatedBroker</span><span class="p">,</span>
</span><span id="__span-0-1577"><a id="__codelineno-0-1577" name="__codelineno-0-1577"></a>            <span class="n">datafeed</span><span class="o">=</span><span class="n">configured_datafeed</span><span class="p">,</span>
</span><span id="__span-0-1578"><a id="__codelineno-0-1578" name="__codelineno-0-1578"></a>        <span class="p">)</span>
</span><span id="__span-0-1579"><a id="__codelineno-0-1579" name="__codelineno-0-1579"></a>
</span><span id="__span-0-1580"><a id="__codelineno-0-1580" name="__codelineno-0-1580"></a>        <span class="n">orchestrator</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</span><span id="__span-0-1581"><a id="__codelineno-0-1581" name="__codelineno-0-1581"></a>        <span class="n">_running_jobs</span><span class="p">[</span><span class="n">run_id</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;completed&quot;</span>
</span><span id="__span-0-1582"><a id="__codelineno-0-1582" name="__codelineno-0-1582"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-0-1583"><a id="__codelineno-0-1583" name="__codelineno-0-1583"></a>        <span class="n">_running_jobs</span><span class="p">[</span><span class="n">run_id</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._deserialize_params" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_deserialize_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">param_specs</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1586">1586</a></span>
<span class="normal"><a href="#__codelineno-0-1587">1587</a></span>
<span class="normal"><a href="#__codelineno-0-1588">1588</a></span>
<span class="normal"><a href="#__codelineno-0-1589">1589</a></span>
<span class="normal"><a href="#__codelineno-0-1590">1590</a></span>
<span class="normal"><a href="#__codelineno-0-1591">1591</a></span>
<span class="normal"><a href="#__codelineno-0-1592">1592</a></span>
<span class="normal"><a href="#__codelineno-0-1593">1593</a></span>
<span class="normal"><a href="#__codelineno-0-1594">1594</a></span>
<span class="normal"><a href="#__codelineno-0-1595">1595</a></span>
<span class="normal"><a href="#__codelineno-0-1596">1596</a></span>
<span class="normal"><a href="#__codelineno-0-1597">1597</a></span>
<span class="normal"><a href="#__codelineno-0-1598">1598</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1586"><a id="__codelineno-0-1586" name="__codelineno-0-1586"></a><span class="k">def</span><span class="w"> </span><span class="nf">_deserialize_params</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">param_specs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="__span-0-1587"><a id="__codelineno-0-1587" name="__codelineno-0-1587"></a>    <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-0-1588"><a id="__codelineno-0-1588" name="__codelineno-0-1588"></a>    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">params</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="__span-0-1589"><a id="__codelineno-0-1589" name="__codelineno-0-1589"></a>        <span class="n">spec</span> <span class="o">=</span> <span class="n">param_specs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="__span-0-1590"><a id="__codelineno-0-1590" name="__codelineno-0-1590"></a>        <span class="k">if</span> <span class="n">spec</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-1591"><a id="__codelineno-0-1591" name="__codelineno-0-1591"></a>            <span class="n">result</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="__span-0-1592"><a id="__codelineno-0-1592" name="__codelineno-0-1592"></a>            <span class="k">continue</span>
</span><span id="__span-0-1593"><a id="__codelineno-0-1593" name="__codelineno-0-1593"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">spec</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="__span-0-1594"><a id="__codelineno-0-1594" name="__codelineno-0-1594"></a>            <span class="n">enum_cls</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">spec</span><span class="o">.</span><span class="n">default</span><span class="p">)</span>
</span><span id="__span-0-1595"><a id="__codelineno-0-1595" name="__codelineno-0-1595"></a>            <span class="n">result</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">enum_cls</span><span class="p">[</span><span class="n">value</span><span class="p">]</span>
</span><span id="__span-0-1596"><a id="__codelineno-0-1596" name="__codelineno-0-1596"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-1597"><a id="__codelineno-0-1597" name="__codelineno-0-1597"></a>            <span class="n">result</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="__span-0-1598"><a id="__codelineno-0-1598" name="__codelineno-0-1598"></a>    <span class="k">return</span> <span class="n">result</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.run_backtest" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run_backtest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">background_tasks</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1601">1601</a></span>
<span class="normal"><a href="#__codelineno-0-1602">1602</a></span>
<span class="normal"><a href="#__codelineno-0-1603">1603</a></span>
<span class="normal"><a href="#__codelineno-0-1604">1604</a></span>
<span class="normal"><a href="#__codelineno-0-1605">1605</a></span>
<span class="normal"><a href="#__codelineno-0-1606">1606</a></span>
<span class="normal"><a href="#__codelineno-0-1607">1607</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1601"><a id="__codelineno-0-1601" name="__codelineno-0-1601"></a><span class="nd">@app</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/api/backtest/run&quot;</span><span class="p">)</span>
</span><span id="__span-0-1602"><a id="__codelineno-0-1602" name="__codelineno-0-1602"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run_backtest</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">BacktestRequest</span><span class="p">,</span> <span class="n">background_tasks</span><span class="p">:</span> <span class="n">BackgroundTasks</span><span class="p">):</span>
</span><span id="__span-0-1603"><a id="__codelineno-0-1603" name="__codelineno-0-1603"></a>    <span class="kn">import</span><span class="w"> </span><span class="nn">uuid</span>
</span><span id="__span-0-1604"><a id="__codelineno-0-1604" name="__codelineno-0-1604"></a>
</span><span id="__span-0-1605"><a id="__codelineno-0-1605" name="__codelineno-0-1605"></a>    <span class="n">run_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())[:</span><span class="mi">8</span><span class="p">]</span>
</span><span id="__span-0-1606"><a id="__codelineno-0-1606" name="__codelineno-0-1606"></a>    <span class="n">background_tasks</span><span class="o">.</span><span class="n">add_task</span><span class="p">(</span><span class="n">_run_backtest</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">run_id</span><span class="p">)</span>
</span><span id="__span-0-1607"><a id="__codelineno-0-1607" name="__codelineno-0-1607"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;run_id&quot;</span><span class="p">:</span> <span class="n">run_id</span><span class="p">,</span> <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;started&quot;</span><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.backtest_status" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">backtest_status</span><span class="p">(</span><span class="n">run_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1610">1610</a></span>
<span class="normal"><a href="#__codelineno-0-1611">1611</a></span>
<span class="normal"><a href="#__codelineno-0-1612">1612</a></span>
<span class="normal"><a href="#__codelineno-0-1613">1613</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1610"><a id="__codelineno-0-1610" name="__codelineno-0-1610"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/backtest/status/</span><span class="si">{run_id}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-1611"><a id="__codelineno-0-1611" name="__codelineno-0-1611"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">backtest_status</span><span class="p">(</span><span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="__span-0-1612"><a id="__codelineno-0-1612" name="__codelineno-0-1612"></a>    <span class="n">status</span> <span class="o">=</span> <span class="n">_running_jobs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">run_id</span><span class="p">,</span> <span class="s2">&quot;not found&quot;</span><span class="p">)</span>
</span><span id="__span-0-1613"><a id="__codelineno-0-1613" name="__codelineno-0-1613"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;run_id&quot;</span><span class="p">:</span> <span class="n">run_id</span><span class="p">,</span> <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">status</span><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.backtest_form" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">backtest_form</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1949">1949</a></span>
<span class="normal"><a href="#__codelineno-0-1950">1950</a></span>
<span class="normal"><a href="#__codelineno-0-1951">1951</a></span>
<span class="normal"><a href="#__codelineno-0-1952">1952</a></span>
<span class="normal"><a href="#__codelineno-0-1953">1953</a></span>
<span class="normal"><a href="#__codelineno-0-1954">1954</a></span>
<span class="normal"><a href="#__codelineno-0-1955">1955</a></span>
<span class="normal"><a href="#__codelineno-0-1956">1956</a></span>
<span class="normal"><a href="#__codelineno-0-1957">1957</a></span>
<span class="normal"><a href="#__codelineno-0-1958">1958</a></span>
<span class="normal"><a href="#__codelineno-0-1959">1959</a></span>
<span class="normal"><a href="#__codelineno-0-1960">1960</a></span>
<span class="normal"><a href="#__codelineno-0-1961">1961</a></span>
<span class="normal"><a href="#__codelineno-0-1962">1962</a></span>
<span class="normal"><a href="#__codelineno-0-1963">1963</a></span>
<span class="normal"><a href="#__codelineno-0-1964">1964</a></span>
<span class="normal"><a href="#__codelineno-0-1965">1965</a></span>
<span class="normal"><a href="#__codelineno-0-1966">1966</a></span>
<span class="normal"><a href="#__codelineno-0-1967">1967</a></span>
<span class="normal"><a href="#__codelineno-0-1968">1968</a></span>
<span class="normal"><a href="#__codelineno-0-1969">1969</a></span>
<span class="normal"><a href="#__codelineno-0-1970">1970</a></span>
<span class="normal"><a href="#__codelineno-0-1971">1971</a></span>
<span class="normal"><a href="#__codelineno-0-1972">1972</a></span>
<span class="normal"><a href="#__codelineno-0-1973">1973</a></span>
<span class="normal"><a href="#__codelineno-0-1974">1974</a></span>
<span class="normal"><a href="#__codelineno-0-1975">1975</a></span>
<span class="normal"><a href="#__codelineno-0-1976">1976</a></span>
<span class="normal"><a href="#__codelineno-0-1977">1977</a></span>
<span class="normal"><a href="#__codelineno-0-1978">1978</a></span>
<span class="normal"><a href="#__codelineno-0-1979">1979</a></span>
<span class="normal"><a href="#__codelineno-0-1980">1980</a></span>
<span class="normal"><a href="#__codelineno-0-1981">1981</a></span>
<span class="normal"><a href="#__codelineno-0-1982">1982</a></span>
<span class="normal"><a href="#__codelineno-0-1983">1983</a></span>
<span class="normal"><a href="#__codelineno-0-1984">1984</a></span>
<span class="normal"><a href="#__codelineno-0-1985">1985</a></span>
<span class="normal"><a href="#__codelineno-0-1986">1986</a></span>
<span class="normal"><a href="#__codelineno-0-1987">1987</a></span>
<span class="normal"><a href="#__codelineno-0-1988">1988</a></span>
<span class="normal"><a href="#__codelineno-0-1989">1989</a></span>
<span class="normal"><a href="#__codelineno-0-1990">1990</a></span>
<span class="normal"><a href="#__codelineno-0-1991">1991</a></span>
<span class="normal"><a href="#__codelineno-0-1992">1992</a></span>
<span class="normal"><a href="#__codelineno-0-1993">1993</a></span>
<span class="normal"><a href="#__codelineno-0-1994">1994</a></span>
<span class="normal"><a href="#__codelineno-0-1995">1995</a></span>
<span class="normal"><a href="#__codelineno-0-1996">1996</a></span>
<span class="normal"><a href="#__codelineno-0-1997">1997</a></span>
<span class="normal"><a href="#__codelineno-0-1998">1998</a></span>
<span class="normal"><a href="#__codelineno-0-1999">1999</a></span>
<span class="normal"><a href="#__codelineno-0-2000">2000</a></span>
<span class="normal"><a href="#__codelineno-0-2001">2001</a></span>
<span class="normal"><a href="#__codelineno-0-2002">2002</a></span>
<span class="normal"><a href="#__codelineno-0-2003">2003</a></span>
<span class="normal"><a href="#__codelineno-0-2004">2004</a></span>
<span class="normal"><a href="#__codelineno-0-2005">2005</a></span>
<span class="normal"><a href="#__codelineno-0-2006">2006</a></span>
<span class="normal"><a href="#__codelineno-0-2007">2007</a></span>
<span class="normal"><a href="#__codelineno-0-2008">2008</a></span>
<span class="normal"><a href="#__codelineno-0-2009">2009</a></span>
<span class="normal"><a href="#__codelineno-0-2010">2010</a></span>
<span class="normal"><a href="#__codelineno-0-2011">2011</a></span>
<span class="normal"><a href="#__codelineno-0-2012">2012</a></span>
<span class="normal"><a href="#__codelineno-0-2013">2013</a></span>
<span class="normal"><a href="#__codelineno-0-2014">2014</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1949"><a id="__codelineno-0-1949" name="__codelineno-0-1949"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/backtest&quot;</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">HTMLResponse</span><span class="p">)</span>
</span><span id="__span-0-1950"><a id="__codelineno-0-1950" name="__codelineno-0-1950"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">backtest_form</span><span class="p">():</span>
</span><span id="__span-0-1951"><a id="__codelineno-0-1951" name="__codelineno-0-1951"></a>    <span class="n">sidebar</span> <span class="o">=</span> <span class="n">SIDEBAR_HTML</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="__span-0-1952"><a id="__codelineno-0-1952" name="__codelineno-0-1952"></a>        <span class="n">runs_active</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">backtest_active</span><span class="o">=</span><span class="s2">&quot;active&quot;</span><span class="p">,</span> <span class="n">secmaster_active</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span id="__span-0-1953"><a id="__codelineno-0-1953" name="__codelineno-0-1953"></a>    <span class="p">)</span>
</span><span id="__span-0-1954"><a id="__codelineno-0-1954" name="__codelineno-0-1954"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-0-1955"><a id="__codelineno-0-1955" name="__codelineno-0-1955"></a><span class="s2">    &lt;!DOCTYPE html&gt;</span>
</span><span id="__span-0-1956"><a id="__codelineno-0-1956" name="__codelineno-0-1956"></a><span class="s2">    &lt;html&gt;</span>
</span><span id="__span-0-1957"><a id="__codelineno-0-1957" name="__codelineno-0-1957"></a><span class="s2">    &lt;head&gt;</span>
</span><span id="__span-0-1958"><a id="__codelineno-0-1958" name="__codelineno-0-1958"></a><span class="s2">        &lt;title&gt;Backtest - OneSecondTrader&lt;/title&gt;</span>
</span><span id="__span-0-1959"><a id="__codelineno-0-1959" name="__codelineno-0-1959"></a><span class="s2">        &lt;style&gt;</span><span class="si">{</span><span class="n">BASE_STYLE</span><span class="si">}{</span><span class="n">BACKTEST_FORM_STYLE</span><span class="si">}</span><span class="s2">&lt;/style&gt;</span>
</span><span id="__span-0-1960"><a id="__codelineno-0-1960" name="__codelineno-0-1960"></a><span class="s2">    &lt;/head&gt;</span>
</span><span id="__span-0-1961"><a id="__codelineno-0-1961" name="__codelineno-0-1961"></a><span class="s2">    &lt;body&gt;</span>
</span><span id="__span-0-1962"><a id="__codelineno-0-1962" name="__codelineno-0-1962"></a><span class="s2">        </span><span class="si">{</span><span class="n">sidebar</span><span class="si">}</span>
</span><span id="__span-0-1963"><a id="__codelineno-0-1963" name="__codelineno-0-1963"></a><span class="s2">        &lt;main class=&quot;main-content&quot;&gt;</span>
</span><span id="__span-0-1964"><a id="__codelineno-0-1964" name="__codelineno-0-1964"></a><span class="s2">            &lt;div class=&quot;container&quot;&gt;</span>
</span><span id="__span-0-1965"><a id="__codelineno-0-1965" name="__codelineno-0-1965"></a><span class="s2">                &lt;div class=&quot;card&quot;&gt;</span>
</span><span id="__span-0-1966"><a id="__codelineno-0-1966" name="__codelineno-0-1966"></a><span class="s2">                    &lt;h2&gt;Run Backtest&lt;/h2&gt;</span>
</span><span id="__span-0-1967"><a id="__codelineno-0-1967" name="__codelineno-0-1967"></a><span class="s2">                    &lt;div class=&quot;form-group&quot;&gt;</span>
</span><span id="__span-0-1968"><a id="__codelineno-0-1968" name="__codelineno-0-1968"></a><span class="s2">                        &lt;label&gt;Strategy&lt;/label&gt;</span>
</span><span id="__span-0-1969"><a id="__codelineno-0-1969" name="__codelineno-0-1969"></a><span class="s2">                        &lt;select id=&quot;strategy&quot; onchange=&quot;loadStrategyParams()&quot;&gt;&lt;/select&gt;</span>
</span><span id="__span-0-1970"><a id="__codelineno-0-1970" name="__codelineno-0-1970"></a><span class="s2">                        &lt;div class=&quot;section-header&quot;&gt;Parameters&lt;/div&gt;</span>
</span><span id="__span-0-1971"><a id="__codelineno-0-1971" name="__codelineno-0-1971"></a><span class="s2">                        &lt;div id=&quot;strategy-params&quot; class=&quot;params-container&quot;&gt;&lt;/div&gt;</span>
</span><span id="__span-0-1972"><a id="__codelineno-0-1972" name="__codelineno-0-1972"></a><span class="s2">                    &lt;/div&gt;</span>
</span><span id="__span-0-1973"><a id="__codelineno-0-1973" name="__codelineno-0-1973"></a><span class="s2">                    &lt;div class=&quot;form-group&quot;&gt;</span>
</span><span id="__span-0-1974"><a id="__codelineno-0-1974" name="__codelineno-0-1974"></a><span class="s2">                        &lt;label&gt;Bar Period&lt;/label&gt;</span>
</span><span id="__span-0-1975"><a id="__codelineno-0-1975" name="__codelineno-0-1975"></a><span class="s2">                        &lt;select id=&quot;bar-period&quot; onchange=&quot;onBarPeriodChange()&quot;&gt;&lt;/select&gt;</span>
</span><span id="__span-0-1976"><a id="__codelineno-0-1976" name="__codelineno-0-1976"></a><span class="s2">                    &lt;/div&gt;</span>
</span><span id="__span-0-1977"><a id="__codelineno-0-1977" name="__codelineno-0-1977"></a><span class="s2">                    &lt;div class=&quot;form-group&quot;&gt;</span>
</span><span id="__span-0-1978"><a id="__codelineno-0-1978" name="__codelineno-0-1978"></a><span class="s2">                        &lt;label&gt;Symbols&lt;/label&gt;</span>
</span><span id="__span-0-1979"><a id="__codelineno-0-1979" name="__codelineno-0-1979"></a><span class="s2">                        &lt;div class=&quot;symbol-section&quot;&gt;</span>
</span><span id="__span-0-1980"><a id="__codelineno-0-1980" name="__codelineno-0-1980"></a><span class="s2">                            &lt;div class=&quot;preset-row&quot;&gt;</span>
</span><span id="__span-0-1981"><a id="__codelineno-0-1981" name="__codelineno-0-1981"></a><span class="s2">                                &lt;select id=&quot;preset-select&quot; onchange=&quot;loadPreset()&quot;&gt;&lt;/select&gt;</span>
</span><span id="__span-0-1982"><a id="__codelineno-0-1982" name="__codelineno-0-1982"></a><span class="s2">                                &lt;input type=&quot;text&quot; id=&quot;preset-name&quot; placeholder=&quot;New preset name...&quot;&gt;</span>
</span><span id="__span-0-1983"><a id="__codelineno-0-1983" name="__codelineno-0-1983"></a><span class="s2">                                &lt;button class=&quot;btn btn-sm btn-secondary&quot; onclick=&quot;savePreset()&quot;&gt;Save&lt;/button&gt;</span>
</span><span id="__span-0-1984"><a id="__codelineno-0-1984" name="__codelineno-0-1984"></a><span class="s2">                                &lt;button class=&quot;btn btn-sm btn-danger&quot; onclick=&quot;deletePreset()&quot;&gt;Delete&lt;/button&gt;</span>
</span><span id="__span-0-1985"><a id="__codelineno-0-1985" name="__codelineno-0-1985"></a><span class="s2">                            &lt;/div&gt;</span>
</span><span id="__span-0-1986"><a id="__codelineno-0-1986" name="__codelineno-0-1986"></a><span class="s2">                            &lt;div class=&quot;search-row&quot;&gt;</span>
</span><span id="__span-0-1987"><a id="__codelineno-0-1987" name="__codelineno-0-1987"></a><span class="s2">                                &lt;input type=&quot;text&quot; id=&quot;symbol-search&quot; placeholder=&quot;Search symbols...&quot; oninput=&quot;searchSymbols()&quot;&gt;</span>
</span><span id="__span-0-1988"><a id="__codelineno-0-1988" name="__codelineno-0-1988"></a><span class="s2">                            &lt;/div&gt;</span>
</span><span id="__span-0-1989"><a id="__codelineno-0-1989" name="__codelineno-0-1989"></a><span class="s2">                            &lt;div id=&quot;search-results&quot; class=&quot;search-results&quot;&gt;&lt;/div&gt;</span>
</span><span id="__span-0-1990"><a id="__codelineno-0-1990" name="__codelineno-0-1990"></a><span class="s2">                            &lt;div id=&quot;selected-label&quot; class=&quot;selected-label&quot;&gt;Selected (0):&lt;/div&gt;</span>
</span><span id="__span-0-1991"><a id="__codelineno-0-1991" name="__codelineno-0-1991"></a><span class="s2">                            &lt;div id=&quot;selected-symbols&quot; class=&quot;selected-symbols&quot;&gt;&lt;/div&gt;</span>
</span><span id="__span-0-1992"><a id="__codelineno-0-1992" name="__codelineno-0-1992"></a><span class="s2">                        &lt;/div&gt;</span>
</span><span id="__span-0-1993"><a id="__codelineno-0-1993" name="__codelineno-0-1993"></a><span class="s2">                    &lt;/div&gt;</span>
</span><span id="__span-0-1994"><a id="__codelineno-0-1994" name="__codelineno-0-1994"></a><span class="s2">                    &lt;div class=&quot;date-row&quot;&gt;</span>
</span><span id="__span-0-1995"><a id="__codelineno-0-1995" name="__codelineno-0-1995"></a><span class="s2">                        &lt;div class=&quot;form-group&quot;&gt;</span>
</span><span id="__span-0-1996"><a id="__codelineno-0-1996" name="__codelineno-0-1996"></a><span class="s2">                            &lt;label&gt;Start Date&lt;/label&gt;</span>
</span><span id="__span-0-1997"><a id="__codelineno-0-1997" name="__codelineno-0-1997"></a><span class="s2">                            &lt;input type=&quot;date&quot; id=&quot;start-date&quot; onchange=&quot;clampDate(&#39;start-date&#39;)&quot;&gt;</span>
</span><span id="__span-0-1998"><a id="__codelineno-0-1998" name="__codelineno-0-1998"></a><span class="s2">                        &lt;/div&gt;</span>
</span><span id="__span-0-1999"><a id="__codelineno-0-1999" name="__codelineno-0-1999"></a><span class="s2">                        &lt;div class=&quot;form-group&quot;&gt;</span>
</span><span id="__span-0-2000"><a id="__codelineno-0-2000" name="__codelineno-0-2000"></a><span class="s2">                            &lt;label&gt;End Date&lt;/label&gt;</span>
</span><span id="__span-0-2001"><a id="__codelineno-0-2001" name="__codelineno-0-2001"></a><span class="s2">                            &lt;input type=&quot;date&quot; id=&quot;end-date&quot; onchange=&quot;clampDate(&#39;end-date&#39;)&quot;&gt;</span>
</span><span id="__span-0-2002"><a id="__codelineno-0-2002" name="__codelineno-0-2002"></a><span class="s2">                        &lt;/div&gt;</span>
</span><span id="__span-0-2003"><a id="__codelineno-0-2003" name="__codelineno-0-2003"></a><span class="s2">                    &lt;/div&gt;</span>
</span><span id="__span-0-2004"><a id="__codelineno-0-2004" name="__codelineno-0-2004"></a><span class="s2">                    &lt;div class=&quot;form-group&quot; style=&quot;margin-top: 16px;&quot;&gt;</span>
</span><span id="__span-0-2005"><a id="__codelineno-0-2005" name="__codelineno-0-2005"></a><span class="s2">                        &lt;button id=&quot;run-btn&quot; class=&quot;btn&quot; onclick=&quot;runBacktest()&quot;&gt;Run Backtest&lt;/button&gt;</span>
</span><span id="__span-0-2006"><a id="__codelineno-0-2006" name="__codelineno-0-2006"></a><span class="s2">                    &lt;/div&gt;</span>
</span><span id="__span-0-2007"><a id="__codelineno-0-2007" name="__codelineno-0-2007"></a><span class="s2">                    &lt;div id=&quot;status&quot;&gt;&lt;/div&gt;</span>
</span><span id="__span-0-2008"><a id="__codelineno-0-2008" name="__codelineno-0-2008"></a><span class="s2">                &lt;/div&gt;</span>
</span><span id="__span-0-2009"><a id="__codelineno-0-2009" name="__codelineno-0-2009"></a><span class="s2">            &lt;/div&gt;</span>
</span><span id="__span-0-2010"><a id="__codelineno-0-2010" name="__codelineno-0-2010"></a><span class="s2">        &lt;/main&gt;</span>
</span><span id="__span-0-2011"><a id="__codelineno-0-2011" name="__codelineno-0-2011"></a><span class="s2">        &lt;script&gt;</span><span class="si">{</span><span class="n">BACKTEST_FORM_SCRIPT</span><span class="si">}</span><span class="s2">&lt;/script&gt;</span>
</span><span id="__span-0-2012"><a id="__codelineno-0-2012" name="__codelineno-0-2012"></a><span class="s2">    &lt;/body&gt;</span>
</span><span id="__span-0-2013"><a id="__codelineno-0-2013" name="__codelineno-0-2013"></a><span class="s2">    &lt;/html&gt;</span>
</span><span id="__span-0-2014"><a id="__codelineno-0-2014" name="__codelineno-0-2014"></a><span class="s2">    &quot;&quot;&quot;</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._get_secmaster_summary" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_get_secmaster_summary</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2017">2017</a></span>
<span class="normal"><a href="#__codelineno-0-2018">2018</a></span>
<span class="normal"><a href="#__codelineno-0-2019">2019</a></span>
<span class="normal"><a href="#__codelineno-0-2020">2020</a></span>
<span class="normal"><a href="#__codelineno-0-2021">2021</a></span>
<span class="normal"><a href="#__codelineno-0-2022">2022</a></span>
<span class="normal"><a href="#__codelineno-0-2023">2023</a></span>
<span class="normal"><a href="#__codelineno-0-2024">2024</a></span>
<span class="normal"><a href="#__codelineno-0-2025">2025</a></span>
<span class="normal"><a href="#__codelineno-0-2026">2026</a></span>
<span class="normal"><a href="#__codelineno-0-2027">2027</a></span>
<span class="normal"><a href="#__codelineno-0-2028">2028</a></span>
<span class="normal"><a href="#__codelineno-0-2029">2029</a></span>
<span class="normal"><a href="#__codelineno-0-2030">2030</a></span>
<span class="normal"><a href="#__codelineno-0-2031">2031</a></span>
<span class="normal"><a href="#__codelineno-0-2032">2032</a></span>
<span class="normal"><a href="#__codelineno-0-2033">2033</a></span>
<span class="normal"><a href="#__codelineno-0-2034">2034</a></span>
<span class="normal"><a href="#__codelineno-0-2035">2035</a></span>
<span class="normal"><a href="#__codelineno-0-2036">2036</a></span>
<span class="normal"><a href="#__codelineno-0-2037">2037</a></span>
<span class="normal"><a href="#__codelineno-0-2038">2038</a></span>
<span class="normal"><a href="#__codelineno-0-2039">2039</a></span>
<span class="normal"><a href="#__codelineno-0-2040">2040</a></span>
<span class="normal"><a href="#__codelineno-0-2041">2041</a></span>
<span class="normal"><a href="#__codelineno-0-2042">2042</a></span>
<span class="normal"><a href="#__codelineno-0-2043">2043</a></span>
<span class="normal"><a href="#__codelineno-0-2044">2044</a></span>
<span class="normal"><a href="#__codelineno-0-2045">2045</a></span>
<span class="normal"><a href="#__codelineno-0-2046">2046</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-2017"><a id="__codelineno-0-2017" name="__codelineno-0-2017"></a><span class="k">def</span><span class="w"> </span><span class="nf">_get_secmaster_summary</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="__span-0-2018"><a id="__codelineno-0-2018" name="__codelineno-0-2018"></a>    <span class="n">db_path</span> <span class="o">=</span> <span class="n">_get_secmaster_path</span><span class="p">()</span>
</span><span id="__span-0-2019"><a id="__codelineno-0-2019" name="__codelineno-0-2019"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">db_path</span><span class="p">):</span>
</span><span id="__span-0-2020"><a id="__codelineno-0-2020" name="__codelineno-0-2020"></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;exists&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
</span><span id="__span-0-2021"><a id="__codelineno-0-2021" name="__codelineno-0-2021"></a>
</span><span id="__span-0-2022"><a id="__codelineno-0-2022" name="__codelineno-0-2022"></a>    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
</span><span id="__span-0-2023"><a id="__codelineno-0-2023" name="__codelineno-0-2023"></a>    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-0-2024"><a id="__codelineno-0-2024" name="__codelineno-0-2024"></a>
</span><span id="__span-0-2025"><a id="__codelineno-0-2025" name="__codelineno-0-2025"></a>    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT key, value FROM meta&quot;</span><span class="p">)</span>
</span><span id="__span-0-2026"><a id="__codelineno-0-2026" name="__codelineno-0-2026"></a>    <span class="n">meta</span> <span class="o">=</span> <span class="p">{</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()}</span>
</span><span id="__span-0-2027"><a id="__codelineno-0-2027" name="__codelineno-0-2027"></a>    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-0-2028"><a id="__codelineno-0-2028" name="__codelineno-0-2028"></a>
</span><span id="__span-0-2029"><a id="__codelineno-0-2029" name="__codelineno-0-2029"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="p">:</span>
</span><span id="__span-0-2030"><a id="__codelineno-0-2030" name="__codelineno-0-2030"></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;exists&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;db_path&quot;</span><span class="p">:</span> <span class="n">db_path</span><span class="p">,</span> <span class="s2">&quot;needs_reindex&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
</span><span id="__span-0-2031"><a id="__codelineno-0-2031" name="__codelineno-0-2031"></a>
</span><span id="__span-0-2032"><a id="__codelineno-0-2032" name="__codelineno-0-2032"></a>    <span class="n">rtypes_str</span> <span class="o">=</span> <span class="n">meta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ohlcv_schemas&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="__span-0-2033"><a id="__codelineno-0-2033" name="__codelineno-0-2033"></a>    <span class="n">rtypes</span> <span class="o">=</span> <span class="p">[</span><span class="n">RTYPE_TO_BAR_PERIOD</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="n">r</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">rtypes_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">r</span><span class="p">]</span>
</span><span id="__span-0-2034"><a id="__codelineno-0-2034" name="__codelineno-0-2034"></a>
</span><span id="__span-0-2035"><a id="__codelineno-0-2035" name="__codelineno-0-2035"></a>    <span class="n">db_size_bytes</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
</span><span id="__span-0-2036"><a id="__codelineno-0-2036" name="__codelineno-0-2036"></a>
</span><span id="__span-0-2037"><a id="__codelineno-0-2037" name="__codelineno-0-2037"></a>    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-0-2038"><a id="__codelineno-0-2038" name="__codelineno-0-2038"></a>        <span class="s2">&quot;exists&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-0-2039"><a id="__codelineno-0-2039" name="__codelineno-0-2039"></a>        <span class="s2">&quot;db_path&quot;</span><span class="p">:</span> <span class="n">db_path</span><span class="p">,</span>
</span><span id="__span-0-2040"><a id="__codelineno-0-2040" name="__codelineno-0-2040"></a>        <span class="s2">&quot;db_size_mb&quot;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">db_size_bytes</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">),</span> <span class="mi">1</span><span class="p">),</span>
</span><span id="__span-0-2041"><a id="__codelineno-0-2041" name="__codelineno-0-2041"></a>        <span class="s2">&quot;symbol_count&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">meta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;symbol_count&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span>
</span><span id="__span-0-2042"><a id="__codelineno-0-2042" name="__codelineno-0-2042"></a>        <span class="s2">&quot;ohlcv_record_count&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">meta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ohlcv_record_count&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span>
</span><span id="__span-0-2043"><a id="__codelineno-0-2043" name="__codelineno-0-2043"></a>        <span class="s2">&quot;min_ts&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">meta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ohlcv_min_ts&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span>
</span><span id="__span-0-2044"><a id="__codelineno-0-2044" name="__codelineno-0-2044"></a>        <span class="s2">&quot;max_ts&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">meta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ohlcv_max_ts&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span>
</span><span id="__span-0-2045"><a id="__codelineno-0-2045" name="__codelineno-0-2045"></a>        <span class="s2">&quot;schemas&quot;</span><span class="p">:</span> <span class="n">rtypes</span><span class="p">,</span>
</span><span id="__span-0-2046"><a id="__codelineno-0-2046" name="__codelineno-0-2046"></a>    <span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app._search_symbol" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_search_symbol</span><span class="p">(</span><span class="n">query</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2049">2049</a></span>
<span class="normal"><a href="#__codelineno-0-2050">2050</a></span>
<span class="normal"><a href="#__codelineno-0-2051">2051</a></span>
<span class="normal"><a href="#__codelineno-0-2052">2052</a></span>
<span class="normal"><a href="#__codelineno-0-2053">2053</a></span>
<span class="normal"><a href="#__codelineno-0-2054">2054</a></span>
<span class="normal"><a href="#__codelineno-0-2055">2055</a></span>
<span class="normal"><a href="#__codelineno-0-2056">2056</a></span>
<span class="normal"><a href="#__codelineno-0-2057">2057</a></span>
<span class="normal"><a href="#__codelineno-0-2058">2058</a></span>
<span class="normal"><a href="#__codelineno-0-2059">2059</a></span>
<span class="normal"><a href="#__codelineno-0-2060">2060</a></span>
<span class="normal"><a href="#__codelineno-0-2061">2061</a></span>
<span class="normal"><a href="#__codelineno-0-2062">2062</a></span>
<span class="normal"><a href="#__codelineno-0-2063">2063</a></span>
<span class="normal"><a href="#__codelineno-0-2064">2064</a></span>
<span class="normal"><a href="#__codelineno-0-2065">2065</a></span>
<span class="normal"><a href="#__codelineno-0-2066">2066</a></span>
<span class="normal"><a href="#__codelineno-0-2067">2067</a></span>
<span class="normal"><a href="#__codelineno-0-2068">2068</a></span>
<span class="normal"><a href="#__codelineno-0-2069">2069</a></span>
<span class="normal"><a href="#__codelineno-0-2070">2070</a></span>
<span class="normal"><a href="#__codelineno-0-2071">2071</a></span>
<span class="normal"><a href="#__codelineno-0-2072">2072</a></span>
<span class="normal"><a href="#__codelineno-0-2073">2073</a></span>
<span class="normal"><a href="#__codelineno-0-2074">2074</a></span>
<span class="normal"><a href="#__codelineno-0-2075">2075</a></span>
<span class="normal"><a href="#__codelineno-0-2076">2076</a></span>
<span class="normal"><a href="#__codelineno-0-2077">2077</a></span>
<span class="normal"><a href="#__codelineno-0-2078">2078</a></span>
<span class="normal"><a href="#__codelineno-0-2079">2079</a></span>
<span class="normal"><a href="#__codelineno-0-2080">2080</a></span>
<span class="normal"><a href="#__codelineno-0-2081">2081</a></span>
<span class="normal"><a href="#__codelineno-0-2082">2082</a></span>
<span class="normal"><a href="#__codelineno-0-2083">2083</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-2049"><a id="__codelineno-0-2049" name="__codelineno-0-2049"></a><span class="k">def</span><span class="w"> </span><span class="nf">_search_symbol</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
</span><span id="__span-0-2050"><a id="__codelineno-0-2050" name="__codelineno-0-2050"></a>    <span class="n">db_path</span> <span class="o">=</span> <span class="n">_get_secmaster_path</span><span class="p">()</span>
</span><span id="__span-0-2051"><a id="__codelineno-0-2051" name="__codelineno-0-2051"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">db_path</span><span class="p">):</span>
</span><span id="__span-0-2052"><a id="__codelineno-0-2052" name="__codelineno-0-2052"></a>        <span class="k">return</span> <span class="p">[]</span>
</span><span id="__span-0-2053"><a id="__codelineno-0-2053" name="__codelineno-0-2053"></a>
</span><span id="__span-0-2054"><a id="__codelineno-0-2054" name="__codelineno-0-2054"></a>    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
</span><span id="__span-0-2055"><a id="__codelineno-0-2055" name="__codelineno-0-2055"></a>    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-0-2056"><a id="__codelineno-0-2056" name="__codelineno-0-2056"></a>
</span><span id="__span-0-2057"><a id="__codelineno-0-2057" name="__codelineno-0-2057"></a>    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
</span><span id="__span-0-2058"><a id="__codelineno-0-2058" name="__codelineno-0-2058"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-2059"><a id="__codelineno-0-2059" name="__codelineno-0-2059"></a><span class="sd">        SELECT symbol, rtype, min_ts, max_ts, record_count</span>
</span><span id="__span-0-2060"><a id="__codelineno-0-2060" name="__codelineno-0-2060"></a><span class="sd">        FROM symbol_coverage</span>
</span><span id="__span-0-2061"><a id="__codelineno-0-2061" name="__codelineno-0-2061"></a><span class="sd">        WHERE symbol LIKE ?</span>
</span><span id="__span-0-2062"><a id="__codelineno-0-2062" name="__codelineno-0-2062"></a><span class="sd">        ORDER BY symbol</span>
</span><span id="__span-0-2063"><a id="__codelineno-0-2063" name="__codelineno-0-2063"></a><span class="sd">        LIMIT 100</span>
</span><span id="__span-0-2064"><a id="__codelineno-0-2064" name="__codelineno-0-2064"></a><span class="sd">    &quot;&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-0-2065"><a id="__codelineno-0-2065" name="__codelineno-0-2065"></a>        <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;%</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">,),</span>
</span><span id="__span-0-2066"><a id="__codelineno-0-2066" name="__codelineno-0-2066"></a>    <span class="p">)</span>
</span><span id="__span-0-2067"><a id="__codelineno-0-2067" name="__codelineno-0-2067"></a>
</span><span id="__span-0-2068"><a id="__codelineno-0-2068" name="__codelineno-0-2068"></a>    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-2069"><a id="__codelineno-0-2069" name="__codelineno-0-2069"></a>    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span>
</span><span id="__span-0-2070"><a id="__codelineno-0-2070" name="__codelineno-0-2070"></a>        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="__span-0-2071"><a id="__codelineno-0-2071" name="__codelineno-0-2071"></a>            <span class="p">{</span>
</span><span id="__span-0-2072"><a id="__codelineno-0-2072" name="__codelineno-0-2072"></a>                <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="__span-0-2073"><a id="__codelineno-0-2073" name="__codelineno-0-2073"></a>                <span class="s2">&quot;min_ts&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
</span><span id="__span-0-2074"><a id="__codelineno-0-2074" name="__codelineno-0-2074"></a>                <span class="s2">&quot;max_ts&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
</span><span id="__span-0-2075"><a id="__codelineno-0-2075" name="__codelineno-0-2075"></a>                <span class="s2">&quot;record_count&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
</span><span id="__span-0-2076"><a id="__codelineno-0-2076" name="__codelineno-0-2076"></a>                <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="__span-0-2077"><a id="__codelineno-0-2077" name="__codelineno-0-2077"></a>                    <span class="n">RTYPE_TO_BAR_PERIOD</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">else</span> <span class="kc">None</span>
</span><span id="__span-0-2078"><a id="__codelineno-0-2078" name="__codelineno-0-2078"></a>                <span class="p">),</span>
</span><span id="__span-0-2079"><a id="__codelineno-0-2079" name="__codelineno-0-2079"></a>            <span class="p">}</span>
</span><span id="__span-0-2080"><a id="__codelineno-0-2080" name="__codelineno-0-2080"></a>        <span class="p">)</span>
</span><span id="__span-0-2081"><a id="__codelineno-0-2081" name="__codelineno-0-2081"></a>
</span><span id="__span-0-2082"><a id="__codelineno-0-2082" name="__codelineno-0-2082"></a>    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-0-2083"><a id="__codelineno-0-2083" name="__codelineno-0-2083"></a>    <span class="k">return</span> <span class="n">results</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.get_secmaster_summary" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_secmaster_summary</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2086">2086</a></span>
<span class="normal"><a href="#__codelineno-0-2087">2087</a></span>
<span class="normal"><a href="#__codelineno-0-2088">2088</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-2086"><a id="__codelineno-0-2086" name="__codelineno-0-2086"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/secmaster/summary&quot;</span><span class="p">)</span>
</span><span id="__span-0-2087"><a id="__codelineno-0-2087" name="__codelineno-0-2087"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_secmaster_summary</span><span class="p">():</span>
</span><span id="__span-0-2088"><a id="__codelineno-0-2088" name="__codelineno-0-2088"></a>    <span class="k">return</span> <span class="n">_get_secmaster_summary</span><span class="p">()</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.search_secmaster" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">search_secmaster</span><span class="p">(</span><span class="n">q</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2091">2091</a></span>
<span class="normal"><a href="#__codelineno-0-2092">2092</a></span>
<span class="normal"><a href="#__codelineno-0-2093">2093</a></span>
<span class="normal"><a href="#__codelineno-0-2094">2094</a></span>
<span class="normal"><a href="#__codelineno-0-2095">2095</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-2091"><a id="__codelineno-0-2091" name="__codelineno-0-2091"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/secmaster/search&quot;</span><span class="p">)</span>
</span><span id="__span-0-2092"><a id="__codelineno-0-2092" name="__codelineno-0-2092"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">search_secmaster</span><span class="p">(</span><span class="n">q</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
</span><span id="__span-0-2093"><a id="__codelineno-0-2093" name="__codelineno-0-2093"></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">q</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="__span-0-2094"><a id="__codelineno-0-2094" name="__codelineno-0-2094"></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;results&quot;</span><span class="p">:</span> <span class="p">[]}</span>
</span><span id="__span-0-2095"><a id="__codelineno-0-2095" name="__codelineno-0-2095"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;results&quot;</span><span class="p">:</span> <span class="n">_search_symbol</span><span class="p">(</span><span class="n">q</span><span class="p">)}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="onesecondtrader.dashboard.app.secmaster_page" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">secmaster_page</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>src/onesecondtrader/dashboard/app.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2223">2223</a></span>
<span class="normal"><a href="#__codelineno-0-2224">2224</a></span>
<span class="normal"><a href="#__codelineno-0-2225">2225</a></span>
<span class="normal"><a href="#__codelineno-0-2226">2226</a></span>
<span class="normal"><a href="#__codelineno-0-2227">2227</a></span>
<span class="normal"><a href="#__codelineno-0-2228">2228</a></span>
<span class="normal"><a href="#__codelineno-0-2229">2229</a></span>
<span class="normal"><a href="#__codelineno-0-2230">2230</a></span>
<span class="normal"><a href="#__codelineno-0-2231">2231</a></span>
<span class="normal"><a href="#__codelineno-0-2232">2232</a></span>
<span class="normal"><a href="#__codelineno-0-2233">2233</a></span>
<span class="normal"><a href="#__codelineno-0-2234">2234</a></span>
<span class="normal"><a href="#__codelineno-0-2235">2235</a></span>
<span class="normal"><a href="#__codelineno-0-2236">2236</a></span>
<span class="normal"><a href="#__codelineno-0-2237">2237</a></span>
<span class="normal"><a href="#__codelineno-0-2238">2238</a></span>
<span class="normal"><a href="#__codelineno-0-2239">2239</a></span>
<span class="normal"><a href="#__codelineno-0-2240">2240</a></span>
<span class="normal"><a href="#__codelineno-0-2241">2241</a></span>
<span class="normal"><a href="#__codelineno-0-2242">2242</a></span>
<span class="normal"><a href="#__codelineno-0-2243">2243</a></span>
<span class="normal"><a href="#__codelineno-0-2244">2244</a></span>
<span class="normal"><a href="#__codelineno-0-2245">2245</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-2223"><a id="__codelineno-0-2223" name="__codelineno-0-2223"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/secmaster&quot;</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">HTMLResponse</span><span class="p">)</span>
</span><span id="__span-0-2224"><a id="__codelineno-0-2224" name="__codelineno-0-2224"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">secmaster_page</span><span class="p">():</span>
</span><span id="__span-0-2225"><a id="__codelineno-0-2225" name="__codelineno-0-2225"></a>    <span class="n">sidebar</span> <span class="o">=</span> <span class="n">SIDEBAR_HTML</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="__span-0-2226"><a id="__codelineno-0-2226" name="__codelineno-0-2226"></a>        <span class="n">runs_active</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">backtest_active</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">secmaster_active</span><span class="o">=</span><span class="s2">&quot;active&quot;</span>
</span><span id="__span-0-2227"><a id="__codelineno-0-2227" name="__codelineno-0-2227"></a>    <span class="p">)</span>
</span><span id="__span-0-2228"><a id="__codelineno-0-2228" name="__codelineno-0-2228"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-0-2229"><a id="__codelineno-0-2229" name="__codelineno-0-2229"></a><span class="s2">    &lt;!DOCTYPE html&gt;</span>
</span><span id="__span-0-2230"><a id="__codelineno-0-2230" name="__codelineno-0-2230"></a><span class="s2">    &lt;html&gt;</span>
</span><span id="__span-0-2231"><a id="__codelineno-0-2231" name="__codelineno-0-2231"></a><span class="s2">    &lt;head&gt;</span>
</span><span id="__span-0-2232"><a id="__codelineno-0-2232" name="__codelineno-0-2232"></a><span class="s2">        &lt;title&gt;Securities Master - OneSecondTrader&lt;/title&gt;</span>
</span><span id="__span-0-2233"><a id="__codelineno-0-2233" name="__codelineno-0-2233"></a><span class="s2">        &lt;style&gt;</span><span class="si">{</span><span class="n">BASE_STYLE</span><span class="si">}{</span><span class="n">SECMASTER_STYLE</span><span class="si">}</span><span class="s2">&lt;/style&gt;</span>
</span><span id="__span-0-2234"><a id="__codelineno-0-2234" name="__codelineno-0-2234"></a><span class="s2">    &lt;/head&gt;</span>
</span><span id="__span-0-2235"><a id="__codelineno-0-2235" name="__codelineno-0-2235"></a><span class="s2">    &lt;body&gt;</span>
</span><span id="__span-0-2236"><a id="__codelineno-0-2236" name="__codelineno-0-2236"></a><span class="s2">        </span><span class="si">{</span><span class="n">sidebar</span><span class="si">}</span>
</span><span id="__span-0-2237"><a id="__codelineno-0-2237" name="__codelineno-0-2237"></a><span class="s2">        &lt;main class=&quot;main-content&quot;&gt;</span>
</span><span id="__span-0-2238"><a id="__codelineno-0-2238" name="__codelineno-0-2238"></a><span class="s2">            &lt;div class=&quot;container&quot; id=&quot;content&quot;&gt;</span>
</span><span id="__span-0-2239"><a id="__codelineno-0-2239" name="__codelineno-0-2239"></a><span class="s2">                &lt;p style=&quot;color: #8b949e;&quot;&gt;Loading...&lt;/p&gt;</span>
</span><span id="__span-0-2240"><a id="__codelineno-0-2240" name="__codelineno-0-2240"></a><span class="s2">            &lt;/div&gt;</span>
</span><span id="__span-0-2241"><a id="__codelineno-0-2241" name="__codelineno-0-2241"></a><span class="s2">        &lt;/main&gt;</span>
</span><span id="__span-0-2242"><a id="__codelineno-0-2242" name="__codelineno-0-2242"></a><span class="s2">        &lt;script&gt;</span><span class="si">{</span><span class="n">SECMASTER_SCRIPT</span><span class="si">}</span><span class="s2">&lt;/script&gt;</span>
</span><span id="__span-0-2243"><a id="__codelineno-0-2243" name="__codelineno-0-2243"></a><span class="s2">    &lt;/body&gt;</span>
</span><span id="__span-0-2244"><a id="__codelineno-0-2244" name="__codelineno-0-2244"></a><span class="s2">    &lt;/html&gt;</span>
</span><span id="__span-0-2245"><a id="__codelineno-0-2245" name="__codelineno-0-2245"></a><span class="s2">    &quot;&quot;&quot;</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright © 2024-2025 Nils Kujath.<br><br>
<div style='text-align: justify; font-size: 0.8em;'>THE INFORMATION PROVIDED IS FOR EDUCATIONAL AND INFORMATIONAL PURPOSES ONLY. IT DOES NOT CONSTITUTE FINANCIAL, INVESTMENT, OR TRADING ADVICE. TRADING INVOLVES SUBSTANTIAL RISK, AND YOU MAY LOSE MORE THAN YOUR INITIAL INVESTMENT.<br><br>
THIS SOFTWARE AND ITS DOCUMENTATION PAGES ARE PROVIDED "AS IS," WITHOUT ANY WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. THE AUTHORS AND COPYRIGHT HOLDERS ASSUME NO LIABILITY FOR ANY CLAIMS, DAMAGES, OR OTHER LIABILITIES ARISING FROM THE USE OR DISTRIBUTION OF THIS SOFTWARE OR DOCUMENTATION PAGES. USE AT YOUR OWN RISK. ONESECONDTRADER AND ITS DOCUMENTATION PAGES ARE LICENSED UNDER THE <a href='https://www.gnu.org/licenses/gpl-3.0.html'>GNU GENERAL PUBLIC LICENSE V3.0 (GPL-3.0)</a>. SEE THE GPL-3.0 FOR DETAILS.</div>
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "content.code.copy", "content.code.select", "content.code.annotate", "content.footnote.tooltips", "content.tabs.linked", "navigation.top"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.50899def.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="../../../javascripts/source_open.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>