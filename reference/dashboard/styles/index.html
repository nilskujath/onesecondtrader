
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://www.onesecondtrader.com/reference/dashboard/styles/">
      
      
        <link rel="prev" href="../roundtrips/">
      
      
        <link rel="next" href="../routers/backtest/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>Styles - OneSecondTrader</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Robot+Serif:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Robot Serif";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#styles" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="OneSecondTrader" class="md-header__button md-logo" aria-label="OneSecondTrader" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19 1-5 5v11l5-4.5zm2 4v13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6c-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1M10 18.41C8.75 18.09 7.5 18 6.5 18c-1.06 0-2.32.19-3.5.5V7.13c.91-.4 2.14-.63 3.5-.63s2.59.23 3.5.63z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OneSecondTrader
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Styles
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 2c3.87 0 7 3.13 7 7 0 2.38-1.19 4.47-3 5.74V17c0 .55-.45 1-1 1H6c-.55 0-1-.45-1-1v-2.26C3.19 13.47 2 11.38 2 9c0-3.87 3.13-7 7-7M6 21v-1h6v1c0 .55-.45 1-1 1H7c-.55 0-1-.45-1-1M9 4C6.24 4 4 6.24 4 9c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58 0-2.76-2.24-5-5-5m10 9h-2l-3.2 9h1.9l.7-2h3.2l.7 2h1.9zm-2.15 5.65L18 15l1.15 3.65z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.5 2c-1.79 1.15-3 3.18-3 5.5s1.21 4.35 3.03 5.5C4.46 13 2 10.54 2 7.5A5.5 5.5 0 0 1 7.5 2m11.57 1.5 1.43 1.43L4.93 20.5 3.5 19.07zm-6.18 2.43L11.41 5 9.97 6l.42-1.7L9 3.24l1.75-.12.58-1.65L12 3.1l1.73.03-1.35 1.13zm-3.3 3.61-1.16-.73-1.12.78.34-1.32-1.09-.83 1.36-.09.45-1.29.51 1.27 1.36.03-1.05.87zM19 13.5a5.5 5.5 0 0 1-5.5 5.5c-1.22 0-2.35-.4-3.26-1.07l7.69-7.69c.67.91 1.07 2.04 1.07 3.26m-4.4 6.58 2.77-1.15-.24 3.35zm4.33-2.7 1.15-2.77 2.2 2.54zm1.15-4.96-1.14-2.78 3.34.24zM9.63 18.93l2.77 1.15-2.53 2.19z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.5 2c-1.79 1.15-3 3.18-3 5.5s1.21 4.35 3.03 5.5C4.46 13 2 10.54 2 7.5A5.5 5.5 0 0 1 7.5 2m11.57 1.5 1.43 1.43L4.93 20.5 3.5 19.07zm-6.18 2.43L11.41 5 9.97 6l.42-1.7L9 3.24l1.75-.12.58-1.65L12 3.1l1.73.03-1.35 1.13zm-3.3 3.61-1.16-.73-1.12.78.34-1.32-1.09-.83 1.36-.09.45-1.29.51 1.27 1.36.03-1.05.87zM19 13.5a5.5 5.5 0 0 1-5.5 5.5c-1.22 0-2.35-.4-3.26-1.07l7.69-7.69c.67.91 1.07 2.04 1.07 3.26m-4.4 6.58 2.77-1.15-.24 3.35zm4.33-2.7 1.15-2.77 2.2 2.54zm1.15-4.96-1.14-2.78 3.34.24zM9.63 18.93l2.77 1.15-2.53 2.19z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/NilsKujath/onesecondtrader" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    nilskujath/onesecondtrader
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../tutorials/getting_started/" class="md-tabs__link">
          
  
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../explanation/overview/" class="md-tabs__link">
          
  
  
  Explanation

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../overview/" class="md-tabs__link">
          
  
  
  Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="OneSecondTrader" class="md-nav__button md-logo" aria-label="OneSecondTrader" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19 1-5 5v11l5-4.5zm2 4v13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6c-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1M10 18.41C8.75 18.09 7.5 18 6.5 18c-1.06 0-2.32.19-3.5.5V7.13c.91-.4 2.14-.63 3.5-.63s2.59.23 3.5.63z"/></svg>

    </a>
    OneSecondTrader
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/NilsKujath/onesecondtrader" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    nilskujath/onesecondtrader
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/getting_started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Explanation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Explanation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../explanation/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../explanation/event_driven_architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Event-Driven Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../explanation/indicator_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Indicator Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../explanation/strategy_lifecycle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Strategy Lifecycle
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../explanation/broker_and_datafeed/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Broker and Datafeed
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../explanation/orchestration_and_recording/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Orchestration and Recording
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Brokers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Brokers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../brokers/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../brokers/simulated/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Simulated
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" checked>
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Dashboard
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Dashboard
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../app/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    App
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../backtest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Backtest
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../charting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Charting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cli
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../db/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Db
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../layout/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Layout
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pages/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pages
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../registry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Registry
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../roundtrips/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Roundtrips
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Styles
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Styles
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.styles.BASE_CSS" class="md-nav__link">
    <span class="md-ellipsis">
      BASE_CSS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.styles.BACKTEST_CSS" class="md-nav__link">
    <span class="md-ellipsis">
      BACKTEST_CSS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.styles.BACKTEST_JS" class="md-nav__link">
    <span class="md-ellipsis">
      BACKTEST_JS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.styles.PERFORMANCE_CSS" class="md-nav__link">
    <span class="md-ellipsis">
      PERFORMANCE_CSS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.styles.PERFORMANCE_JS" class="md-nav__link">
    <span class="md-ellipsis">
      PERFORMANCE_JS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.styles.CHART_CSS" class="md-nav__link">
    <span class="md-ellipsis">
      CHART_CSS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.styles.CHART_JS" class="md-nav__link">
    <span class="md-ellipsis">
      CHART_JS
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_11" >
        
          
          <label class="md-nav__link" for="__nav_4_3_11" id="__nav_4_3_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Routers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_11">
            <span class="md-nav__icon md-icon"></span>
            Routers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../routers/backtest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Backtest
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../routers/presets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Presets
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../routers/runs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Runs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../routers/secmaster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Secmaster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../routers/strategies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Strategies
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Datafeeds
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Datafeeds
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datafeeds/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datafeeds/simulated/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Simulated
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Events
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Events
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../events/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5_2" >
        
          
          <label class="md-nav__link" for="__nav_4_5_2" id="__nav_4_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Market
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5_2">
            <span class="md-nav__icon md-icon"></span>
            Market
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../events/market/bar_processed/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bar Processed
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../events/market/bar_received/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bar Received
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5_3" >
        
          
          <label class="md-nav__link" for="__nav_4_5_3" id="__nav_4_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Orders
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5_3">
            <span class="md-nav__icon md-icon"></span>
            Orders
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../events/orders/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../events/orders/expirations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Expirations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../events/orders/fills/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fills
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5_4" >
        
          
          <label class="md-nav__link" for="__nav_4_5_4" id="__nav_4_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Requests
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5_4">
            <span class="md-nav__icon md-icon"></span>
            Requests
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../events/requests/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../events/requests/order_cancellation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Order Cancellation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../events/requests/order_modification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Order Modification
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../events/requests/order_submission/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Order Submission
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5_5" id="__nav_4_5_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Responses
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5_5">
            <span class="md-nav__icon md-icon"></span>
            Responses
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../events/responses/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../events/responses/cancellations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cancellations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../events/responses/modifications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modifications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../events/responses/orders/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Orders
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Indicators
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            Indicators
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../indicators/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../indicators/market_fields/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Market Fields
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../indicators/period_extreme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Period Extreme
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6_4" >
        
          
          <label class="md-nav__link" for="__nav_4_6_4" id="__nav_4_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Averages
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6_4">
            <span class="md-nav__icon md-icon"></span>
            Averages
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../indicators/averages/simple_moving_average/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Simple Moving Average
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6_5" >
        
          
          <label class="md-nav__link" for="__nav_4_6_5" id="__nav_4_6_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Bollinger
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6_5">
            <span class="md-nav__icon md-icon"></span>
            Bollinger
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../indicators/bollinger/bollinger_bandwidth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bollinger Bandwidth
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../indicators/bollinger/bollinger_lower/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bollinger Lower
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../indicators/bollinger/bollinger_upper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bollinger Upper
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6_6" id="__nav_4_6_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Oscillators
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_6_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6_6">
            <span class="md-nav__icon md-icon"></span>
            Oscillators
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../indicators/oscillators/detrend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Detrend
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../indicators/oscillators/roc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Roc
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6_7" >
        
          
          <label class="md-nav__link" for="__nav_4_6_7" id="__nav_4_6_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Wilders
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_6_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6_7">
            <span class="md-nav__icon md-icon"></span>
            Wilders
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../indicators/wilders/adx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Adx
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../indicators/wilders/atr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Atr
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../indicators/wilders/minus_di/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Minus Di
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../indicators/wilders/parabolic_sar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Parabolic Sar
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../indicators/wilders/plus_di/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plus Di
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../indicators/wilders/rsi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rsi
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" >
        
          
          <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Messaging
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            Messaging
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../messaging/eventbus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Eventbus
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../messaging/subscriber/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Subscriber
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
        
          
          <label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Models
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            Models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/action_types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Action Types
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/bar_fields/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bar Fields
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/bar_period/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bar Period
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/chart_type/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chart Type
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/extreme_type/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extreme Type
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/order_types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Order Types
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/plot_color/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plot Color
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/plot_style/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plot Style
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/rejection_reasons/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rejection Reasons
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/trade_sides/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Trade Sides
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_9" >
        
          
          <label class="md-nav__link" for="__nav_4_9" id="__nav_4_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Orchestrator
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_9">
            <span class="md-nav__icon md-icon"></span>
            Orchestrator
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../orchestrator/runs_schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Runs Schema
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../orchestrator/orchestrator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Orchestrator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../orchestrator/run_recorder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Run Recorder
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_10" >
        
          
          <label class="md-nav__link" for="__nav_4_10" id="__nav_4_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Secmaster
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_10">
            <span class="md-nav__icon md-icon"></span>
            Secmaster
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_10_1" >
        
          
          <label class="md-nav__link" for="__nav_4_10_1" id="__nav_4_10_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Schema Versions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_10_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_10_1">
            <span class="md-nav__icon md-icon"></span>
            Schema Versions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../secmaster/schema_versions/secmaster_schema_v1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Secmaster Schema V1
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../secmaster/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_11" >
        
          
          <label class="md-nav__link" for="__nav_4_11" id="__nav_4_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Strategies
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_11">
            <span class="md-nav__icon md-icon"></span>
            Strategies
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../strategies/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../strategies/examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.styles.BASE_CSS" class="md-nav__link">
    <span class="md-ellipsis">
      BASE_CSS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.styles.BACKTEST_CSS" class="md-nav__link">
    <span class="md-ellipsis">
      BACKTEST_CSS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.styles.BACKTEST_JS" class="md-nav__link">
    <span class="md-ellipsis">
      BACKTEST_JS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.styles.PERFORMANCE_CSS" class="md-nav__link">
    <span class="md-ellipsis">
      PERFORMANCE_CSS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.styles.PERFORMANCE_JS" class="md-nav__link">
    <span class="md-ellipsis">
      PERFORMANCE_JS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.styles.CHART_CSS" class="md-nav__link">
    <span class="md-ellipsis">
      CHART_CSS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onesecondtrader.dashboard.styles.CHART_JS" class="md-nav__link">
    <span class="md-ellipsis">
      CHART_JS
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="styles">Styles</h1>


<div class="doc doc-object doc-module">




    <div class="doc doc-contents first">

        <p>CSS stylesheets and JavaScript for the dashboard UI.</p>
<p>This module contains embedded CSS and JavaScript as Python string constants. The styles
implement a dark-themed interface with a fixed sidebar navigation and responsive content
areas.</p>


<details class="constants" open>
  <summary>Constants</summary>
  <p>BASE_CSS: Global styles for layout, sidebar, cards, forms, and common elements.
BACKTEST_CSS: Styles specific to the backtest configuration page.
BACKTEST_JS: JavaScript for backtest page interactivity including:
    - Strategy and parameter loading
    - Publisher/dataset/symbol cascading selection
    - Symbol preset management
    - Date range validation
    - Backtest execution and run history display</p>
</details>








  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.styles.BASE_CSS" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">BASE_CSS</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">* { margin: 0; padding: 0; box-sizing: border-box; }</span><span class="se">\n</span><span class="s1">body {</span><span class="se">\n</span><span class="s1">    font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, sans-serif;</span><span class="se">\n</span><span class="s1">    background: #0d1117;</span><span class="se">\n</span><span class="s1">    color: #e6edf3;</span><span class="se">\n</span><span class="s1">    min-height: 100vh;</span><span class="se">\n</span><span class="s1">    display: flex;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.sidebar {</span><span class="se">\n</span><span class="s1">    width: 220px;</span><span class="se">\n</span><span class="s1">    background: #161b22;</span><span class="se">\n</span><span class="s1">    border-right: 1px solid #30363d;</span><span class="se">\n</span><span class="s1">    min-height: 100vh;</span><span class="se">\n</span><span class="s1">    position: fixed;</span><span class="se">\n</span><span class="s1">    left: 0;</span><span class="se">\n</span><span class="s1">    top: 0;</span><span class="se">\n</span><span class="s1">    display: flex;</span><span class="se">\n</span><span class="s1">    flex-direction: column;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.sidebar-header {</span><span class="se">\n</span><span class="s1">    padding: 20px 16px;</span><span class="se">\n</span><span class="s1">    border-bottom: 1px solid #30363d;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.sidebar-header h1 {</span><span class="se">\n</span><span class="s1">    font-size: 16px;</span><span class="se">\n</span><span class="s1">    font-weight: 600;</span><span class="se">\n</span><span class="s1">    color: #e6edf3;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.sidebar-nav {</span><span class="se">\n</span><span class="s1">    padding: 12px 8px;</span><span class="se">\n</span><span class="s1">    flex: 1;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.sidebar-nav a {</span><span class="se">\n</span><span class="s1">    display: flex;</span><span class="se">\n</span><span class="s1">    align-items: center;</span><span class="se">\n</span><span class="s1">    gap: 10px;</span><span class="se">\n</span><span class="s1">    padding: 10px 12px;</span><span class="se">\n</span><span class="s1">    color: #8b949e;</span><span class="se">\n</span><span class="s1">    text-decoration: none;</span><span class="se">\n</span><span class="s1">    font-size: 14px;</span><span class="se">\n</span><span class="s1">    border-radius: 6px;</span><span class="se">\n</span><span class="s1">    margin-bottom: 2px;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.sidebar-nav a:hover {</span><span class="se">\n</span><span class="s1">    background: #21262d;</span><span class="se">\n</span><span class="s1">    color: #e6edf3;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.sidebar-nav a.active {</span><span class="se">\n</span><span class="s1">    background: #21262d;</span><span class="se">\n</span><span class="s1">    color: #e6edf3;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.sidebar-nav svg {</span><span class="se">\n</span><span class="s1">    width: 16px;</span><span class="se">\n</span><span class="s1">    height: 16px;</span><span class="se">\n</span><span class="s1">    flex-shrink: 0;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.main-content {</span><span class="se">\n</span><span class="s1">    margin-left: 220px;</span><span class="se">\n</span><span class="s1">    flex: 1;</span><span class="se">\n</span><span class="s1">    min-height: 100vh;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.container {</span><span class="se">\n</span><span class="s1">    max-width: 1200px;</span><span class="se">\n</span><span class="s1">    margin: 0 auto;</span><span class="se">\n</span><span class="s1">    padding: 32px 24px;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.card {</span><span class="se">\n</span><span class="s1">    background: #161b22;</span><span class="se">\n</span><span class="s1">    border: 1px solid #30363d;</span><span class="se">\n</span><span class="s1">    border-radius: 8px;</span><span class="se">\n</span><span class="s1">    padding: 24px;</span><span class="se">\n</span><span class="s1">    margin-bottom: 16px;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.card h2 {</span><span class="se">\n</span><span class="s1">    font-size: 16px;</span><span class="se">\n</span><span class="s1">    font-weight: 600;</span><span class="se">\n</span><span class="s1">    margin-bottom: 16px;</span><span class="se">\n</span><span class="s1">    color: #e6edf3;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.empty-state {</span><span class="se">\n</span><span class="s1">    text-align: center;</span><span class="se">\n</span><span class="s1">    padding: 48px;</span><span class="se">\n</span><span class="s1">    color: #8b949e;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.empty-state p {</span><span class="se">\n</span><span class="s1">    margin-top: 8px;</span><span class="se">\n</span><span class="s1">    font-size: 14px;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.styles.BACKTEST_CSS" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">BACKTEST_CSS</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">.container { max-width: none; height: 100vh; padding: 24px; display: flex; flex-direction: column; box-sizing: border-box; }</span><span class="se">\n</span><span class="s1">.backtest-layout { display: flex; gap: 24px; flex: 1; min-height: 0; }</span><span class="se">\n</span><span class="s1">.backtest-left { flex: 1; min-width: 0; display: flex; flex-direction: column; }</span><span class="se">\n</span><span class="s1">.backtest-right { flex: 1; min-width: 0; display: flex; flex-direction: column; }</span><span class="se">\n</span><span class="s1">.backtest-left .card, .backtest-right .card { flex: 1; display: flex; flex-direction: column; margin-bottom: 0; overflow: hidden; }</span><span class="se">\n</span><span class="s1">.backtest-right .runs-list { flex: 1; overflow-y: auto; }</span><span class="se">\n</span><span class="s1">.form-group { margin-bottom: 16px; }</span><span class="se">\n</span><span class="s1">.form-group label { display: block; margin-bottom: 6px; font-size: 14px; color: #8b949e; }</span><span class="se">\n</span><span class="s1">.form-group select, .form-group input {</span><span class="se">\n</span><span class="s1">    width: 100%; padding: 8px 12px; background: #0d1117; border: 1px solid #30363d;</span><span class="se">\n</span><span class="s1">    border-radius: 6px; color: #e6edf3; font-size: 14px;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n</span><span class="s1">.form-group select:focus, .form-group input:focus { outline: none; border-color: #58a6ff; }</span><span class="se">\n</span><span class="s1">.params-container { margin-top: 12px; padding: 12px; background: #0d1117; border-radius: 6px; }</span><span class="se">\n</span><span class="s1">.param-row { display: flex; gap: 12px; margin-bottom: 8px; align-items: center; }</span><span class="se">\n</span><span class="s1">.param-row label { min-width: 120px; font-size: 13px; }</span><span class="se">\n</span><span class="s1">.param-row input, .param-row select { flex: 1; }</span><span class="se">\n</span><span class="s1">.btn { padding: 10px 20px; background: #238636; border: none; border-radius: 6px;</span><span class="se">\n</span><span class="s1">    color: #fff; font-size: 14px; cursor: pointer; width: 100%; }</span><span class="se">\n</span><span class="s1">.btn:hover { background: #2ea043; }</span><span class="se">\n</span><span class="s1">.btn:disabled { background: #30363d; cursor: not-allowed; }</span><span class="se">\n</span><span class="s1">.date-row { display: flex; gap: 12px; }</span><span class="se">\n</span><span class="s1">.date-row .form-group { flex: 1; margin-bottom: 0; }</span><span class="se">\n</span><span class="s1">.symbol-section { background: #0d1117; border-radius: 6px; padding: 12px; }</span><span class="se">\n</span><span class="s1">.publisher-row { display: flex; gap: 8px; margin-bottom: 12px; }</span><span class="se">\n</span><span class="s1">.publisher-row select { flex: 1; }</span><span class="se">\n</span><span class="s1">.preset-row { display: flex; gap: 8px; align-items: center; background: #0d1117; border-radius: 6px; padding: 8px 12px; }</span><span class="se">\n</span><span class="s1">.preset-row select { flex: 1; }</span><span class="se">\n</span><span class="s1">.preset-row input { flex: 1; }</span><span class="se">\n</span><span class="s1">.preset-row .btn-sm { padding: 6px 12px; font-size: 12px; width: auto; cursor: not-allowed; }</span><span class="se">\n</span><span class="s1">.preset-row .btn-secondary { background: #30363d; }</span><span class="se">\n</span><span class="s1">.preset-row .btn-secondary.active { background: #238636; cursor: pointer; }</span><span class="se">\n</span><span class="s1">.preset-row .btn-secondary.active:hover { background: #2ea043; }</span><span class="se">\n</span><span class="s1">.preset-row .btn-danger { background: #30363d; }</span><span class="se">\n</span><span class="s1">.preset-row .btn-danger.active { background: #da3633; cursor: pointer; }</span><span class="se">\n</span><span class="s1">.preset-row .btn-danger.active:hover { background: #f85149; }</span><span class="se">\n</span><span class="s1">.search-row { display: flex; gap: 8px; margin-bottom: 8px; }</span><span class="se">\n</span><span class="s1">.search-row input { flex: 1; }</span><span class="se">\n</span><span class="s1">.search-results { max-height: 150px; overflow-y: auto; border: 1px solid #30363d; border-radius: 4px; margin-bottom: 12px; }</span><span class="se">\n</span><span class="s1">.search-results:empty { display: none; }</span><span class="se">\n</span><span class="s1">.search-result { display: flex; justify-content: space-between; align-items: center; padding: 6px 10px; border-bottom: 1px solid #21262d; cursor: pointer; }</span><span class="se">\n</span><span class="s1">.search-result:last-child { border-bottom: none; }</span><span class="se">\n</span><span class="s1">.search-result:hover { background: #161b22; }</span><span class="se">\n</span><span class="s1">.search-result .symbol { font-family: monospace; }</span><span class="se">\n</span><span class="s1">.selected-symbols { display: flex; flex-wrap: wrap; gap: 6px; min-height: 32px; max-height: 150px; overflow-y: auto; }</span><span class="se">\n</span><span class="s1">.selected-tag { display: inline-flex; align-items: center; gap: 4px; background: #238636; color: #fff; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-family: monospace; }</span><span class="se">\n</span><span class="s1">.selected-tag .remove { cursor: pointer; opacity: 0.7; }</span><span class="se">\n</span><span class="s1">.selected-tag .remove:hover { opacity: 1; }</span><span class="se">\n</span><span class="s1">.selected-label { font-size: 13px; color: #8b949e; margin-bottom: 6px; }</span><span class="se">\n</span><span class="s1">.section-header { font-size: 14px; color: #8b949e; margin-bottom: 6px; margin-top: 8px; }</span><span class="se">\n</span><span class="s1">.runs-list { display: flex; flex-direction: column; gap: 12px; }</span><span class="se">\n</span><span class="s1">.run-item { background: #0d1117; border: 1px solid #30363d; border-radius: 6px; padding: 12px; display: flex; gap: 12px; align-items: flex-start; }</span><span class="se">\n</span><span class="s1">.run-item.selected { border-color: #58a6ff; }</span><span class="se">\n</span><span class="s1">.run-checkbox { flex-shrink: 0; margin-top: 2px; width: 16px; height: 16px; accent-color: #58a6ff; cursor: pointer; }</span><span class="se">\n</span><span class="s1">.run-content { flex: 1; min-width: 0; }</span><span class="se">\n</span><span class="s1">.run-content.clickable { cursor: pointer; }</span><span class="se">\n</span><span class="s1">.run-content.clickable:hover { opacity: 0.8; }</span><span class="se">\n</span><span class="s1">.run-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }</span><span class="se">\n</span><span class="s1">.run-name { font-family: monospace; font-size: 13px; color: #e6edf3; }</span><span class="se">\n</span><span class="s1">.run-id { color: #8b949e; font-size: 11px; margin-left: 6px; }</span><span class="se">\n</span><span class="s1">.run-status { font-size: 12px; font-weight: 500; padding: 2px 8px; border-radius: 10px; }</span><span class="se">\n</span><span class="s1">.run-status.running { background: #9e6a03; color: #fff; }</span><span class="se">\n</span><span class="s1">.run-status.completed { background: #238636; color: #fff; }</span><span class="se">\n</span><span class="s1">.run-status.failed { background: #da3633; color: #fff; }</span><span class="se">\n</span><span class="s1">.run-status.cancelled { background: #30363d; color: #8b949e; }</span><span class="se">\n</span><span class="s1">.run-status.error { background: #da3633; color: #fff; }</span><span class="se">\n</span><span class="s1">.run-meta { font-size: 12px; color: #8b949e; }</span><span class="se">\n</span><span class="s1">.run-meta.with-progress { margin-bottom: 8px; }</span><span class="se">\n</span><span class="s1">.progress-bar { height: 6px; background: #30363d; border-radius: 3px; overflow: hidden; }</span><span class="se">\n</span><span class="s1">.progress-fill { height: 100%; background: #58a6ff; transition: width 0.3s ease; }</span><span class="se">\n</span><span class="s1">.progress-fill.completed { background: #238636; }</span><span class="se">\n</span><span class="s1">.progress-fill.error { background: #da3633; }</span><span class="se">\n</span><span class="s1">.empty-runs { text-align: center; padding: 48px 24px; color: #8b949e; }</span><span class="se">\n</span><span class="s1">.empty-runs p { font-size: 14px; }</span><span class="se">\n</span><span class="s1">.runs-toolbar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; padding-bottom: 12px; border-bottom: 1px solid #30363d; }</span><span class="se">\n</span><span class="s1">.runs-toolbar .select-all-label { display: flex; align-items: center; gap: 8px; font-size: 13px; color: #8b949e; cursor: pointer; }</span><span class="se">\n</span><span class="s1">.runs-toolbar .select-all-label input { width: 16px; height: 16px; accent-color: #58a6ff; cursor: pointer; }</span><span class="se">\n</span><span class="s1">.btn-delete { padding: 6px 12px; background: #da3633; border: none; border-radius: 6px; color: #fff; font-size: 13px; cursor: pointer; }</span><span class="se">\n</span><span class="s1">.btn-delete:hover { background: #f85149; }</span><span class="se">\n</span><span class="s1">.btn-delete:disabled { background: #30363d; cursor: not-allowed; color: #8b949e; }</span><span class="se">\n</span><span class="s1">&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.styles.BACKTEST_JS" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">BACKTEST_JS</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">let strategyParams = [];</span><span class="se">\n</span><span class="s1">let coverageData = [];</span><span class="se">\n</span><span class="s1">let availableRtypes = [];</span><span class="se">\n</span><span class="s1">let symbolsForRtype = </span><span class="si">{}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">let symbolCoverageForRtype = </span><span class="si">{}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">let selectedSymbols = [];</span><span class="se">\n</span><span class="s1">let presets = [];</span><span class="se">\n</span><span class="s1">let globalMinDate = null;</span><span class="se">\n</span><span class="s1">let globalMaxDate = null;</span><span class="se">\n</span><span class="s1">let dbRuns = [];</span><span class="se">\n</span><span class="s1">let activeRuns = </span><span class="si">{}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">let selectedRunIds = new Set();</span><span class="se">\n</span><span class="s1">let publishers = [];</span><span class="se">\n</span><span class="s1">let datasets = [];</span><span class="se">\n</span><span class="s1">let selectedPublisherId = null;</span><span class="se">\n</span><span class="s1">let isLoadingPreset = false;</span><span class="se">\n\n</span><span class="s1">const RTYPE_LABELS = {32: </span><span class="se">\&#39;</span><span class="s1">Second</span><span class="se">\&#39;</span><span class="s1">, 33: </span><span class="se">\&#39;</span><span class="s1">Minute</span><span class="se">\&#39;</span><span class="s1">, 34: </span><span class="se">\&#39;</span><span class="s1">Hour</span><span class="se">\&#39;</span><span class="s1">, 35: </span><span class="se">\&#39;</span><span class="s1">Day</span><span class="se">\&#39;</span><span class="s1">};</span><span class="se">\n\n</span><span class="s1">function capitalize(str) {</span><span class="se">\n</span><span class="s1">    return str.charAt(0).toUpperCase() + str.slice(1);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function loadPublishers() {</span><span class="se">\n</span><span class="s1">    const rtype = getSelectedRtype();</span><span class="se">\n</span><span class="s1">    const url = rtype ? `/api/secmaster/publishers?rtype=$</span><span class="si">{rtype}</span><span class="s1">` : </span><span class="se">\&#39;</span><span class="s1">/api/secmaster/publishers</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    const res = await fetch(url);</span><span class="se">\n</span><span class="s1">    const data = await res.json();</span><span class="se">\n</span><span class="s1">    publishers = data.publishers || [];</span><span class="se">\n</span><span class="s1">    const sel = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">publisher-name</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    sel.innerHTML = </span><span class="se">\&#39;</span><span class="s1">&lt;option value=&quot;&quot;&gt;-- Select Publisher --&lt;/option&gt;</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    publishers.forEach(p =&gt; sel.innerHTML += `&lt;option value=&quot;$</span><span class="si">{p}</span><span class="s1">&quot;&gt;${capitalize(p)}&lt;/option&gt;`);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function onPublisherChange() {</span><span class="se">\n</span><span class="s1">    if (isLoadingPreset) return;</span><span class="se">\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">preset-select</span><span class="se">\&#39;</span><span class="s1">).value = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    const name = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">publisher-name</span><span class="se">\&#39;</span><span class="s1">).value;</span><span class="se">\n</span><span class="s1">    const rtype = getSelectedRtype();</span><span class="se">\n</span><span class="s1">    const datasetSel = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">publisher-dataset</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    datasetSel.innerHTML = </span><span class="se">\&#39;</span><span class="s1">&lt;option value=&quot;&quot;&gt;-- Select Dataset --&lt;/option&gt;</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    datasets = [];</span><span class="se">\n</span><span class="s1">    selectedPublisherId = null;</span><span class="se">\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">symbol-selection</span><span class="se">\&#39;</span><span class="s1">).style.display = </span><span class="se">\&#39;</span><span class="s1">none</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    selectedSymbols = [];</span><span class="se">\n</span><span class="s1">    renderSelectedSymbols();</span><span class="se">\n</span><span class="s1">    updateDateRange();</span><span class="se">\n</span><span class="s1">    if (!name) return;</span><span class="se">\n</span><span class="s1">    const url = rtype</span><span class="se">\n</span><span class="s1">        ? `/api/secmaster/publishers/${encodeURIComponent(name)}/datasets?rtype=$</span><span class="si">{rtype}</span><span class="s1">`</span><span class="se">\n</span><span class="s1">        : `/api/secmaster/publishers/${encodeURIComponent(name)}/datasets`;</span><span class="se">\n</span><span class="s1">    const res = await fetch(url);</span><span class="se">\n</span><span class="s1">    const data = await res.json();</span><span class="se">\n</span><span class="s1">    datasets = data.datasets || [];</span><span class="se">\n</span><span class="s1">    datasets.forEach(d =&gt; datasetSel.innerHTML += `&lt;option value=&quot;$</span><span class="si">{d.publisher_id}</span><span class="s1">&quot;&gt;$</span><span class="si">{d.dataset}</span><span class="s1">&lt;/option&gt;`);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function onDatasetChange() {</span><span class="se">\n</span><span class="s1">    if (isLoadingPreset) return;</span><span class="se">\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">preset-select</span><span class="se">\&#39;</span><span class="s1">).value = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    const pubId = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">publisher-dataset</span><span class="se">\&#39;</span><span class="s1">).value;</span><span class="se">\n</span><span class="s1">    selectedPublisherId = pubId ? parseInt(pubId) : null;</span><span class="se">\n</span><span class="s1">    selectedSymbols = [];</span><span class="se">\n</span><span class="s1">    renderSelectedSymbols();</span><span class="se">\n</span><span class="s1">    updateDateRange();</span><span class="se">\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">symbol-search</span><span class="se">\&#39;</span><span class="s1">).value = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">search-results</span><span class="se">\&#39;</span><span class="s1">).innerHTML = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    if (selectedPublisherId) {</span><span class="se">\n</span><span class="s1">        await loadCoverageForPublisher(selectedPublisherId);</span><span class="se">\n</span><span class="s1">        document.getElementById(</span><span class="se">\&#39;</span><span class="s1">symbol-selection</span><span class="se">\&#39;</span><span class="s1">).style.display = </span><span class="se">\&#39;</span><span class="s1">block</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    } else {</span><span class="se">\n</span><span class="s1">        document.getElementById(</span><span class="se">\&#39;</span><span class="s1">symbol-selection</span><span class="se">\&#39;</span><span class="s1">).style.display = </span><span class="se">\&#39;</span><span class="s1">none</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function loadCoverageForPublisher(publisherId) {</span><span class="se">\n</span><span class="s1">    const rtype = getSelectedRtype();</span><span class="se">\n</span><span class="s1">    const url = `/api/secmaster/symbols_coverage?publisher_id=$</span><span class="si">{publisherId}</span><span class="s1">&amp;rtype=$</span><span class="si">{rtype}</span><span class="s1">`;</span><span class="se">\n</span><span class="s1">    const res = await fetch(url);</span><span class="se">\n</span><span class="s1">    const data = await res.json();</span><span class="se">\n</span><span class="s1">    coverageData = data.symbols || [];</span><span class="se">\n</span><span class="s1">    symbolsForRtype = </span><span class="si">{}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    symbolCoverageForRtype = </span><span class="si">{}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    coverageData.forEach(row =&gt; {</span><span class="se">\n</span><span class="s1">        if (!symbolsForRtype[row.rtype]) {</span><span class="se">\n</span><span class="s1">            symbolsForRtype[row.rtype] = [];</span><span class="se">\n</span><span class="s1">            symbolCoverageForRtype[row.rtype] = </span><span class="si">{}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        }</span><span class="se">\n</span><span class="s1">        symbolsForRtype[row.rtype].push(row.symbol);</span><span class="se">\n</span><span class="s1">        symbolCoverageForRtype[row.rtype][row.symbol] = {min_ts: row.min_ts, max_ts: row.max_ts};</span><span class="se">\n</span><span class="s1">    });</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function loadPresets() {</span><span class="se">\n</span><span class="s1">    const res = await fetch(</span><span class="se">\&#39;</span><span class="s1">/api/presets</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const data = await res.json();</span><span class="se">\n</span><span class="s1">    presets = data.presets || [];</span><span class="se">\n</span><span class="s1">    renderPresetDropdown();</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function renderPresetDropdown() {</span><span class="se">\n</span><span class="s1">    const sel = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">preset-select</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    sel.innerHTML = </span><span class="se">\&#39;</span><span class="s1">&lt;option value=&quot;&quot;&gt;-- Select Preset --&lt;/option&gt;</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    presets.forEach(p =&gt; {</span><span class="se">\n</span><span class="s1">        sel.innerHTML += `&lt;option value=&quot;$</span><span class="si">{p.name}</span><span class="s1">&quot;&gt;$</span><span class="si">{p.name}</span><span class="s1">&lt;/option&gt;`;</span><span class="se">\n</span><span class="s1">    });</span><span class="se">\n</span><span class="s1">    updateButtonStates();</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function loadPreset() {</span><span class="se">\n</span><span class="s1">    const name = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">preset-select</span><span class="se">\&#39;</span><span class="s1">).value;</span><span class="se">\n</span><span class="s1">    updateButtonStates();</span><span class="se">\n</span><span class="s1">    if (!name) return;</span><span class="se">\n</span><span class="s1">    const preset = presets.find(p =&gt; p.name === name);</span><span class="se">\n</span><span class="s1">    if (!preset) return;</span><span class="se">\n</span><span class="s1">    await applyPreset(preset);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function applyPreset(preset) {</span><span class="se">\n</span><span class="s1">    isLoadingPreset = true;</span><span class="se">\n</span><span class="s1">    try {</span><span class="se">\n</span><span class="s1">        // 1. Set bar period and show symbols section</span><span class="se">\n</span><span class="s1">        const barPeriodEl = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">bar-period</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">        barPeriodEl.value = String(preset.rtype);</span><span class="se">\n</span><span class="s1">        const section = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">symbols-section</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">        section.style.display = </span><span class="se">\&#39;</span><span class="s1">block</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n\n</span><span class="s1">        // Load publishers for this rtype</span><span class="se">\n</span><span class="s1">        await loadPublishers();</span><span class="se">\n\n</span><span class="s1">        // 2. Set publisher and load datasets</span><span class="se">\n</span><span class="s1">        const pubNameEl = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">publisher-name</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">        pubNameEl.value = preset.publisher_name;</span><span class="se">\n\n</span><span class="s1">        const rtype = preset.rtype;</span><span class="se">\n</span><span class="s1">        const url = `/api/secmaster/publishers/${encodeURIComponent(preset.publisher_name)}/datasets?rtype=$</span><span class="si">{rtype}</span><span class="s1">`;</span><span class="se">\n</span><span class="s1">        const res = await fetch(url);</span><span class="se">\n</span><span class="s1">        const data = await res.json();</span><span class="se">\n</span><span class="s1">        datasets = data.datasets || [];</span><span class="se">\n</span><span class="s1">        const datasetSel = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">publisher-dataset</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">        datasetSel.innerHTML = </span><span class="se">\&#39;</span><span class="s1">&lt;option value=&quot;&quot;&gt;-- Select Dataset --&lt;/option&gt;</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        datasets.forEach(d =&gt; datasetSel.innerHTML += `&lt;option value=&quot;$</span><span class="si">{d.publisher_id}</span><span class="s1">&quot;&gt;$</span><span class="si">{d.dataset}</span><span class="s1">&lt;/option&gt;`);</span><span class="se">\n\n</span><span class="s1">        // 3. Set dataset</span><span class="se">\n</span><span class="s1">        datasetSel.value = String(preset.publisher_id);</span><span class="se">\n</span><span class="s1">        selectedPublisherId = preset.publisher_id;</span><span class="se">\n\n</span><span class="s1">        // 4. Load coverage and show symbol selection</span><span class="se">\n</span><span class="s1">        await loadCoverageForPublisher(selectedPublisherId);</span><span class="se">\n</span><span class="s1">        document.getElementById(</span><span class="se">\&#39;</span><span class="s1">symbol-selection</span><span class="se">\&#39;</span><span class="s1">).style.display = </span><span class="se">\&#39;</span><span class="s1">block</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        document.getElementById(</span><span class="se">\&#39;</span><span class="s1">symbol-search</span><span class="se">\&#39;</span><span class="s1">).value = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        document.getElementById(</span><span class="se">\&#39;</span><span class="s1">search-results</span><span class="se">\&#39;</span><span class="s1">).innerHTML = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n\n</span><span class="s1">        // 5. Set symbols (filtered to available)</span><span class="se">\n</span><span class="s1">        const availableSymbols = symbolsForRtype[rtype] || [];</span><span class="se">\n</span><span class="s1">        selectedSymbols = preset.symbols.filter(s =&gt; availableSymbols.includes(s));</span><span class="se">\n</span><span class="s1">        renderSelectedSymbolsKeepPreset();</span><span class="se">\n</span><span class="s1">        updateDateRange();</span><span class="se">\n</span><span class="s1">    } finally {</span><span class="se">\n</span><span class="s1">        isLoadingPreset = false;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function savePreset() {</span><span class="se">\n</span><span class="s1">    const nameInput = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">preset-name</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const name = nameInput.value.trim();</span><span class="se">\n</span><span class="s1">    if (!name) { alert(</span><span class="se">\&#39;</span><span class="s1">Enter a preset name</span><span class="se">\&#39;</span><span class="s1">); return; }</span><span class="se">\n</span><span class="s1">    const rtype = getSelectedRtype();</span><span class="se">\n</span><span class="s1">    if (!rtype) { alert(</span><span class="se">\&#39;</span><span class="s1">Select a bar period first</span><span class="se">\&#39;</span><span class="s1">); return; }</span><span class="se">\n</span><span class="s1">    if (!selectedPublisherId) { alert(</span><span class="se">\&#39;</span><span class="s1">Select a publisher and dataset first</span><span class="se">\&#39;</span><span class="s1">); return; }</span><span class="se">\n</span><span class="s1">    if (selectedSymbols.length === 0) { alert(</span><span class="se">\&#39;</span><span class="s1">Select at least one symbol</span><span class="se">\&#39;</span><span class="s1">); return; }</span><span class="se">\n</span><span class="s1">    const publisherName = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">publisher-name</span><span class="se">\&#39;</span><span class="s1">).value;</span><span class="se">\n</span><span class="s1">    const exists = presets.some(p =&gt; p.name === name);</span><span class="se">\n</span><span class="s1">    const method = exists ? </span><span class="se">\&#39;</span><span class="s1">PUT</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;</span><span class="s1">POST</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    const apiUrl = exists ? `/api/presets/${encodeURIComponent(name)}` : </span><span class="se">\&#39;</span><span class="s1">/api/presets</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    await fetch(apiUrl, {</span><span class="se">\n</span><span class="s1">        method, headers: {</span><span class="se">\&#39;</span><span class="s1">Content-Type</span><span class="se">\&#39;</span><span class="s1">: </span><span class="se">\&#39;</span><span class="s1">application/json</span><span class="se">\&#39;</span><span class="s1">},</span><span class="se">\n</span><span class="s1">        body: JSON.stringify({</span><span class="se">\n</span><span class="s1">            name,</span><span class="se">\n</span><span class="s1">            rtype,</span><span class="se">\n</span><span class="s1">            publisher_name: publisherName,</span><span class="se">\n</span><span class="s1">            publisher_id: selectedPublisherId,</span><span class="se">\n</span><span class="s1">            symbols: selectedSymbols</span><span class="se">\n</span><span class="s1">        })</span><span class="se">\n</span><span class="s1">    });</span><span class="se">\n</span><span class="s1">    nameInput.value = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    await loadPresets();</span><span class="se">\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">preset-select</span><span class="se">\&#39;</span><span class="s1">).value = name;</span><span class="se">\n</span><span class="s1">    updateButtonStates();</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function deletePreset() {</span><span class="se">\n</span><span class="s1">    const name = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">preset-select</span><span class="se">\&#39;</span><span class="s1">).value;</span><span class="se">\n</span><span class="s1">    if (!name) { alert(</span><span class="se">\&#39;</span><span class="s1">Select a preset to delete</span><span class="se">\&#39;</span><span class="s1">); return; }</span><span class="se">\n</span><span class="s1">    if (!confirm(`Delete preset &quot;$</span><span class="si">{name}</span><span class="s1">&quot;?`)) return;</span><span class="se">\n</span><span class="s1">    await fetch(`/api/presets/${encodeURIComponent(name)}`, {method: </span><span class="se">\&#39;</span><span class="s1">DELETE</span><span class="se">\&#39;</span><span class="s1">});</span><span class="se">\n</span><span class="s1">    await loadPresets();</span><span class="se">\n</span><span class="s1">    selectedSymbols = [];</span><span class="se">\n</span><span class="s1">    renderSelectedSymbols();</span><span class="se">\n</span><span class="s1">    updateDateRange();</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function updateButtonStates() {</span><span class="se">\n</span><span class="s1">    const runBtn = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">run-btn</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const saveBtn = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">preset-save-btn</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const deleteBtn = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">preset-delete-btn</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const presetSelect = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">preset-select</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const presetNameInput = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">preset-name</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const strategyEl = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">strategy</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const barPeriodEl = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">bar-period</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    if (!runBtn) return;</span><span class="se">\n</span><span class="s1">    const rtype = barPeriodEl ? parseInt(barPeriodEl.value) || null : null;</span><span class="se">\n</span><span class="s1">    const strategy = strategyEl ? strategyEl.value : </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    const canRun = strategy &amp;&amp; rtype &amp;&amp; selectedPublisherId &amp;&amp; selectedSymbols.length &gt; 0;</span><span class="se">\n</span><span class="s1">    runBtn.disabled = !canRun;</span><span class="se">\n</span><span class="s1">    const hasPresetSelected = !!(presetSelect &amp;&amp; presetSelect.value);</span><span class="se">\n</span><span class="s1">    const hasPresetName = !!(presetNameInput &amp;&amp; presetNameInput.value.trim().length &gt; 0);</span><span class="se">\n</span><span class="s1">    const canSave = hasPresetName &amp;&amp; rtype &amp;&amp; selectedPublisherId &amp;&amp; selectedSymbols.length &gt; 0;</span><span class="se">\n</span><span class="s1">    if (saveBtn) {</span><span class="se">\n</span><span class="s1">        saveBtn.classList.toggle(</span><span class="se">\&#39;</span><span class="s1">active</span><span class="se">\&#39;</span><span class="s1">, canSave);</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    if (deleteBtn) {</span><span class="se">\n</span><span class="s1">        deleteBtn.classList.toggle(</span><span class="se">\&#39;</span><span class="s1">active</span><span class="se">\&#39;</span><span class="s1">, hasPresetSelected);</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function loadStrategies() {</span><span class="se">\n</span><span class="s1">    const res = await fetch(</span><span class="se">\&#39;</span><span class="s1">/api/strategies</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const data = await res.json();</span><span class="se">\n</span><span class="s1">    const sel = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">strategy</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    sel.innerHTML = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    data.strategies.forEach(s =&gt; sel.innerHTML += `&lt;option value=&quot;$</span><span class="si">{s.id}</span><span class="s1">&quot;&gt;$</span><span class="si">{s.name}</span><span class="s1">&lt;/option&gt;`);</span><span class="se">\n</span><span class="s1">    if (data.strategies.length &gt; 0) {</span><span class="se">\n</span><span class="s1">        sel.value = data.strategies[0].id;</span><span class="se">\n</span><span class="s1">        loadStrategyParams();</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function loadStrategyParams() {</span><span class="se">\n</span><span class="s1">    const name = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">strategy</span><span class="se">\&#39;</span><span class="s1">).value;</span><span class="se">\n</span><span class="s1">    if (!name) return;</span><span class="se">\n</span><span class="s1">    const res = await fetch(`/api/strategies/$</span><span class="si">{name}</span><span class="s1">`);</span><span class="se">\n</span><span class="s1">    const data = await res.json();</span><span class="se">\n</span><span class="s1">    strategyParams = data.parameters || [];</span><span class="se">\n</span><span class="s1">    renderParams();</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function formatParamName(name) {</span><span class="se">\n</span><span class="s1">    let result = name.replace(/_/g, </span><span class="se">\&#39;</span><span class="s1"> </span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    result = result.replace(/([A-Z]+)([A-Z][a-z])/g, </span><span class="se">\&#39;</span><span class="s1">$1 $2</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    result = result.replace(/([a-z])([A-Z])/g, </span><span class="se">\&#39;</span><span class="s1">$1 $2</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    return result.split(</span><span class="se">\&#39;</span><span class="s1"> </span><span class="se">\&#39;</span><span class="s1">).map(word =&gt; {</span><span class="se">\n</span><span class="s1">        if (word === word.toUpperCase() &amp;&amp; word.length &gt; 1) return word;</span><span class="se">\n</span><span class="s1">        return word.charAt(0).toUpperCase() + word.slice(1);</span><span class="se">\n</span><span class="s1">    }).join(</span><span class="se">\&#39;</span><span class="s1"> </span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function renderParams() {</span><span class="se">\n</span><span class="s1">    const container = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">strategy-params</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const filtered = strategyParams.filter(p =&gt; p.name !== </span><span class="se">\&#39;</span><span class="s1">bar_period</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    if (filtered.length === 0) {</span><span class="se">\n</span><span class="s1">        container.innerHTML = </span><span class="se">\&#39;</span><span class="s1">&lt;div style=&quot;color: #8b949e; font-size: 13px;&quot;&gt;No parameters&lt;/div&gt;</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        return;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    container.innerHTML = filtered.map(p =&gt; {</span><span class="se">\n</span><span class="s1">        const label = formatParamName(p.name);</span><span class="se">\n</span><span class="s1">        if (p.choices &amp;&amp; p.choices.length &gt; 0) {</span><span class="se">\n</span><span class="s1">            const opts = p.choices.map(c =&gt; `&lt;option value=&quot;$</span><span class="si">{c}</span><span class="s1">&quot; ${c === p.default ? </span><span class="se">\&#39;</span><span class="s1">selected</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">}&gt;$</span><span class="si">{c}</span><span class="s1">&lt;/option&gt;`).join(</span><span class="se">\&#39;\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">            return `&lt;div class=&quot;param-row&quot;&gt;&lt;label&gt;$</span><span class="si">{label}</span><span class="s1">&lt;/label&gt;&lt;select id=&quot;sp_$</span><span class="si">{p.name}</span><span class="s1">&quot;&gt;$</span><span class="si">{opts}</span><span class="s1">&lt;/select&gt;&lt;/div&gt;`;</span><span class="se">\n</span><span class="s1">        }</span><span class="se">\n</span><span class="s1">        const inputType = p.type === </span><span class="se">\&#39;</span><span class="s1">bool</span><span class="se">\&#39;</span><span class="s1"> ? </span><span class="se">\&#39;</span><span class="s1">checkbox</span><span class="se">\&#39;</span><span class="s1"> : (p.type === </span><span class="se">\&#39;</span><span class="s1">float</span><span class="se">\&#39;</span><span class="s1"> || p.type === </span><span class="se">\&#39;</span><span class="s1">int</span><span class="se">\&#39;</span><span class="s1"> ? </span><span class="se">\&#39;</span><span class="s1">number</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;</span><span class="s1">text</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">        const step = p.step || (p.type === </span><span class="se">\&#39;</span><span class="s1">float</span><span class="se">\&#39;</span><span class="s1"> ? </span><span class="se">\&#39;</span><span class="s1">0.01</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;</span><span class="s1">1</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">        const checked = p.type === </span><span class="se">\&#39;</span><span class="s1">bool</span><span class="se">\&#39;</span><span class="s1"> &amp;&amp; p.default ? </span><span class="se">\&#39;</span><span class="s1">checked</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        return `&lt;div class=&quot;param-row&quot;&gt;&lt;label&gt;$</span><span class="si">{label}</span><span class="s1">&lt;/label&gt;&lt;input type=&quot;$</span><span class="si">{inputType}</span><span class="s1">&quot; id=&quot;sp_$</span><span class="si">{p.name}</span><span class="s1">&quot; value=&quot;$</span><span class="si">{p.default}</span><span class="s1">&quot; step=&quot;$</span><span class="si">{step}</span><span class="s1">&quot; ${p.min !== undefined ? `min=&quot;$</span><span class="si">{p.min}</span><span class="s1">&quot;` : </span><span class="se">\&#39;\&#39;</span><span class="s1">} ${p.max !== undefined ? `max=&quot;$</span><span class="si">{p.max}</span><span class="s1">&quot;` : </span><span class="se">\&#39;\&#39;</span><span class="s1">} $</span><span class="si">{checked}</span><span class="s1">&gt;&lt;/div&gt;`;</span><span class="se">\n</span><span class="s1">    }).join(</span><span class="se">\&#39;\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function tsToDate(ts) {</span><span class="se">\n</span><span class="s1">    const ms = Math.floor(ts / 1000000);</span><span class="se">\n</span><span class="s1">    const d = new Date(ms);</span><span class="se">\n</span><span class="s1">    return d.toISOString().split(</span><span class="se">\&#39;</span><span class="s1">T</span><span class="se">\&#39;</span><span class="s1">)[0];</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function loadCoverage() {</span><span class="se">\n</span><span class="s1">    const res = await fetch(</span><span class="se">\&#39;</span><span class="s1">/api/secmaster/symbols_coverage</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const data = await res.json();</span><span class="se">\n</span><span class="s1">    coverageData = data.symbols || [];</span><span class="se">\n</span><span class="s1">    const rtypeSet = new Set();</span><span class="se">\n</span><span class="s1">    coverageData.forEach(row =&gt; rtypeSet.add(row.rtype));</span><span class="se">\n</span><span class="s1">    availableRtypes = Array.from(rtypeSet).sort((a, b) =&gt; a - b);</span><span class="se">\n</span><span class="s1">    populateBarPeriodDropdown();</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function populateBarPeriodDropdown() {</span><span class="se">\n</span><span class="s1">    const sel = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">bar-period</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    sel.innerHTML = </span><span class="se">\&#39;</span><span class="s1">&lt;option value=&quot;&quot;&gt;-- Select bar period --&lt;/option&gt;</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    availableRtypes.forEach(rt =&gt; {</span><span class="se">\n</span><span class="s1">        const label = RTYPE_LABELS[rt] || `rtype $</span><span class="si">{rt}</span><span class="s1">`;</span><span class="se">\n</span><span class="s1">        sel.innerHTML += `&lt;option value=&quot;$</span><span class="si">{rt}</span><span class="s1">&quot;&gt;$</span><span class="si">{label}</span><span class="s1">&lt;/option&gt;`;</span><span class="se">\n</span><span class="s1">    });</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function onBarPeriodChange() {</span><span class="se">\n</span><span class="s1">    if (isLoadingPreset) return;</span><span class="se">\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">preset-select</span><span class="se">\&#39;</span><span class="s1">).value = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    selectedSymbols = [];</span><span class="se">\n</span><span class="s1">    selectedPublisherId = null;</span><span class="se">\n</span><span class="s1">    symbolsForRtype = </span><span class="si">{}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    symbolCoverageForRtype = </span><span class="si">{}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    renderSelectedSymbols();</span><span class="se">\n</span><span class="s1">    updateDateRange();</span><span class="se">\n</span><span class="s1">    const rtype = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">bar-period</span><span class="se">\&#39;</span><span class="s1">).value;</span><span class="se">\n</span><span class="s1">    const section = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">symbols-section</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const symbolSelection = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">symbol-selection</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">publisher-name</span><span class="se">\&#39;</span><span class="s1">).value = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">publisher-dataset</span><span class="se">\&#39;</span><span class="s1">).innerHTML = </span><span class="se">\&#39;</span><span class="s1">&lt;option value=&quot;&quot;&gt;-- Select Dataset --&lt;/option&gt;</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    if (rtype) {</span><span class="se">\n</span><span class="s1">        section.style.display = </span><span class="se">\&#39;</span><span class="s1">block</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        loadPublishers();</span><span class="se">\n</span><span class="s1">    } else {</span><span class="se">\n</span><span class="s1">        section.style.display = </span><span class="se">\&#39;</span><span class="s1">none</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    symbolSelection.style.display = </span><span class="se">\&#39;</span><span class="s1">none</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">symbol-search</span><span class="se">\&#39;</span><span class="s1">).value = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">search-results</span><span class="se">\&#39;</span><span class="s1">).innerHTML = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function getSelectedRtype() {</span><span class="se">\n</span><span class="s1">    return parseInt(document.getElementById(</span><span class="se">\&#39;</span><span class="s1">bar-period</span><span class="se">\&#39;</span><span class="s1">).value) || null;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function searchSymbols() {</span><span class="se">\n</span><span class="s1">    const query = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">symbol-search</span><span class="se">\&#39;</span><span class="s1">).value.toLowerCase();</span><span class="se">\n</span><span class="s1">    const container = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">search-results</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const rtype = getSelectedRtype();</span><span class="se">\n</span><span class="s1">    if (!query || !rtype) {</span><span class="se">\n</span><span class="s1">        container.innerHTML = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        return;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    const symbols = symbolsForRtype[rtype] || [];</span><span class="se">\n</span><span class="s1">    const matches = symbols.filter(s =&gt; s.toLowerCase().includes(query) &amp;&amp; !selectedSymbols.includes(s)).slice(0, 20);</span><span class="se">\n</span><span class="s1">    container.innerHTML = matches.map(s =&gt;</span><span class="se">\n</span><span class="s1">        `&lt;div class=&quot;search-result&quot; onclick=&quot;addSymbol(</span><span class="se">\&#39;</span><span class="s1">$</span><span class="si">{s}</span><span class="se">\&#39;</span><span class="s1">)&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;$</span><span class="si">{s}</span><span class="s1">&lt;/span&gt;&lt;/div&gt;`</span><span class="se">\n</span><span class="s1">    ).join(</span><span class="se">\&#39;\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function addSymbol(symbol) {</span><span class="se">\n</span><span class="s1">    if (!selectedSymbols.includes(symbol)) {</span><span class="se">\n</span><span class="s1">        selectedSymbols.push(symbol);</span><span class="se">\n</span><span class="s1">        document.getElementById(</span><span class="se">\&#39;</span><span class="s1">preset-select</span><span class="se">\&#39;</span><span class="s1">).value = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        renderSelectedSymbols();</span><span class="se">\n</span><span class="s1">        updateDateRange();</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">symbol-search</span><span class="se">\&#39;</span><span class="s1">).value = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">search-results</span><span class="se">\&#39;</span><span class="s1">).innerHTML = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function removeSymbol(symbol) {</span><span class="se">\n</span><span class="s1">    selectedSymbols = selectedSymbols.filter(s =&gt; s !== symbol);</span><span class="se">\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">preset-select</span><span class="se">\&#39;</span><span class="s1">).value = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    renderSelectedSymbols();</span><span class="se">\n</span><span class="s1">    updateDateRange();</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function renderSelectedSymbols() {</span><span class="se">\n</span><span class="s1">    const container = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">selected-symbols</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">selected-label</span><span class="se">\&#39;</span><span class="s1">).textContent = `Selected ($</span><span class="si">{selectedSymbols.length}</span><span class="s1">):`;</span><span class="se">\n</span><span class="s1">    container.innerHTML = selectedSymbols.map(s =&gt;</span><span class="se">\n</span><span class="s1">        `&lt;span class=&quot;selected-tag&quot;&gt;$</span><span class="si">{s}</span><span class="s1">&lt;span class=&quot;remove&quot; onclick=&quot;removeSymbol(</span><span class="se">\&#39;</span><span class="s1">$</span><span class="si">{s}</span><span class="se">\&#39;</span><span class="s1">)&quot;&gt;&amp;times;&lt;/span&gt;&lt;/span&gt;`</span><span class="se">\n</span><span class="s1">    ).join(</span><span class="se">\&#39;\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    updateButtonStates();</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function renderSelectedSymbolsKeepPreset() {</span><span class="se">\n</span><span class="s1">    const container = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">selected-symbols</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    document.getElementById(</span><span class="se">\&#39;</span><span class="s1">selected-label</span><span class="se">\&#39;</span><span class="s1">).textContent = `Selected ($</span><span class="si">{selectedSymbols.length}</span><span class="s1">):`;</span><span class="se">\n</span><span class="s1">    container.innerHTML = selectedSymbols.map(s =&gt;</span><span class="se">\n</span><span class="s1">        `&lt;span class=&quot;selected-tag&quot;&gt;$</span><span class="si">{s}</span><span class="s1">&lt;span class=&quot;remove&quot; onclick=&quot;removeSymbol(</span><span class="se">\&#39;</span><span class="s1">$</span><span class="si">{s}</span><span class="se">\&#39;</span><span class="s1">)&quot;&gt;&amp;times;&lt;/span&gt;&lt;/span&gt;`</span><span class="se">\n</span><span class="s1">    ).join(</span><span class="se">\&#39;\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    updateButtonStates();</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function updateDateRange() {</span><span class="se">\n</span><span class="s1">    const startInput = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">start-date</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const endInput = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">end-date</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const rtype = getSelectedRtype();</span><span class="se">\n</span><span class="s1">    if (selectedSymbols.length === 0 || !rtype) {</span><span class="se">\n</span><span class="s1">        globalMinDate = null;</span><span class="se">\n</span><span class="s1">        globalMaxDate = null;</span><span class="se">\n</span><span class="s1">        startInput.value = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        endInput.value = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        startInput.removeAttribute(</span><span class="se">\&#39;</span><span class="s1">min</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">        startInput.removeAttribute(</span><span class="se">\&#39;</span><span class="s1">max</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">        endInput.removeAttribute(</span><span class="se">\&#39;</span><span class="s1">min</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">        endInput.removeAttribute(</span><span class="se">\&#39;</span><span class="s1">max</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">        return;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    const coverage = symbolCoverageForRtype[rtype] || </span><span class="si">{}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    let minTs = null, maxTs = null;</span><span class="se">\n</span><span class="s1">    selectedSymbols.forEach(s =&gt; {</span><span class="se">\n</span><span class="s1">        const cov = coverage[s];</span><span class="se">\n</span><span class="s1">        if (cov) {</span><span class="se">\n</span><span class="s1">            if (minTs === null || cov.min_ts &lt; minTs) minTs = cov.min_ts;</span><span class="se">\n</span><span class="s1">            if (maxTs === null || cov.max_ts &gt; maxTs) maxTs = cov.max_ts;</span><span class="se">\n</span><span class="s1">        }</span><span class="se">\n</span><span class="s1">    });</span><span class="se">\n</span><span class="s1">    if (minTs === null) return;</span><span class="se">\n</span><span class="s1">    globalMinDate = tsToDate(minTs);</span><span class="se">\n</span><span class="s1">    globalMaxDate = tsToDate(maxTs);</span><span class="se">\n</span><span class="s1">    startInput.min = globalMinDate;</span><span class="se">\n</span><span class="s1">    startInput.max = globalMaxDate;</span><span class="se">\n</span><span class="s1">    startInput.value = globalMinDate;</span><span class="se">\n</span><span class="s1">    endInput.min = globalMinDate;</span><span class="se">\n</span><span class="s1">    endInput.max = globalMaxDate;</span><span class="se">\n</span><span class="s1">    endInput.value = globalMaxDate;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function clampDate(inputId) {</span><span class="se">\n</span><span class="s1">    if (!globalMinDate || !globalMaxDate) return;</span><span class="se">\n</span><span class="s1">    const input = document.getElementById(inputId);</span><span class="se">\n</span><span class="s1">    if (input.value &lt; globalMinDate) input.value = globalMinDate;</span><span class="se">\n</span><span class="s1">    if (input.value &gt; globalMaxDate) input.value = globalMaxDate;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function collectParams() {</span><span class="se">\n</span><span class="s1">    const result = </span><span class="si">{}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    strategyParams.forEach(p =&gt; {</span><span class="se">\n</span><span class="s1">        const el = document.getElementById(`sp_$</span><span class="si">{p.name}</span><span class="s1">`);</span><span class="se">\n</span><span class="s1">        if (!el) return;</span><span class="se">\n</span><span class="s1">        if (p.type === </span><span class="se">\&#39;</span><span class="s1">bool</span><span class="se">\&#39;</span><span class="s1">) result[p.name] = el.checked;</span><span class="se">\n</span><span class="s1">        else if (p.type === </span><span class="se">\&#39;</span><span class="s1">int</span><span class="se">\&#39;</span><span class="s1">) result[p.name] = parseInt(el.value);</span><span class="se">\n</span><span class="s1">        else if (p.type === </span><span class="se">\&#39;</span><span class="s1">float</span><span class="se">\&#39;</span><span class="s1">) result[p.name] = parseFloat(el.value);</span><span class="se">\n</span><span class="s1">        else result[p.name] = el.value;</span><span class="se">\n</span><span class="s1">    });</span><span class="se">\n</span><span class="s1">    return result;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function loadDbRuns() {</span><span class="se">\n</span><span class="s1">    const res = await fetch(</span><span class="se">\&#39;</span><span class="s1">/api/runs</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const data = await res.json();</span><span class="se">\n</span><span class="s1">    dbRuns = data.runs || [];</span><span class="se">\n</span><span class="s1">    renderRuns();</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function toggleRunSelection(runId) {</span><span class="se">\n</span><span class="s1">    if (selectedRunIds.has(runId)) {</span><span class="se">\n</span><span class="s1">        selectedRunIds.delete(runId);</span><span class="se">\n</span><span class="s1">    } else {</span><span class="se">\n</span><span class="s1">        selectedRunIds.add(runId);</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    renderRuns();</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function toggleSelectAll() {</span><span class="se">\n</span><span class="s1">    const allDbRunIds = dbRuns.map(r =&gt; r.run_id);</span><span class="se">\n</span><span class="s1">    if (selectedRunIds.size === allDbRunIds.length &amp;&amp; allDbRunIds.length &gt; 0) {</span><span class="se">\n</span><span class="s1">        selectedRunIds.clear();</span><span class="se">\n</span><span class="s1">    } else {</span><span class="se">\n</span><span class="s1">        allDbRunIds.forEach(id =&gt; selectedRunIds.add(id));</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    renderRuns();</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function deleteSelectedRuns() {</span><span class="se">\n</span><span class="s1">    if (selectedRunIds.size === 0) return;</span><span class="se">\n</span><span class="s1">    if (!confirm(`Delete $</span><span class="si">{selectedRunIds.size}</span><span class="s1"> run(s)? This cannot be undone.`)) return;</span><span class="se">\n</span><span class="s1">    const res = await fetch(</span><span class="se">\&#39;</span><span class="s1">/api/runs</span><span class="se">\&#39;</span><span class="s1">, {</span><span class="se">\n</span><span class="s1">        method: </span><span class="se">\&#39;</span><span class="s1">DELETE</span><span class="se">\&#39;</span><span class="s1">,</span><span class="se">\n</span><span class="s1">        headers: {</span><span class="se">\&#39;</span><span class="s1">Content-Type</span><span class="se">\&#39;</span><span class="s1">: </span><span class="se">\&#39;</span><span class="s1">application/json</span><span class="se">\&#39;</span><span class="s1">},</span><span class="se">\n</span><span class="s1">        body: JSON.stringify({run_ids: Array.from(selectedRunIds)})</span><span class="se">\n</span><span class="s1">    });</span><span class="se">\n</span><span class="s1">    if (res.ok) {</span><span class="se">\n</span><span class="s1">        selectedRunIds.clear();</span><span class="se">\n</span><span class="s1">        await loadDbRuns();</span><span class="se">\n</span><span class="s1">    } else {</span><span class="se">\n</span><span class="s1">        alert(</span><span class="se">\&#39;</span><span class="s1">Failed to delete runs</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function renderRuns() {</span><span class="se">\n</span><span class="s1">    const container = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">runs-list</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const activeRunIds = Object.keys(activeRuns).filter(id =&gt; activeRuns[id].status === </span><span class="se">\&#39;</span><span class="s1">running</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const allDbRunIds = dbRuns.map(r =&gt; r.run_id);</span><span class="se">\n</span><span class="s1">    const allSelected = allDbRunIds.length &gt; 0 &amp;&amp; selectedRunIds.size === allDbRunIds.length;</span><span class="se">\n\n</span><span class="s1">    let html = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    if (dbRuns.length &gt; 0 || activeRunIds.length &gt; 0) {</span><span class="se">\n</span><span class="s1">        html += `&lt;div class=&quot;runs-toolbar&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;label class=&quot;select-all-label&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;input type=&quot;checkbox&quot; ${allSelected ? </span><span class="se">\&#39;</span><span class="s1">checked</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">} onchange=&quot;toggleSelectAll()&quot;&gt;</span><span class="se">\n</span><span class="s1">                Select all</span><span class="se">\n</span><span class="s1">            &lt;/label&gt;</span><span class="se">\n</span><span class="s1">            &lt;button class=&quot;btn-delete&quot; ${selectedRunIds.size === 0 ? </span><span class="se">\&#39;</span><span class="s1">disabled</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">} onclick=&quot;deleteSelectedRuns()&quot;&gt;</span><span class="se">\n</span><span class="s1">                Delete ($</span><span class="si">{selectedRunIds.size}</span><span class="s1">)</span><span class="se">\n</span><span class="s1">            &lt;/button&gt;</span><span class="se">\n</span><span class="s1">        &lt;/div&gt;`;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n\n</span><span class="s1">    activeRunIds.forEach(id =&gt; {</span><span class="se">\n</span><span class="s1">        const run = activeRuns[id];</span><span class="se">\n</span><span class="s1">        const progress = run.progress;</span><span class="se">\n</span><span class="s1">        html += `&lt;div class=&quot;run-item&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;run-content&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;run-header&quot;&gt;</span><span class="se">\n</span><span class="s1">                    &lt;span class=&quot;run-name&quot;&gt;$</span><span class="si">{run.strategy}</span><span class="s1">&lt;/span&gt;</span><span class="se">\n</span><span class="s1">                    &lt;span class=&quot;run-status running&quot;&gt;running&lt;/span&gt;</span><span class="se">\n</span><span class="s1">                &lt;/div&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;run-meta with-progress&quot;&gt;$</span><span class="si">{run.symbols.length}</span><span class="s1"> symbol${run.symbols.length !== 1 ? </span><span class="se">\&#39;</span><span class="s1">s</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">}  ${run.startDate || </span><span class="se">\&#39;</span><span class="s1">all</span><span class="se">\&#39;</span><span class="s1">} to ${run.endDate || </span><span class="se">\&#39;</span><span class="s1">all</span><span class="se">\&#39;</span><span class="s1">}&lt;/div&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;progress-bar&quot;&gt;&lt;div class=&quot;progress-fill&quot; style=&quot;width: $</span><span class="si">{progress}</span><span class="s1">%&quot;&gt;&lt;/div&gt;&lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">        &lt;/div&gt;`;</span><span class="se">\n</span><span class="s1">    });</span><span class="se">\n\n</span><span class="s1">    dbRuns.forEach(r =&gt; {</span><span class="se">\n</span><span class="s1">        const config = r.config || </span><span class="si">{}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        const strategies = config.strategies ? config.strategies.join(</span><span class="se">\&#39;</span><span class="s1">, </span><span class="se">\&#39;</span><span class="s1">) : r.name;</span><span class="se">\n</span><span class="s1">        const symbols = config.symbols || [];</span><span class="se">\n</span><span class="s1">        const symbolCount = symbols.length;</span><span class="se">\n</span><span class="s1">        const startDate = config.start_date || </span><span class="se">\&#39;</span><span class="s1">-</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        const endDate = config.end_date || </span><span class="se">\&#39;</span><span class="s1">-</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        const timePart = r.run_id.slice(11, 19).replace(/-/g, </span><span class="se">\&#39;</span><span class="s1">:</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">        const isSelected = selectedRunIds.has(r.run_id);</span><span class="se">\n</span><span class="s1">        const statusClass = r.status;</span><span class="se">\n</span><span class="s1">        const clickable = r.status === </span><span class="se">\&#39;</span><span class="s1">completed</span><span class="se">\&#39;</span><span class="s1"> ? `onclick=&quot;goToPerformance(</span><span class="se">\&#39;</span><span class="s1">$</span><span class="si">{r.run_id}</span><span class="se">\&#39;</span><span class="s1">)&quot;` : </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        const clickableClass = r.status === </span><span class="se">\&#39;</span><span class="s1">completed</span><span class="se">\&#39;</span><span class="s1"> ? </span><span class="se">\&#39;</span><span class="s1">clickable</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        html += `&lt;div class=&quot;run-item ${isSelected ? </span><span class="se">\&#39;</span><span class="s1">selected</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">}&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;input type=&quot;checkbox&quot; class=&quot;run-checkbox&quot; ${isSelected ? </span><span class="se">\&#39;</span><span class="s1">checked</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">} onchange=&quot;toggleRunSelection(</span><span class="se">\&#39;</span><span class="s1">$</span><span class="si">{r.run_id}</span><span class="se">\&#39;</span><span class="s1">)&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;run-content $</span><span class="si">{clickableClass}</span><span class="s1">&quot; $</span><span class="si">{clickable}</span><span class="s1">&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;run-header&quot;&gt;</span><span class="se">\n</span><span class="s1">                    &lt;span class=&quot;run-name&quot;&gt;$</span><span class="si">{strategies}</span><span class="s1"> &lt;span class=&quot;run-id&quot;&gt;$</span><span class="si">{timePart}</span><span class="s1">&lt;/span&gt;&lt;/span&gt;</span><span class="se">\n</span><span class="s1">                    &lt;span class=&quot;run-status $</span><span class="si">{statusClass}</span><span class="s1">&quot;&gt;$</span><span class="si">{r.status}</span><span class="s1">&lt;/span&gt;</span><span class="se">\n</span><span class="s1">                &lt;/div&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;run-meta&quot;&gt;$</span><span class="si">{symbolCount}</span><span class="s1"> symbol${symbolCount !== 1 ? </span><span class="se">\&#39;</span><span class="s1">s</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">}  $</span><span class="si">{startDate}</span><span class="s1"> to $</span><span class="si">{endDate}</span><span class="s1">&lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">        &lt;/div&gt;`;</span><span class="se">\n</span><span class="s1">    });</span><span class="se">\n\n</span><span class="s1">    if (html === </span><span class="se">\&#39;\&#39;</span><span class="s1">) {</span><span class="se">\n</span><span class="s1">        html = </span><span class="se">\&#39;</span><span class="s1">&lt;div class=&quot;empty-runs&quot;&gt;&lt;p&gt;No runs yet&lt;/p&gt;&lt;p&gt;Configure settings and click Run Backtest&lt;/p&gt;&lt;/div&gt;</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    container.innerHTML = html;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function pollBacktestStatus(runId, refreshCount) {</span><span class="se">\n</span><span class="s1">    if (refreshCount === undefined) refreshCount = 0;</span><span class="se">\n</span><span class="s1">    try {</span><span class="se">\n</span><span class="s1">        const r = await fetch(`/api/backtest/status/$</span><span class="si">{runId}</span><span class="s1">`);</span><span class="se">\n</span><span class="s1">        const d = await r.json();</span><span class="se">\n</span><span class="s1">        if (d.status === </span><span class="se">\&#39;</span><span class="s1">completed</span><span class="se">\&#39;</span><span class="s1"> || d.status.startsWith(</span><span class="se">\&#39;</span><span class="s1">error</span><span class="se">\&#39;</span><span class="s1">)) {</span><span class="se">\n</span><span class="s1">            delete activeRuns[runId];</span><span class="se">\n</span><span class="s1">            renderRuns();</span><span class="se">\n</span><span class="s1">            await loadDbRuns();</span><span class="se">\n</span><span class="s1">            // Keep refreshing DB a few times to ensure status is reflected</span><span class="se">\n</span><span class="s1">            if (refreshCount &lt; 5) {</span><span class="se">\n</span><span class="s1">                setTimeout(() =&gt; pollBacktestStatus(runId, refreshCount + 1), 500);</span><span class="se">\n</span><span class="s1">            }</span><span class="se">\n</span><span class="s1">            return;</span><span class="se">\n</span><span class="s1">        }</span><span class="se">\n</span><span class="s1">        if (activeRuns[runId]) {</span><span class="se">\n</span><span class="s1">            activeRuns[runId].progress = d.progress || 0;</span><span class="se">\n</span><span class="s1">            renderRuns();</span><span class="se">\n</span><span class="s1">        }</span><span class="se">\n</span><span class="s1">    } catch (e) {</span><span class="se">\n</span><span class="s1">        // fetch failed, will retry on next poll</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    setTimeout(() =&gt; pollBacktestStatus(runId), 1000);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function runBacktest() {</span><span class="se">\n</span><span class="s1">    const btn = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">run-btn</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const rtype = getSelectedRtype();</span><span class="se">\n</span><span class="s1">    if (!rtype) {</span><span class="se">\n</span><span class="s1">        alert(</span><span class="se">\&#39;</span><span class="s1">Please select a bar period</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">        return;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    if (!selectedPublisherId) {</span><span class="se">\n</span><span class="s1">        alert(</span><span class="se">\&#39;</span><span class="s1">Please select a publisher and dataset</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">        return;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    if (selectedSymbols.length === 0) {</span><span class="se">\n</span><span class="s1">        alert(</span><span class="se">\&#39;</span><span class="s1">Please select at least one symbol</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">        return;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    btn.disabled = true;</span><span class="se">\n\n</span><span class="s1">    const strategy = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">strategy</span><span class="se">\&#39;</span><span class="s1">).value;</span><span class="se">\n</span><span class="s1">    const startDate = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">start-date</span><span class="se">\&#39;</span><span class="s1">).value || null;</span><span class="se">\n</span><span class="s1">    const endDate = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">end-date</span><span class="se">\&#39;</span><span class="s1">).value || null;</span><span class="se">\n</span><span class="s1">    const barPeriod = RTYPE_LABELS[rtype] || </span><span class="se">\&#39;</span><span class="s1">Unknown</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n\n</span><span class="s1">    const payload = {</span><span class="se">\n</span><span class="s1">        strategy: strategy,</span><span class="se">\n</span><span class="s1">        strategy_params: collectParams(),</span><span class="se">\n</span><span class="s1">        symbols: selectedSymbols,</span><span class="se">\n</span><span class="s1">        rtype: rtype,</span><span class="se">\n</span><span class="s1">        publisher_id: selectedPublisherId,</span><span class="se">\n</span><span class="s1">        start_date: startDate,</span><span class="se">\n</span><span class="s1">        end_date: endDate</span><span class="se">\n</span><span class="s1">    };</span><span class="se">\n\n</span><span class="s1">    try {</span><span class="se">\n</span><span class="s1">        const res = await fetch(</span><span class="se">\&#39;</span><span class="s1">/api/backtest/run</span><span class="se">\&#39;</span><span class="s1">, {</span><span class="se">\n</span><span class="s1">            method: </span><span class="se">\&#39;</span><span class="s1">POST</span><span class="se">\&#39;</span><span class="s1">, headers: {</span><span class="se">\&#39;</span><span class="s1">Content-Type</span><span class="se">\&#39;</span><span class="s1">: </span><span class="se">\&#39;</span><span class="s1">application/json</span><span class="se">\&#39;</span><span class="s1">}, body: JSON.stringify(payload)</span><span class="se">\n</span><span class="s1">        });</span><span class="se">\n</span><span class="s1">        const data = await res.json();</span><span class="se">\n</span><span class="s1">        if (!res.ok) throw new Error(data.detail || </span><span class="se">\&#39;</span><span class="s1">Failed to start backtest</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">        const runId = data.run_id;</span><span class="se">\n\n</span><span class="s1">        activeRuns[runId] = {</span><span class="se">\n</span><span class="s1">            strategy: strategy,</span><span class="se">\n</span><span class="s1">            symbols: [...selectedSymbols],</span><span class="se">\n</span><span class="s1">            barPeriod: barPeriod,</span><span class="se">\n</span><span class="s1">            startDate: startDate,</span><span class="se">\n</span><span class="s1">            endDate: endDate,</span><span class="se">\n</span><span class="s1">            status: </span><span class="se">\&#39;</span><span class="s1">running</span><span class="se">\&#39;</span><span class="s1">,</span><span class="se">\n</span><span class="s1">            progress: 0</span><span class="se">\n</span><span class="s1">        };</span><span class="se">\n</span><span class="s1">        renderRuns();</span><span class="se">\n</span><span class="s1">        btn.disabled = false;</span><span class="se">\n\n</span><span class="s1">        pollBacktestStatus(runId);</span><span class="se">\n</span><span class="s1">    } catch (e) {</span><span class="se">\n</span><span class="s1">        alert(`Error: $</span><span class="si">{e.message}</span><span class="s1">`);</span><span class="se">\n</span><span class="s1">        btn.disabled = false;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function goToPerformance(runId) {</span><span class="se">\n</span><span class="s1">    window.location.href = `/performance?run_id=$</span><span class="si">{runId}</span><span class="s1">`;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function restoreActiveRuns() {</span><span class="se">\n</span><span class="s1">    const res = await fetch(</span><span class="se">\&#39;</span><span class="s1">/api/backtest/running</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const data = await res.json();</span><span class="se">\n</span><span class="s1">    (data.running || []).forEach(r =&gt; {</span><span class="se">\n</span><span class="s1">        activeRuns[r.run_id] = {</span><span class="se">\n</span><span class="s1">            strategy: r.strategy || </span><span class="se">\&#39;</span><span class="s1">Unknown</span><span class="se">\&#39;</span><span class="s1">,</span><span class="se">\n</span><span class="s1">            symbols: r.symbols || [],</span><span class="se">\n</span><span class="s1">            startDate: r.start_date || null,</span><span class="se">\n</span><span class="s1">            endDate: r.end_date || null,</span><span class="se">\n</span><span class="s1">            status: </span><span class="se">\&#39;</span><span class="s1">running</span><span class="se">\&#39;</span><span class="s1">,</span><span class="se">\n</span><span class="s1">            progress: r.progress || 0</span><span class="se">\n</span><span class="s1">        };</span><span class="se">\n</span><span class="s1">        pollBacktestStatus(r.run_id);</span><span class="se">\n</span><span class="s1">    });</span><span class="se">\n</span><span class="s1">    renderRuns();</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">document.addEventListener(</span><span class="se">\&#39;</span><span class="s1">DOMContentLoaded</span><span class="se">\&#39;</span><span class="s1">, () =&gt; {</span><span class="se">\n</span><span class="s1">    loadStrategies();</span><span class="se">\n</span><span class="s1">    loadCoverage();</span><span class="se">\n</span><span class="s1">    loadPresets();</span><span class="se">\n</span><span class="s1">    loadDbRuns();</span><span class="se">\n</span><span class="s1">    restoreActiveRuns();</span><span class="se">\n</span><span class="s1">});</span><span class="se">\n</span><span class="s1">&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.styles.PERFORMANCE_CSS" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">PERFORMANCE_CSS</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">.container { max-width: none; height: 100vh; padding: 24px; display: flex; flex-direction: column; box-sizing: border-box; }</span><span class="se">\n</span><span class="s1">.performance-layout { display: flex; flex-direction: column; flex: 1; min-height: 0; gap: 16px; }</span><span class="se">\n</span><span class="s1">.settings-card { background: #161b22; border: 1px solid #30363d; border-radius: 8px; padding: 16px; }</span><span class="se">\n</span><span class="s1">.settings-row { display: flex; align-items: center; gap: 24px; flex-wrap: wrap; }</span><span class="se">\n</span><span class="s1">.settings-group { display: flex; align-items: center; gap: 8px; }</span><span class="se">\n</span><span class="s1">.settings-group label { font-size: 13px; color: #8b949e; font-weight: 500; }</span><span class="se">\n</span><span class="s1">.settings-group select { padding: 8px 12px; background: #0d1117; border: 1px solid #30363d; border-radius: 6px; color: #e6edf3; font-size: 13px; cursor: pointer; min-width: 250px; }</span><span class="se">\n</span><span class="s1">.settings-group select:focus { outline: none; border-color: #58a6ff; box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.15); }</span><span class="se">\n</span><span class="s1">.settings-group input { padding: 8px 12px; background: #0d1117; border: 1px solid #30363d; border-radius: 6px; color: #e6edf3; font-size: 13px; min-width: 200px; }</span><span class="se">\n</span><span class="s1">.settings-group input:focus { outline: none; border-color: #58a6ff; box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.15); }</span><span class="se">\n</span><span class="s1">.settings-group input::placeholder { color: #484f58; }</span><span class="se">\n</span><span class="s1">.symbol-suggestions { position: absolute; top: 100%; left: 0; right: 0; background: #161b22; border: 1px solid #30363d; border-radius: 6px; max-height: 200px; overflow-y: auto; z-index: 100; display: none; margin-top: 4px; box-shadow: 0 8px 24px rgba(0,0,0,0.4); }</span><span class="se">\n</span><span class="s1">.symbol-suggestions.show { display: block; }</span><span class="se">\n</span><span class="s1">.symbol-suggestion { padding: 8px 12px; cursor: pointer; font-size: 13px; color: #e6edf3; }</span><span class="se">\n</span><span class="s1">.symbol-suggestion:hover { background: #21262d; }</span><span class="se">\n</span><span class="s1">.symbol-suggestion.selected { background: #388bfd33; color: #58a6ff; }</span><span class="se">\n</span><span class="s1">.symbol-input-wrapper { position: relative; }</span><span class="se">\n</span><span class="s1">.charts-row { display: flex; gap: 16px; flex: 1; min-height: 0; }</span><span class="se">\n</span><span class="s1">.chart-card { flex: 1; background: #161b22; border: 1px solid #30363d; border-radius: 8px; padding: 16px; display: flex; flex-direction: column; min-width: 0; }</span><span class="se">\n</span><span class="s1">.chart-card h3 { margin: 0 0 12px 0; font-size: 14px; font-weight: 500; color: #8b949e; }</span><span class="se">\n</span><span class="s1">.chart-card .chart-content { flex: 1; display: flex; align-items: center; justify-content: center; min-height: 300px; }</span><span class="se">\n</span><span class="s1">.chart-card img { max-width: 100%; max-height: 100%; height: auto; border-radius: 4px; background: #fff; }</span><span class="se">\n</span><span class="s1">.chart-loading { color: #484f58; font-size: 13px; }</span><span class="se">\n</span><span class="s1">.empty-message { text-align: center; padding: 48px 24px; color: #484f58; font-size: 14px; }</span><span class="se">\n</span><span class="s1">@media (max-width: 900px) { .charts-row { flex-direction: column; } }</span><span class="se">\n</span><span class="s1">&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.styles.PERFORMANCE_JS" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">PERFORMANCE_JS</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">let runs = [];</span><span class="se">\n</span><span class="s1">let selectedRunId = null;</span><span class="se">\n</span><span class="s1">let selectedSymbol = null;</span><span class="se">\n</span><span class="s1">let symbols = [];</span><span class="se">\n</span><span class="s1">let suggestionIndex = -1;</span><span class="se">\n\n</span><span class="s1">function getUrlRunId() {</span><span class="se">\n</span><span class="s1">    const params = new URLSearchParams(window.location.search);</span><span class="se">\n</span><span class="s1">    return params.get(</span><span class="se">\&#39;</span><span class="s1">run_id</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function loadRuns() {</span><span class="se">\n</span><span class="s1">    const res = await fetch(</span><span class="se">\&#39;</span><span class="s1">/api/runs</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const data = await res.json();</span><span class="se">\n</span><span class="s1">    runs = (data.runs || []).filter(r =&gt; r.status === </span><span class="se">\&#39;</span><span class="s1">completed</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    renderSettings();</span><span class="se">\n</span><span class="s1">    renderCharts();</span><span class="se">\n</span><span class="s1">    const urlRunId = getUrlRunId();</span><span class="se">\n</span><span class="s1">    if (urlRunId &amp;&amp; runs.some(r =&gt; r.run_id === urlRunId)) {</span><span class="se">\n</span><span class="s1">        selectRun(urlRunId);</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function onRunChange() {</span><span class="se">\n</span><span class="s1">    const select = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">run-select</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const runId = select.value;</span><span class="se">\n</span><span class="s1">    if (runId) {</span><span class="se">\n</span><span class="s1">        selectRun(runId);</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function selectRun(runId) {</span><span class="se">\n</span><span class="s1">    selectedRunId = runId;</span><span class="se">\n</span><span class="s1">    selectedSymbol = null;</span><span class="se">\n</span><span class="s1">    const url = new URL(window.location);</span><span class="se">\n</span><span class="s1">    url.searchParams.set(</span><span class="se">\&#39;</span><span class="s1">run_id</span><span class="se">\&#39;</span><span class="s1">, runId);</span><span class="se">\n</span><span class="s1">    window.history.replaceState(</span><span class="si">{}</span><span class="s1">, </span><span class="se">\&#39;\&#39;</span><span class="s1">, url);</span><span class="se">\n</span><span class="s1">    const select = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">run-select</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    if (select &amp;&amp; select.value !== runId) {</span><span class="se">\n</span><span class="s1">        select.value = runId;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    loadSymbols(runId);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function loadSymbols(runId) {</span><span class="se">\n</span><span class="s1">    renderCharts();</span><span class="se">\n</span><span class="s1">    const res = await fetch(`/api/runs/$</span><span class="si">{runId}</span><span class="s1">/roundtrips`);</span><span class="se">\n</span><span class="s1">    const data = await res.json();</span><span class="se">\n</span><span class="s1">    const roundtrips = data.roundtrips || [];</span><span class="se">\n</span><span class="s1">    symbols = [...new Set(roundtrips.map(rt =&gt; rt.symbol))].sort();</span><span class="se">\n</span><span class="s1">    renderSettings();</span><span class="se">\n</span><span class="s1">    renderCharts();</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function onSymbolInput() {</span><span class="se">\n</span><span class="s1">    const input = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">symbol-input</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const query = input.value.trim().toUpperCase();</span><span class="se">\n</span><span class="s1">    const suggestions = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">symbol-suggestions</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    suggestionIndex = -1;</span><span class="se">\n</span><span class="s1">    if (!query) {</span><span class="se">\n</span><span class="s1">        suggestions.classList.remove(</span><span class="se">\&#39;</span><span class="s1">show</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">        selectedSymbol = null;</span><span class="se">\n</span><span class="s1">        renderCharts();</span><span class="se">\n</span><span class="s1">        return;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    const matches = symbols.filter(s =&gt; s.toUpperCase().includes(query));</span><span class="se">\n</span><span class="s1">    if (matches.length === 0) {</span><span class="se">\n</span><span class="s1">        suggestions.classList.remove(</span><span class="se">\&#39;</span><span class="s1">show</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">        return;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    suggestions.innerHTML = matches.map((s, i) =&gt; `&lt;div class=&quot;symbol-suggestion&quot; data-symbol=&quot;$</span><span class="si">{s}</span><span class="s1">&quot; onclick=&quot;selectSymbol(</span><span class="se">\&#39;</span><span class="s1">$</span><span class="si">{s}</span><span class="se">\&#39;</span><span class="s1">)&quot;&gt;$</span><span class="si">{s}</span><span class="s1">&lt;/div&gt;`).join(</span><span class="se">\&#39;\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    suggestions.classList.add(</span><span class="se">\&#39;</span><span class="s1">show</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function onSymbolKeydown(e) {</span><span class="se">\n</span><span class="s1">    const suggestions = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">symbol-suggestions</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const items = suggestions.querySelectorAll(</span><span class="se">\&#39;</span><span class="s1">.symbol-suggestion</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    if (!suggestions.classList.contains(</span><span class="se">\&#39;</span><span class="s1">show</span><span class="se">\&#39;</span><span class="s1">) || items.length === 0) return;</span><span class="se">\n</span><span class="s1">    if (e.key === </span><span class="se">\&#39;</span><span class="s1">ArrowDown</span><span class="se">\&#39;</span><span class="s1">) {</span><span class="se">\n</span><span class="s1">        e.preventDefault();</span><span class="se">\n</span><span class="s1">        suggestionIndex = Math.min(suggestionIndex + 1, items.length - 1);</span><span class="se">\n</span><span class="s1">        updateSuggestionHighlight(items);</span><span class="se">\n</span><span class="s1">    } else if (e.key === </span><span class="se">\&#39;</span><span class="s1">ArrowUp</span><span class="se">\&#39;</span><span class="s1">) {</span><span class="se">\n</span><span class="s1">        e.preventDefault();</span><span class="se">\n</span><span class="s1">        suggestionIndex = Math.max(suggestionIndex - 1, 0);</span><span class="se">\n</span><span class="s1">        updateSuggestionHighlight(items);</span><span class="se">\n</span><span class="s1">    } else if (e.key === </span><span class="se">\&#39;</span><span class="s1">Enter</span><span class="se">\&#39;</span><span class="s1">) {</span><span class="se">\n</span><span class="s1">        e.preventDefault();</span><span class="se">\n</span><span class="s1">        if (suggestionIndex &gt;= 0 &amp;&amp; suggestionIndex &lt; items.length) {</span><span class="se">\n</span><span class="s1">            selectSymbol(items[suggestionIndex].dataset.symbol);</span><span class="se">\n</span><span class="s1">        }</span><span class="se">\n</span><span class="s1">    } else if (e.key === </span><span class="se">\&#39;</span><span class="s1">Escape</span><span class="se">\&#39;</span><span class="s1">) {</span><span class="se">\n</span><span class="s1">        suggestions.classList.remove(</span><span class="se">\&#39;</span><span class="s1">show</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function updateSuggestionHighlight(items) {</span><span class="se">\n</span><span class="s1">    items.forEach((item, i) =&gt; {</span><span class="se">\n</span><span class="s1">        item.classList.toggle(</span><span class="se">\&#39;</span><span class="s1">selected</span><span class="se">\&#39;</span><span class="s1">, i === suggestionIndex);</span><span class="se">\n</span><span class="s1">    });</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function selectSymbol(symbol) {</span><span class="se">\n</span><span class="s1">    selectedSymbol = symbol;</span><span class="se">\n</span><span class="s1">    const input = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">symbol-input</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    if (input) input.value = symbol;</span><span class="se">\n</span><span class="s1">    const suggestions = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">symbol-suggestions</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    if (suggestions) suggestions.classList.remove(</span><span class="se">\&#39;</span><span class="s1">show</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    renderCharts();</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function renderSettings() {</span><span class="se">\n</span><span class="s1">    const container = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">settings-panel</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    if (!container) return;</span><span class="se">\n</span><span class="s1">    const runOptions = runs.length === 0</span><span class="se">\n</span><span class="s1">        ? </span><span class="se">\&#39;</span><span class="s1">&lt;option value=&quot;&quot;&gt;No completed runs&lt;/option&gt;</span><span class="se">\&#39;\n</span><span class="s1">        : </span><span class="se">\&#39;</span><span class="s1">&lt;option value=&quot;&quot;&gt;Select a run...&lt;/option&gt;</span><span class="se">\&#39;</span><span class="s1"> + runs.map(r =&gt; {</span><span class="se">\n</span><span class="s1">            const config = r.config || </span><span class="si">{}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">            const strategies = config.strategies ? config.strategies.join(</span><span class="se">\&#39;</span><span class="s1">, </span><span class="se">\&#39;</span><span class="s1">) : r.name;</span><span class="se">\n</span><span class="s1">            const timePart = r.run_id.slice(11, 19).replace(/-/g, </span><span class="se">\&#39;</span><span class="s1">:</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">            const selected = r.run_id === selectedRunId ? </span><span class="se">\&#39;</span><span class="s1">selected</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">            return `&lt;option value=&quot;$</span><span class="si">{r.run_id}</span><span class="s1">&quot; $</span><span class="si">{selected}</span><span class="s1">&gt;$</span><span class="si">{strategies}</span><span class="s1"> ($</span><span class="si">{timePart}</span><span class="s1">)&lt;/option&gt;`;</span><span class="se">\n</span><span class="s1">        }).join(</span><span class="se">\&#39;\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const symbolValue = selectedSymbol || </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    const symbolDisabled = symbols.length === 0 ? </span><span class="se">\&#39;</span><span class="s1">disabled</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    const symbolPlaceholder = symbols.length === 0 ? </span><span class="se">\&#39;</span><span class="s1">Select a run first...</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;</span><span class="s1">Search symbol...</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    container.innerHTML = `</span><span class="se">\n</span><span class="s1">        &lt;div class=&quot;settings-row&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;settings-group&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;label&gt;Run:&lt;/label&gt;</span><span class="se">\n</span><span class="s1">                &lt;select id=&quot;run-select&quot; onchange=&quot;onRunChange()&quot;&gt;$</span><span class="si">{runOptions}</span><span class="s1">&lt;/select&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;settings-group&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;label&gt;Symbol:&lt;/label&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;symbol-input-wrapper&quot;&gt;</span><span class="se">\n</span><span class="s1">                    &lt;input type=&quot;text&quot; id=&quot;symbol-input&quot; value=&quot;$</span><span class="si">{symbolValue}</span><span class="s1">&quot; placeholder=&quot;$</span><span class="si">{symbolPlaceholder}</span><span class="s1">&quot; $</span><span class="si">{symbolDisabled}</span><span class="s1"> oninput=&quot;onSymbolInput()&quot; onkeydown=&quot;onSymbolKeydown(event)&quot; onfocus=&quot;onSymbolInput()&quot; autocomplete=&quot;off&quot;&gt;</span><span class="se">\n</span><span class="s1">                    &lt;div id=&quot;symbol-suggestions&quot; class=&quot;symbol-suggestions&quot;&gt;&lt;/div&gt;</span><span class="se">\n</span><span class="s1">                &lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">        &lt;/div&gt;</span><span class="se">\n</span><span class="s1">    `;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function renderCharts() {</span><span class="se">\n</span><span class="s1">    const container = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">charts-row</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    if (!container) return;</span><span class="se">\n</span><span class="s1">    const emptyPnl = !selectedRunId || !selectedSymbol ? </span><span class="se">\&#39;</span><span class="s1">&lt;div class=&quot;empty-message&quot;&gt;Select a run and symbol&lt;/div&gt;</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;</span><span class="s1">&lt;div class=&quot;chart-loading&quot;&gt;Loading...&lt;/div&gt;</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    const emptyJourney = !selectedRunId || !selectedSymbol ? </span><span class="se">\&#39;</span><span class="s1">&lt;div class=&quot;empty-message&quot;&gt;Select a run and symbol&lt;/div&gt;</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;</span><span class="s1">&lt;div class=&quot;chart-loading&quot;&gt;Loading...&lt;/div&gt;</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    container.innerHTML = `</span><span class="se">\n</span><span class="s1">        &lt;div class=&quot;chart-card&quot;&gt;&lt;h3&gt;PnL Summary&lt;/h3&gt;&lt;div class=&quot;chart-content&quot; id=&quot;pnl-container&quot;&gt;$</span><span class="si">{emptyPnl}</span><span class="s1">&lt;/div&gt;&lt;/div&gt;</span><span class="se">\n</span><span class="s1">        &lt;div class=&quot;chart-card&quot;&gt;&lt;h3&gt;Trade Journey&lt;/h3&gt;&lt;div class=&quot;chart-content&quot; id=&quot;journey-container&quot;&gt;$</span><span class="si">{emptyJourney}</span><span class="s1">&lt;/div&gt;&lt;/div&gt;</span><span class="se">\n</span><span class="s1">    `;</span><span class="se">\n</span><span class="s1">    if (selectedRunId &amp;&amp; selectedSymbol) {</span><span class="se">\n</span><span class="s1">        loadChartImage(</span><span class="se">\&#39;</span><span class="s1">pnl-container</span><span class="se">\&#39;</span><span class="s1">, `/api/runs/$</span><span class="si">{selectedRunId}</span><span class="s1">/pnl-summary.png?symbol=${encodeURIComponent(selectedSymbol)}`);</span><span class="se">\n</span><span class="s1">        loadChartImage(</span><span class="se">\&#39;</span><span class="s1">journey-container</span><span class="se">\&#39;</span><span class="s1">, `/api/runs/$</span><span class="si">{selectedRunId}</span><span class="s1">/trade-journey.png?symbol=${encodeURIComponent(selectedSymbol)}`);</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function loadChartImage(containerId, url) {</span><span class="se">\n</span><span class="s1">    const container = document.getElementById(containerId);</span><span class="se">\n</span><span class="s1">    const img = new Image();</span><span class="se">\n</span><span class="s1">    img.onload = () =&gt; { container.innerHTML = </span><span class="se">\&#39;\&#39;</span><span class="s1">; container.appendChild(img); };</span><span class="se">\n</span><span class="s1">    img.onerror = () =&gt; { container.innerHTML = </span><span class="se">\&#39;</span><span class="s1">&lt;div class=&quot;chart-loading&quot;&gt;Failed to load chart&lt;/div&gt;</span><span class="se">\&#39;</span><span class="s1">; };</span><span class="se">\n</span><span class="s1">    img.src = url;</span><span class="se">\n</span><span class="s1">    img.alt = </span><span class="se">\&#39;</span><span class="s1">Chart</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">document.addEventListener(</span><span class="se">\&#39;</span><span class="s1">click</span><span class="se">\&#39;</span><span class="s1">, (e) =&gt; {</span><span class="se">\n</span><span class="s1">    const suggestions = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">symbol-suggestions</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const input = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">symbol-input</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    if (suggestions &amp;&amp; input &amp;&amp; !input.contains(e.target) &amp;&amp; !suggestions.contains(e.target)) {</span><span class="se">\n</span><span class="s1">        suggestions.classList.remove(</span><span class="se">\&#39;</span><span class="s1">show</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">});</span><span class="se">\n\n</span><span class="s1">document.addEventListener(</span><span class="se">\&#39;</span><span class="s1">DOMContentLoaded</span><span class="se">\&#39;</span><span class="s1">, () =&gt; {</span><span class="se">\n</span><span class="s1">    loadRuns();</span><span class="se">\n</span><span class="s1">});</span><span class="se">\n</span><span class="s1">&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.styles.CHART_CSS" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">CHART_CSS</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">.container { max-width: none; height: 100vh; padding: 24px; display: flex; flex-direction: column; box-sizing: border-box; }</span><span class="se">\n</span><span class="s1">.chart-layout { display: flex; flex-direction: column; flex: 1; min-height: 0; }</span><span class="se">\n</span><span class="s1">.chart-layout &gt; .card { flex: 1; display: flex; flex-direction: column; margin-bottom: 0; min-height: 0; overflow-y: auto; }</span><span class="se">\n</span><span class="s1">.empty-content { text-align: center; padding: 48px 24px; color: #8b949e; }</span><span class="se">\n</span><span class="s1">.empty-content p { font-size: 14px; }</span><span class="se">\n</span><span class="s1">.settings-panel { background: #0d1117; border: 1px solid #30363d; border-radius: 6px; padding: 16px; margin-bottom: 16px; }</span><span class="se">\n</span><span class="s1">.settings-row { display: flex; align-items: center; gap: 24px; flex-wrap: wrap; }</span><span class="se">\n</span><span class="s1">.settings-group { display: flex; align-items: center; gap: 8px; }</span><span class="se">\n</span><span class="s1">.settings-group label { font-size: 13px; color: #8b949e; }</span><span class="se">\n</span><span class="s1">.settings-group input[type=&quot;radio&quot;] { margin: 0; cursor: pointer; }</span><span class="se">\n</span><span class="s1">.settings-group input[type=&quot;number&quot;] { width: 80px; padding: 6px 10px; background: #161b22; border: 1px solid #30363d; border-radius: 4px; color: #e6edf3; font-size: 13px; }</span><span class="se">\n</span><span class="s1">.settings-group input[type=&quot;number&quot;]:focus { outline: none; border-color: #58a6ff; }</span><span class="se">\n</span><span class="s1">.settings-group select { padding: 6px 10px; background: #161b22; border: 1px solid #30363d; border-radius: 4px; color: #e6edf3; font-size: 13px; cursor: pointer; }</span><span class="se">\n</span><span class="s1">.settings-group select:focus { outline: none; border-color: #58a6ff; }</span><span class="se">\n</span><span class="s1">.settings-group select#run-select { min-width: 250px; }</span><span class="se">\n</span><span class="s1">.settings-group input#symbol-filter { width: 180px; padding: 6px 10px; background: #161b22; border: 1px solid #30363d; border-radius: 4px; color: #e6edf3; font-size: 13px; }</span><span class="se">\n</span><span class="s1">.settings-group input#symbol-filter:focus { outline: none; border-color: #58a6ff; }</span><span class="se">\n</span><span class="s1">.settings-group input#symbol-filter::placeholder { color: #8b949e; }</span><span class="se">\n</span><span class="s1">.settings-divider { width: 1px; height: 24px; background: #30363d; }</span><span class="se">\n</span><span class="s1">.segments-table-container { }</span><span class="se">\n</span><span class="s1">.segments-table { width: 100%; border-collapse: collapse; font-size: 13px; }</span><span class="se">\n</span><span class="s1">.segments-table th { position: sticky; top: 0; background: #161b22; padding: 10px 12px; text-align: left; color: #8b949e; font-weight: 500; border-bottom: 1px solid #30363d; cursor: pointer; user-select: none; white-space: nowrap; }</span><span class="se">\n</span><span class="s1">.segments-table th:hover { color: #e6edf3; }</span><span class="se">\n</span><span class="s1">.segments-table th .sort-icon { margin-left: 4px; opacity: 0.5; }</span><span class="se">\n</span><span class="s1">.segments-table th.sorted .sort-icon { opacity: 1; }</span><span class="se">\n</span><span class="s1">.segments-table td { padding: 10px 12px; border-bottom: 1px solid #21262d; color: #e6edf3; white-space: nowrap; }</span><span class="se">\n</span><span class="s1">.segments-table tr:hover td { background: #21262d; }</span><span class="se">\n</span><span class="s1">.segments-table .symbol { font-family: monospace; }</span><span class="se">\n</span><span class="s1">.segments-table .number { font-family: monospace; text-align: right; }</span><span class="se">\n</span><span class="s1">.empty-table { text-align: center; padding: 48px 24px; color: #8b949e; }</span><span class="se">\n</span><span class="s1">.segments-table tr.data-row { cursor: pointer; }</span><span class="se">\n</span><span class="s1">.segments-table tr.chart-row { display: none; }</span><span class="se">\n</span><span class="s1">.segments-table tr.chart-row.expanded { display: table-row; }</span><span class="se">\n</span><span class="s1">.segments-table tr.chart-row td { padding: 16px; background: #0d1117; }</span><span class="se">\n</span><span class="s1">.chart-container { position: relative; text-align: center; }</span><span class="se">\n</span><span class="s1">.chart-container img { max-width: 100%; height: auto; border-radius: 4px; }</span><span class="se">\n</span><span class="s1">.chart-loading { color: #8b949e; padding: 48px; }</span><span class="se">\n</span><span class="s1">.trades-table-container { }</span><span class="se">\n</span><span class="s1">.trades-table { width: 100%; border-collapse: collapse; font-size: 13px; }</span><span class="se">\n</span><span class="s1">.trades-table th { position: sticky; top: 0; background: #161b22; padding: 10px 12px; text-align: left; color: #8b949e; font-weight: 500; border-bottom: 1px solid #30363d; cursor: pointer; user-select: none; white-space: nowrap; }</span><span class="se">\n</span><span class="s1">.trades-table th:hover { color: #e6edf3; }</span><span class="se">\n</span><span class="s1">.trades-table th .sort-icon { margin-left: 4px; opacity: 0.5; }</span><span class="se">\n</span><span class="s1">.trades-table th.sorted .sort-icon { opacity: 1; }</span><span class="se">\n</span><span class="s1">.trades-table td { padding: 10px 12px; border-bottom: 1px solid #21262d; color: #e6edf3; white-space: nowrap; }</span><span class="se">\n</span><span class="s1">.trades-table tr:hover td { background: #21262d; }</span><span class="se">\n</span><span class="s1">.trades-table .symbol { font-family: monospace; }</span><span class="se">\n</span><span class="s1">.trades-table .number { font-family: monospace; text-align: right; }</span><span class="se">\n</span><span class="s1">.trades-table .direction { font-weight: 500; }</span><span class="se">\n</span><span class="s1">.trades-table .direction.long { color: #3fb950; }</span><span class="se">\n</span><span class="s1">.trades-table .direction.short { color: #f85149; }</span><span class="se">\n</span><span class="s1">.trades-table .pnl { font-weight: 500; font-family: monospace; }</span><span class="se">\n</span><span class="s1">.trades-table .pnl.positive { color: #3fb950; }</span><span class="se">\n</span><span class="s1">.trades-table .pnl.negative { color: #f85149; }</span><span class="se">\n</span><span class="s1">.trades-table tr.data-row { cursor: pointer; }</span><span class="se">\n</span><span class="s1">.trades-table tr.chart-row { display: none; }</span><span class="se">\n</span><span class="s1">.trades-table tr.chart-row.expanded { display: table-row; }</span><span class="se">\n</span><span class="s1">.trades-table tr.chart-row td { padding: 16px; background: #0d1117; }</span><span class="se">\n</span><span class="s1">&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-attribute">



<h2 id="onesecondtrader.dashboard.styles.CHART_JS" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">CHART_JS</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">let runs = [];</span><span class="se">\n</span><span class="s1">let selectedRunId = null;</span><span class="se">\n</span><span class="s1">let segments = [];</span><span class="se">\n</span><span class="s1">let filteredSegments = [];</span><span class="se">\n</span><span class="s1">let roundtrips = [];</span><span class="se">\n</span><span class="s1">let filteredRoundtrips = [];</span><span class="se">\n</span><span class="s1">let sortColumn = </span><span class="se">\&#39;</span><span class="s1">symbol</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">let sortAsc = true;</span><span class="se">\n</span><span class="s1">let barPeriod = null;</span><span class="se">\n\n</span><span class="s1">let settings = {</span><span class="se">\n</span><span class="s1">    mode: </span><span class="se">\&#39;</span><span class="s1">bars</span><span class="se">\&#39;</span><span class="s1">,</span><span class="se">\n</span><span class="s1">    barsPerChart: 500,</span><span class="se">\n</span><span class="s1">    overlap: 100,</span><span class="se">\n</span><span class="s1">    timePeriod: </span><span class="se">\&#39;</span><span class="s1">day</span><span class="se">\&#39;</span><span class="s1">,</span><span class="se">\n</span><span class="s1">    chartType: </span><span class="se">\&#39;</span><span class="s1">c_bars</span><span class="se">\&#39;\n</span><span class="s1">};</span><span class="se">\n\n</span><span class="s1">const CHART_TYPE_OPTIONS = [</span><span class="se">\n</span><span class="s1">    {value: </span><span class="se">\&#39;</span><span class="s1">candlestick</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">Candlestick</span><span class="se">\&#39;</span><span class="s1">},</span><span class="se">\n</span><span class="s1">    {value: </span><span class="se">\&#39;</span><span class="s1">oc_bars</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">OC Bars</span><span class="se">\&#39;</span><span class="s1">},</span><span class="se">\n</span><span class="s1">    {value: </span><span class="se">\&#39;</span><span class="s1">c_bars</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">C Bars</span><span class="se">\&#39;</span><span class="s1">},</span><span class="se">\n</span><span class="s1">    {value: </span><span class="se">\&#39;</span><span class="s1">bars</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">Bars</span><span class="se">\&#39;</span><span class="s1">}</span><span class="se">\n</span><span class="s1">];</span><span class="se">\n\n</span><span class="s1">const TIME_PERIOD_OPTIONS = {</span><span class="se">\n</span><span class="s1">    DAY: [{value: </span><span class="se">\&#39;</span><span class="s1">year</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">Year</span><span class="se">\&#39;</span><span class="s1">}, {value: </span><span class="se">\&#39;</span><span class="s1">quarter</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">Quarter</span><span class="se">\&#39;</span><span class="s1">}, {value: </span><span class="se">\&#39;</span><span class="s1">month</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">Month</span><span class="se">\&#39;</span><span class="s1">}],</span><span class="se">\n</span><span class="s1">    HOUR: [{value: </span><span class="se">\&#39;</span><span class="s1">month</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">Month</span><span class="se">\&#39;</span><span class="s1">}, {value: </span><span class="se">\&#39;</span><span class="s1">week</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">Week</span><span class="se">\&#39;</span><span class="s1">}, {value: </span><span class="se">\&#39;</span><span class="s1">day</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">Day</span><span class="se">\&#39;</span><span class="s1">}],</span><span class="se">\n</span><span class="s1">    MINUTE: [{value: </span><span class="se">\&#39;</span><span class="s1">day</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">Day</span><span class="se">\&#39;</span><span class="s1">}, {value: </span><span class="se">\&#39;</span><span class="s1">4hour</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">4 Hours</span><span class="se">\&#39;</span><span class="s1">}, {value: </span><span class="se">\&#39;</span><span class="s1">hour</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">Hour</span><span class="se">\&#39;</span><span class="s1">}],</span><span class="se">\n</span><span class="s1">    SECOND: [{value: </span><span class="se">\&#39;</span><span class="s1">15min</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">15 Minutes</span><span class="se">\&#39;</span><span class="s1">}, {value: </span><span class="se">\&#39;</span><span class="s1">5min</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">5 Minutes</span><span class="se">\&#39;</span><span class="s1">}, {value: </span><span class="se">\&#39;</span><span class="s1">1min</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">1 Minute</span><span class="se">\&#39;</span><span class="s1">}]</span><span class="se">\n</span><span class="s1">};</span><span class="se">\n\n</span><span class="s1">function loadSettings() {</span><span class="se">\n</span><span class="s1">    const saved = localStorage.getItem(</span><span class="se">\&#39;</span><span class="s1">chartSettings</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    if (saved) {</span><span class="se">\n</span><span class="s1">        try {</span><span class="se">\n</span><span class="s1">            const parsed = JSON.parse(saved);</span><span class="se">\n</span><span class="s1">            settings = {...settings, ...parsed};</span><span class="se">\n</span><span class="s1">        } catch (e) </span><span class="si">{}</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function saveSettings() {</span><span class="se">\n</span><span class="s1">    localStorage.setItem(</span><span class="se">\&#39;</span><span class="s1">chartSettings</span><span class="se">\&#39;</span><span class="s1">, JSON.stringify(settings));</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function getUrlRunId() {</span><span class="se">\n</span><span class="s1">    const params = new URLSearchParams(window.location.search);</span><span class="se">\n</span><span class="s1">    return params.get(</span><span class="se">\&#39;</span><span class="s1">run_id</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function loadRuns() {</span><span class="se">\n</span><span class="s1">    loadSettings();</span><span class="se">\n</span><span class="s1">    const res = await fetch(</span><span class="se">\&#39;</span><span class="s1">/api/runs</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const data = await res.json();</span><span class="se">\n</span><span class="s1">    runs = (data.runs || []).filter(r =&gt; r.status === </span><span class="se">\&#39;</span><span class="s1">completed</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    renderSettings();</span><span class="se">\n</span><span class="s1">    const urlRunId = getUrlRunId();</span><span class="se">\n</span><span class="s1">    if (urlRunId &amp;&amp; runs.some(r =&gt; r.run_id === urlRunId)) {</span><span class="se">\n</span><span class="s1">        selectRun(urlRunId);</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function onRunChange() {</span><span class="se">\n</span><span class="s1">    const runId = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">run-select</span><span class="se">\&#39;</span><span class="s1">).value;</span><span class="se">\n</span><span class="s1">    if (runId) {</span><span class="se">\n</span><span class="s1">        selectRun(runId);</span><span class="se">\n</span><span class="s1">    } else {</span><span class="se">\n</span><span class="s1">        selectedRunId = null;</span><span class="se">\n</span><span class="s1">        document.getElementById(</span><span class="se">\&#39;</span><span class="s1">charts-content</span><span class="se">\&#39;</span><span class="s1">).innerHTML = </span><span class="se">\&#39;</span><span class="s1">&lt;div class=&quot;empty-content&quot;&gt;&lt;p&gt;Select a run to view charts&lt;/p&gt;&lt;/div&gt;</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function selectRun(runId) {</span><span class="se">\n</span><span class="s1">    selectedRunId = runId;</span><span class="se">\n</span><span class="s1">    const url = new URL(window.location);</span><span class="se">\n</span><span class="s1">    url.searchParams.set(</span><span class="se">\&#39;</span><span class="s1">run_id</span><span class="se">\&#39;</span><span class="s1">, runId);</span><span class="se">\n</span><span class="s1">    window.history.replaceState(</span><span class="si">{}</span><span class="s1">, </span><span class="se">\&#39;\&#39;</span><span class="s1">, url);</span><span class="se">\n</span><span class="s1">    const select = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">run-select</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    if (select &amp;&amp; select.value !== runId) {</span><span class="se">\n</span><span class="s1">        select.value = runId;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    loadData(runId);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function renderSettings() {</span><span class="se">\n</span><span class="s1">    const container = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">settings-panel</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    if (!container) return;</span><span class="se">\n</span><span class="s1">    const timePeriodOpts = TIME_PERIOD_OPTIONS[barPeriod] || TIME_PERIOD_OPTIONS[</span><span class="se">\&#39;</span><span class="s1">DAY</span><span class="se">\&#39;</span><span class="s1">];</span><span class="se">\n</span><span class="s1">    if (settings.mode === </span><span class="se">\&#39;</span><span class="s1">time</span><span class="se">\&#39;</span><span class="s1"> &amp;&amp; !timePeriodOpts.some(o =&gt; o.value === settings.timePeriod)) {</span><span class="se">\n</span><span class="s1">        settings.timePeriod = timePeriodOpts[0].value;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    const barsChecked = settings.mode === </span><span class="se">\&#39;</span><span class="s1">bars</span><span class="se">\&#39;</span><span class="s1"> ? </span><span class="se">\&#39;</span><span class="s1">checked</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    const timeChecked = settings.mode === </span><span class="se">\&#39;</span><span class="s1">time</span><span class="se">\&#39;</span><span class="s1"> ? </span><span class="se">\&#39;</span><span class="s1">checked</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    const tradesChecked = settings.mode === </span><span class="se">\&#39;</span><span class="s1">trades</span><span class="se">\&#39;</span><span class="s1"> ? </span><span class="se">\&#39;</span><span class="s1">checked</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    const barsDisabled = settings.mode !== </span><span class="se">\&#39;</span><span class="s1">bars</span><span class="se">\&#39;</span><span class="s1"> ? </span><span class="se">\&#39;</span><span class="s1">disabled</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    const timeDisabled = settings.mode !== </span><span class="se">\&#39;</span><span class="s1">time</span><span class="se">\&#39;</span><span class="s1"> ? </span><span class="se">\&#39;</span><span class="s1">disabled</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    const overlapDisabled = settings.mode === </span><span class="se">\&#39;</span><span class="s1">trades</span><span class="se">\&#39;</span><span class="s1"> ? </span><span class="se">\&#39;</span><span class="s1">disabled</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    const periodOptions = timePeriodOpts.map(o =&gt;</span><span class="se">\n</span><span class="s1">        `&lt;option value=&quot;$</span><span class="si">{o.value}</span><span class="s1">&quot; ${settings.timePeriod === o.value ? </span><span class="se">\&#39;</span><span class="s1">selected</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">}&gt;$</span><span class="si">{o.label}</span><span class="s1">&lt;/option&gt;`</span><span class="se">\n</span><span class="s1">    ).join(</span><span class="se">\&#39;\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const chartTypeOptions = CHART_TYPE_OPTIONS.map(o =&gt;</span><span class="se">\n</span><span class="s1">        `&lt;option value=&quot;$</span><span class="si">{o.value}</span><span class="s1">&quot; ${settings.chartType === o.value ? </span><span class="se">\&#39;</span><span class="s1">selected</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">}&gt;$</span><span class="si">{o.label}</span><span class="s1">&lt;/option&gt;`</span><span class="se">\n</span><span class="s1">    ).join(</span><span class="se">\&#39;\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const runOptions = runs.length === 0</span><span class="se">\n</span><span class="s1">        ? </span><span class="se">\&#39;</span><span class="s1">&lt;option value=&quot;&quot;&gt;No completed runs&lt;/option&gt;</span><span class="se">\&#39;\n</span><span class="s1">        : </span><span class="se">\&#39;</span><span class="s1">&lt;option value=&quot;&quot;&gt;Select a run...&lt;/option&gt;</span><span class="se">\&#39;</span><span class="s1"> + runs.map(r =&gt; {</span><span class="se">\n</span><span class="s1">            const config = r.config || </span><span class="si">{}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">            const strategies = config.strategies ? config.strategies.join(</span><span class="se">\&#39;</span><span class="s1">, </span><span class="se">\&#39;</span><span class="s1">) : r.name;</span><span class="se">\n</span><span class="s1">            const timePart = r.run_id.slice(11, 19).replace(/-/g, </span><span class="se">\&#39;</span><span class="s1">:</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">            const selected = r.run_id === selectedRunId ? </span><span class="se">\&#39;</span><span class="s1">selected</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">            return `&lt;option value=&quot;$</span><span class="si">{r.run_id}</span><span class="s1">&quot; $</span><span class="si">{selected}</span><span class="s1">&gt;$</span><span class="si">{strategies}</span><span class="s1"> ($</span><span class="si">{timePart}</span><span class="s1">)&lt;/option&gt;`;</span><span class="se">\n</span><span class="s1">        }).join(</span><span class="se">\&#39;\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const symbolFilterValue = settings.symbolFilter || </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    container.innerHTML = `</span><span class="se">\n</span><span class="s1">        &lt;div class=&quot;settings-row&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;settings-group&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;label&gt;Run:&lt;/label&gt;</span><span class="se">\n</span><span class="s1">                &lt;select id=&quot;run-select&quot; onchange=&quot;onRunChange()&quot;&gt;$</span><span class="si">{runOptions}</span><span class="s1">&lt;/select&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;settings-group&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;label&gt;Symbol:&lt;/label&gt;</span><span class="se">\n</span><span class="s1">                &lt;input type=&quot;text&quot; id=&quot;symbol-filter&quot; placeholder=&quot;Filter symbols...&quot; value=&quot;$</span><span class="si">{symbolFilterValue}</span><span class="s1">&quot; oninput=&quot;filterData()&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;settings-divider&quot;&gt;&lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;settings-group&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;input type=&quot;radio&quot; id=&quot;mode-bars&quot; name=&quot;split-mode&quot; value=&quot;bars&quot; $</span><span class="si">{barsChecked}</span><span class="s1"> onchange=&quot;onModeChange(</span><span class="se">\&#39;</span><span class="s1">bars</span><span class="se">\&#39;</span><span class="s1">)&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;label for=&quot;mode-bars&quot;&gt;By Bars&lt;/label&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;settings-group&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;label&gt;Bars per chart:&lt;/label&gt;</span><span class="se">\n</span><span class="s1">                &lt;input type=&quot;number&quot; id=&quot;bars-per-chart&quot; value=&quot;$</span><span class="si">{settings.barsPerChart}</span><span class="s1">&quot; min=&quot;10&quot; max=&quot;5000&quot; $</span><span class="si">{barsDisabled}</span><span class="s1"> onchange=&quot;onBarsPerChartChange(this.value)&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;settings-divider&quot;&gt;&lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;settings-group&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;input type=&quot;radio&quot; id=&quot;mode-time&quot; name=&quot;split-mode&quot; value=&quot;time&quot; $</span><span class="si">{timeChecked}</span><span class="s1"> onchange=&quot;onModeChange(</span><span class="se">\&#39;</span><span class="s1">time</span><span class="se">\&#39;</span><span class="s1">)&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;label for=&quot;mode-time&quot;&gt;By Time&lt;/label&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;settings-group&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;label&gt;Period:&lt;/label&gt;</span><span class="se">\n</span><span class="s1">                &lt;select id=&quot;time-period&quot; $</span><span class="si">{timeDisabled}</span><span class="s1"> onchange=&quot;onTimePeriodChange(this.value)&quot;&gt;$</span><span class="si">{periodOptions}</span><span class="s1">&lt;/select&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;settings-divider&quot;&gt;&lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;settings-group&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;input type=&quot;radio&quot; id=&quot;mode-trades&quot; name=&quot;split-mode&quot; value=&quot;trades&quot; $</span><span class="si">{tradesChecked}</span><span class="s1"> onchange=&quot;onModeChange(</span><span class="se">\&#39;</span><span class="s1">trades</span><span class="se">\&#39;</span><span class="s1">)&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;label for=&quot;mode-trades&quot;&gt;By Trades&lt;/label&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;settings-divider&quot;&gt;&lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;settings-group&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;label&gt;Overlap:&lt;/label&gt;</span><span class="se">\n</span><span class="s1">                &lt;input type=&quot;number&quot; id=&quot;overlap&quot; value=&quot;$</span><span class="si">{settings.overlap}</span><span class="s1">&quot; min=&quot;0&quot; max=&quot;1000&quot; $</span><span class="si">{overlapDisabled}</span><span class="s1"> onchange=&quot;onOverlapChange(this.value)&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;settings-divider&quot;&gt;&lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;div class=&quot;settings-group&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;label&gt;Chart Type:&lt;/label&gt;</span><span class="se">\n</span><span class="s1">                &lt;select id=&quot;chart-type&quot; onchange=&quot;onChartTypeChange(this.value)&quot;&gt;$</span><span class="si">{chartTypeOptions}</span><span class="s1">&lt;/select&gt;</span><span class="se">\n</span><span class="s1">            &lt;/div&gt;</span><span class="se">\n</span><span class="s1">        &lt;/div&gt;</span><span class="se">\n</span><span class="s1">    `;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function onModeChange(mode) {</span><span class="se">\n</span><span class="s1">    settings.mode = mode;</span><span class="se">\n</span><span class="s1">    saveSettings();</span><span class="se">\n</span><span class="s1">    renderSettings();</span><span class="se">\n</span><span class="s1">    if (selectedRunId) loadData(selectedRunId);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function onBarsPerChartChange(value) {</span><span class="se">\n</span><span class="s1">    settings.barsPerChart = parseInt(value) || 500;</span><span class="se">\n</span><span class="s1">    saveSettings();</span><span class="se">\n</span><span class="s1">    if (selectedRunId) loadData(selectedRunId);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function onTimePeriodChange(value) {</span><span class="se">\n</span><span class="s1">    settings.timePeriod = value;</span><span class="se">\n</span><span class="s1">    saveSettings();</span><span class="se">\n</span><span class="s1">    if (selectedRunId) loadData(selectedRunId);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function onOverlapChange(value) {</span><span class="se">\n</span><span class="s1">    settings.overlap = parseInt(value) || 0;</span><span class="se">\n</span><span class="s1">    saveSettings();</span><span class="se">\n</span><span class="s1">    if (selectedRunId) loadData(selectedRunId);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function onChartTypeChange(value) {</span><span class="se">\n</span><span class="s1">    settings.chartType = value;</span><span class="se">\n</span><span class="s1">    saveSettings();</span><span class="se">\n</span><span class="s1">    if (selectedRunId) loadData(selectedRunId);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">async function loadData(runId) {</span><span class="se">\n</span><span class="s1">    const container = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">charts-content</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    container.innerHTML = </span><span class="se">\&#39;</span><span class="s1">&lt;div class=&quot;empty-content&quot;&gt;&lt;p&gt;Loading...&lt;/p&gt;&lt;/div&gt;</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    if (settings.mode === </span><span class="se">\&#39;</span><span class="s1">trades</span><span class="se">\&#39;</span><span class="s1">) {</span><span class="se">\n</span><span class="s1">        const res = await fetch(`/api/runs/$</span><span class="si">{runId}</span><span class="s1">/roundtrips`);</span><span class="se">\n</span><span class="s1">        const data = await res.json();</span><span class="se">\n</span><span class="s1">        roundtrips = data.roundtrips || [];</span><span class="se">\n</span><span class="s1">        const tradeNums = </span><span class="si">{}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        roundtrips.forEach(rt =&gt; {</span><span class="se">\n</span><span class="s1">            tradeNums[rt.symbol] = (tradeNums[rt.symbol] || 0) + 1;</span><span class="se">\n</span><span class="s1">            rt.trade_num = tradeNums[rt.symbol];</span><span class="se">\n</span><span class="s1">        });</span><span class="se">\n</span><span class="s1">        sortColumn = </span><span class="se">\&#39;</span><span class="s1">symbol</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        sortAsc = true;</span><span class="se">\n</span><span class="s1">        renderSettings();</span><span class="se">\n</span><span class="s1">        filterData();</span><span class="se">\n</span><span class="s1">    } else {</span><span class="se">\n</span><span class="s1">        const params = new URLSearchParams({</span><span class="se">\n</span><span class="s1">            mode: settings.mode,</span><span class="se">\n</span><span class="s1">            bars_per_chart: settings.barsPerChart,</span><span class="se">\n</span><span class="s1">            overlap: settings.overlap,</span><span class="se">\n</span><span class="s1">            time_period: settings.timePeriod</span><span class="se">\n</span><span class="s1">        });</span><span class="se">\n</span><span class="s1">        const res = await fetch(`/api/runs/$</span><span class="si">{runId}</span><span class="s1">/chart-segments?$</span><span class="si">{params}</span><span class="s1">`);</span><span class="se">\n</span><span class="s1">        const data = await res.json();</span><span class="se">\n</span><span class="s1">        segments = data.segments || [];</span><span class="se">\n</span><span class="s1">        barPeriod = data.bar_period;</span><span class="se">\n</span><span class="s1">        sortColumn = </span><span class="se">\&#39;</span><span class="s1">symbol</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        sortAsc = true;</span><span class="se">\n</span><span class="s1">        renderSettings();</span><span class="se">\n</span><span class="s1">        filterData();</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function filterData() {</span><span class="se">\n</span><span class="s1">    const query = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">symbol-filter</span><span class="se">\&#39;</span><span class="s1">).value.toLowerCase().trim();</span><span class="se">\n</span><span class="s1">    settings.symbolFilter = query;</span><span class="se">\n</span><span class="s1">    if (settings.mode === </span><span class="se">\&#39;</span><span class="s1">trades</span><span class="se">\&#39;</span><span class="s1">) {</span><span class="se">\n</span><span class="s1">        if (!query) {</span><span class="se">\n</span><span class="s1">            filteredRoundtrips = [...roundtrips];</span><span class="se">\n</span><span class="s1">        } else {</span><span class="se">\n</span><span class="s1">            const terms = query.split(/[,</span><span class="se">\\</span><span class="s1">s]+/).filter(t =&gt; t.length &gt; 0);</span><span class="se">\n</span><span class="s1">            filteredRoundtrips = roundtrips.filter(rt =&gt;</span><span class="se">\n</span><span class="s1">                terms.some(term =&gt; rt.symbol.toLowerCase().includes(term))</span><span class="se">\n</span><span class="s1">            );</span><span class="se">\n</span><span class="s1">        }</span><span class="se">\n</span><span class="s1">    } else {</span><span class="se">\n</span><span class="s1">        if (!query) {</span><span class="se">\n</span><span class="s1">            filteredSegments = [...segments];</span><span class="se">\n</span><span class="s1">        } else {</span><span class="se">\n</span><span class="s1">            const terms = query.split(/[,</span><span class="se">\\</span><span class="s1">s]+/).filter(t =&gt; t.length &gt; 0);</span><span class="se">\n</span><span class="s1">            filteredSegments = segments.filter(seg =&gt;</span><span class="se">\n</span><span class="s1">                terms.some(term =&gt; seg.symbol.toLowerCase().includes(term))</span><span class="se">\n</span><span class="s1">            );</span><span class="se">\n</span><span class="s1">        }</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    sortAndRender();</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function sortBy(column) {</span><span class="se">\n</span><span class="s1">    if (sortColumn === column) {</span><span class="se">\n</span><span class="s1">        sortAsc = !sortAsc;</span><span class="se">\n</span><span class="s1">    } else {</span><span class="se">\n</span><span class="s1">        sortColumn = column;</span><span class="se">\n</span><span class="s1">        sortAsc = true;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    sortAndRender();</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function sortAndRender() {</span><span class="se">\n</span><span class="s1">    if (settings.mode === </span><span class="se">\&#39;</span><span class="s1">trades</span><span class="se">\&#39;</span><span class="s1">) {</span><span class="se">\n</span><span class="s1">        filteredRoundtrips.sort((a, b) =&gt; {</span><span class="se">\n</span><span class="s1">            let valA = a[sortColumn];</span><span class="se">\n</span><span class="s1">            let valB = b[sortColumn];</span><span class="se">\n</span><span class="s1">            if (typeof valA === </span><span class="se">\&#39;</span><span class="s1">string</span><span class="se">\&#39;</span><span class="s1">) {</span><span class="se">\n</span><span class="s1">                valA = valA.toLowerCase();</span><span class="se">\n</span><span class="s1">                valB = valB.toLowerCase();</span><span class="se">\n</span><span class="s1">            }</span><span class="se">\n</span><span class="s1">            if (valA &lt; valB) return sortAsc ? -1 : 1;</span><span class="se">\n</span><span class="s1">            if (valA &gt; valB) return sortAsc ? 1 : -1;</span><span class="se">\n</span><span class="s1">            return 0;</span><span class="se">\n</span><span class="s1">        });</span><span class="se">\n</span><span class="s1">        renderTradesTable();</span><span class="se">\n</span><span class="s1">    } else {</span><span class="se">\n</span><span class="s1">        filteredSegments.sort((a, b) =&gt; {</span><span class="se">\n</span><span class="s1">            let valA = a[sortColumn];</span><span class="se">\n</span><span class="s1">            let valB = b[sortColumn];</span><span class="se">\n</span><span class="s1">            if (typeof valA === </span><span class="se">\&#39;</span><span class="s1">string</span><span class="se">\&#39;</span><span class="s1">) {</span><span class="se">\n</span><span class="s1">                valA = valA.toLowerCase();</span><span class="se">\n</span><span class="s1">                valB = valB.toLowerCase();</span><span class="se">\n</span><span class="s1">            }</span><span class="se">\n</span><span class="s1">            if (valA &lt; valB) return sortAsc ? -1 : 1;</span><span class="se">\n</span><span class="s1">            if (valA &gt; valB) return sortAsc ? 1 : -1;</span><span class="se">\n</span><span class="s1">            return 0;</span><span class="se">\n</span><span class="s1">        });</span><span class="se">\n</span><span class="s1">        renderSegmentsTable();</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function formatTimestamp(ns) {</span><span class="se">\n</span><span class="s1">    const ms = BigInt(ns) / BigInt(1000000);</span><span class="se">\n</span><span class="s1">    const date = new Date(Number(ms));</span><span class="se">\n</span><span class="s1">    return date.toISOString().slice(0, 16).replace(</span><span class="se">\&#39;</span><span class="s1">T</span><span class="se">\&#39;</span><span class="s1">, </span><span class="se">\&#39;</span><span class="s1"> </span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function renderSegmentsTable() {</span><span class="se">\n</span><span class="s1">    const container = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">charts-content</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    if (segments.length === 0) {</span><span class="se">\n</span><span class="s1">        container.innerHTML = </span><span class="se">\&#39;</span><span class="s1">&lt;div class=&quot;empty-table&quot;&gt;&lt;p&gt;No chart segments found&lt;/p&gt;&lt;/div&gt;</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        return;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    const columns = [</span><span class="se">\n</span><span class="s1">        {key: </span><span class="se">\&#39;</span><span class="s1">symbol</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">Symbol</span><span class="se">\&#39;</span><span class="s1">},</span><span class="se">\n</span><span class="s1">        {key: </span><span class="se">\&#39;</span><span class="s1">segment_num</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">Segment</span><span class="se">\&#39;</span><span class="s1">},</span><span class="se">\n</span><span class="s1">        {key: </span><span class="se">\&#39;</span><span class="s1">start_ts</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">Start</span><span class="se">\&#39;</span><span class="s1">},</span><span class="se">\n</span><span class="s1">        {key: </span><span class="se">\&#39;</span><span class="s1">end_ts</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">End</span><span class="se">\&#39;</span><span class="s1">},</span><span class="se">\n</span><span class="s1">        {key: </span><span class="se">\&#39;</span><span class="s1">bar_count</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">Bars</span><span class="se">\&#39;</span><span class="s1">},</span><span class="se">\n</span><span class="s1">    ];</span><span class="se">\n</span><span class="s1">    const headerHtml = columns.map(c =&gt; {</span><span class="se">\n</span><span class="s1">        const isSorted = sortColumn === c.key;</span><span class="se">\n</span><span class="s1">        const arrow = isSorted ? (sortAsc ? </span><span class="se">\&#39;</span><span class="s1"></span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;</span><span class="s1"></span><span class="se">\&#39;</span><span class="s1">) : </span><span class="se">\&#39;</span><span class="s1"></span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        return `&lt;th class=&quot;${isSorted ? </span><span class="se">\&#39;</span><span class="s1">sorted</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">}&quot; onclick=&quot;sortBy(</span><span class="se">\&#39;</span><span class="s1">$</span><span class="si">{c.key}</span><span class="se">\&#39;</span><span class="s1">)&quot;&gt;$</span><span class="si">{c.label}</span><span class="s1">&lt;span class=&quot;sort-icon&quot;&gt;$</span><span class="si">{arrow}</span><span class="s1">&lt;/span&gt;&lt;/th&gt;`;</span><span class="se">\n</span><span class="s1">    }).join(</span><span class="se">\&#39;\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const rowsHtml = filteredSegments.map((seg, idx) =&gt; {</span><span class="se">\n</span><span class="s1">        const displayStart = seg.period_start_ns || seg.start_ts;</span><span class="se">\n</span><span class="s1">        const displayEnd = seg.period_end_ns || seg.end_ts;</span><span class="se">\n</span><span class="s1">        return `&lt;tr class=&quot;data-row&quot; onclick=&quot;toggleChart($</span><span class="si">{idx}</span><span class="s1">)&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;td class=&quot;symbol&quot;&gt;$</span><span class="si">{seg.symbol}</span><span class="s1">&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td class=&quot;number&quot;&gt;$</span><span class="si">{seg.segment_num}</span><span class="s1">&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td&gt;${formatTimestamp(displayStart)}&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td&gt;${formatTimestamp(displayEnd)}&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td class=&quot;number&quot;&gt;$</span><span class="si">{seg.bar_count}</span><span class="s1">&lt;/td&gt;</span><span class="se">\n</span><span class="s1">        &lt;/tr&gt;</span><span class="se">\n</span><span class="s1">        &lt;tr class=&quot;chart-row&quot; id=&quot;chart-row-$</span><span class="si">{idx}</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;td colspan=&quot;5&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;chart-container&quot; id=&quot;chart-container-$</span><span class="si">{idx}</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">                    &lt;div class=&quot;chart-loading&quot;&gt;Loading chart...&lt;/div&gt;</span><span class="se">\n</span><span class="s1">                &lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;/td&gt;</span><span class="se">\n</span><span class="s1">        &lt;/tr&gt;`;</span><span class="se">\n</span><span class="s1">    }).join(</span><span class="se">\&#39;\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    container.innerHTML = `</span><span class="se">\n</span><span class="s1">        &lt;div class=&quot;segments-table-container&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;table class=&quot;segments-table&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;thead&gt;&lt;tr&gt;$</span><span class="si">{headerHtml}</span><span class="s1">&lt;/tr&gt;&lt;/thead&gt;</span><span class="se">\n</span><span class="s1">                &lt;tbody&gt;$</span><span class="si">{rowsHtml}</span><span class="s1">&lt;/tbody&gt;</span><span class="se">\n</span><span class="s1">            &lt;/table&gt;</span><span class="se">\n</span><span class="s1">        &lt;/div&gt;</span><span class="se">\n</span><span class="s1">    `;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">function renderTradesTable() {</span><span class="se">\n</span><span class="s1">    const container = document.getElementById(</span><span class="se">\&#39;</span><span class="s1">charts-content</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    if (roundtrips.length === 0) {</span><span class="se">\n</span><span class="s1">        container.innerHTML = </span><span class="se">\&#39;</span><span class="s1">&lt;div class=&quot;empty-table&quot;&gt;&lt;p&gt;No round-trip trades found&lt;/p&gt;&lt;/div&gt;</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        return;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    const columns = [</span><span class="se">\n</span><span class="s1">        {key: </span><span class="se">\&#39;</span><span class="s1">symbol</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">Symbol</span><span class="se">\&#39;</span><span class="s1">},</span><span class="se">\n</span><span class="s1">        {key: </span><span class="se">\&#39;</span><span class="s1">trade_num</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">#</span><span class="se">\&#39;</span><span class="s1">},</span><span class="se">\n</span><span class="s1">        {key: </span><span class="se">\&#39;</span><span class="s1">direction</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">Direction</span><span class="se">\&#39;</span><span class="s1">},</span><span class="se">\n</span><span class="s1">        {key: </span><span class="se">\&#39;</span><span class="s1">duration_bars</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">Bars</span><span class="se">\&#39;</span><span class="s1">},</span><span class="se">\n</span><span class="s1">        {key: </span><span class="se">\&#39;</span><span class="s1">max_position</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">Max Position</span><span class="se">\&#39;</span><span class="s1">},</span><span class="se">\n</span><span class="s1">        {key: </span><span class="se">\&#39;</span><span class="s1">high_watermark</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">High Watermark</span><span class="se">\&#39;</span><span class="s1">},</span><span class="se">\n</span><span class="s1">        {key: </span><span class="se">\&#39;</span><span class="s1">low_watermark</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">Low Watermark</span><span class="se">\&#39;</span><span class="s1">},</span><span class="se">\n</span><span class="s1">        {key: </span><span class="se">\&#39;</span><span class="s1">max_drawdown</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">Max Drawdown</span><span class="se">\&#39;</span><span class="s1">},</span><span class="se">\n</span><span class="s1">        {key: </span><span class="se">\&#39;</span><span class="s1">pnl_before_commission</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">PnL (Gross)</span><span class="se">\&#39;</span><span class="s1">},</span><span class="se">\n</span><span class="s1">        {key: </span><span class="se">\&#39;</span><span class="s1">pnl_after_commission</span><span class="se">\&#39;</span><span class="s1">, label: </span><span class="se">\&#39;</span><span class="s1">PnL (Net)</span><span class="se">\&#39;</span><span class="s1">},</span><span class="se">\n</span><span class="s1">    ];</span><span class="se">\n</span><span class="s1">    const headerHtml = columns.map(c =&gt; {</span><span class="se">\n</span><span class="s1">        const isSorted = sortColumn === c.key;</span><span class="se">\n</span><span class="s1">        const arrow = isSorted ? (sortAsc ? </span><span class="se">\&#39;</span><span class="s1"></span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;</span><span class="s1"></span><span class="se">\&#39;</span><span class="s1">) : </span><span class="se">\&#39;</span><span class="s1"></span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        return `&lt;th class=&quot;${isSorted ? </span><span class="se">\&#39;</span><span class="s1">sorted</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">}&quot; onclick=&quot;sortBy(</span><span class="se">\&#39;</span><span class="s1">$</span><span class="si">{c.key}</span><span class="se">\&#39;</span><span class="s1">)&quot;&gt;$</span><span class="si">{c.label}</span><span class="s1">&lt;span class=&quot;sort-icon&quot;&gt;$</span><span class="si">{arrow}</span><span class="s1">&lt;/span&gt;&lt;/th&gt;`;</span><span class="se">\n</span><span class="s1">    }).join(</span><span class="se">\&#39;\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const rowsHtml = filteredRoundtrips.map((rt, idx) =&gt; {</span><span class="se">\n</span><span class="s1">        const dirClass = rt.direction.toLowerCase();</span><span class="se">\n</span><span class="s1">        const pnlGrossClass = rt.pnl_before_commission &gt;= 0 ? </span><span class="se">\&#39;</span><span class="s1">positive</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;</span><span class="s1">negative</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        const pnlNetClass = rt.pnl_after_commission &gt;= 0 ? </span><span class="se">\&#39;</span><span class="s1">positive</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;</span><span class="s1">negative</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        const pnlGrossSign = rt.pnl_before_commission &gt;= 0 ? </span><span class="se">\&#39;</span><span class="s1">+</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        const pnlNetSign = rt.pnl_after_commission &gt;= 0 ? </span><span class="se">\&#39;</span><span class="s1">+</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        const hwmClass = rt.high_watermark &gt;= 0 ? </span><span class="se">\&#39;</span><span class="s1">positive</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;</span><span class="s1">negative</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        const hwmSign = rt.high_watermark &gt;= 0 ? </span><span class="se">\&#39;</span><span class="s1">+</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        const lwmClass = rt.low_watermark &gt;= 0 ? </span><span class="se">\&#39;</span><span class="s1">positive</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;</span><span class="s1">negative</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        const lwmSign = rt.low_watermark &gt;= 0 ? </span><span class="se">\&#39;</span><span class="s1">+</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        const mddClass = rt.max_drawdown &gt; 0 ? </span><span class="se">\&#39;</span><span class="s1">negative</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        return `&lt;tr class=&quot;data-row&quot; onclick=&quot;toggleChart($</span><span class="si">{idx}</span><span class="s1">)&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;td class=&quot;symbol&quot;&gt;$</span><span class="si">{rt.symbol}</span><span class="s1">&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td&gt;$</span><span class="si">{rt.trade_num}</span><span class="s1">&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td class=&quot;direction $</span><span class="si">{dirClass}</span><span class="s1">&quot;&gt;$</span><span class="si">{rt.direction}</span><span class="s1">&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td&gt;$</span><span class="si">{rt.duration_bars}</span><span class="s1">&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td&gt;$</span><span class="si">{rt.max_position}</span><span class="s1">&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td class=&quot;pnl $</span><span class="si">{hwmClass}</span><span class="s1">&quot;&gt;$</span><span class="si">{hwmSign}</span><span class="s1">${rt.high_watermark.toFixed(2)}&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td class=&quot;pnl $</span><span class="si">{lwmClass}</span><span class="s1">&quot;&gt;$</span><span class="si">{lwmSign}</span><span class="s1">${rt.low_watermark.toFixed(2)}&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td class=&quot;pnl $</span><span class="si">{mddClass}</span><span class="s1">&quot;&gt;${rt.max_drawdown &gt; 0 ? </span><span class="se">\&#39;</span><span class="s1">-</span><span class="se">\&#39;</span><span class="s1"> : </span><span class="se">\&#39;\&#39;</span><span class="s1">}${rt.max_drawdown.toFixed(2)}&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td class=&quot;pnl $</span><span class="si">{pnlGrossClass}</span><span class="s1">&quot;&gt;$</span><span class="si">{pnlGrossSign}</span><span class="s1">${rt.pnl_before_commission.toFixed(2)}&lt;/td&gt;</span><span class="se">\n</span><span class="s1">            &lt;td class=&quot;pnl $</span><span class="si">{pnlNetClass}</span><span class="s1">&quot;&gt;$</span><span class="si">{pnlNetSign}</span><span class="s1">${rt.pnl_after_commission.toFixed(2)}&lt;/td&gt;</span><span class="se">\n</span><span class="s1">        &lt;/tr&gt;</span><span class="se">\n</span><span class="s1">        &lt;tr class=&quot;chart-row&quot; id=&quot;chart-row-$</span><span class="si">{idx}</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;td colspan=&quot;10&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;div class=&quot;chart-container&quot; id=&quot;chart-container-$</span><span class="si">{idx}</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">                    &lt;div class=&quot;chart-loading&quot;&gt;Loading chart...&lt;/div&gt;</span><span class="se">\n</span><span class="s1">                &lt;/div&gt;</span><span class="se">\n</span><span class="s1">            &lt;/td&gt;</span><span class="se">\n</span><span class="s1">        &lt;/tr&gt;`;</span><span class="se">\n</span><span class="s1">    }).join(</span><span class="se">\&#39;\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    container.innerHTML = `</span><span class="se">\n</span><span class="s1">        &lt;div class=&quot;trades-table-container&quot;&gt;</span><span class="se">\n</span><span class="s1">            &lt;table class=&quot;trades-table&quot;&gt;</span><span class="se">\n</span><span class="s1">                &lt;thead&gt;&lt;tr&gt;$</span><span class="si">{headerHtml}</span><span class="s1">&lt;/tr&gt;&lt;/thead&gt;</span><span class="se">\n</span><span class="s1">                &lt;tbody&gt;$</span><span class="si">{rowsHtml}</span><span class="s1">&lt;/tbody&gt;</span><span class="se">\n</span><span class="s1">            &lt;/table&gt;</span><span class="se">\n</span><span class="s1">        &lt;/div&gt;</span><span class="se">\n</span><span class="s1">    `;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">const chartCache = </span><span class="si">{}</span><span class="s1">;</span><span class="se">\n\n</span><span class="s1">function toggleChart(idx) {</span><span class="se">\n</span><span class="s1">    const chartRow = document.getElementById(`chart-row-$</span><span class="si">{idx}</span><span class="s1">`);</span><span class="se">\n</span><span class="s1">    if (chartRow.classList.contains(</span><span class="se">\&#39;</span><span class="s1">expanded</span><span class="se">\&#39;</span><span class="s1">)) {</span><span class="se">\n</span><span class="s1">        chartRow.classList.remove(</span><span class="se">\&#39;</span><span class="s1">expanded</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">        return;</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    chartRow.classList.add(</span><span class="se">\&#39;</span><span class="s1">expanded</span><span class="se">\&#39;</span><span class="s1">);</span><span class="se">\n</span><span class="s1">    const container = document.getElementById(`chart-container-$</span><span class="si">{idx}</span><span class="s1">`);</span><span class="se">\n</span><span class="s1">    let url, cacheKey;</span><span class="se">\n</span><span class="s1">    if (settings.mode === </span><span class="se">\&#39;</span><span class="s1">trades</span><span class="se">\&#39;</span><span class="s1">) {</span><span class="se">\n</span><span class="s1">        const rt = filteredRoundtrips[idx];</span><span class="se">\n</span><span class="s1">        cacheKey = `$</span><span class="si">{selectedRunId}</span><span class="s1">_trade_$</span><span class="si">{rt.symbol}</span><span class="s1">_$</span><span class="si">{rt.entry_ts}</span><span class="s1">_$</span><span class="si">{rt.exit_ts}</span><span class="s1">_$</span><span class="si">{settings.chartType}</span><span class="s1">`;</span><span class="se">\n</span><span class="s1">        if (chartCache[cacheKey]) {</span><span class="se">\n</span><span class="s1">            container.innerHTML = `&lt;img src=&quot;$</span><span class="si">{chartCache[cacheKey]}</span><span class="s1">&quot; alt=&quot;Chart&quot;&gt;`;</span><span class="se">\n</span><span class="s1">            return;</span><span class="se">\n</span><span class="s1">        }</span><span class="se">\n</span><span class="s1">        container.innerHTML = </span><span class="se">\&#39;</span><span class="s1">&lt;div class=&quot;chart-loading&quot;&gt;Loading chart...&lt;/div&gt;</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        url = `/api/runs/$</span><span class="si">{selectedRunId}</span><span class="s1">/chart.png?symbol=${encodeURIComponent(rt.symbol)}&amp;start_ns=$</span><span class="si">{rt.entry_ts}</span><span class="s1">&amp;end_ns=$</span><span class="si">{rt.exit_ts}</span><span class="s1">&amp;direction=$</span><span class="si">{rt.direction}</span><span class="s1">&amp;pnl=$</span><span class="si">{rt.pnl_after_commission}</span><span class="s1">&amp;chart_type=$</span><span class="si">{settings.chartType}</span><span class="s1">`;</span><span class="se">\n</span><span class="s1">    } else {</span><span class="se">\n</span><span class="s1">        const seg = filteredSegments[idx];</span><span class="se">\n</span><span class="s1">        cacheKey = `$</span><span class="si">{selectedRunId}</span><span class="s1">_$</span><span class="si">{seg.symbol}</span><span class="s1">_$</span><span class="si">{seg.start_ts}</span><span class="s1">_$</span><span class="si">{seg.end_ts}</span><span class="s1">_$</span><span class="si">{settings.chartType}</span><span class="s1">`;</span><span class="se">\n</span><span class="s1">        if (chartCache[cacheKey]) {</span><span class="se">\n</span><span class="s1">            container.innerHTML = `&lt;img src=&quot;$</span><span class="si">{chartCache[cacheKey]}</span><span class="s1">&quot; alt=&quot;Chart&quot;&gt;`;</span><span class="se">\n</span><span class="s1">            return;</span><span class="se">\n</span><span class="s1">        }</span><span class="se">\n</span><span class="s1">        container.innerHTML = </span><span class="se">\&#39;</span><span class="s1">&lt;div class=&quot;chart-loading&quot;&gt;Loading chart...&lt;/div&gt;</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        url = `/api/runs/$</span><span class="si">{selectedRunId}</span><span class="s1">/segment-chart.png?symbol=${encodeURIComponent(seg.symbol)}&amp;start_ns=$</span><span class="si">{seg.start_ts}</span><span class="s1">&amp;end_ns=$</span><span class="si">{seg.end_ts}</span><span class="s1">&amp;chart_type=$</span><span class="si">{settings.chartType}</span><span class="s1">`;</span><span class="se">\n</span><span class="s1">        if (seg.period_start_ns &amp;&amp; seg.period_end_ns) {</span><span class="se">\n</span><span class="s1">            url += `&amp;period_start_ns=$</span><span class="si">{seg.period_start_ns}</span><span class="s1">&amp;period_end_ns=$</span><span class="si">{seg.period_end_ns}</span><span class="s1">`;</span><span class="se">\n</span><span class="s1">        }</span><span class="se">\n</span><span class="s1">    }</span><span class="se">\n</span><span class="s1">    const img = new Image();</span><span class="se">\n</span><span class="s1">    img.onload = () =&gt; {</span><span class="se">\n</span><span class="s1">        chartCache[cacheKey] = url;</span><span class="se">\n</span><span class="s1">        container.innerHTML = </span><span class="se">\&#39;\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">        container.appendChild(img);</span><span class="se">\n</span><span class="s1">    };</span><span class="se">\n</span><span class="s1">    img.onerror = () =&gt; {</span><span class="se">\n</span><span class="s1">        container.innerHTML = </span><span class="se">\&#39;</span><span class="s1">&lt;div class=&quot;chart-loading&quot;&gt;Failed to load chart&lt;/div&gt;</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">    };</span><span class="se">\n</span><span class="s1">    img.src = url;</span><span class="se">\n</span><span class="s1">    img.alt = </span><span class="se">\&#39;</span><span class="s1">Chart</span><span class="se">\&#39;</span><span class="s1">;</span><span class="se">\n</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">document.addEventListener(</span><span class="se">\&#39;</span><span class="s1">DOMContentLoaded</span><span class="se">\&#39;</span><span class="s1">, () =&gt; {</span><span class="se">\n</span><span class="s1">    loadRuns();</span><span class="se">\n</span><span class="s1">});</span><span class="se">\n</span><span class="s1">&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div><details class="quote" open="open">
<summary>Source code in <code>styles.py</code></summary>
<div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">   1</a></span>
<span class="normal"><a href="#__codelineno-0-2">   2</a></span>
<span class="normal"><a href="#__codelineno-0-3">   3</a></span>
<span class="normal"><a href="#__codelineno-0-4">   4</a></span>
<span class="normal"><a href="#__codelineno-0-5">   5</a></span>
<span class="normal"><a href="#__codelineno-0-6">   6</a></span>
<span class="normal"><a href="#__codelineno-0-7">   7</a></span>
<span class="normal"><a href="#__codelineno-0-8">   8</a></span>
<span class="normal"><a href="#__codelineno-0-9">   9</a></span>
<span class="normal"><a href="#__codelineno-0-10">  10</a></span>
<span class="normal"><a href="#__codelineno-0-11">  11</a></span>
<span class="normal"><a href="#__codelineno-0-12">  12</a></span>
<span class="normal"><a href="#__codelineno-0-13">  13</a></span>
<span class="normal"><a href="#__codelineno-0-14">  14</a></span>
<span class="normal"><a href="#__codelineno-0-15">  15</a></span>
<span class="normal"><a href="#__codelineno-0-16">  16</a></span>
<span class="normal"><a href="#__codelineno-0-17">  17</a></span>
<span class="normal"><a href="#__codelineno-0-18">  18</a></span>
<span class="normal"><a href="#__codelineno-0-19">  19</a></span>
<span class="normal"><a href="#__codelineno-0-20">  20</a></span>
<span class="normal"><a href="#__codelineno-0-21">  21</a></span>
<span class="normal"><a href="#__codelineno-0-22">  22</a></span>
<span class="normal"><a href="#__codelineno-0-23">  23</a></span>
<span class="normal"><a href="#__codelineno-0-24">  24</a></span>
<span class="normal"><a href="#__codelineno-0-25">  25</a></span>
<span class="normal"><a href="#__codelineno-0-26">  26</a></span>
<span class="normal"><a href="#__codelineno-0-27">  27</a></span>
<span class="normal"><a href="#__codelineno-0-28">  28</a></span>
<span class="normal"><a href="#__codelineno-0-29">  29</a></span>
<span class="normal"><a href="#__codelineno-0-30">  30</a></span>
<span class="normal"><a href="#__codelineno-0-31">  31</a></span>
<span class="normal"><a href="#__codelineno-0-32">  32</a></span>
<span class="normal"><a href="#__codelineno-0-33">  33</a></span>
<span class="normal"><a href="#__codelineno-0-34">  34</a></span>
<span class="normal"><a href="#__codelineno-0-35">  35</a></span>
<span class="normal"><a href="#__codelineno-0-36">  36</a></span>
<span class="normal"><a href="#__codelineno-0-37">  37</a></span>
<span class="normal"><a href="#__codelineno-0-38">  38</a></span>
<span class="normal"><a href="#__codelineno-0-39">  39</a></span>
<span class="normal"><a href="#__codelineno-0-40">  40</a></span>
<span class="normal"><a href="#__codelineno-0-41">  41</a></span>
<span class="normal"><a href="#__codelineno-0-42">  42</a></span>
<span class="normal"><a href="#__codelineno-0-43">  43</a></span>
<span class="normal"><a href="#__codelineno-0-44">  44</a></span>
<span class="normal"><a href="#__codelineno-0-45">  45</a></span>
<span class="normal"><a href="#__codelineno-0-46">  46</a></span>
<span class="normal"><a href="#__codelineno-0-47">  47</a></span>
<span class="normal"><a href="#__codelineno-0-48">  48</a></span>
<span class="normal"><a href="#__codelineno-0-49">  49</a></span>
<span class="normal"><a href="#__codelineno-0-50">  50</a></span>
<span class="normal"><a href="#__codelineno-0-51">  51</a></span>
<span class="normal"><a href="#__codelineno-0-52">  52</a></span>
<span class="normal"><a href="#__codelineno-0-53">  53</a></span>
<span class="normal"><a href="#__codelineno-0-54">  54</a></span>
<span class="normal"><a href="#__codelineno-0-55">  55</a></span>
<span class="normal"><a href="#__codelineno-0-56">  56</a></span>
<span class="normal"><a href="#__codelineno-0-57">  57</a></span>
<span class="normal"><a href="#__codelineno-0-58">  58</a></span>
<span class="normal"><a href="#__codelineno-0-59">  59</a></span>
<span class="normal"><a href="#__codelineno-0-60">  60</a></span>
<span class="normal"><a href="#__codelineno-0-61">  61</a></span>
<span class="normal"><a href="#__codelineno-0-62">  62</a></span>
<span class="normal"><a href="#__codelineno-0-63">  63</a></span>
<span class="normal"><a href="#__codelineno-0-64">  64</a></span>
<span class="normal"><a href="#__codelineno-0-65">  65</a></span>
<span class="normal"><a href="#__codelineno-0-66">  66</a></span>
<span class="normal"><a href="#__codelineno-0-67">  67</a></span>
<span class="normal"><a href="#__codelineno-0-68">  68</a></span>
<span class="normal"><a href="#__codelineno-0-69">  69</a></span>
<span class="normal"><a href="#__codelineno-0-70">  70</a></span>
<span class="normal"><a href="#__codelineno-0-71">  71</a></span>
<span class="normal"><a href="#__codelineno-0-72">  72</a></span>
<span class="normal"><a href="#__codelineno-0-73">  73</a></span>
<span class="normal"><a href="#__codelineno-0-74">  74</a></span>
<span class="normal"><a href="#__codelineno-0-75">  75</a></span>
<span class="normal"><a href="#__codelineno-0-76">  76</a></span>
<span class="normal"><a href="#__codelineno-0-77">  77</a></span>
<span class="normal"><a href="#__codelineno-0-78">  78</a></span>
<span class="normal"><a href="#__codelineno-0-79">  79</a></span>
<span class="normal"><a href="#__codelineno-0-80">  80</a></span>
<span class="normal"><a href="#__codelineno-0-81">  81</a></span>
<span class="normal"><a href="#__codelineno-0-82">  82</a></span>
<span class="normal"><a href="#__codelineno-0-83">  83</a></span>
<span class="normal"><a href="#__codelineno-0-84">  84</a></span>
<span class="normal"><a href="#__codelineno-0-85">  85</a></span>
<span class="normal"><a href="#__codelineno-0-86">  86</a></span>
<span class="normal"><a href="#__codelineno-0-87">  87</a></span>
<span class="normal"><a href="#__codelineno-0-88">  88</a></span>
<span class="normal"><a href="#__codelineno-0-89">  89</a></span>
<span class="normal"><a href="#__codelineno-0-90">  90</a></span>
<span class="normal"><a href="#__codelineno-0-91">  91</a></span>
<span class="normal"><a href="#__codelineno-0-92">  92</a></span>
<span class="normal"><a href="#__codelineno-0-93">  93</a></span>
<span class="normal"><a href="#__codelineno-0-94">  94</a></span>
<span class="normal"><a href="#__codelineno-0-95">  95</a></span>
<span class="normal"><a href="#__codelineno-0-96">  96</a></span>
<span class="normal"><a href="#__codelineno-0-97">  97</a></span>
<span class="normal"><a href="#__codelineno-0-98">  98</a></span>
<span class="normal"><a href="#__codelineno-0-99">  99</a></span>
<span class="normal"><a href="#__codelineno-0-100"> 100</a></span>
<span class="normal"><a href="#__codelineno-0-101"> 101</a></span>
<span class="normal"><a href="#__codelineno-0-102"> 102</a></span>
<span class="normal"><a href="#__codelineno-0-103"> 103</a></span>
<span class="normal"><a href="#__codelineno-0-104"> 104</a></span>
<span class="normal"><a href="#__codelineno-0-105"> 105</a></span>
<span class="normal"><a href="#__codelineno-0-106"> 106</a></span>
<span class="normal"><a href="#__codelineno-0-107"> 107</a></span>
<span class="normal"><a href="#__codelineno-0-108"> 108</a></span>
<span class="normal"><a href="#__codelineno-0-109"> 109</a></span>
<span class="normal"><a href="#__codelineno-0-110"> 110</a></span>
<span class="normal"><a href="#__codelineno-0-111"> 111</a></span>
<span class="normal"><a href="#__codelineno-0-112"> 112</a></span>
<span class="normal"><a href="#__codelineno-0-113"> 113</a></span>
<span class="normal"><a href="#__codelineno-0-114"> 114</a></span>
<span class="normal"><a href="#__codelineno-0-115"> 115</a></span>
<span class="normal"><a href="#__codelineno-0-116"> 116</a></span>
<span class="normal"><a href="#__codelineno-0-117"> 117</a></span>
<span class="normal"><a href="#__codelineno-0-118"> 118</a></span>
<span class="normal"><a href="#__codelineno-0-119"> 119</a></span>
<span class="normal"><a href="#__codelineno-0-120"> 120</a></span>
<span class="normal"><a href="#__codelineno-0-121"> 121</a></span>
<span class="normal"><a href="#__codelineno-0-122"> 122</a></span>
<span class="normal"><a href="#__codelineno-0-123"> 123</a></span>
<span class="normal"><a href="#__codelineno-0-124"> 124</a></span>
<span class="normal"><a href="#__codelineno-0-125"> 125</a></span>
<span class="normal"><a href="#__codelineno-0-126"> 126</a></span>
<span class="normal"><a href="#__codelineno-0-127"> 127</a></span>
<span class="normal"><a href="#__codelineno-0-128"> 128</a></span>
<span class="normal"><a href="#__codelineno-0-129"> 129</a></span>
<span class="normal"><a href="#__codelineno-0-130"> 130</a></span>
<span class="normal"><a href="#__codelineno-0-131"> 131</a></span>
<span class="normal"><a href="#__codelineno-0-132"> 132</a></span>
<span class="normal"><a href="#__codelineno-0-133"> 133</a></span>
<span class="normal"><a href="#__codelineno-0-134"> 134</a></span>
<span class="normal"><a href="#__codelineno-0-135"> 135</a></span>
<span class="normal"><a href="#__codelineno-0-136"> 136</a></span>
<span class="normal"><a href="#__codelineno-0-137"> 137</a></span>
<span class="normal"><a href="#__codelineno-0-138"> 138</a></span>
<span class="normal"><a href="#__codelineno-0-139"> 139</a></span>
<span class="normal"><a href="#__codelineno-0-140"> 140</a></span>
<span class="normal"><a href="#__codelineno-0-141"> 141</a></span>
<span class="normal"><a href="#__codelineno-0-142"> 142</a></span>
<span class="normal"><a href="#__codelineno-0-143"> 143</a></span>
<span class="normal"><a href="#__codelineno-0-144"> 144</a></span>
<span class="normal"><a href="#__codelineno-0-145"> 145</a></span>
<span class="normal"><a href="#__codelineno-0-146"> 146</a></span>
<span class="normal"><a href="#__codelineno-0-147"> 147</a></span>
<span class="normal"><a href="#__codelineno-0-148"> 148</a></span>
<span class="normal"><a href="#__codelineno-0-149"> 149</a></span>
<span class="normal"><a href="#__codelineno-0-150"> 150</a></span>
<span class="normal"><a href="#__codelineno-0-151"> 151</a></span>
<span class="normal"><a href="#__codelineno-0-152"> 152</a></span>
<span class="normal"><a href="#__codelineno-0-153"> 153</a></span>
<span class="normal"><a href="#__codelineno-0-154"> 154</a></span>
<span class="normal"><a href="#__codelineno-0-155"> 155</a></span>
<span class="normal"><a href="#__codelineno-0-156"> 156</a></span>
<span class="normal"><a href="#__codelineno-0-157"> 157</a></span>
<span class="normal"><a href="#__codelineno-0-158"> 158</a></span>
<span class="normal"><a href="#__codelineno-0-159"> 159</a></span>
<span class="normal"><a href="#__codelineno-0-160"> 160</a></span>
<span class="normal"><a href="#__codelineno-0-161"> 161</a></span>
<span class="normal"><a href="#__codelineno-0-162"> 162</a></span>
<span class="normal"><a href="#__codelineno-0-163"> 163</a></span>
<span class="normal"><a href="#__codelineno-0-164"> 164</a></span>
<span class="normal"><a href="#__codelineno-0-165"> 165</a></span>
<span class="normal"><a href="#__codelineno-0-166"> 166</a></span>
<span class="normal"><a href="#__codelineno-0-167"> 167</a></span>
<span class="normal"><a href="#__codelineno-0-168"> 168</a></span>
<span class="normal"><a href="#__codelineno-0-169"> 169</a></span>
<span class="normal"><a href="#__codelineno-0-170"> 170</a></span>
<span class="normal"><a href="#__codelineno-0-171"> 171</a></span>
<span class="normal"><a href="#__codelineno-0-172"> 172</a></span>
<span class="normal"><a href="#__codelineno-0-173"> 173</a></span>
<span class="normal"><a href="#__codelineno-0-174"> 174</a></span>
<span class="normal"><a href="#__codelineno-0-175"> 175</a></span>
<span class="normal"><a href="#__codelineno-0-176"> 176</a></span>
<span class="normal"><a href="#__codelineno-0-177"> 177</a></span>
<span class="normal"><a href="#__codelineno-0-178"> 178</a></span>
<span class="normal"><a href="#__codelineno-0-179"> 179</a></span>
<span class="normal"><a href="#__codelineno-0-180"> 180</a></span>
<span class="normal"><a href="#__codelineno-0-181"> 181</a></span>
<span class="normal"><a href="#__codelineno-0-182"> 182</a></span>
<span class="normal"><a href="#__codelineno-0-183"> 183</a></span>
<span class="normal"><a href="#__codelineno-0-184"> 184</a></span>
<span class="normal"><a href="#__codelineno-0-185"> 185</a></span>
<span class="normal"><a href="#__codelineno-0-186"> 186</a></span>
<span class="normal"><a href="#__codelineno-0-187"> 187</a></span>
<span class="normal"><a href="#__codelineno-0-188"> 188</a></span>
<span class="normal"><a href="#__codelineno-0-189"> 189</a></span>
<span class="normal"><a href="#__codelineno-0-190"> 190</a></span>
<span class="normal"><a href="#__codelineno-0-191"> 191</a></span>
<span class="normal"><a href="#__codelineno-0-192"> 192</a></span>
<span class="normal"><a href="#__codelineno-0-193"> 193</a></span>
<span class="normal"><a href="#__codelineno-0-194"> 194</a></span>
<span class="normal"><a href="#__codelineno-0-195"> 195</a></span>
<span class="normal"><a href="#__codelineno-0-196"> 196</a></span>
<span class="normal"><a href="#__codelineno-0-197"> 197</a></span>
<span class="normal"><a href="#__codelineno-0-198"> 198</a></span>
<span class="normal"><a href="#__codelineno-0-199"> 199</a></span>
<span class="normal"><a href="#__codelineno-0-200"> 200</a></span>
<span class="normal"><a href="#__codelineno-0-201"> 201</a></span>
<span class="normal"><a href="#__codelineno-0-202"> 202</a></span>
<span class="normal"><a href="#__codelineno-0-203"> 203</a></span>
<span class="normal"><a href="#__codelineno-0-204"> 204</a></span>
<span class="normal"><a href="#__codelineno-0-205"> 205</a></span>
<span class="normal"><a href="#__codelineno-0-206"> 206</a></span>
<span class="normal"><a href="#__codelineno-0-207"> 207</a></span>
<span class="normal"><a href="#__codelineno-0-208"> 208</a></span>
<span class="normal"><a href="#__codelineno-0-209"> 209</a></span>
<span class="normal"><a href="#__codelineno-0-210"> 210</a></span>
<span class="normal"><a href="#__codelineno-0-211"> 211</a></span>
<span class="normal"><a href="#__codelineno-0-212"> 212</a></span>
<span class="normal"><a href="#__codelineno-0-213"> 213</a></span>
<span class="normal"><a href="#__codelineno-0-214"> 214</a></span>
<span class="normal"><a href="#__codelineno-0-215"> 215</a></span>
<span class="normal"><a href="#__codelineno-0-216"> 216</a></span>
<span class="normal"><a href="#__codelineno-0-217"> 217</a></span>
<span class="normal"><a href="#__codelineno-0-218"> 218</a></span>
<span class="normal"><a href="#__codelineno-0-219"> 219</a></span>
<span class="normal"><a href="#__codelineno-0-220"> 220</a></span>
<span class="normal"><a href="#__codelineno-0-221"> 221</a></span>
<span class="normal"><a href="#__codelineno-0-222"> 222</a></span>
<span class="normal"><a href="#__codelineno-0-223"> 223</a></span>
<span class="normal"><a href="#__codelineno-0-224"> 224</a></span>
<span class="normal"><a href="#__codelineno-0-225"> 225</a></span>
<span class="normal"><a href="#__codelineno-0-226"> 226</a></span>
<span class="normal"><a href="#__codelineno-0-227"> 227</a></span>
<span class="normal"><a href="#__codelineno-0-228"> 228</a></span>
<span class="normal"><a href="#__codelineno-0-229"> 229</a></span>
<span class="normal"><a href="#__codelineno-0-230"> 230</a></span>
<span class="normal"><a href="#__codelineno-0-231"> 231</a></span>
<span class="normal"><a href="#__codelineno-0-232"> 232</a></span>
<span class="normal"><a href="#__codelineno-0-233"> 233</a></span>
<span class="normal"><a href="#__codelineno-0-234"> 234</a></span>
<span class="normal"><a href="#__codelineno-0-235"> 235</a></span>
<span class="normal"><a href="#__codelineno-0-236"> 236</a></span>
<span class="normal"><a href="#__codelineno-0-237"> 237</a></span>
<span class="normal"><a href="#__codelineno-0-238"> 238</a></span>
<span class="normal"><a href="#__codelineno-0-239"> 239</a></span>
<span class="normal"><a href="#__codelineno-0-240"> 240</a></span>
<span class="normal"><a href="#__codelineno-0-241"> 241</a></span>
<span class="normal"><a href="#__codelineno-0-242"> 242</a></span>
<span class="normal"><a href="#__codelineno-0-243"> 243</a></span>
<span class="normal"><a href="#__codelineno-0-244"> 244</a></span>
<span class="normal"><a href="#__codelineno-0-245"> 245</a></span>
<span class="normal"><a href="#__codelineno-0-246"> 246</a></span>
<span class="normal"><a href="#__codelineno-0-247"> 247</a></span>
<span class="normal"><a href="#__codelineno-0-248"> 248</a></span>
<span class="normal"><a href="#__codelineno-0-249"> 249</a></span>
<span class="normal"><a href="#__codelineno-0-250"> 250</a></span>
<span class="normal"><a href="#__codelineno-0-251"> 251</a></span>
<span class="normal"><a href="#__codelineno-0-252"> 252</a></span>
<span class="normal"><a href="#__codelineno-0-253"> 253</a></span>
<span class="normal"><a href="#__codelineno-0-254"> 254</a></span>
<span class="normal"><a href="#__codelineno-0-255"> 255</a></span>
<span class="normal"><a href="#__codelineno-0-256"> 256</a></span>
<span class="normal"><a href="#__codelineno-0-257"> 257</a></span>
<span class="normal"><a href="#__codelineno-0-258"> 258</a></span>
<span class="normal"><a href="#__codelineno-0-259"> 259</a></span>
<span class="normal"><a href="#__codelineno-0-260"> 260</a></span>
<span class="normal"><a href="#__codelineno-0-261"> 261</a></span>
<span class="normal"><a href="#__codelineno-0-262"> 262</a></span>
<span class="normal"><a href="#__codelineno-0-263"> 263</a></span>
<span class="normal"><a href="#__codelineno-0-264"> 264</a></span>
<span class="normal"><a href="#__codelineno-0-265"> 265</a></span>
<span class="normal"><a href="#__codelineno-0-266"> 266</a></span>
<span class="normal"><a href="#__codelineno-0-267"> 267</a></span>
<span class="normal"><a href="#__codelineno-0-268"> 268</a></span>
<span class="normal"><a href="#__codelineno-0-269"> 269</a></span>
<span class="normal"><a href="#__codelineno-0-270"> 270</a></span>
<span class="normal"><a href="#__codelineno-0-271"> 271</a></span>
<span class="normal"><a href="#__codelineno-0-272"> 272</a></span>
<span class="normal"><a href="#__codelineno-0-273"> 273</a></span>
<span class="normal"><a href="#__codelineno-0-274"> 274</a></span>
<span class="normal"><a href="#__codelineno-0-275"> 275</a></span>
<span class="normal"><a href="#__codelineno-0-276"> 276</a></span>
<span class="normal"><a href="#__codelineno-0-277"> 277</a></span>
<span class="normal"><a href="#__codelineno-0-278"> 278</a></span>
<span class="normal"><a href="#__codelineno-0-279"> 279</a></span>
<span class="normal"><a href="#__codelineno-0-280"> 280</a></span>
<span class="normal"><a href="#__codelineno-0-281"> 281</a></span>
<span class="normal"><a href="#__codelineno-0-282"> 282</a></span>
<span class="normal"><a href="#__codelineno-0-283"> 283</a></span>
<span class="normal"><a href="#__codelineno-0-284"> 284</a></span>
<span class="normal"><a href="#__codelineno-0-285"> 285</a></span>
<span class="normal"><a href="#__codelineno-0-286"> 286</a></span>
<span class="normal"><a href="#__codelineno-0-287"> 287</a></span>
<span class="normal"><a href="#__codelineno-0-288"> 288</a></span>
<span class="normal"><a href="#__codelineno-0-289"> 289</a></span>
<span class="normal"><a href="#__codelineno-0-290"> 290</a></span>
<span class="normal"><a href="#__codelineno-0-291"> 291</a></span>
<span class="normal"><a href="#__codelineno-0-292"> 292</a></span>
<span class="normal"><a href="#__codelineno-0-293"> 293</a></span>
<span class="normal"><a href="#__codelineno-0-294"> 294</a></span>
<span class="normal"><a href="#__codelineno-0-295"> 295</a></span>
<span class="normal"><a href="#__codelineno-0-296"> 296</a></span>
<span class="normal"><a href="#__codelineno-0-297"> 297</a></span>
<span class="normal"><a href="#__codelineno-0-298"> 298</a></span>
<span class="normal"><a href="#__codelineno-0-299"> 299</a></span>
<span class="normal"><a href="#__codelineno-0-300"> 300</a></span>
<span class="normal"><a href="#__codelineno-0-301"> 301</a></span>
<span class="normal"><a href="#__codelineno-0-302"> 302</a></span>
<span class="normal"><a href="#__codelineno-0-303"> 303</a></span>
<span class="normal"><a href="#__codelineno-0-304"> 304</a></span>
<span class="normal"><a href="#__codelineno-0-305"> 305</a></span>
<span class="normal"><a href="#__codelineno-0-306"> 306</a></span>
<span class="normal"><a href="#__codelineno-0-307"> 307</a></span>
<span class="normal"><a href="#__codelineno-0-308"> 308</a></span>
<span class="normal"><a href="#__codelineno-0-309"> 309</a></span>
<span class="normal"><a href="#__codelineno-0-310"> 310</a></span>
<span class="normal"><a href="#__codelineno-0-311"> 311</a></span>
<span class="normal"><a href="#__codelineno-0-312"> 312</a></span>
<span class="normal"><a href="#__codelineno-0-313"> 313</a></span>
<span class="normal"><a href="#__codelineno-0-314"> 314</a></span>
<span class="normal"><a href="#__codelineno-0-315"> 315</a></span>
<span class="normal"><a href="#__codelineno-0-316"> 316</a></span>
<span class="normal"><a href="#__codelineno-0-317"> 317</a></span>
<span class="normal"><a href="#__codelineno-0-318"> 318</a></span>
<span class="normal"><a href="#__codelineno-0-319"> 319</a></span>
<span class="normal"><a href="#__codelineno-0-320"> 320</a></span>
<span class="normal"><a href="#__codelineno-0-321"> 321</a></span>
<span class="normal"><a href="#__codelineno-0-322"> 322</a></span>
<span class="normal"><a href="#__codelineno-0-323"> 323</a></span>
<span class="normal"><a href="#__codelineno-0-324"> 324</a></span>
<span class="normal"><a href="#__codelineno-0-325"> 325</a></span>
<span class="normal"><a href="#__codelineno-0-326"> 326</a></span>
<span class="normal"><a href="#__codelineno-0-327"> 327</a></span>
<span class="normal"><a href="#__codelineno-0-328"> 328</a></span>
<span class="normal"><a href="#__codelineno-0-329"> 329</a></span>
<span class="normal"><a href="#__codelineno-0-330"> 330</a></span>
<span class="normal"><a href="#__codelineno-0-331"> 331</a></span>
<span class="normal"><a href="#__codelineno-0-332"> 332</a></span>
<span class="normal"><a href="#__codelineno-0-333"> 333</a></span>
<span class="normal"><a href="#__codelineno-0-334"> 334</a></span>
<span class="normal"><a href="#__codelineno-0-335"> 335</a></span>
<span class="normal"><a href="#__codelineno-0-336"> 336</a></span>
<span class="normal"><a href="#__codelineno-0-337"> 337</a></span>
<span class="normal"><a href="#__codelineno-0-338"> 338</a></span>
<span class="normal"><a href="#__codelineno-0-339"> 339</a></span>
<span class="normal"><a href="#__codelineno-0-340"> 340</a></span>
<span class="normal"><a href="#__codelineno-0-341"> 341</a></span>
<span class="normal"><a href="#__codelineno-0-342"> 342</a></span>
<span class="normal"><a href="#__codelineno-0-343"> 343</a></span>
<span class="normal"><a href="#__codelineno-0-344"> 344</a></span>
<span class="normal"><a href="#__codelineno-0-345"> 345</a></span>
<span class="normal"><a href="#__codelineno-0-346"> 346</a></span>
<span class="normal"><a href="#__codelineno-0-347"> 347</a></span>
<span class="normal"><a href="#__codelineno-0-348"> 348</a></span>
<span class="normal"><a href="#__codelineno-0-349"> 349</a></span>
<span class="normal"><a href="#__codelineno-0-350"> 350</a></span>
<span class="normal"><a href="#__codelineno-0-351"> 351</a></span>
<span class="normal"><a href="#__codelineno-0-352"> 352</a></span>
<span class="normal"><a href="#__codelineno-0-353"> 353</a></span>
<span class="normal"><a href="#__codelineno-0-354"> 354</a></span>
<span class="normal"><a href="#__codelineno-0-355"> 355</a></span>
<span class="normal"><a href="#__codelineno-0-356"> 356</a></span>
<span class="normal"><a href="#__codelineno-0-357"> 357</a></span>
<span class="normal"><a href="#__codelineno-0-358"> 358</a></span>
<span class="normal"><a href="#__codelineno-0-359"> 359</a></span>
<span class="normal"><a href="#__codelineno-0-360"> 360</a></span>
<span class="normal"><a href="#__codelineno-0-361"> 361</a></span>
<span class="normal"><a href="#__codelineno-0-362"> 362</a></span>
<span class="normal"><a href="#__codelineno-0-363"> 363</a></span>
<span class="normal"><a href="#__codelineno-0-364"> 364</a></span>
<span class="normal"><a href="#__codelineno-0-365"> 365</a></span>
<span class="normal"><a href="#__codelineno-0-366"> 366</a></span>
<span class="normal"><a href="#__codelineno-0-367"> 367</a></span>
<span class="normal"><a href="#__codelineno-0-368"> 368</a></span>
<span class="normal"><a href="#__codelineno-0-369"> 369</a></span>
<span class="normal"><a href="#__codelineno-0-370"> 370</a></span>
<span class="normal"><a href="#__codelineno-0-371"> 371</a></span>
<span class="normal"><a href="#__codelineno-0-372"> 372</a></span>
<span class="normal"><a href="#__codelineno-0-373"> 373</a></span>
<span class="normal"><a href="#__codelineno-0-374"> 374</a></span>
<span class="normal"><a href="#__codelineno-0-375"> 375</a></span>
<span class="normal"><a href="#__codelineno-0-376"> 376</a></span>
<span class="normal"><a href="#__codelineno-0-377"> 377</a></span>
<span class="normal"><a href="#__codelineno-0-378"> 378</a></span>
<span class="normal"><a href="#__codelineno-0-379"> 379</a></span>
<span class="normal"><a href="#__codelineno-0-380"> 380</a></span>
<span class="normal"><a href="#__codelineno-0-381"> 381</a></span>
<span class="normal"><a href="#__codelineno-0-382"> 382</a></span>
<span class="normal"><a href="#__codelineno-0-383"> 383</a></span>
<span class="normal"><a href="#__codelineno-0-384"> 384</a></span>
<span class="normal"><a href="#__codelineno-0-385"> 385</a></span>
<span class="normal"><a href="#__codelineno-0-386"> 386</a></span>
<span class="normal"><a href="#__codelineno-0-387"> 387</a></span>
<span class="normal"><a href="#__codelineno-0-388"> 388</a></span>
<span class="normal"><a href="#__codelineno-0-389"> 389</a></span>
<span class="normal"><a href="#__codelineno-0-390"> 390</a></span>
<span class="normal"><a href="#__codelineno-0-391"> 391</a></span>
<span class="normal"><a href="#__codelineno-0-392"> 392</a></span>
<span class="normal"><a href="#__codelineno-0-393"> 393</a></span>
<span class="normal"><a href="#__codelineno-0-394"> 394</a></span>
<span class="normal"><a href="#__codelineno-0-395"> 395</a></span>
<span class="normal"><a href="#__codelineno-0-396"> 396</a></span>
<span class="normal"><a href="#__codelineno-0-397"> 397</a></span>
<span class="normal"><a href="#__codelineno-0-398"> 398</a></span>
<span class="normal"><a href="#__codelineno-0-399"> 399</a></span>
<span class="normal"><a href="#__codelineno-0-400"> 400</a></span>
<span class="normal"><a href="#__codelineno-0-401"> 401</a></span>
<span class="normal"><a href="#__codelineno-0-402"> 402</a></span>
<span class="normal"><a href="#__codelineno-0-403"> 403</a></span>
<span class="normal"><a href="#__codelineno-0-404"> 404</a></span>
<span class="normal"><a href="#__codelineno-0-405"> 405</a></span>
<span class="normal"><a href="#__codelineno-0-406"> 406</a></span>
<span class="normal"><a href="#__codelineno-0-407"> 407</a></span>
<span class="normal"><a href="#__codelineno-0-408"> 408</a></span>
<span class="normal"><a href="#__codelineno-0-409"> 409</a></span>
<span class="normal"><a href="#__codelineno-0-410"> 410</a></span>
<span class="normal"><a href="#__codelineno-0-411"> 411</a></span>
<span class="normal"><a href="#__codelineno-0-412"> 412</a></span>
<span class="normal"><a href="#__codelineno-0-413"> 413</a></span>
<span class="normal"><a href="#__codelineno-0-414"> 414</a></span>
<span class="normal"><a href="#__codelineno-0-415"> 415</a></span>
<span class="normal"><a href="#__codelineno-0-416"> 416</a></span>
<span class="normal"><a href="#__codelineno-0-417"> 417</a></span>
<span class="normal"><a href="#__codelineno-0-418"> 418</a></span>
<span class="normal"><a href="#__codelineno-0-419"> 419</a></span>
<span class="normal"><a href="#__codelineno-0-420"> 420</a></span>
<span class="normal"><a href="#__codelineno-0-421"> 421</a></span>
<span class="normal"><a href="#__codelineno-0-422"> 422</a></span>
<span class="normal"><a href="#__codelineno-0-423"> 423</a></span>
<span class="normal"><a href="#__codelineno-0-424"> 424</a></span>
<span class="normal"><a href="#__codelineno-0-425"> 425</a></span>
<span class="normal"><a href="#__codelineno-0-426"> 426</a></span>
<span class="normal"><a href="#__codelineno-0-427"> 427</a></span>
<span class="normal"><a href="#__codelineno-0-428"> 428</a></span>
<span class="normal"><a href="#__codelineno-0-429"> 429</a></span>
<span class="normal"><a href="#__codelineno-0-430"> 430</a></span>
<span class="normal"><a href="#__codelineno-0-431"> 431</a></span>
<span class="normal"><a href="#__codelineno-0-432"> 432</a></span>
<span class="normal"><a href="#__codelineno-0-433"> 433</a></span>
<span class="normal"><a href="#__codelineno-0-434"> 434</a></span>
<span class="normal"><a href="#__codelineno-0-435"> 435</a></span>
<span class="normal"><a href="#__codelineno-0-436"> 436</a></span>
<span class="normal"><a href="#__codelineno-0-437"> 437</a></span>
<span class="normal"><a href="#__codelineno-0-438"> 438</a></span>
<span class="normal"><a href="#__codelineno-0-439"> 439</a></span>
<span class="normal"><a href="#__codelineno-0-440"> 440</a></span>
<span class="normal"><a href="#__codelineno-0-441"> 441</a></span>
<span class="normal"><a href="#__codelineno-0-442"> 442</a></span>
<span class="normal"><a href="#__codelineno-0-443"> 443</a></span>
<span class="normal"><a href="#__codelineno-0-444"> 444</a></span>
<span class="normal"><a href="#__codelineno-0-445"> 445</a></span>
<span class="normal"><a href="#__codelineno-0-446"> 446</a></span>
<span class="normal"><a href="#__codelineno-0-447"> 447</a></span>
<span class="normal"><a href="#__codelineno-0-448"> 448</a></span>
<span class="normal"><a href="#__codelineno-0-449"> 449</a></span>
<span class="normal"><a href="#__codelineno-0-450"> 450</a></span>
<span class="normal"><a href="#__codelineno-0-451"> 451</a></span>
<span class="normal"><a href="#__codelineno-0-452"> 452</a></span>
<span class="normal"><a href="#__codelineno-0-453"> 453</a></span>
<span class="normal"><a href="#__codelineno-0-454"> 454</a></span>
<span class="normal"><a href="#__codelineno-0-455"> 455</a></span>
<span class="normal"><a href="#__codelineno-0-456"> 456</a></span>
<span class="normal"><a href="#__codelineno-0-457"> 457</a></span>
<span class="normal"><a href="#__codelineno-0-458"> 458</a></span>
<span class="normal"><a href="#__codelineno-0-459"> 459</a></span>
<span class="normal"><a href="#__codelineno-0-460"> 460</a></span>
<span class="normal"><a href="#__codelineno-0-461"> 461</a></span>
<span class="normal"><a href="#__codelineno-0-462"> 462</a></span>
<span class="normal"><a href="#__codelineno-0-463"> 463</a></span>
<span class="normal"><a href="#__codelineno-0-464"> 464</a></span>
<span class="normal"><a href="#__codelineno-0-465"> 465</a></span>
<span class="normal"><a href="#__codelineno-0-466"> 466</a></span>
<span class="normal"><a href="#__codelineno-0-467"> 467</a></span>
<span class="normal"><a href="#__codelineno-0-468"> 468</a></span>
<span class="normal"><a href="#__codelineno-0-469"> 469</a></span>
<span class="normal"><a href="#__codelineno-0-470"> 470</a></span>
<span class="normal"><a href="#__codelineno-0-471"> 471</a></span>
<span class="normal"><a href="#__codelineno-0-472"> 472</a></span>
<span class="normal"><a href="#__codelineno-0-473"> 473</a></span>
<span class="normal"><a href="#__codelineno-0-474"> 474</a></span>
<span class="normal"><a href="#__codelineno-0-475"> 475</a></span>
<span class="normal"><a href="#__codelineno-0-476"> 476</a></span>
<span class="normal"><a href="#__codelineno-0-477"> 477</a></span>
<span class="normal"><a href="#__codelineno-0-478"> 478</a></span>
<span class="normal"><a href="#__codelineno-0-479"> 479</a></span>
<span class="normal"><a href="#__codelineno-0-480"> 480</a></span>
<span class="normal"><a href="#__codelineno-0-481"> 481</a></span>
<span class="normal"><a href="#__codelineno-0-482"> 482</a></span>
<span class="normal"><a href="#__codelineno-0-483"> 483</a></span>
<span class="normal"><a href="#__codelineno-0-484"> 484</a></span>
<span class="normal"><a href="#__codelineno-0-485"> 485</a></span>
<span class="normal"><a href="#__codelineno-0-486"> 486</a></span>
<span class="normal"><a href="#__codelineno-0-487"> 487</a></span>
<span class="normal"><a href="#__codelineno-0-488"> 488</a></span>
<span class="normal"><a href="#__codelineno-0-489"> 489</a></span>
<span class="normal"><a href="#__codelineno-0-490"> 490</a></span>
<span class="normal"><a href="#__codelineno-0-491"> 491</a></span>
<span class="normal"><a href="#__codelineno-0-492"> 492</a></span>
<span class="normal"><a href="#__codelineno-0-493"> 493</a></span>
<span class="normal"><a href="#__codelineno-0-494"> 494</a></span>
<span class="normal"><a href="#__codelineno-0-495"> 495</a></span>
<span class="normal"><a href="#__codelineno-0-496"> 496</a></span>
<span class="normal"><a href="#__codelineno-0-497"> 497</a></span>
<span class="normal"><a href="#__codelineno-0-498"> 498</a></span>
<span class="normal"><a href="#__codelineno-0-499"> 499</a></span>
<span class="normal"><a href="#__codelineno-0-500"> 500</a></span>
<span class="normal"><a href="#__codelineno-0-501"> 501</a></span>
<span class="normal"><a href="#__codelineno-0-502"> 502</a></span>
<span class="normal"><a href="#__codelineno-0-503"> 503</a></span>
<span class="normal"><a href="#__codelineno-0-504"> 504</a></span>
<span class="normal"><a href="#__codelineno-0-505"> 505</a></span>
<span class="normal"><a href="#__codelineno-0-506"> 506</a></span>
<span class="normal"><a href="#__codelineno-0-507"> 507</a></span>
<span class="normal"><a href="#__codelineno-0-508"> 508</a></span>
<span class="normal"><a href="#__codelineno-0-509"> 509</a></span>
<span class="normal"><a href="#__codelineno-0-510"> 510</a></span>
<span class="normal"><a href="#__codelineno-0-511"> 511</a></span>
<span class="normal"><a href="#__codelineno-0-512"> 512</a></span>
<span class="normal"><a href="#__codelineno-0-513"> 513</a></span>
<span class="normal"><a href="#__codelineno-0-514"> 514</a></span>
<span class="normal"><a href="#__codelineno-0-515"> 515</a></span>
<span class="normal"><a href="#__codelineno-0-516"> 516</a></span>
<span class="normal"><a href="#__codelineno-0-517"> 517</a></span>
<span class="normal"><a href="#__codelineno-0-518"> 518</a></span>
<span class="normal"><a href="#__codelineno-0-519"> 519</a></span>
<span class="normal"><a href="#__codelineno-0-520"> 520</a></span>
<span class="normal"><a href="#__codelineno-0-521"> 521</a></span>
<span class="normal"><a href="#__codelineno-0-522"> 522</a></span>
<span class="normal"><a href="#__codelineno-0-523"> 523</a></span>
<span class="normal"><a href="#__codelineno-0-524"> 524</a></span>
<span class="normal"><a href="#__codelineno-0-525"> 525</a></span>
<span class="normal"><a href="#__codelineno-0-526"> 526</a></span>
<span class="normal"><a href="#__codelineno-0-527"> 527</a></span>
<span class="normal"><a href="#__codelineno-0-528"> 528</a></span>
<span class="normal"><a href="#__codelineno-0-529"> 529</a></span>
<span class="normal"><a href="#__codelineno-0-530"> 530</a></span>
<span class="normal"><a href="#__codelineno-0-531"> 531</a></span>
<span class="normal"><a href="#__codelineno-0-532"> 532</a></span>
<span class="normal"><a href="#__codelineno-0-533"> 533</a></span>
<span class="normal"><a href="#__codelineno-0-534"> 534</a></span>
<span class="normal"><a href="#__codelineno-0-535"> 535</a></span>
<span class="normal"><a href="#__codelineno-0-536"> 536</a></span>
<span class="normal"><a href="#__codelineno-0-537"> 537</a></span>
<span class="normal"><a href="#__codelineno-0-538"> 538</a></span>
<span class="normal"><a href="#__codelineno-0-539"> 539</a></span>
<span class="normal"><a href="#__codelineno-0-540"> 540</a></span>
<span class="normal"><a href="#__codelineno-0-541"> 541</a></span>
<span class="normal"><a href="#__codelineno-0-542"> 542</a></span>
<span class="normal"><a href="#__codelineno-0-543"> 543</a></span>
<span class="normal"><a href="#__codelineno-0-544"> 544</a></span>
<span class="normal"><a href="#__codelineno-0-545"> 545</a></span>
<span class="normal"><a href="#__codelineno-0-546"> 546</a></span>
<span class="normal"><a href="#__codelineno-0-547"> 547</a></span>
<span class="normal"><a href="#__codelineno-0-548"> 548</a></span>
<span class="normal"><a href="#__codelineno-0-549"> 549</a></span>
<span class="normal"><a href="#__codelineno-0-550"> 550</a></span>
<span class="normal"><a href="#__codelineno-0-551"> 551</a></span>
<span class="normal"><a href="#__codelineno-0-552"> 552</a></span>
<span class="normal"><a href="#__codelineno-0-553"> 553</a></span>
<span class="normal"><a href="#__codelineno-0-554"> 554</a></span>
<span class="normal"><a href="#__codelineno-0-555"> 555</a></span>
<span class="normal"><a href="#__codelineno-0-556"> 556</a></span>
<span class="normal"><a href="#__codelineno-0-557"> 557</a></span>
<span class="normal"><a href="#__codelineno-0-558"> 558</a></span>
<span class="normal"><a href="#__codelineno-0-559"> 559</a></span>
<span class="normal"><a href="#__codelineno-0-560"> 560</a></span>
<span class="normal"><a href="#__codelineno-0-561"> 561</a></span>
<span class="normal"><a href="#__codelineno-0-562"> 562</a></span>
<span class="normal"><a href="#__codelineno-0-563"> 563</a></span>
<span class="normal"><a href="#__codelineno-0-564"> 564</a></span>
<span class="normal"><a href="#__codelineno-0-565"> 565</a></span>
<span class="normal"><a href="#__codelineno-0-566"> 566</a></span>
<span class="normal"><a href="#__codelineno-0-567"> 567</a></span>
<span class="normal"><a href="#__codelineno-0-568"> 568</a></span>
<span class="normal"><a href="#__codelineno-0-569"> 569</a></span>
<span class="normal"><a href="#__codelineno-0-570"> 570</a></span>
<span class="normal"><a href="#__codelineno-0-571"> 571</a></span>
<span class="normal"><a href="#__codelineno-0-572"> 572</a></span>
<span class="normal"><a href="#__codelineno-0-573"> 573</a></span>
<span class="normal"><a href="#__codelineno-0-574"> 574</a></span>
<span class="normal"><a href="#__codelineno-0-575"> 575</a></span>
<span class="normal"><a href="#__codelineno-0-576"> 576</a></span>
<span class="normal"><a href="#__codelineno-0-577"> 577</a></span>
<span class="normal"><a href="#__codelineno-0-578"> 578</a></span>
<span class="normal"><a href="#__codelineno-0-579"> 579</a></span>
<span class="normal"><a href="#__codelineno-0-580"> 580</a></span>
<span class="normal"><a href="#__codelineno-0-581"> 581</a></span>
<span class="normal"><a href="#__codelineno-0-582"> 582</a></span>
<span class="normal"><a href="#__codelineno-0-583"> 583</a></span>
<span class="normal"><a href="#__codelineno-0-584"> 584</a></span>
<span class="normal"><a href="#__codelineno-0-585"> 585</a></span>
<span class="normal"><a href="#__codelineno-0-586"> 586</a></span>
<span class="normal"><a href="#__codelineno-0-587"> 587</a></span>
<span class="normal"><a href="#__codelineno-0-588"> 588</a></span>
<span class="normal"><a href="#__codelineno-0-589"> 589</a></span>
<span class="normal"><a href="#__codelineno-0-590"> 590</a></span>
<span class="normal"><a href="#__codelineno-0-591"> 591</a></span>
<span class="normal"><a href="#__codelineno-0-592"> 592</a></span>
<span class="normal"><a href="#__codelineno-0-593"> 593</a></span>
<span class="normal"><a href="#__codelineno-0-594"> 594</a></span>
<span class="normal"><a href="#__codelineno-0-595"> 595</a></span>
<span class="normal"><a href="#__codelineno-0-596"> 596</a></span>
<span class="normal"><a href="#__codelineno-0-597"> 597</a></span>
<span class="normal"><a href="#__codelineno-0-598"> 598</a></span>
<span class="normal"><a href="#__codelineno-0-599"> 599</a></span>
<span class="normal"><a href="#__codelineno-0-600"> 600</a></span>
<span class="normal"><a href="#__codelineno-0-601"> 601</a></span>
<span class="normal"><a href="#__codelineno-0-602"> 602</a></span>
<span class="normal"><a href="#__codelineno-0-603"> 603</a></span>
<span class="normal"><a href="#__codelineno-0-604"> 604</a></span>
<span class="normal"><a href="#__codelineno-0-605"> 605</a></span>
<span class="normal"><a href="#__codelineno-0-606"> 606</a></span>
<span class="normal"><a href="#__codelineno-0-607"> 607</a></span>
<span class="normal"><a href="#__codelineno-0-608"> 608</a></span>
<span class="normal"><a href="#__codelineno-0-609"> 609</a></span>
<span class="normal"><a href="#__codelineno-0-610"> 610</a></span>
<span class="normal"><a href="#__codelineno-0-611"> 611</a></span>
<span class="normal"><a href="#__codelineno-0-612"> 612</a></span>
<span class="normal"><a href="#__codelineno-0-613"> 613</a></span>
<span class="normal"><a href="#__codelineno-0-614"> 614</a></span>
<span class="normal"><a href="#__codelineno-0-615"> 615</a></span>
<span class="normal"><a href="#__codelineno-0-616"> 616</a></span>
<span class="normal"><a href="#__codelineno-0-617"> 617</a></span>
<span class="normal"><a href="#__codelineno-0-618"> 618</a></span>
<span class="normal"><a href="#__codelineno-0-619"> 619</a></span>
<span class="normal"><a href="#__codelineno-0-620"> 620</a></span>
<span class="normal"><a href="#__codelineno-0-621"> 621</a></span>
<span class="normal"><a href="#__codelineno-0-622"> 622</a></span>
<span class="normal"><a href="#__codelineno-0-623"> 623</a></span>
<span class="normal"><a href="#__codelineno-0-624"> 624</a></span>
<span class="normal"><a href="#__codelineno-0-625"> 625</a></span>
<span class="normal"><a href="#__codelineno-0-626"> 626</a></span>
<span class="normal"><a href="#__codelineno-0-627"> 627</a></span>
<span class="normal"><a href="#__codelineno-0-628"> 628</a></span>
<span class="normal"><a href="#__codelineno-0-629"> 629</a></span>
<span class="normal"><a href="#__codelineno-0-630"> 630</a></span>
<span class="normal"><a href="#__codelineno-0-631"> 631</a></span>
<span class="normal"><a href="#__codelineno-0-632"> 632</a></span>
<span class="normal"><a href="#__codelineno-0-633"> 633</a></span>
<span class="normal"><a href="#__codelineno-0-634"> 634</a></span>
<span class="normal"><a href="#__codelineno-0-635"> 635</a></span>
<span class="normal"><a href="#__codelineno-0-636"> 636</a></span>
<span class="normal"><a href="#__codelineno-0-637"> 637</a></span>
<span class="normal"><a href="#__codelineno-0-638"> 638</a></span>
<span class="normal"><a href="#__codelineno-0-639"> 639</a></span>
<span class="normal"><a href="#__codelineno-0-640"> 640</a></span>
<span class="normal"><a href="#__codelineno-0-641"> 641</a></span>
<span class="normal"><a href="#__codelineno-0-642"> 642</a></span>
<span class="normal"><a href="#__codelineno-0-643"> 643</a></span>
<span class="normal"><a href="#__codelineno-0-644"> 644</a></span>
<span class="normal"><a href="#__codelineno-0-645"> 645</a></span>
<span class="normal"><a href="#__codelineno-0-646"> 646</a></span>
<span class="normal"><a href="#__codelineno-0-647"> 647</a></span>
<span class="normal"><a href="#__codelineno-0-648"> 648</a></span>
<span class="normal"><a href="#__codelineno-0-649"> 649</a></span>
<span class="normal"><a href="#__codelineno-0-650"> 650</a></span>
<span class="normal"><a href="#__codelineno-0-651"> 651</a></span>
<span class="normal"><a href="#__codelineno-0-652"> 652</a></span>
<span class="normal"><a href="#__codelineno-0-653"> 653</a></span>
<span class="normal"><a href="#__codelineno-0-654"> 654</a></span>
<span class="normal"><a href="#__codelineno-0-655"> 655</a></span>
<span class="normal"><a href="#__codelineno-0-656"> 656</a></span>
<span class="normal"><a href="#__codelineno-0-657"> 657</a></span>
<span class="normal"><a href="#__codelineno-0-658"> 658</a></span>
<span class="normal"><a href="#__codelineno-0-659"> 659</a></span>
<span class="normal"><a href="#__codelineno-0-660"> 660</a></span>
<span class="normal"><a href="#__codelineno-0-661"> 661</a></span>
<span class="normal"><a href="#__codelineno-0-662"> 662</a></span>
<span class="normal"><a href="#__codelineno-0-663"> 663</a></span>
<span class="normal"><a href="#__codelineno-0-664"> 664</a></span>
<span class="normal"><a href="#__codelineno-0-665"> 665</a></span>
<span class="normal"><a href="#__codelineno-0-666"> 666</a></span>
<span class="normal"><a href="#__codelineno-0-667"> 667</a></span>
<span class="normal"><a href="#__codelineno-0-668"> 668</a></span>
<span class="normal"><a href="#__codelineno-0-669"> 669</a></span>
<span class="normal"><a href="#__codelineno-0-670"> 670</a></span>
<span class="normal"><a href="#__codelineno-0-671"> 671</a></span>
<span class="normal"><a href="#__codelineno-0-672"> 672</a></span>
<span class="normal"><a href="#__codelineno-0-673"> 673</a></span>
<span class="normal"><a href="#__codelineno-0-674"> 674</a></span>
<span class="normal"><a href="#__codelineno-0-675"> 675</a></span>
<span class="normal"><a href="#__codelineno-0-676"> 676</a></span>
<span class="normal"><a href="#__codelineno-0-677"> 677</a></span>
<span class="normal"><a href="#__codelineno-0-678"> 678</a></span>
<span class="normal"><a href="#__codelineno-0-679"> 679</a></span>
<span class="normal"><a href="#__codelineno-0-680"> 680</a></span>
<span class="normal"><a href="#__codelineno-0-681"> 681</a></span>
<span class="normal"><a href="#__codelineno-0-682"> 682</a></span>
<span class="normal"><a href="#__codelineno-0-683"> 683</a></span>
<span class="normal"><a href="#__codelineno-0-684"> 684</a></span>
<span class="normal"><a href="#__codelineno-0-685"> 685</a></span>
<span class="normal"><a href="#__codelineno-0-686"> 686</a></span>
<span class="normal"><a href="#__codelineno-0-687"> 687</a></span>
<span class="normal"><a href="#__codelineno-0-688"> 688</a></span>
<span class="normal"><a href="#__codelineno-0-689"> 689</a></span>
<span class="normal"><a href="#__codelineno-0-690"> 690</a></span>
<span class="normal"><a href="#__codelineno-0-691"> 691</a></span>
<span class="normal"><a href="#__codelineno-0-692"> 692</a></span>
<span class="normal"><a href="#__codelineno-0-693"> 693</a></span>
<span class="normal"><a href="#__codelineno-0-694"> 694</a></span>
<span class="normal"><a href="#__codelineno-0-695"> 695</a></span>
<span class="normal"><a href="#__codelineno-0-696"> 696</a></span>
<span class="normal"><a href="#__codelineno-0-697"> 697</a></span>
<span class="normal"><a href="#__codelineno-0-698"> 698</a></span>
<span class="normal"><a href="#__codelineno-0-699"> 699</a></span>
<span class="normal"><a href="#__codelineno-0-700"> 700</a></span>
<span class="normal"><a href="#__codelineno-0-701"> 701</a></span>
<span class="normal"><a href="#__codelineno-0-702"> 702</a></span>
<span class="normal"><a href="#__codelineno-0-703"> 703</a></span>
<span class="normal"><a href="#__codelineno-0-704"> 704</a></span>
<span class="normal"><a href="#__codelineno-0-705"> 705</a></span>
<span class="normal"><a href="#__codelineno-0-706"> 706</a></span>
<span class="normal"><a href="#__codelineno-0-707"> 707</a></span>
<span class="normal"><a href="#__codelineno-0-708"> 708</a></span>
<span class="normal"><a href="#__codelineno-0-709"> 709</a></span>
<span class="normal"><a href="#__codelineno-0-710"> 710</a></span>
<span class="normal"><a href="#__codelineno-0-711"> 711</a></span>
<span class="normal"><a href="#__codelineno-0-712"> 712</a></span>
<span class="normal"><a href="#__codelineno-0-713"> 713</a></span>
<span class="normal"><a href="#__codelineno-0-714"> 714</a></span>
<span class="normal"><a href="#__codelineno-0-715"> 715</a></span>
<span class="normal"><a href="#__codelineno-0-716"> 716</a></span>
<span class="normal"><a href="#__codelineno-0-717"> 717</a></span>
<span class="normal"><a href="#__codelineno-0-718"> 718</a></span>
<span class="normal"><a href="#__codelineno-0-719"> 719</a></span>
<span class="normal"><a href="#__codelineno-0-720"> 720</a></span>
<span class="normal"><a href="#__codelineno-0-721"> 721</a></span>
<span class="normal"><a href="#__codelineno-0-722"> 722</a></span>
<span class="normal"><a href="#__codelineno-0-723"> 723</a></span>
<span class="normal"><a href="#__codelineno-0-724"> 724</a></span>
<span class="normal"><a href="#__codelineno-0-725"> 725</a></span>
<span class="normal"><a href="#__codelineno-0-726"> 726</a></span>
<span class="normal"><a href="#__codelineno-0-727"> 727</a></span>
<span class="normal"><a href="#__codelineno-0-728"> 728</a></span>
<span class="normal"><a href="#__codelineno-0-729"> 729</a></span>
<span class="normal"><a href="#__codelineno-0-730"> 730</a></span>
<span class="normal"><a href="#__codelineno-0-731"> 731</a></span>
<span class="normal"><a href="#__codelineno-0-732"> 732</a></span>
<span class="normal"><a href="#__codelineno-0-733"> 733</a></span>
<span class="normal"><a href="#__codelineno-0-734"> 734</a></span>
<span class="normal"><a href="#__codelineno-0-735"> 735</a></span>
<span class="normal"><a href="#__codelineno-0-736"> 736</a></span>
<span class="normal"><a href="#__codelineno-0-737"> 737</a></span>
<span class="normal"><a href="#__codelineno-0-738"> 738</a></span>
<span class="normal"><a href="#__codelineno-0-739"> 739</a></span>
<span class="normal"><a href="#__codelineno-0-740"> 740</a></span>
<span class="normal"><a href="#__codelineno-0-741"> 741</a></span>
<span class="normal"><a href="#__codelineno-0-742"> 742</a></span>
<span class="normal"><a href="#__codelineno-0-743"> 743</a></span>
<span class="normal"><a href="#__codelineno-0-744"> 744</a></span>
<span class="normal"><a href="#__codelineno-0-745"> 745</a></span>
<span class="normal"><a href="#__codelineno-0-746"> 746</a></span>
<span class="normal"><a href="#__codelineno-0-747"> 747</a></span>
<span class="normal"><a href="#__codelineno-0-748"> 748</a></span>
<span class="normal"><a href="#__codelineno-0-749"> 749</a></span>
<span class="normal"><a href="#__codelineno-0-750"> 750</a></span>
<span class="normal"><a href="#__codelineno-0-751"> 751</a></span>
<span class="normal"><a href="#__codelineno-0-752"> 752</a></span>
<span class="normal"><a href="#__codelineno-0-753"> 753</a></span>
<span class="normal"><a href="#__codelineno-0-754"> 754</a></span>
<span class="normal"><a href="#__codelineno-0-755"> 755</a></span>
<span class="normal"><a href="#__codelineno-0-756"> 756</a></span>
<span class="normal"><a href="#__codelineno-0-757"> 757</a></span>
<span class="normal"><a href="#__codelineno-0-758"> 758</a></span>
<span class="normal"><a href="#__codelineno-0-759"> 759</a></span>
<span class="normal"><a href="#__codelineno-0-760"> 760</a></span>
<span class="normal"><a href="#__codelineno-0-761"> 761</a></span>
<span class="normal"><a href="#__codelineno-0-762"> 762</a></span>
<span class="normal"><a href="#__codelineno-0-763"> 763</a></span>
<span class="normal"><a href="#__codelineno-0-764"> 764</a></span>
<span class="normal"><a href="#__codelineno-0-765"> 765</a></span>
<span class="normal"><a href="#__codelineno-0-766"> 766</a></span>
<span class="normal"><a href="#__codelineno-0-767"> 767</a></span>
<span class="normal"><a href="#__codelineno-0-768"> 768</a></span>
<span class="normal"><a href="#__codelineno-0-769"> 769</a></span>
<span class="normal"><a href="#__codelineno-0-770"> 770</a></span>
<span class="normal"><a href="#__codelineno-0-771"> 771</a></span>
<span class="normal"><a href="#__codelineno-0-772"> 772</a></span>
<span class="normal"><a href="#__codelineno-0-773"> 773</a></span>
<span class="normal"><a href="#__codelineno-0-774"> 774</a></span>
<span class="normal"><a href="#__codelineno-0-775"> 775</a></span>
<span class="normal"><a href="#__codelineno-0-776"> 776</a></span>
<span class="normal"><a href="#__codelineno-0-777"> 777</a></span>
<span class="normal"><a href="#__codelineno-0-778"> 778</a></span>
<span class="normal"><a href="#__codelineno-0-779"> 779</a></span>
<span class="normal"><a href="#__codelineno-0-780"> 780</a></span>
<span class="normal"><a href="#__codelineno-0-781"> 781</a></span>
<span class="normal"><a href="#__codelineno-0-782"> 782</a></span>
<span class="normal"><a href="#__codelineno-0-783"> 783</a></span>
<span class="normal"><a href="#__codelineno-0-784"> 784</a></span>
<span class="normal"><a href="#__codelineno-0-785"> 785</a></span>
<span class="normal"><a href="#__codelineno-0-786"> 786</a></span>
<span class="normal"><a href="#__codelineno-0-787"> 787</a></span>
<span class="normal"><a href="#__codelineno-0-788"> 788</a></span>
<span class="normal"><a href="#__codelineno-0-789"> 789</a></span>
<span class="normal"><a href="#__codelineno-0-790"> 790</a></span>
<span class="normal"><a href="#__codelineno-0-791"> 791</a></span>
<span class="normal"><a href="#__codelineno-0-792"> 792</a></span>
<span class="normal"><a href="#__codelineno-0-793"> 793</a></span>
<span class="normal"><a href="#__codelineno-0-794"> 794</a></span>
<span class="normal"><a href="#__codelineno-0-795"> 795</a></span>
<span class="normal"><a href="#__codelineno-0-796"> 796</a></span>
<span class="normal"><a href="#__codelineno-0-797"> 797</a></span>
<span class="normal"><a href="#__codelineno-0-798"> 798</a></span>
<span class="normal"><a href="#__codelineno-0-799"> 799</a></span>
<span class="normal"><a href="#__codelineno-0-800"> 800</a></span>
<span class="normal"><a href="#__codelineno-0-801"> 801</a></span>
<span class="normal"><a href="#__codelineno-0-802"> 802</a></span>
<span class="normal"><a href="#__codelineno-0-803"> 803</a></span>
<span class="normal"><a href="#__codelineno-0-804"> 804</a></span>
<span class="normal"><a href="#__codelineno-0-805"> 805</a></span>
<span class="normal"><a href="#__codelineno-0-806"> 806</a></span>
<span class="normal"><a href="#__codelineno-0-807"> 807</a></span>
<span class="normal"><a href="#__codelineno-0-808"> 808</a></span>
<span class="normal"><a href="#__codelineno-0-809"> 809</a></span>
<span class="normal"><a href="#__codelineno-0-810"> 810</a></span>
<span class="normal"><a href="#__codelineno-0-811"> 811</a></span>
<span class="normal"><a href="#__codelineno-0-812"> 812</a></span>
<span class="normal"><a href="#__codelineno-0-813"> 813</a></span>
<span class="normal"><a href="#__codelineno-0-814"> 814</a></span>
<span class="normal"><a href="#__codelineno-0-815"> 815</a></span>
<span class="normal"><a href="#__codelineno-0-816"> 816</a></span>
<span class="normal"><a href="#__codelineno-0-817"> 817</a></span>
<span class="normal"><a href="#__codelineno-0-818"> 818</a></span>
<span class="normal"><a href="#__codelineno-0-819"> 819</a></span>
<span class="normal"><a href="#__codelineno-0-820"> 820</a></span>
<span class="normal"><a href="#__codelineno-0-821"> 821</a></span>
<span class="normal"><a href="#__codelineno-0-822"> 822</a></span>
<span class="normal"><a href="#__codelineno-0-823"> 823</a></span>
<span class="normal"><a href="#__codelineno-0-824"> 824</a></span>
<span class="normal"><a href="#__codelineno-0-825"> 825</a></span>
<span class="normal"><a href="#__codelineno-0-826"> 826</a></span>
<span class="normal"><a href="#__codelineno-0-827"> 827</a></span>
<span class="normal"><a href="#__codelineno-0-828"> 828</a></span>
<span class="normal"><a href="#__codelineno-0-829"> 829</a></span>
<span class="normal"><a href="#__codelineno-0-830"> 830</a></span>
<span class="normal"><a href="#__codelineno-0-831"> 831</a></span>
<span class="normal"><a href="#__codelineno-0-832"> 832</a></span>
<span class="normal"><a href="#__codelineno-0-833"> 833</a></span>
<span class="normal"><a href="#__codelineno-0-834"> 834</a></span>
<span class="normal"><a href="#__codelineno-0-835"> 835</a></span>
<span class="normal"><a href="#__codelineno-0-836"> 836</a></span>
<span class="normal"><a href="#__codelineno-0-837"> 837</a></span>
<span class="normal"><a href="#__codelineno-0-838"> 838</a></span>
<span class="normal"><a href="#__codelineno-0-839"> 839</a></span>
<span class="normal"><a href="#__codelineno-0-840"> 840</a></span>
<span class="normal"><a href="#__codelineno-0-841"> 841</a></span>
<span class="normal"><a href="#__codelineno-0-842"> 842</a></span>
<span class="normal"><a href="#__codelineno-0-843"> 843</a></span>
<span class="normal"><a href="#__codelineno-0-844"> 844</a></span>
<span class="normal"><a href="#__codelineno-0-845"> 845</a></span>
<span class="normal"><a href="#__codelineno-0-846"> 846</a></span>
<span class="normal"><a href="#__codelineno-0-847"> 847</a></span>
<span class="normal"><a href="#__codelineno-0-848"> 848</a></span>
<span class="normal"><a href="#__codelineno-0-849"> 849</a></span>
<span class="normal"><a href="#__codelineno-0-850"> 850</a></span>
<span class="normal"><a href="#__codelineno-0-851"> 851</a></span>
<span class="normal"><a href="#__codelineno-0-852"> 852</a></span>
<span class="normal"><a href="#__codelineno-0-853"> 853</a></span>
<span class="normal"><a href="#__codelineno-0-854"> 854</a></span>
<span class="normal"><a href="#__codelineno-0-855"> 855</a></span>
<span class="normal"><a href="#__codelineno-0-856"> 856</a></span>
<span class="normal"><a href="#__codelineno-0-857"> 857</a></span>
<span class="normal"><a href="#__codelineno-0-858"> 858</a></span>
<span class="normal"><a href="#__codelineno-0-859"> 859</a></span>
<span class="normal"><a href="#__codelineno-0-860"> 860</a></span>
<span class="normal"><a href="#__codelineno-0-861"> 861</a></span>
<span class="normal"><a href="#__codelineno-0-862"> 862</a></span>
<span class="normal"><a href="#__codelineno-0-863"> 863</a></span>
<span class="normal"><a href="#__codelineno-0-864"> 864</a></span>
<span class="normal"><a href="#__codelineno-0-865"> 865</a></span>
<span class="normal"><a href="#__codelineno-0-866"> 866</a></span>
<span class="normal"><a href="#__codelineno-0-867"> 867</a></span>
<span class="normal"><a href="#__codelineno-0-868"> 868</a></span>
<span class="normal"><a href="#__codelineno-0-869"> 869</a></span>
<span class="normal"><a href="#__codelineno-0-870"> 870</a></span>
<span class="normal"><a href="#__codelineno-0-871"> 871</a></span>
<span class="normal"><a href="#__codelineno-0-872"> 872</a></span>
<span class="normal"><a href="#__codelineno-0-873"> 873</a></span>
<span class="normal"><a href="#__codelineno-0-874"> 874</a></span>
<span class="normal"><a href="#__codelineno-0-875"> 875</a></span>
<span class="normal"><a href="#__codelineno-0-876"> 876</a></span>
<span class="normal"><a href="#__codelineno-0-877"> 877</a></span>
<span class="normal"><a href="#__codelineno-0-878"> 878</a></span>
<span class="normal"><a href="#__codelineno-0-879"> 879</a></span>
<span class="normal"><a href="#__codelineno-0-880"> 880</a></span>
<span class="normal"><a href="#__codelineno-0-881"> 881</a></span>
<span class="normal"><a href="#__codelineno-0-882"> 882</a></span>
<span class="normal"><a href="#__codelineno-0-883"> 883</a></span>
<span class="normal"><a href="#__codelineno-0-884"> 884</a></span>
<span class="normal"><a href="#__codelineno-0-885"> 885</a></span>
<span class="normal"><a href="#__codelineno-0-886"> 886</a></span>
<span class="normal"><a href="#__codelineno-0-887"> 887</a></span>
<span class="normal"><a href="#__codelineno-0-888"> 888</a></span>
<span class="normal"><a href="#__codelineno-0-889"> 889</a></span>
<span class="normal"><a href="#__codelineno-0-890"> 890</a></span>
<span class="normal"><a href="#__codelineno-0-891"> 891</a></span>
<span class="normal"><a href="#__codelineno-0-892"> 892</a></span>
<span class="normal"><a href="#__codelineno-0-893"> 893</a></span>
<span class="normal"><a href="#__codelineno-0-894"> 894</a></span>
<span class="normal"><a href="#__codelineno-0-895"> 895</a></span>
<span class="normal"><a href="#__codelineno-0-896"> 896</a></span>
<span class="normal"><a href="#__codelineno-0-897"> 897</a></span>
<span class="normal"><a href="#__codelineno-0-898"> 898</a></span>
<span class="normal"><a href="#__codelineno-0-899"> 899</a></span>
<span class="normal"><a href="#__codelineno-0-900"> 900</a></span>
<span class="normal"><a href="#__codelineno-0-901"> 901</a></span>
<span class="normal"><a href="#__codelineno-0-902"> 902</a></span>
<span class="normal"><a href="#__codelineno-0-903"> 903</a></span>
<span class="normal"><a href="#__codelineno-0-904"> 904</a></span>
<span class="normal"><a href="#__codelineno-0-905"> 905</a></span>
<span class="normal"><a href="#__codelineno-0-906"> 906</a></span>
<span class="normal"><a href="#__codelineno-0-907"> 907</a></span>
<span class="normal"><a href="#__codelineno-0-908"> 908</a></span>
<span class="normal"><a href="#__codelineno-0-909"> 909</a></span>
<span class="normal"><a href="#__codelineno-0-910"> 910</a></span>
<span class="normal"><a href="#__codelineno-0-911"> 911</a></span>
<span class="normal"><a href="#__codelineno-0-912"> 912</a></span>
<span class="normal"><a href="#__codelineno-0-913"> 913</a></span>
<span class="normal"><a href="#__codelineno-0-914"> 914</a></span>
<span class="normal"><a href="#__codelineno-0-915"> 915</a></span>
<span class="normal"><a href="#__codelineno-0-916"> 916</a></span>
<span class="normal"><a href="#__codelineno-0-917"> 917</a></span>
<span class="normal"><a href="#__codelineno-0-918"> 918</a></span>
<span class="normal"><a href="#__codelineno-0-919"> 919</a></span>
<span class="normal"><a href="#__codelineno-0-920"> 920</a></span>
<span class="normal"><a href="#__codelineno-0-921"> 921</a></span>
<span class="normal"><a href="#__codelineno-0-922"> 922</a></span>
<span class="normal"><a href="#__codelineno-0-923"> 923</a></span>
<span class="normal"><a href="#__codelineno-0-924"> 924</a></span>
<span class="normal"><a href="#__codelineno-0-925"> 925</a></span>
<span class="normal"><a href="#__codelineno-0-926"> 926</a></span>
<span class="normal"><a href="#__codelineno-0-927"> 927</a></span>
<span class="normal"><a href="#__codelineno-0-928"> 928</a></span>
<span class="normal"><a href="#__codelineno-0-929"> 929</a></span>
<span class="normal"><a href="#__codelineno-0-930"> 930</a></span>
<span class="normal"><a href="#__codelineno-0-931"> 931</a></span>
<span class="normal"><a href="#__codelineno-0-932"> 932</a></span>
<span class="normal"><a href="#__codelineno-0-933"> 933</a></span>
<span class="normal"><a href="#__codelineno-0-934"> 934</a></span>
<span class="normal"><a href="#__codelineno-0-935"> 935</a></span>
<span class="normal"><a href="#__codelineno-0-936"> 936</a></span>
<span class="normal"><a href="#__codelineno-0-937"> 937</a></span>
<span class="normal"><a href="#__codelineno-0-938"> 938</a></span>
<span class="normal"><a href="#__codelineno-0-939"> 939</a></span>
<span class="normal"><a href="#__codelineno-0-940"> 940</a></span>
<span class="normal"><a href="#__codelineno-0-941"> 941</a></span>
<span class="normal"><a href="#__codelineno-0-942"> 942</a></span>
<span class="normal"><a href="#__codelineno-0-943"> 943</a></span>
<span class="normal"><a href="#__codelineno-0-944"> 944</a></span>
<span class="normal"><a href="#__codelineno-0-945"> 945</a></span>
<span class="normal"><a href="#__codelineno-0-946"> 946</a></span>
<span class="normal"><a href="#__codelineno-0-947"> 947</a></span>
<span class="normal"><a href="#__codelineno-0-948"> 948</a></span>
<span class="normal"><a href="#__codelineno-0-949"> 949</a></span>
<span class="normal"><a href="#__codelineno-0-950"> 950</a></span>
<span class="normal"><a href="#__codelineno-0-951"> 951</a></span>
<span class="normal"><a href="#__codelineno-0-952"> 952</a></span>
<span class="normal"><a href="#__codelineno-0-953"> 953</a></span>
<span class="normal"><a href="#__codelineno-0-954"> 954</a></span>
<span class="normal"><a href="#__codelineno-0-955"> 955</a></span>
<span class="normal"><a href="#__codelineno-0-956"> 956</a></span>
<span class="normal"><a href="#__codelineno-0-957"> 957</a></span>
<span class="normal"><a href="#__codelineno-0-958"> 958</a></span>
<span class="normal"><a href="#__codelineno-0-959"> 959</a></span>
<span class="normal"><a href="#__codelineno-0-960"> 960</a></span>
<span class="normal"><a href="#__codelineno-0-961"> 961</a></span>
<span class="normal"><a href="#__codelineno-0-962"> 962</a></span>
<span class="normal"><a href="#__codelineno-0-963"> 963</a></span>
<span class="normal"><a href="#__codelineno-0-964"> 964</a></span>
<span class="normal"><a href="#__codelineno-0-965"> 965</a></span>
<span class="normal"><a href="#__codelineno-0-966"> 966</a></span>
<span class="normal"><a href="#__codelineno-0-967"> 967</a></span>
<span class="normal"><a href="#__codelineno-0-968"> 968</a></span>
<span class="normal"><a href="#__codelineno-0-969"> 969</a></span>
<span class="normal"><a href="#__codelineno-0-970"> 970</a></span>
<span class="normal"><a href="#__codelineno-0-971"> 971</a></span>
<span class="normal"><a href="#__codelineno-0-972"> 972</a></span>
<span class="normal"><a href="#__codelineno-0-973"> 973</a></span>
<span class="normal"><a href="#__codelineno-0-974"> 974</a></span>
<span class="normal"><a href="#__codelineno-0-975"> 975</a></span>
<span class="normal"><a href="#__codelineno-0-976"> 976</a></span>
<span class="normal"><a href="#__codelineno-0-977"> 977</a></span>
<span class="normal"><a href="#__codelineno-0-978"> 978</a></span>
<span class="normal"><a href="#__codelineno-0-979"> 979</a></span>
<span class="normal"><a href="#__codelineno-0-980"> 980</a></span>
<span class="normal"><a href="#__codelineno-0-981"> 981</a></span>
<span class="normal"><a href="#__codelineno-0-982"> 982</a></span>
<span class="normal"><a href="#__codelineno-0-983"> 983</a></span>
<span class="normal"><a href="#__codelineno-0-984"> 984</a></span>
<span class="normal"><a href="#__codelineno-0-985"> 985</a></span>
<span class="normal"><a href="#__codelineno-0-986"> 986</a></span>
<span class="normal"><a href="#__codelineno-0-987"> 987</a></span>
<span class="normal"><a href="#__codelineno-0-988"> 988</a></span>
<span class="normal"><a href="#__codelineno-0-989"> 989</a></span>
<span class="normal"><a href="#__codelineno-0-990"> 990</a></span>
<span class="normal"><a href="#__codelineno-0-991"> 991</a></span>
<span class="normal"><a href="#__codelineno-0-992"> 992</a></span>
<span class="normal"><a href="#__codelineno-0-993"> 993</a></span>
<span class="normal"><a href="#__codelineno-0-994"> 994</a></span>
<span class="normal"><a href="#__codelineno-0-995"> 995</a></span>
<span class="normal"><a href="#__codelineno-0-996"> 996</a></span>
<span class="normal"><a href="#__codelineno-0-997"> 997</a></span>
<span class="normal"><a href="#__codelineno-0-998"> 998</a></span>
<span class="normal"><a href="#__codelineno-0-999"> 999</a></span>
<span class="normal"><a href="#__codelineno-0-1000">1000</a></span>
<span class="normal"><a href="#__codelineno-0-1001">1001</a></span>
<span class="normal"><a href="#__codelineno-0-1002">1002</a></span>
<span class="normal"><a href="#__codelineno-0-1003">1003</a></span>
<span class="normal"><a href="#__codelineno-0-1004">1004</a></span>
<span class="normal"><a href="#__codelineno-0-1005">1005</a></span>
<span class="normal"><a href="#__codelineno-0-1006">1006</a></span>
<span class="normal"><a href="#__codelineno-0-1007">1007</a></span>
<span class="normal"><a href="#__codelineno-0-1008">1008</a></span>
<span class="normal"><a href="#__codelineno-0-1009">1009</a></span>
<span class="normal"><a href="#__codelineno-0-1010">1010</a></span>
<span class="normal"><a href="#__codelineno-0-1011">1011</a></span>
<span class="normal"><a href="#__codelineno-0-1012">1012</a></span>
<span class="normal"><a href="#__codelineno-0-1013">1013</a></span>
<span class="normal"><a href="#__codelineno-0-1014">1014</a></span>
<span class="normal"><a href="#__codelineno-0-1015">1015</a></span>
<span class="normal"><a href="#__codelineno-0-1016">1016</a></span>
<span class="normal"><a href="#__codelineno-0-1017">1017</a></span>
<span class="normal"><a href="#__codelineno-0-1018">1018</a></span>
<span class="normal"><a href="#__codelineno-0-1019">1019</a></span>
<span class="normal"><a href="#__codelineno-0-1020">1020</a></span>
<span class="normal"><a href="#__codelineno-0-1021">1021</a></span>
<span class="normal"><a href="#__codelineno-0-1022">1022</a></span>
<span class="normal"><a href="#__codelineno-0-1023">1023</a></span>
<span class="normal"><a href="#__codelineno-0-1024">1024</a></span>
<span class="normal"><a href="#__codelineno-0-1025">1025</a></span>
<span class="normal"><a href="#__codelineno-0-1026">1026</a></span>
<span class="normal"><a href="#__codelineno-0-1027">1027</a></span>
<span class="normal"><a href="#__codelineno-0-1028">1028</a></span>
<span class="normal"><a href="#__codelineno-0-1029">1029</a></span>
<span class="normal"><a href="#__codelineno-0-1030">1030</a></span>
<span class="normal"><a href="#__codelineno-0-1031">1031</a></span>
<span class="normal"><a href="#__codelineno-0-1032">1032</a></span>
<span class="normal"><a href="#__codelineno-0-1033">1033</a></span>
<span class="normal"><a href="#__codelineno-0-1034">1034</a></span>
<span class="normal"><a href="#__codelineno-0-1035">1035</a></span>
<span class="normal"><a href="#__codelineno-0-1036">1036</a></span>
<span class="normal"><a href="#__codelineno-0-1037">1037</a></span>
<span class="normal"><a href="#__codelineno-0-1038">1038</a></span>
<span class="normal"><a href="#__codelineno-0-1039">1039</a></span>
<span class="normal"><a href="#__codelineno-0-1040">1040</a></span>
<span class="normal"><a href="#__codelineno-0-1041">1041</a></span>
<span class="normal"><a href="#__codelineno-0-1042">1042</a></span>
<span class="normal"><a href="#__codelineno-0-1043">1043</a></span>
<span class="normal"><a href="#__codelineno-0-1044">1044</a></span>
<span class="normal"><a href="#__codelineno-0-1045">1045</a></span>
<span class="normal"><a href="#__codelineno-0-1046">1046</a></span>
<span class="normal"><a href="#__codelineno-0-1047">1047</a></span>
<span class="normal"><a href="#__codelineno-0-1048">1048</a></span>
<span class="normal"><a href="#__codelineno-0-1049">1049</a></span>
<span class="normal"><a href="#__codelineno-0-1050">1050</a></span>
<span class="normal"><a href="#__codelineno-0-1051">1051</a></span>
<span class="normal"><a href="#__codelineno-0-1052">1052</a></span>
<span class="normal"><a href="#__codelineno-0-1053">1053</a></span>
<span class="normal"><a href="#__codelineno-0-1054">1054</a></span>
<span class="normal"><a href="#__codelineno-0-1055">1055</a></span>
<span class="normal"><a href="#__codelineno-0-1056">1056</a></span>
<span class="normal"><a href="#__codelineno-0-1057">1057</a></span>
<span class="normal"><a href="#__codelineno-0-1058">1058</a></span>
<span class="normal"><a href="#__codelineno-0-1059">1059</a></span>
<span class="normal"><a href="#__codelineno-0-1060">1060</a></span>
<span class="normal"><a href="#__codelineno-0-1061">1061</a></span>
<span class="normal"><a href="#__codelineno-0-1062">1062</a></span>
<span class="normal"><a href="#__codelineno-0-1063">1063</a></span>
<span class="normal"><a href="#__codelineno-0-1064">1064</a></span>
<span class="normal"><a href="#__codelineno-0-1065">1065</a></span>
<span class="normal"><a href="#__codelineno-0-1066">1066</a></span>
<span class="normal"><a href="#__codelineno-0-1067">1067</a></span>
<span class="normal"><a href="#__codelineno-0-1068">1068</a></span>
<span class="normal"><a href="#__codelineno-0-1069">1069</a></span>
<span class="normal"><a href="#__codelineno-0-1070">1070</a></span>
<span class="normal"><a href="#__codelineno-0-1071">1071</a></span>
<span class="normal"><a href="#__codelineno-0-1072">1072</a></span>
<span class="normal"><a href="#__codelineno-0-1073">1073</a></span>
<span class="normal"><a href="#__codelineno-0-1074">1074</a></span>
<span class="normal"><a href="#__codelineno-0-1075">1075</a></span>
<span class="normal"><a href="#__codelineno-0-1076">1076</a></span>
<span class="normal"><a href="#__codelineno-0-1077">1077</a></span>
<span class="normal"><a href="#__codelineno-0-1078">1078</a></span>
<span class="normal"><a href="#__codelineno-0-1079">1079</a></span>
<span class="normal"><a href="#__codelineno-0-1080">1080</a></span>
<span class="normal"><a href="#__codelineno-0-1081">1081</a></span>
<span class="normal"><a href="#__codelineno-0-1082">1082</a></span>
<span class="normal"><a href="#__codelineno-0-1083">1083</a></span>
<span class="normal"><a href="#__codelineno-0-1084">1084</a></span>
<span class="normal"><a href="#__codelineno-0-1085">1085</a></span>
<span class="normal"><a href="#__codelineno-0-1086">1086</a></span>
<span class="normal"><a href="#__codelineno-0-1087">1087</a></span>
<span class="normal"><a href="#__codelineno-0-1088">1088</a></span>
<span class="normal"><a href="#__codelineno-0-1089">1089</a></span>
<span class="normal"><a href="#__codelineno-0-1090">1090</a></span>
<span class="normal"><a href="#__codelineno-0-1091">1091</a></span>
<span class="normal"><a href="#__codelineno-0-1092">1092</a></span>
<span class="normal"><a href="#__codelineno-0-1093">1093</a></span>
<span class="normal"><a href="#__codelineno-0-1094">1094</a></span>
<span class="normal"><a href="#__codelineno-0-1095">1095</a></span>
<span class="normal"><a href="#__codelineno-0-1096">1096</a></span>
<span class="normal"><a href="#__codelineno-0-1097">1097</a></span>
<span class="normal"><a href="#__codelineno-0-1098">1098</a></span>
<span class="normal"><a href="#__codelineno-0-1099">1099</a></span>
<span class="normal"><a href="#__codelineno-0-1100">1100</a></span>
<span class="normal"><a href="#__codelineno-0-1101">1101</a></span>
<span class="normal"><a href="#__codelineno-0-1102">1102</a></span>
<span class="normal"><a href="#__codelineno-0-1103">1103</a></span>
<span class="normal"><a href="#__codelineno-0-1104">1104</a></span>
<span class="normal"><a href="#__codelineno-0-1105">1105</a></span>
<span class="normal"><a href="#__codelineno-0-1106">1106</a></span>
<span class="normal"><a href="#__codelineno-0-1107">1107</a></span>
<span class="normal"><a href="#__codelineno-0-1108">1108</a></span>
<span class="normal"><a href="#__codelineno-0-1109">1109</a></span>
<span class="normal"><a href="#__codelineno-0-1110">1110</a></span>
<span class="normal"><a href="#__codelineno-0-1111">1111</a></span>
<span class="normal"><a href="#__codelineno-0-1112">1112</a></span>
<span class="normal"><a href="#__codelineno-0-1113">1113</a></span>
<span class="normal"><a href="#__codelineno-0-1114">1114</a></span>
<span class="normal"><a href="#__codelineno-0-1115">1115</a></span>
<span class="normal"><a href="#__codelineno-0-1116">1116</a></span>
<span class="normal"><a href="#__codelineno-0-1117">1117</a></span>
<span class="normal"><a href="#__codelineno-0-1118">1118</a></span>
<span class="normal"><a href="#__codelineno-0-1119">1119</a></span>
<span class="normal"><a href="#__codelineno-0-1120">1120</a></span>
<span class="normal"><a href="#__codelineno-0-1121">1121</a></span>
<span class="normal"><a href="#__codelineno-0-1122">1122</a></span>
<span class="normal"><a href="#__codelineno-0-1123">1123</a></span>
<span class="normal"><a href="#__codelineno-0-1124">1124</a></span>
<span class="normal"><a href="#__codelineno-0-1125">1125</a></span>
<span class="normal"><a href="#__codelineno-0-1126">1126</a></span>
<span class="normal"><a href="#__codelineno-0-1127">1127</a></span>
<span class="normal"><a href="#__codelineno-0-1128">1128</a></span>
<span class="normal"><a href="#__codelineno-0-1129">1129</a></span>
<span class="normal"><a href="#__codelineno-0-1130">1130</a></span>
<span class="normal"><a href="#__codelineno-0-1131">1131</a></span>
<span class="normal"><a href="#__codelineno-0-1132">1132</a></span>
<span class="normal"><a href="#__codelineno-0-1133">1133</a></span>
<span class="normal"><a href="#__codelineno-0-1134">1134</a></span>
<span class="normal"><a href="#__codelineno-0-1135">1135</a></span>
<span class="normal"><a href="#__codelineno-0-1136">1136</a></span>
<span class="normal"><a href="#__codelineno-0-1137">1137</a></span>
<span class="normal"><a href="#__codelineno-0-1138">1138</a></span>
<span class="normal"><a href="#__codelineno-0-1139">1139</a></span>
<span class="normal"><a href="#__codelineno-0-1140">1140</a></span>
<span class="normal"><a href="#__codelineno-0-1141">1141</a></span>
<span class="normal"><a href="#__codelineno-0-1142">1142</a></span>
<span class="normal"><a href="#__codelineno-0-1143">1143</a></span>
<span class="normal"><a href="#__codelineno-0-1144">1144</a></span>
<span class="normal"><a href="#__codelineno-0-1145">1145</a></span>
<span class="normal"><a href="#__codelineno-0-1146">1146</a></span>
<span class="normal"><a href="#__codelineno-0-1147">1147</a></span>
<span class="normal"><a href="#__codelineno-0-1148">1148</a></span>
<span class="normal"><a href="#__codelineno-0-1149">1149</a></span>
<span class="normal"><a href="#__codelineno-0-1150">1150</a></span>
<span class="normal"><a href="#__codelineno-0-1151">1151</a></span>
<span class="normal"><a href="#__codelineno-0-1152">1152</a></span>
<span class="normal"><a href="#__codelineno-0-1153">1153</a></span>
<span class="normal"><a href="#__codelineno-0-1154">1154</a></span>
<span class="normal"><a href="#__codelineno-0-1155">1155</a></span>
<span class="normal"><a href="#__codelineno-0-1156">1156</a></span>
<span class="normal"><a href="#__codelineno-0-1157">1157</a></span>
<span class="normal"><a href="#__codelineno-0-1158">1158</a></span>
<span class="normal"><a href="#__codelineno-0-1159">1159</a></span>
<span class="normal"><a href="#__codelineno-0-1160">1160</a></span>
<span class="normal"><a href="#__codelineno-0-1161">1161</a></span>
<span class="normal"><a href="#__codelineno-0-1162">1162</a></span>
<span class="normal"><a href="#__codelineno-0-1163">1163</a></span>
<span class="normal"><a href="#__codelineno-0-1164">1164</a></span>
<span class="normal"><a href="#__codelineno-0-1165">1165</a></span>
<span class="normal"><a href="#__codelineno-0-1166">1166</a></span>
<span class="normal"><a href="#__codelineno-0-1167">1167</a></span>
<span class="normal"><a href="#__codelineno-0-1168">1168</a></span>
<span class="normal"><a href="#__codelineno-0-1169">1169</a></span>
<span class="normal"><a href="#__codelineno-0-1170">1170</a></span>
<span class="normal"><a href="#__codelineno-0-1171">1171</a></span>
<span class="normal"><a href="#__codelineno-0-1172">1172</a></span>
<span class="normal"><a href="#__codelineno-0-1173">1173</a></span>
<span class="normal"><a href="#__codelineno-0-1174">1174</a></span>
<span class="normal"><a href="#__codelineno-0-1175">1175</a></span>
<span class="normal"><a href="#__codelineno-0-1176">1176</a></span>
<span class="normal"><a href="#__codelineno-0-1177">1177</a></span>
<span class="normal"><a href="#__codelineno-0-1178">1178</a></span>
<span class="normal"><a href="#__codelineno-0-1179">1179</a></span>
<span class="normal"><a href="#__codelineno-0-1180">1180</a></span>
<span class="normal"><a href="#__codelineno-0-1181">1181</a></span>
<span class="normal"><a href="#__codelineno-0-1182">1182</a></span>
<span class="normal"><a href="#__codelineno-0-1183">1183</a></span>
<span class="normal"><a href="#__codelineno-0-1184">1184</a></span>
<span class="normal"><a href="#__codelineno-0-1185">1185</a></span>
<span class="normal"><a href="#__codelineno-0-1186">1186</a></span>
<span class="normal"><a href="#__codelineno-0-1187">1187</a></span>
<span class="normal"><a href="#__codelineno-0-1188">1188</a></span>
<span class="normal"><a href="#__codelineno-0-1189">1189</a></span>
<span class="normal"><a href="#__codelineno-0-1190">1190</a></span>
<span class="normal"><a href="#__codelineno-0-1191">1191</a></span>
<span class="normal"><a href="#__codelineno-0-1192">1192</a></span>
<span class="normal"><a href="#__codelineno-0-1193">1193</a></span>
<span class="normal"><a href="#__codelineno-0-1194">1194</a></span>
<span class="normal"><a href="#__codelineno-0-1195">1195</a></span>
<span class="normal"><a href="#__codelineno-0-1196">1196</a></span>
<span class="normal"><a href="#__codelineno-0-1197">1197</a></span>
<span class="normal"><a href="#__codelineno-0-1198">1198</a></span>
<span class="normal"><a href="#__codelineno-0-1199">1199</a></span>
<span class="normal"><a href="#__codelineno-0-1200">1200</a></span>
<span class="normal"><a href="#__codelineno-0-1201">1201</a></span>
<span class="normal"><a href="#__codelineno-0-1202">1202</a></span>
<span class="normal"><a href="#__codelineno-0-1203">1203</a></span>
<span class="normal"><a href="#__codelineno-0-1204">1204</a></span>
<span class="normal"><a href="#__codelineno-0-1205">1205</a></span>
<span class="normal"><a href="#__codelineno-0-1206">1206</a></span>
<span class="normal"><a href="#__codelineno-0-1207">1207</a></span>
<span class="normal"><a href="#__codelineno-0-1208">1208</a></span>
<span class="normal"><a href="#__codelineno-0-1209">1209</a></span>
<span class="normal"><a href="#__codelineno-0-1210">1210</a></span>
<span class="normal"><a href="#__codelineno-0-1211">1211</a></span>
<span class="normal"><a href="#__codelineno-0-1212">1212</a></span>
<span class="normal"><a href="#__codelineno-0-1213">1213</a></span>
<span class="normal"><a href="#__codelineno-0-1214">1214</a></span>
<span class="normal"><a href="#__codelineno-0-1215">1215</a></span>
<span class="normal"><a href="#__codelineno-0-1216">1216</a></span>
<span class="normal"><a href="#__codelineno-0-1217">1217</a></span>
<span class="normal"><a href="#__codelineno-0-1218">1218</a></span>
<span class="normal"><a href="#__codelineno-0-1219">1219</a></span>
<span class="normal"><a href="#__codelineno-0-1220">1220</a></span>
<span class="normal"><a href="#__codelineno-0-1221">1221</a></span>
<span class="normal"><a href="#__codelineno-0-1222">1222</a></span>
<span class="normal"><a href="#__codelineno-0-1223">1223</a></span>
<span class="normal"><a href="#__codelineno-0-1224">1224</a></span>
<span class="normal"><a href="#__codelineno-0-1225">1225</a></span>
<span class="normal"><a href="#__codelineno-0-1226">1226</a></span>
<span class="normal"><a href="#__codelineno-0-1227">1227</a></span>
<span class="normal"><a href="#__codelineno-0-1228">1228</a></span>
<span class="normal"><a href="#__codelineno-0-1229">1229</a></span>
<span class="normal"><a href="#__codelineno-0-1230">1230</a></span>
<span class="normal"><a href="#__codelineno-0-1231">1231</a></span>
<span class="normal"><a href="#__codelineno-0-1232">1232</a></span>
<span class="normal"><a href="#__codelineno-0-1233">1233</a></span>
<span class="normal"><a href="#__codelineno-0-1234">1234</a></span>
<span class="normal"><a href="#__codelineno-0-1235">1235</a></span>
<span class="normal"><a href="#__codelineno-0-1236">1236</a></span>
<span class="normal"><a href="#__codelineno-0-1237">1237</a></span>
<span class="normal"><a href="#__codelineno-0-1238">1238</a></span>
<span class="normal"><a href="#__codelineno-0-1239">1239</a></span>
<span class="normal"><a href="#__codelineno-0-1240">1240</a></span>
<span class="normal"><a href="#__codelineno-0-1241">1241</a></span>
<span class="normal"><a href="#__codelineno-0-1242">1242</a></span>
<span class="normal"><a href="#__codelineno-0-1243">1243</a></span>
<span class="normal"><a href="#__codelineno-0-1244">1244</a></span>
<span class="normal"><a href="#__codelineno-0-1245">1245</a></span>
<span class="normal"><a href="#__codelineno-0-1246">1246</a></span>
<span class="normal"><a href="#__codelineno-0-1247">1247</a></span>
<span class="normal"><a href="#__codelineno-0-1248">1248</a></span>
<span class="normal"><a href="#__codelineno-0-1249">1249</a></span>
<span class="normal"><a href="#__codelineno-0-1250">1250</a></span>
<span class="normal"><a href="#__codelineno-0-1251">1251</a></span>
<span class="normal"><a href="#__codelineno-0-1252">1252</a></span>
<span class="normal"><a href="#__codelineno-0-1253">1253</a></span>
<span class="normal"><a href="#__codelineno-0-1254">1254</a></span>
<span class="normal"><a href="#__codelineno-0-1255">1255</a></span>
<span class="normal"><a href="#__codelineno-0-1256">1256</a></span>
<span class="normal"><a href="#__codelineno-0-1257">1257</a></span>
<span class="normal"><a href="#__codelineno-0-1258">1258</a></span>
<span class="normal"><a href="#__codelineno-0-1259">1259</a></span>
<span class="normal"><a href="#__codelineno-0-1260">1260</a></span>
<span class="normal"><a href="#__codelineno-0-1261">1261</a></span>
<span class="normal"><a href="#__codelineno-0-1262">1262</a></span>
<span class="normal"><a href="#__codelineno-0-1263">1263</a></span>
<span class="normal"><a href="#__codelineno-0-1264">1264</a></span>
<span class="normal"><a href="#__codelineno-0-1265">1265</a></span>
<span class="normal"><a href="#__codelineno-0-1266">1266</a></span>
<span class="normal"><a href="#__codelineno-0-1267">1267</a></span>
<span class="normal"><a href="#__codelineno-0-1268">1268</a></span>
<span class="normal"><a href="#__codelineno-0-1269">1269</a></span>
<span class="normal"><a href="#__codelineno-0-1270">1270</a></span>
<span class="normal"><a href="#__codelineno-0-1271">1271</a></span>
<span class="normal"><a href="#__codelineno-0-1272">1272</a></span>
<span class="normal"><a href="#__codelineno-0-1273">1273</a></span>
<span class="normal"><a href="#__codelineno-0-1274">1274</a></span>
<span class="normal"><a href="#__codelineno-0-1275">1275</a></span>
<span class="normal"><a href="#__codelineno-0-1276">1276</a></span>
<span class="normal"><a href="#__codelineno-0-1277">1277</a></span>
<span class="normal"><a href="#__codelineno-0-1278">1278</a></span>
<span class="normal"><a href="#__codelineno-0-1279">1279</a></span>
<span class="normal"><a href="#__codelineno-0-1280">1280</a></span>
<span class="normal"><a href="#__codelineno-0-1281">1281</a></span>
<span class="normal"><a href="#__codelineno-0-1282">1282</a></span>
<span class="normal"><a href="#__codelineno-0-1283">1283</a></span>
<span class="normal"><a href="#__codelineno-0-1284">1284</a></span>
<span class="normal"><a href="#__codelineno-0-1285">1285</a></span>
<span class="normal"><a href="#__codelineno-0-1286">1286</a></span>
<span class="normal"><a href="#__codelineno-0-1287">1287</a></span>
<span class="normal"><a href="#__codelineno-0-1288">1288</a></span>
<span class="normal"><a href="#__codelineno-0-1289">1289</a></span>
<span class="normal"><a href="#__codelineno-0-1290">1290</a></span>
<span class="normal"><a href="#__codelineno-0-1291">1291</a></span>
<span class="normal"><a href="#__codelineno-0-1292">1292</a></span>
<span class="normal"><a href="#__codelineno-0-1293">1293</a></span>
<span class="normal"><a href="#__codelineno-0-1294">1294</a></span>
<span class="normal"><a href="#__codelineno-0-1295">1295</a></span>
<span class="normal"><a href="#__codelineno-0-1296">1296</a></span>
<span class="normal"><a href="#__codelineno-0-1297">1297</a></span>
<span class="normal"><a href="#__codelineno-0-1298">1298</a></span>
<span class="normal"><a href="#__codelineno-0-1299">1299</a></span>
<span class="normal"><a href="#__codelineno-0-1300">1300</a></span>
<span class="normal"><a href="#__codelineno-0-1301">1301</a></span>
<span class="normal"><a href="#__codelineno-0-1302">1302</a></span>
<span class="normal"><a href="#__codelineno-0-1303">1303</a></span>
<span class="normal"><a href="#__codelineno-0-1304">1304</a></span>
<span class="normal"><a href="#__codelineno-0-1305">1305</a></span>
<span class="normal"><a href="#__codelineno-0-1306">1306</a></span>
<span class="normal"><a href="#__codelineno-0-1307">1307</a></span>
<span class="normal"><a href="#__codelineno-0-1308">1308</a></span>
<span class="normal"><a href="#__codelineno-0-1309">1309</a></span>
<span class="normal"><a href="#__codelineno-0-1310">1310</a></span>
<span class="normal"><a href="#__codelineno-0-1311">1311</a></span>
<span class="normal"><a href="#__codelineno-0-1312">1312</a></span>
<span class="normal"><a href="#__codelineno-0-1313">1313</a></span>
<span class="normal"><a href="#__codelineno-0-1314">1314</a></span>
<span class="normal"><a href="#__codelineno-0-1315">1315</a></span>
<span class="normal"><a href="#__codelineno-0-1316">1316</a></span>
<span class="normal"><a href="#__codelineno-0-1317">1317</a></span>
<span class="normal"><a href="#__codelineno-0-1318">1318</a></span>
<span class="normal"><a href="#__codelineno-0-1319">1319</a></span>
<span class="normal"><a href="#__codelineno-0-1320">1320</a></span>
<span class="normal"><a href="#__codelineno-0-1321">1321</a></span>
<span class="normal"><a href="#__codelineno-0-1322">1322</a></span>
<span class="normal"><a href="#__codelineno-0-1323">1323</a></span>
<span class="normal"><a href="#__codelineno-0-1324">1324</a></span>
<span class="normal"><a href="#__codelineno-0-1325">1325</a></span>
<span class="normal"><a href="#__codelineno-0-1326">1326</a></span>
<span class="normal"><a href="#__codelineno-0-1327">1327</a></span>
<span class="normal"><a href="#__codelineno-0-1328">1328</a></span>
<span class="normal"><a href="#__codelineno-0-1329">1329</a></span>
<span class="normal"><a href="#__codelineno-0-1330">1330</a></span>
<span class="normal"><a href="#__codelineno-0-1331">1331</a></span>
<span class="normal"><a href="#__codelineno-0-1332">1332</a></span>
<span class="normal"><a href="#__codelineno-0-1333">1333</a></span>
<span class="normal"><a href="#__codelineno-0-1334">1334</a></span>
<span class="normal"><a href="#__codelineno-0-1335">1335</a></span>
<span class="normal"><a href="#__codelineno-0-1336">1336</a></span>
<span class="normal"><a href="#__codelineno-0-1337">1337</a></span>
<span class="normal"><a href="#__codelineno-0-1338">1338</a></span>
<span class="normal"><a href="#__codelineno-0-1339">1339</a></span>
<span class="normal"><a href="#__codelineno-0-1340">1340</a></span>
<span class="normal"><a href="#__codelineno-0-1341">1341</a></span>
<span class="normal"><a href="#__codelineno-0-1342">1342</a></span>
<span class="normal"><a href="#__codelineno-0-1343">1343</a></span>
<span class="normal"><a href="#__codelineno-0-1344">1344</a></span>
<span class="normal"><a href="#__codelineno-0-1345">1345</a></span>
<span class="normal"><a href="#__codelineno-0-1346">1346</a></span>
<span class="normal"><a href="#__codelineno-0-1347">1347</a></span>
<span class="normal"><a href="#__codelineno-0-1348">1348</a></span>
<span class="normal"><a href="#__codelineno-0-1349">1349</a></span>
<span class="normal"><a href="#__codelineno-0-1350">1350</a></span>
<span class="normal"><a href="#__codelineno-0-1351">1351</a></span>
<span class="normal"><a href="#__codelineno-0-1352">1352</a></span>
<span class="normal"><a href="#__codelineno-0-1353">1353</a></span>
<span class="normal"><a href="#__codelineno-0-1354">1354</a></span>
<span class="normal"><a href="#__codelineno-0-1355">1355</a></span>
<span class="normal"><a href="#__codelineno-0-1356">1356</a></span>
<span class="normal"><a href="#__codelineno-0-1357">1357</a></span>
<span class="normal"><a href="#__codelineno-0-1358">1358</a></span>
<span class="normal"><a href="#__codelineno-0-1359">1359</a></span>
<span class="normal"><a href="#__codelineno-0-1360">1360</a></span>
<span class="normal"><a href="#__codelineno-0-1361">1361</a></span>
<span class="normal"><a href="#__codelineno-0-1362">1362</a></span>
<span class="normal"><a href="#__codelineno-0-1363">1363</a></span>
<span class="normal"><a href="#__codelineno-0-1364">1364</a></span>
<span class="normal"><a href="#__codelineno-0-1365">1365</a></span>
<span class="normal"><a href="#__codelineno-0-1366">1366</a></span>
<span class="normal"><a href="#__codelineno-0-1367">1367</a></span>
<span class="normal"><a href="#__codelineno-0-1368">1368</a></span>
<span class="normal"><a href="#__codelineno-0-1369">1369</a></span>
<span class="normal"><a href="#__codelineno-0-1370">1370</a></span>
<span class="normal"><a href="#__codelineno-0-1371">1371</a></span>
<span class="normal"><a href="#__codelineno-0-1372">1372</a></span>
<span class="normal"><a href="#__codelineno-0-1373">1373</a></span>
<span class="normal"><a href="#__codelineno-0-1374">1374</a></span>
<span class="normal"><a href="#__codelineno-0-1375">1375</a></span>
<span class="normal"><a href="#__codelineno-0-1376">1376</a></span>
<span class="normal"><a href="#__codelineno-0-1377">1377</a></span>
<span class="normal"><a href="#__codelineno-0-1378">1378</a></span>
<span class="normal"><a href="#__codelineno-0-1379">1379</a></span>
<span class="normal"><a href="#__codelineno-0-1380">1380</a></span>
<span class="normal"><a href="#__codelineno-0-1381">1381</a></span>
<span class="normal"><a href="#__codelineno-0-1382">1382</a></span>
<span class="normal"><a href="#__codelineno-0-1383">1383</a></span>
<span class="normal"><a href="#__codelineno-0-1384">1384</a></span>
<span class="normal"><a href="#__codelineno-0-1385">1385</a></span>
<span class="normal"><a href="#__codelineno-0-1386">1386</a></span>
<span class="normal"><a href="#__codelineno-0-1387">1387</a></span>
<span class="normal"><a href="#__codelineno-0-1388">1388</a></span>
<span class="normal"><a href="#__codelineno-0-1389">1389</a></span>
<span class="normal"><a href="#__codelineno-0-1390">1390</a></span>
<span class="normal"><a href="#__codelineno-0-1391">1391</a></span>
<span class="normal"><a href="#__codelineno-0-1392">1392</a></span>
<span class="normal"><a href="#__codelineno-0-1393">1393</a></span>
<span class="normal"><a href="#__codelineno-0-1394">1394</a></span>
<span class="normal"><a href="#__codelineno-0-1395">1395</a></span>
<span class="normal"><a href="#__codelineno-0-1396">1396</a></span>
<span class="normal"><a href="#__codelineno-0-1397">1397</a></span>
<span class="normal"><a href="#__codelineno-0-1398">1398</a></span>
<span class="normal"><a href="#__codelineno-0-1399">1399</a></span>
<span class="normal"><a href="#__codelineno-0-1400">1400</a></span>
<span class="normal"><a href="#__codelineno-0-1401">1401</a></span>
<span class="normal"><a href="#__codelineno-0-1402">1402</a></span>
<span class="normal"><a href="#__codelineno-0-1403">1403</a></span>
<span class="normal"><a href="#__codelineno-0-1404">1404</a></span>
<span class="normal"><a href="#__codelineno-0-1405">1405</a></span>
<span class="normal"><a href="#__codelineno-0-1406">1406</a></span>
<span class="normal"><a href="#__codelineno-0-1407">1407</a></span>
<span class="normal"><a href="#__codelineno-0-1408">1408</a></span>
<span class="normal"><a href="#__codelineno-0-1409">1409</a></span>
<span class="normal"><a href="#__codelineno-0-1410">1410</a></span>
<span class="normal"><a href="#__codelineno-0-1411">1411</a></span>
<span class="normal"><a href="#__codelineno-0-1412">1412</a></span>
<span class="normal"><a href="#__codelineno-0-1413">1413</a></span>
<span class="normal"><a href="#__codelineno-0-1414">1414</a></span>
<span class="normal"><a href="#__codelineno-0-1415">1415</a></span>
<span class="normal"><a href="#__codelineno-0-1416">1416</a></span>
<span class="normal"><a href="#__codelineno-0-1417">1417</a></span>
<span class="normal"><a href="#__codelineno-0-1418">1418</a></span>
<span class="normal"><a href="#__codelineno-0-1419">1419</a></span>
<span class="normal"><a href="#__codelineno-0-1420">1420</a></span>
<span class="normal"><a href="#__codelineno-0-1421">1421</a></span>
<span class="normal"><a href="#__codelineno-0-1422">1422</a></span>
<span class="normal"><a href="#__codelineno-0-1423">1423</a></span>
<span class="normal"><a href="#__codelineno-0-1424">1424</a></span>
<span class="normal"><a href="#__codelineno-0-1425">1425</a></span>
<span class="normal"><a href="#__codelineno-0-1426">1426</a></span>
<span class="normal"><a href="#__codelineno-0-1427">1427</a></span>
<span class="normal"><a href="#__codelineno-0-1428">1428</a></span>
<span class="normal"><a href="#__codelineno-0-1429">1429</a></span>
<span class="normal"><a href="#__codelineno-0-1430">1430</a></span>
<span class="normal"><a href="#__codelineno-0-1431">1431</a></span>
<span class="normal"><a href="#__codelineno-0-1432">1432</a></span>
<span class="normal"><a href="#__codelineno-0-1433">1433</a></span>
<span class="normal"><a href="#__codelineno-0-1434">1434</a></span>
<span class="normal"><a href="#__codelineno-0-1435">1435</a></span>
<span class="normal"><a href="#__codelineno-0-1436">1436</a></span>
<span class="normal"><a href="#__codelineno-0-1437">1437</a></span>
<span class="normal"><a href="#__codelineno-0-1438">1438</a></span>
<span class="normal"><a href="#__codelineno-0-1439">1439</a></span>
<span class="normal"><a href="#__codelineno-0-1440">1440</a></span>
<span class="normal"><a href="#__codelineno-0-1441">1441</a></span>
<span class="normal"><a href="#__codelineno-0-1442">1442</a></span>
<span class="normal"><a href="#__codelineno-0-1443">1443</a></span>
<span class="normal"><a href="#__codelineno-0-1444">1444</a></span>
<span class="normal"><a href="#__codelineno-0-1445">1445</a></span>
<span class="normal"><a href="#__codelineno-0-1446">1446</a></span>
<span class="normal"><a href="#__codelineno-0-1447">1447</a></span>
<span class="normal"><a href="#__codelineno-0-1448">1448</a></span>
<span class="normal"><a href="#__codelineno-0-1449">1449</a></span>
<span class="normal"><a href="#__codelineno-0-1450">1450</a></span>
<span class="normal"><a href="#__codelineno-0-1451">1451</a></span>
<span class="normal"><a href="#__codelineno-0-1452">1452</a></span>
<span class="normal"><a href="#__codelineno-0-1453">1453</a></span>
<span class="normal"><a href="#__codelineno-0-1454">1454</a></span>
<span class="normal"><a href="#__codelineno-0-1455">1455</a></span>
<span class="normal"><a href="#__codelineno-0-1456">1456</a></span>
<span class="normal"><a href="#__codelineno-0-1457">1457</a></span>
<span class="normal"><a href="#__codelineno-0-1458">1458</a></span>
<span class="normal"><a href="#__codelineno-0-1459">1459</a></span>
<span class="normal"><a href="#__codelineno-0-1460">1460</a></span>
<span class="normal"><a href="#__codelineno-0-1461">1461</a></span>
<span class="normal"><a href="#__codelineno-0-1462">1462</a></span>
<span class="normal"><a href="#__codelineno-0-1463">1463</a></span>
<span class="normal"><a href="#__codelineno-0-1464">1464</a></span>
<span class="normal"><a href="#__codelineno-0-1465">1465</a></span>
<span class="normal"><a href="#__codelineno-0-1466">1466</a></span>
<span class="normal"><a href="#__codelineno-0-1467">1467</a></span>
<span class="normal"><a href="#__codelineno-0-1468">1468</a></span>
<span class="normal"><a href="#__codelineno-0-1469">1469</a></span>
<span class="normal"><a href="#__codelineno-0-1470">1470</a></span>
<span class="normal"><a href="#__codelineno-0-1471">1471</a></span>
<span class="normal"><a href="#__codelineno-0-1472">1472</a></span>
<span class="normal"><a href="#__codelineno-0-1473">1473</a></span>
<span class="normal"><a href="#__codelineno-0-1474">1474</a></span>
<span class="normal"><a href="#__codelineno-0-1475">1475</a></span>
<span class="normal"><a href="#__codelineno-0-1476">1476</a></span>
<span class="normal"><a href="#__codelineno-0-1477">1477</a></span>
<span class="normal"><a href="#__codelineno-0-1478">1478</a></span>
<span class="normal"><a href="#__codelineno-0-1479">1479</a></span>
<span class="normal"><a href="#__codelineno-0-1480">1480</a></span>
<span class="normal"><a href="#__codelineno-0-1481">1481</a></span>
<span class="normal"><a href="#__codelineno-0-1482">1482</a></span>
<span class="normal"><a href="#__codelineno-0-1483">1483</a></span>
<span class="normal"><a href="#__codelineno-0-1484">1484</a></span>
<span class="normal"><a href="#__codelineno-0-1485">1485</a></span>
<span class="normal"><a href="#__codelineno-0-1486">1486</a></span>
<span class="normal"><a href="#__codelineno-0-1487">1487</a></span>
<span class="normal"><a href="#__codelineno-0-1488">1488</a></span>
<span class="normal"><a href="#__codelineno-0-1489">1489</a></span>
<span class="normal"><a href="#__codelineno-0-1490">1490</a></span>
<span class="normal"><a href="#__codelineno-0-1491">1491</a></span>
<span class="normal"><a href="#__codelineno-0-1492">1492</a></span>
<span class="normal"><a href="#__codelineno-0-1493">1493</a></span>
<span class="normal"><a href="#__codelineno-0-1494">1494</a></span>
<span class="normal"><a href="#__codelineno-0-1495">1495</a></span>
<span class="normal"><a href="#__codelineno-0-1496">1496</a></span>
<span class="normal"><a href="#__codelineno-0-1497">1497</a></span>
<span class="normal"><a href="#__codelineno-0-1498">1498</a></span>
<span class="normal"><a href="#__codelineno-0-1499">1499</a></span>
<span class="normal"><a href="#__codelineno-0-1500">1500</a></span>
<span class="normal"><a href="#__codelineno-0-1501">1501</a></span>
<span class="normal"><a href="#__codelineno-0-1502">1502</a></span>
<span class="normal"><a href="#__codelineno-0-1503">1503</a></span>
<span class="normal"><a href="#__codelineno-0-1504">1504</a></span>
<span class="normal"><a href="#__codelineno-0-1505">1505</a></span>
<span class="normal"><a href="#__codelineno-0-1506">1506</a></span>
<span class="normal"><a href="#__codelineno-0-1507">1507</a></span>
<span class="normal"><a href="#__codelineno-0-1508">1508</a></span>
<span class="normal"><a href="#__codelineno-0-1509">1509</a></span>
<span class="normal"><a href="#__codelineno-0-1510">1510</a></span>
<span class="normal"><a href="#__codelineno-0-1511">1511</a></span>
<span class="normal"><a href="#__codelineno-0-1512">1512</a></span>
<span class="normal"><a href="#__codelineno-0-1513">1513</a></span>
<span class="normal"><a href="#__codelineno-0-1514">1514</a></span>
<span class="normal"><a href="#__codelineno-0-1515">1515</a></span>
<span class="normal"><a href="#__codelineno-0-1516">1516</a></span>
<span class="normal"><a href="#__codelineno-0-1517">1517</a></span>
<span class="normal"><a href="#__codelineno-0-1518">1518</a></span>
<span class="normal"><a href="#__codelineno-0-1519">1519</a></span>
<span class="normal"><a href="#__codelineno-0-1520">1520</a></span>
<span class="normal"><a href="#__codelineno-0-1521">1521</a></span>
<span class="normal"><a href="#__codelineno-0-1522">1522</a></span>
<span class="normal"><a href="#__codelineno-0-1523">1523</a></span>
<span class="normal"><a href="#__codelineno-0-1524">1524</a></span>
<span class="normal"><a href="#__codelineno-0-1525">1525</a></span>
<span class="normal"><a href="#__codelineno-0-1526">1526</a></span>
<span class="normal"><a href="#__codelineno-0-1527">1527</a></span>
<span class="normal"><a href="#__codelineno-0-1528">1528</a></span>
<span class="normal"><a href="#__codelineno-0-1529">1529</a></span>
<span class="normal"><a href="#__codelineno-0-1530">1530</a></span>
<span class="normal"><a href="#__codelineno-0-1531">1531</a></span>
<span class="normal"><a href="#__codelineno-0-1532">1532</a></span>
<span class="normal"><a href="#__codelineno-0-1533">1533</a></span>
<span class="normal"><a href="#__codelineno-0-1534">1534</a></span>
<span class="normal"><a href="#__codelineno-0-1535">1535</a></span>
<span class="normal"><a href="#__codelineno-0-1536">1536</a></span>
<span class="normal"><a href="#__codelineno-0-1537">1537</a></span>
<span class="normal"><a href="#__codelineno-0-1538">1538</a></span>
<span class="normal"><a href="#__codelineno-0-1539">1539</a></span>
<span class="normal"><a href="#__codelineno-0-1540">1540</a></span>
<span class="normal"><a href="#__codelineno-0-1541">1541</a></span>
<span class="normal"><a href="#__codelineno-0-1542">1542</a></span>
<span class="normal"><a href="#__codelineno-0-1543">1543</a></span>
<span class="normal"><a href="#__codelineno-0-1544">1544</a></span>
<span class="normal"><a href="#__codelineno-0-1545">1545</a></span>
<span class="normal"><a href="#__codelineno-0-1546">1546</a></span>
<span class="normal"><a href="#__codelineno-0-1547">1547</a></span>
<span class="normal"><a href="#__codelineno-0-1548">1548</a></span>
<span class="normal"><a href="#__codelineno-0-1549">1549</a></span>
<span class="normal"><a href="#__codelineno-0-1550">1550</a></span>
<span class="normal"><a href="#__codelineno-0-1551">1551</a></span>
<span class="normal"><a href="#__codelineno-0-1552">1552</a></span>
<span class="normal"><a href="#__codelineno-0-1553">1553</a></span>
<span class="normal"><a href="#__codelineno-0-1554">1554</a></span>
<span class="normal"><a href="#__codelineno-0-1555">1555</a></span>
<span class="normal"><a href="#__codelineno-0-1556">1556</a></span>
<span class="normal"><a href="#__codelineno-0-1557">1557</a></span>
<span class="normal"><a href="#__codelineno-0-1558">1558</a></span>
<span class="normal"><a href="#__codelineno-0-1559">1559</a></span>
<span class="normal"><a href="#__codelineno-0-1560">1560</a></span>
<span class="normal"><a href="#__codelineno-0-1561">1561</a></span>
<span class="normal"><a href="#__codelineno-0-1562">1562</a></span>
<span class="normal"><a href="#__codelineno-0-1563">1563</a></span>
<span class="normal"><a href="#__codelineno-0-1564">1564</a></span>
<span class="normal"><a href="#__codelineno-0-1565">1565</a></span>
<span class="normal"><a href="#__codelineno-0-1566">1566</a></span>
<span class="normal"><a href="#__codelineno-0-1567">1567</a></span>
<span class="normal"><a href="#__codelineno-0-1568">1568</a></span>
<span class="normal"><a href="#__codelineno-0-1569">1569</a></span>
<span class="normal"><a href="#__codelineno-0-1570">1570</a></span>
<span class="normal"><a href="#__codelineno-0-1571">1571</a></span>
<span class="normal"><a href="#__codelineno-0-1572">1572</a></span>
<span class="normal"><a href="#__codelineno-0-1573">1573</a></span>
<span class="normal"><a href="#__codelineno-0-1574">1574</a></span>
<span class="normal"><a href="#__codelineno-0-1575">1575</a></span>
<span class="normal"><a href="#__codelineno-0-1576">1576</a></span>
<span class="normal"><a href="#__codelineno-0-1577">1577</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="sd">CSS stylesheets and JavaScript for the dashboard UI.</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3"></a>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="sd">This module contains embedded CSS and JavaScript as Python string constants. The styles</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="sd">implement a dark-themed interface with a fixed sidebar navigation and responsive content</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="sd">areas.</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7"></a>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="sd">Constants:</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="sd">    BASE_CSS: Global styles for layout, sidebar, cards, forms, and common elements.</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="sd">    BACKTEST_CSS: Styles specific to the backtest configuration page.</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="sd">    BACKTEST_JS: JavaScript for backtest page interactivity including:</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="sd">        - Strategy and parameter loading</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="sd">        - Publisher/dataset/symbol cascading selection</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="sd">        - Symbol preset management</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="sd">        - Date range validation</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="sd">        - Backtest execution and run history display</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18"></a>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="n">BASE_CSS</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="s2">* { margin: 0; padding: 0; box-sizing: border-box; }</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="s2">body {</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="s2">    font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, sans-serif;</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="s2">    background: #0d1117;</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="s2">    color: #e6edf3;</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="s2">    min-height: 100vh;</span>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="s2">    display: flex;</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="s2">}</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="s2">.sidebar {</span>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="s2">    width: 220px;</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="s2">    background: #161b22;</span>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="s2">    border-right: 1px solid #30363d;</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="s2">    min-height: 100vh;</span>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="s2">    position: fixed;</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="s2">    left: 0;</span>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="s2">    top: 0;</span>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="s2">    display: flex;</span>
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="s2">    flex-direction: column;</span>
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="s2">}</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="s2">.sidebar-header {</span>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="s2">    padding: 20px 16px;</span>
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="s2">    border-bottom: 1px solid #30363d;</span>
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="s2">}</span>
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43"></a><span class="s2">.sidebar-header h1 {</span>
</span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="s2">    font-size: 16px;</span>
</span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="s2">    font-weight: 600;</span>
</span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="s2">    color: #e6edf3;</span>
</span><span id="__span-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47"></a><span class="s2">}</span>
</span><span id="__span-0-48"><a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="s2">.sidebar-nav {</span>
</span><span id="__span-0-49"><a id="__codelineno-0-49" name="__codelineno-0-49"></a><span class="s2">    padding: 12px 8px;</span>
</span><span id="__span-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50"></a><span class="s2">    flex: 1;</span>
</span><span id="__span-0-51"><a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="s2">}</span>
</span><span id="__span-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="s2">.sidebar-nav a {</span>
</span><span id="__span-0-53"><a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="s2">    display: flex;</span>
</span><span id="__span-0-54"><a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="s2">    align-items: center;</span>
</span><span id="__span-0-55"><a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="s2">    gap: 10px;</span>
</span><span id="__span-0-56"><a id="__codelineno-0-56" name="__codelineno-0-56"></a><span class="s2">    padding: 10px 12px;</span>
</span><span id="__span-0-57"><a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="s2">    color: #8b949e;</span>
</span><span id="__span-0-58"><a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="s2">    text-decoration: none;</span>
</span><span id="__span-0-59"><a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="s2">    font-size: 14px;</span>
</span><span id="__span-0-60"><a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="s2">    border-radius: 6px;</span>
</span><span id="__span-0-61"><a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="s2">    margin-bottom: 2px;</span>
</span><span id="__span-0-62"><a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="s2">}</span>
</span><span id="__span-0-63"><a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="s2">.sidebar-nav a:hover {</span>
</span><span id="__span-0-64"><a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="s2">    background: #21262d;</span>
</span><span id="__span-0-65"><a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="s2">    color: #e6edf3;</span>
</span><span id="__span-0-66"><a id="__codelineno-0-66" name="__codelineno-0-66"></a><span class="s2">}</span>
</span><span id="__span-0-67"><a id="__codelineno-0-67" name="__codelineno-0-67"></a><span class="s2">.sidebar-nav a.active {</span>
</span><span id="__span-0-68"><a id="__codelineno-0-68" name="__codelineno-0-68"></a><span class="s2">    background: #21262d;</span>
</span><span id="__span-0-69"><a id="__codelineno-0-69" name="__codelineno-0-69"></a><span class="s2">    color: #e6edf3;</span>
</span><span id="__span-0-70"><a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="s2">}</span>
</span><span id="__span-0-71"><a id="__codelineno-0-71" name="__codelineno-0-71"></a><span class="s2">.sidebar-nav svg {</span>
</span><span id="__span-0-72"><a id="__codelineno-0-72" name="__codelineno-0-72"></a><span class="s2">    width: 16px;</span>
</span><span id="__span-0-73"><a id="__codelineno-0-73" name="__codelineno-0-73"></a><span class="s2">    height: 16px;</span>
</span><span id="__span-0-74"><a id="__codelineno-0-74" name="__codelineno-0-74"></a><span class="s2">    flex-shrink: 0;</span>
</span><span id="__span-0-75"><a id="__codelineno-0-75" name="__codelineno-0-75"></a><span class="s2">}</span>
</span><span id="__span-0-76"><a id="__codelineno-0-76" name="__codelineno-0-76"></a><span class="s2">.main-content {</span>
</span><span id="__span-0-77"><a id="__codelineno-0-77" name="__codelineno-0-77"></a><span class="s2">    margin-left: 220px;</span>
</span><span id="__span-0-78"><a id="__codelineno-0-78" name="__codelineno-0-78"></a><span class="s2">    flex: 1;</span>
</span><span id="__span-0-79"><a id="__codelineno-0-79" name="__codelineno-0-79"></a><span class="s2">    min-height: 100vh;</span>
</span><span id="__span-0-80"><a id="__codelineno-0-80" name="__codelineno-0-80"></a><span class="s2">}</span>
</span><span id="__span-0-81"><a id="__codelineno-0-81" name="__codelineno-0-81"></a><span class="s2">.container {</span>
</span><span id="__span-0-82"><a id="__codelineno-0-82" name="__codelineno-0-82"></a><span class="s2">    max-width: 1200px;</span>
</span><span id="__span-0-83"><a id="__codelineno-0-83" name="__codelineno-0-83"></a><span class="s2">    margin: 0 auto;</span>
</span><span id="__span-0-84"><a id="__codelineno-0-84" name="__codelineno-0-84"></a><span class="s2">    padding: 32px 24px;</span>
</span><span id="__span-0-85"><a id="__codelineno-0-85" name="__codelineno-0-85"></a><span class="s2">}</span>
</span><span id="__span-0-86"><a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="s2">.card {</span>
</span><span id="__span-0-87"><a id="__codelineno-0-87" name="__codelineno-0-87"></a><span class="s2">    background: #161b22;</span>
</span><span id="__span-0-88"><a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="s2">    border: 1px solid #30363d;</span>
</span><span id="__span-0-89"><a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="s2">    border-radius: 8px;</span>
</span><span id="__span-0-90"><a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="s2">    padding: 24px;</span>
</span><span id="__span-0-91"><a id="__codelineno-0-91" name="__codelineno-0-91"></a><span class="s2">    margin-bottom: 16px;</span>
</span><span id="__span-0-92"><a id="__codelineno-0-92" name="__codelineno-0-92"></a><span class="s2">}</span>
</span><span id="__span-0-93"><a id="__codelineno-0-93" name="__codelineno-0-93"></a><span class="s2">.card h2 {</span>
</span><span id="__span-0-94"><a id="__codelineno-0-94" name="__codelineno-0-94"></a><span class="s2">    font-size: 16px;</span>
</span><span id="__span-0-95"><a id="__codelineno-0-95" name="__codelineno-0-95"></a><span class="s2">    font-weight: 600;</span>
</span><span id="__span-0-96"><a id="__codelineno-0-96" name="__codelineno-0-96"></a><span class="s2">    margin-bottom: 16px;</span>
</span><span id="__span-0-97"><a id="__codelineno-0-97" name="__codelineno-0-97"></a><span class="s2">    color: #e6edf3;</span>
</span><span id="__span-0-98"><a id="__codelineno-0-98" name="__codelineno-0-98"></a><span class="s2">}</span>
</span><span id="__span-0-99"><a id="__codelineno-0-99" name="__codelineno-0-99"></a><span class="s2">.empty-state {</span>
</span><span id="__span-0-100"><a id="__codelineno-0-100" name="__codelineno-0-100"></a><span class="s2">    text-align: center;</span>
</span><span id="__span-0-101"><a id="__codelineno-0-101" name="__codelineno-0-101"></a><span class="s2">    padding: 48px;</span>
</span><span id="__span-0-102"><a id="__codelineno-0-102" name="__codelineno-0-102"></a><span class="s2">    color: #8b949e;</span>
</span><span id="__span-0-103"><a id="__codelineno-0-103" name="__codelineno-0-103"></a><span class="s2">}</span>
</span><span id="__span-0-104"><a id="__codelineno-0-104" name="__codelineno-0-104"></a><span class="s2">.empty-state p {</span>
</span><span id="__span-0-105"><a id="__codelineno-0-105" name="__codelineno-0-105"></a><span class="s2">    margin-top: 8px;</span>
</span><span id="__span-0-106"><a id="__codelineno-0-106" name="__codelineno-0-106"></a><span class="s2">    font-size: 14px;</span>
</span><span id="__span-0-107"><a id="__codelineno-0-107" name="__codelineno-0-107"></a><span class="s2">}</span>
</span><span id="__span-0-108"><a id="__codelineno-0-108" name="__codelineno-0-108"></a><span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-0-109"><a id="__codelineno-0-109" name="__codelineno-0-109"></a>
</span><span id="__span-0-110"><a id="__codelineno-0-110" name="__codelineno-0-110"></a><span class="n">BACKTEST_CSS</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-0-111"><a id="__codelineno-0-111" name="__codelineno-0-111"></a><span class="s2">.container { max-width: none; height: 100vh; padding: 24px; display: flex; flex-direction: column; box-sizing: border-box; }</span>
</span><span id="__span-0-112"><a id="__codelineno-0-112" name="__codelineno-0-112"></a><span class="s2">.backtest-layout { display: flex; gap: 24px; flex: 1; min-height: 0; }</span>
</span><span id="__span-0-113"><a id="__codelineno-0-113" name="__codelineno-0-113"></a><span class="s2">.backtest-left { flex: 1; min-width: 0; display: flex; flex-direction: column; }</span>
</span><span id="__span-0-114"><a id="__codelineno-0-114" name="__codelineno-0-114"></a><span class="s2">.backtest-right { flex: 1; min-width: 0; display: flex; flex-direction: column; }</span>
</span><span id="__span-0-115"><a id="__codelineno-0-115" name="__codelineno-0-115"></a><span class="s2">.backtest-left .card, .backtest-right .card { flex: 1; display: flex; flex-direction: column; margin-bottom: 0; overflow: hidden; }</span>
</span><span id="__span-0-116"><a id="__codelineno-0-116" name="__codelineno-0-116"></a><span class="s2">.backtest-right .runs-list { flex: 1; overflow-y: auto; }</span>
</span><span id="__span-0-117"><a id="__codelineno-0-117" name="__codelineno-0-117"></a><span class="s2">.form-group { margin-bottom: 16px; }</span>
</span><span id="__span-0-118"><a id="__codelineno-0-118" name="__codelineno-0-118"></a><span class="s2">.form-group label { display: block; margin-bottom: 6px; font-size: 14px; color: #8b949e; }</span>
</span><span id="__span-0-119"><a id="__codelineno-0-119" name="__codelineno-0-119"></a><span class="s2">.form-group select, .form-group input {</span>
</span><span id="__span-0-120"><a id="__codelineno-0-120" name="__codelineno-0-120"></a><span class="s2">    width: 100%; padding: 8px 12px; background: #0d1117; border: 1px solid #30363d;</span>
</span><span id="__span-0-121"><a id="__codelineno-0-121" name="__codelineno-0-121"></a><span class="s2">    border-radius: 6px; color: #e6edf3; font-size: 14px;</span>
</span><span id="__span-0-122"><a id="__codelineno-0-122" name="__codelineno-0-122"></a><span class="s2">}</span>
</span><span id="__span-0-123"><a id="__codelineno-0-123" name="__codelineno-0-123"></a><span class="s2">.form-group select:focus, .form-group input:focus { outline: none; border-color: #58a6ff; }</span>
</span><span id="__span-0-124"><a id="__codelineno-0-124" name="__codelineno-0-124"></a><span class="s2">.params-container { margin-top: 12px; padding: 12px; background: #0d1117; border-radius: 6px; }</span>
</span><span id="__span-0-125"><a id="__codelineno-0-125" name="__codelineno-0-125"></a><span class="s2">.param-row { display: flex; gap: 12px; margin-bottom: 8px; align-items: center; }</span>
</span><span id="__span-0-126"><a id="__codelineno-0-126" name="__codelineno-0-126"></a><span class="s2">.param-row label { min-width: 120px; font-size: 13px; }</span>
</span><span id="__span-0-127"><a id="__codelineno-0-127" name="__codelineno-0-127"></a><span class="s2">.param-row input, .param-row select { flex: 1; }</span>
</span><span id="__span-0-128"><a id="__codelineno-0-128" name="__codelineno-0-128"></a><span class="s2">.btn { padding: 10px 20px; background: #238636; border: none; border-radius: 6px;</span>
</span><span id="__span-0-129"><a id="__codelineno-0-129" name="__codelineno-0-129"></a><span class="s2">    color: #fff; font-size: 14px; cursor: pointer; width: 100%; }</span>
</span><span id="__span-0-130"><a id="__codelineno-0-130" name="__codelineno-0-130"></a><span class="s2">.btn:hover { background: #2ea043; }</span>
</span><span id="__span-0-131"><a id="__codelineno-0-131" name="__codelineno-0-131"></a><span class="s2">.btn:disabled { background: #30363d; cursor: not-allowed; }</span>
</span><span id="__span-0-132"><a id="__codelineno-0-132" name="__codelineno-0-132"></a><span class="s2">.date-row { display: flex; gap: 12px; }</span>
</span><span id="__span-0-133"><a id="__codelineno-0-133" name="__codelineno-0-133"></a><span class="s2">.date-row .form-group { flex: 1; margin-bottom: 0; }</span>
</span><span id="__span-0-134"><a id="__codelineno-0-134" name="__codelineno-0-134"></a><span class="s2">.symbol-section { background: #0d1117; border-radius: 6px; padding: 12px; }</span>
</span><span id="__span-0-135"><a id="__codelineno-0-135" name="__codelineno-0-135"></a><span class="s2">.publisher-row { display: flex; gap: 8px; margin-bottom: 12px; }</span>
</span><span id="__span-0-136"><a id="__codelineno-0-136" name="__codelineno-0-136"></a><span class="s2">.publisher-row select { flex: 1; }</span>
</span><span id="__span-0-137"><a id="__codelineno-0-137" name="__codelineno-0-137"></a><span class="s2">.preset-row { display: flex; gap: 8px; align-items: center; background: #0d1117; border-radius: 6px; padding: 8px 12px; }</span>
</span><span id="__span-0-138"><a id="__codelineno-0-138" name="__codelineno-0-138"></a><span class="s2">.preset-row select { flex: 1; }</span>
</span><span id="__span-0-139"><a id="__codelineno-0-139" name="__codelineno-0-139"></a><span class="s2">.preset-row input { flex: 1; }</span>
</span><span id="__span-0-140"><a id="__codelineno-0-140" name="__codelineno-0-140"></a><span class="s2">.preset-row .btn-sm { padding: 6px 12px; font-size: 12px; width: auto; cursor: not-allowed; }</span>
</span><span id="__span-0-141"><a id="__codelineno-0-141" name="__codelineno-0-141"></a><span class="s2">.preset-row .btn-secondary { background: #30363d; }</span>
</span><span id="__span-0-142"><a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="s2">.preset-row .btn-secondary.active { background: #238636; cursor: pointer; }</span>
</span><span id="__span-0-143"><a id="__codelineno-0-143" name="__codelineno-0-143"></a><span class="s2">.preset-row .btn-secondary.active:hover { background: #2ea043; }</span>
</span><span id="__span-0-144"><a id="__codelineno-0-144" name="__codelineno-0-144"></a><span class="s2">.preset-row .btn-danger { background: #30363d; }</span>
</span><span id="__span-0-145"><a id="__codelineno-0-145" name="__codelineno-0-145"></a><span class="s2">.preset-row .btn-danger.active { background: #da3633; cursor: pointer; }</span>
</span><span id="__span-0-146"><a id="__codelineno-0-146" name="__codelineno-0-146"></a><span class="s2">.preset-row .btn-danger.active:hover { background: #f85149; }</span>
</span><span id="__span-0-147"><a id="__codelineno-0-147" name="__codelineno-0-147"></a><span class="s2">.search-row { display: flex; gap: 8px; margin-bottom: 8px; }</span>
</span><span id="__span-0-148"><a id="__codelineno-0-148" name="__codelineno-0-148"></a><span class="s2">.search-row input { flex: 1; }</span>
</span><span id="__span-0-149"><a id="__codelineno-0-149" name="__codelineno-0-149"></a><span class="s2">.search-results { max-height: 150px; overflow-y: auto; border: 1px solid #30363d; border-radius: 4px; margin-bottom: 12px; }</span>
</span><span id="__span-0-150"><a id="__codelineno-0-150" name="__codelineno-0-150"></a><span class="s2">.search-results:empty { display: none; }</span>
</span><span id="__span-0-151"><a id="__codelineno-0-151" name="__codelineno-0-151"></a><span class="s2">.search-result { display: flex; justify-content: space-between; align-items: center; padding: 6px 10px; border-bottom: 1px solid #21262d; cursor: pointer; }</span>
</span><span id="__span-0-152"><a id="__codelineno-0-152" name="__codelineno-0-152"></a><span class="s2">.search-result:last-child { border-bottom: none; }</span>
</span><span id="__span-0-153"><a id="__codelineno-0-153" name="__codelineno-0-153"></a><span class="s2">.search-result:hover { background: #161b22; }</span>
</span><span id="__span-0-154"><a id="__codelineno-0-154" name="__codelineno-0-154"></a><span class="s2">.search-result .symbol { font-family: monospace; }</span>
</span><span id="__span-0-155"><a id="__codelineno-0-155" name="__codelineno-0-155"></a><span class="s2">.selected-symbols { display: flex; flex-wrap: wrap; gap: 6px; min-height: 32px; max-height: 150px; overflow-y: auto; }</span>
</span><span id="__span-0-156"><a id="__codelineno-0-156" name="__codelineno-0-156"></a><span class="s2">.selected-tag { display: inline-flex; align-items: center; gap: 4px; background: #238636; color: #fff; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-family: monospace; }</span>
</span><span id="__span-0-157"><a id="__codelineno-0-157" name="__codelineno-0-157"></a><span class="s2">.selected-tag .remove { cursor: pointer; opacity: 0.7; }</span>
</span><span id="__span-0-158"><a id="__codelineno-0-158" name="__codelineno-0-158"></a><span class="s2">.selected-tag .remove:hover { opacity: 1; }</span>
</span><span id="__span-0-159"><a id="__codelineno-0-159" name="__codelineno-0-159"></a><span class="s2">.selected-label { font-size: 13px; color: #8b949e; margin-bottom: 6px; }</span>
</span><span id="__span-0-160"><a id="__codelineno-0-160" name="__codelineno-0-160"></a><span class="s2">.section-header { font-size: 14px; color: #8b949e; margin-bottom: 6px; margin-top: 8px; }</span>
</span><span id="__span-0-161"><a id="__codelineno-0-161" name="__codelineno-0-161"></a><span class="s2">.runs-list { display: flex; flex-direction: column; gap: 12px; }</span>
</span><span id="__span-0-162"><a id="__codelineno-0-162" name="__codelineno-0-162"></a><span class="s2">.run-item { background: #0d1117; border: 1px solid #30363d; border-radius: 6px; padding: 12px; display: flex; gap: 12px; align-items: flex-start; }</span>
</span><span id="__span-0-163"><a id="__codelineno-0-163" name="__codelineno-0-163"></a><span class="s2">.run-item.selected { border-color: #58a6ff; }</span>
</span><span id="__span-0-164"><a id="__codelineno-0-164" name="__codelineno-0-164"></a><span class="s2">.run-checkbox { flex-shrink: 0; margin-top: 2px; width: 16px; height: 16px; accent-color: #58a6ff; cursor: pointer; }</span>
</span><span id="__span-0-165"><a id="__codelineno-0-165" name="__codelineno-0-165"></a><span class="s2">.run-content { flex: 1; min-width: 0; }</span>
</span><span id="__span-0-166"><a id="__codelineno-0-166" name="__codelineno-0-166"></a><span class="s2">.run-content.clickable { cursor: pointer; }</span>
</span><span id="__span-0-167"><a id="__codelineno-0-167" name="__codelineno-0-167"></a><span class="s2">.run-content.clickable:hover { opacity: 0.8; }</span>
</span><span id="__span-0-168"><a id="__codelineno-0-168" name="__codelineno-0-168"></a><span class="s2">.run-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }</span>
</span><span id="__span-0-169"><a id="__codelineno-0-169" name="__codelineno-0-169"></a><span class="s2">.run-name { font-family: monospace; font-size: 13px; color: #e6edf3; }</span>
</span><span id="__span-0-170"><a id="__codelineno-0-170" name="__codelineno-0-170"></a><span class="s2">.run-id { color: #8b949e; font-size: 11px; margin-left: 6px; }</span>
</span><span id="__span-0-171"><a id="__codelineno-0-171" name="__codelineno-0-171"></a><span class="s2">.run-status { font-size: 12px; font-weight: 500; padding: 2px 8px; border-radius: 10px; }</span>
</span><span id="__span-0-172"><a id="__codelineno-0-172" name="__codelineno-0-172"></a><span class="s2">.run-status.running { background: #9e6a03; color: #fff; }</span>
</span><span id="__span-0-173"><a id="__codelineno-0-173" name="__codelineno-0-173"></a><span class="s2">.run-status.completed { background: #238636; color: #fff; }</span>
</span><span id="__span-0-174"><a id="__codelineno-0-174" name="__codelineno-0-174"></a><span class="s2">.run-status.failed { background: #da3633; color: #fff; }</span>
</span><span id="__span-0-175"><a id="__codelineno-0-175" name="__codelineno-0-175"></a><span class="s2">.run-status.cancelled { background: #30363d; color: #8b949e; }</span>
</span><span id="__span-0-176"><a id="__codelineno-0-176" name="__codelineno-0-176"></a><span class="s2">.run-status.error { background: #da3633; color: #fff; }</span>
</span><span id="__span-0-177"><a id="__codelineno-0-177" name="__codelineno-0-177"></a><span class="s2">.run-meta { font-size: 12px; color: #8b949e; }</span>
</span><span id="__span-0-178"><a id="__codelineno-0-178" name="__codelineno-0-178"></a><span class="s2">.run-meta.with-progress { margin-bottom: 8px; }</span>
</span><span id="__span-0-179"><a id="__codelineno-0-179" name="__codelineno-0-179"></a><span class="s2">.progress-bar { height: 6px; background: #30363d; border-radius: 3px; overflow: hidden; }</span>
</span><span id="__span-0-180"><a id="__codelineno-0-180" name="__codelineno-0-180"></a><span class="s2">.progress-fill { height: 100%; background: #58a6ff; transition: width 0.3s ease; }</span>
</span><span id="__span-0-181"><a id="__codelineno-0-181" name="__codelineno-0-181"></a><span class="s2">.progress-fill.completed { background: #238636; }</span>
</span><span id="__span-0-182"><a id="__codelineno-0-182" name="__codelineno-0-182"></a><span class="s2">.progress-fill.error { background: #da3633; }</span>
</span><span id="__span-0-183"><a id="__codelineno-0-183" name="__codelineno-0-183"></a><span class="s2">.empty-runs { text-align: center; padding: 48px 24px; color: #8b949e; }</span>
</span><span id="__span-0-184"><a id="__codelineno-0-184" name="__codelineno-0-184"></a><span class="s2">.empty-runs p { font-size: 14px; }</span>
</span><span id="__span-0-185"><a id="__codelineno-0-185" name="__codelineno-0-185"></a><span class="s2">.runs-toolbar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; padding-bottom: 12px; border-bottom: 1px solid #30363d; }</span>
</span><span id="__span-0-186"><a id="__codelineno-0-186" name="__codelineno-0-186"></a><span class="s2">.runs-toolbar .select-all-label { display: flex; align-items: center; gap: 8px; font-size: 13px; color: #8b949e; cursor: pointer; }</span>
</span><span id="__span-0-187"><a id="__codelineno-0-187" name="__codelineno-0-187"></a><span class="s2">.runs-toolbar .select-all-label input { width: 16px; height: 16px; accent-color: #58a6ff; cursor: pointer; }</span>
</span><span id="__span-0-188"><a id="__codelineno-0-188" name="__codelineno-0-188"></a><span class="s2">.btn-delete { padding: 6px 12px; background: #da3633; border: none; border-radius: 6px; color: #fff; font-size: 13px; cursor: pointer; }</span>
</span><span id="__span-0-189"><a id="__codelineno-0-189" name="__codelineno-0-189"></a><span class="s2">.btn-delete:hover { background: #f85149; }</span>
</span><span id="__span-0-190"><a id="__codelineno-0-190" name="__codelineno-0-190"></a><span class="s2">.btn-delete:disabled { background: #30363d; cursor: not-allowed; color: #8b949e; }</span>
</span><span id="__span-0-191"><a id="__codelineno-0-191" name="__codelineno-0-191"></a><span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-0-192"><a id="__codelineno-0-192" name="__codelineno-0-192"></a>
</span><span id="__span-0-193"><a id="__codelineno-0-193" name="__codelineno-0-193"></a><span class="n">BACKTEST_JS</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-0-194"><a id="__codelineno-0-194" name="__codelineno-0-194"></a><span class="s2">let strategyParams = [];</span>
</span><span id="__span-0-195"><a id="__codelineno-0-195" name="__codelineno-0-195"></a><span class="s2">let coverageData = [];</span>
</span><span id="__span-0-196"><a id="__codelineno-0-196" name="__codelineno-0-196"></a><span class="s2">let availableRtypes = [];</span>
</span><span id="__span-0-197"><a id="__codelineno-0-197" name="__codelineno-0-197"></a><span class="s2">let symbolsForRtype = </span><span class="si">{}</span><span class="s2">;</span>
</span><span id="__span-0-198"><a id="__codelineno-0-198" name="__codelineno-0-198"></a><span class="s2">let symbolCoverageForRtype = </span><span class="si">{}</span><span class="s2">;</span>
</span><span id="__span-0-199"><a id="__codelineno-0-199" name="__codelineno-0-199"></a><span class="s2">let selectedSymbols = [];</span>
</span><span id="__span-0-200"><a id="__codelineno-0-200" name="__codelineno-0-200"></a><span class="s2">let presets = [];</span>
</span><span id="__span-0-201"><a id="__codelineno-0-201" name="__codelineno-0-201"></a><span class="s2">let globalMinDate = null;</span>
</span><span id="__span-0-202"><a id="__codelineno-0-202" name="__codelineno-0-202"></a><span class="s2">let globalMaxDate = null;</span>
</span><span id="__span-0-203"><a id="__codelineno-0-203" name="__codelineno-0-203"></a><span class="s2">let dbRuns = [];</span>
</span><span id="__span-0-204"><a id="__codelineno-0-204" name="__codelineno-0-204"></a><span class="s2">let activeRuns = </span><span class="si">{}</span><span class="s2">;</span>
</span><span id="__span-0-205"><a id="__codelineno-0-205" name="__codelineno-0-205"></a><span class="s2">let selectedRunIds = new Set();</span>
</span><span id="__span-0-206"><a id="__codelineno-0-206" name="__codelineno-0-206"></a><span class="s2">let publishers = [];</span>
</span><span id="__span-0-207"><a id="__codelineno-0-207" name="__codelineno-0-207"></a><span class="s2">let datasets = [];</span>
</span><span id="__span-0-208"><a id="__codelineno-0-208" name="__codelineno-0-208"></a><span class="s2">let selectedPublisherId = null;</span>
</span><span id="__span-0-209"><a id="__codelineno-0-209" name="__codelineno-0-209"></a><span class="s2">let isLoadingPreset = false;</span>
</span><span id="__span-0-210"><a id="__codelineno-0-210" name="__codelineno-0-210"></a>
</span><span id="__span-0-211"><a id="__codelineno-0-211" name="__codelineno-0-211"></a><span class="s2">const RTYPE_LABELS = {32: &#39;Second&#39;, 33: &#39;Minute&#39;, 34: &#39;Hour&#39;, 35: &#39;Day&#39;};</span>
</span><span id="__span-0-212"><a id="__codelineno-0-212" name="__codelineno-0-212"></a>
</span><span id="__span-0-213"><a id="__codelineno-0-213" name="__codelineno-0-213"></a><span class="s2">function capitalize(str) {</span>
</span><span id="__span-0-214"><a id="__codelineno-0-214" name="__codelineno-0-214"></a><span class="s2">    return str.charAt(0).toUpperCase() + str.slice(1);</span>
</span><span id="__span-0-215"><a id="__codelineno-0-215" name="__codelineno-0-215"></a><span class="s2">}</span>
</span><span id="__span-0-216"><a id="__codelineno-0-216" name="__codelineno-0-216"></a>
</span><span id="__span-0-217"><a id="__codelineno-0-217" name="__codelineno-0-217"></a><span class="s2">async function loadPublishers() {</span>
</span><span id="__span-0-218"><a id="__codelineno-0-218" name="__codelineno-0-218"></a><span class="s2">    const rtype = getSelectedRtype();</span>
</span><span id="__span-0-219"><a id="__codelineno-0-219" name="__codelineno-0-219"></a><span class="s2">    const url = rtype ? `/api/secmaster/publishers?rtype=$</span><span class="si">{rtype}</span><span class="s2">` : &#39;/api/secmaster/publishers&#39;;</span>
</span><span id="__span-0-220"><a id="__codelineno-0-220" name="__codelineno-0-220"></a><span class="s2">    const res = await fetch(url);</span>
</span><span id="__span-0-221"><a id="__codelineno-0-221" name="__codelineno-0-221"></a><span class="s2">    const data = await res.json();</span>
</span><span id="__span-0-222"><a id="__codelineno-0-222" name="__codelineno-0-222"></a><span class="s2">    publishers = data.publishers || [];</span>
</span><span id="__span-0-223"><a id="__codelineno-0-223" name="__codelineno-0-223"></a><span class="s2">    const sel = document.getElementById(&#39;publisher-name&#39;);</span>
</span><span id="__span-0-224"><a id="__codelineno-0-224" name="__codelineno-0-224"></a><span class="s2">    sel.innerHTML = &#39;&lt;option value=&quot;&quot;&gt;-- Select Publisher --&lt;/option&gt;&#39;;</span>
</span><span id="__span-0-225"><a id="__codelineno-0-225" name="__codelineno-0-225"></a><span class="s2">    publishers.forEach(p =&gt; sel.innerHTML += `&lt;option value=&quot;$</span><span class="si">{p}</span><span class="s2">&quot;&gt;${capitalize(p)}&lt;/option&gt;`);</span>
</span><span id="__span-0-226"><a id="__codelineno-0-226" name="__codelineno-0-226"></a><span class="s2">}</span>
</span><span id="__span-0-227"><a id="__codelineno-0-227" name="__codelineno-0-227"></a>
</span><span id="__span-0-228"><a id="__codelineno-0-228" name="__codelineno-0-228"></a><span class="s2">async function onPublisherChange() {</span>
</span><span id="__span-0-229"><a id="__codelineno-0-229" name="__codelineno-0-229"></a><span class="s2">    if (isLoadingPreset) return;</span>
</span><span id="__span-0-230"><a id="__codelineno-0-230" name="__codelineno-0-230"></a><span class="s2">    document.getElementById(&#39;preset-select&#39;).value = &#39;&#39;;</span>
</span><span id="__span-0-231"><a id="__codelineno-0-231" name="__codelineno-0-231"></a><span class="s2">    const name = document.getElementById(&#39;publisher-name&#39;).value;</span>
</span><span id="__span-0-232"><a id="__codelineno-0-232" name="__codelineno-0-232"></a><span class="s2">    const rtype = getSelectedRtype();</span>
</span><span id="__span-0-233"><a id="__codelineno-0-233" name="__codelineno-0-233"></a><span class="s2">    const datasetSel = document.getElementById(&#39;publisher-dataset&#39;);</span>
</span><span id="__span-0-234"><a id="__codelineno-0-234" name="__codelineno-0-234"></a><span class="s2">    datasetSel.innerHTML = &#39;&lt;option value=&quot;&quot;&gt;-- Select Dataset --&lt;/option&gt;&#39;;</span>
</span><span id="__span-0-235"><a id="__codelineno-0-235" name="__codelineno-0-235"></a><span class="s2">    datasets = [];</span>
</span><span id="__span-0-236"><a id="__codelineno-0-236" name="__codelineno-0-236"></a><span class="s2">    selectedPublisherId = null;</span>
</span><span id="__span-0-237"><a id="__codelineno-0-237" name="__codelineno-0-237"></a><span class="s2">    document.getElementById(&#39;symbol-selection&#39;).style.display = &#39;none&#39;;</span>
</span><span id="__span-0-238"><a id="__codelineno-0-238" name="__codelineno-0-238"></a><span class="s2">    selectedSymbols = [];</span>
</span><span id="__span-0-239"><a id="__codelineno-0-239" name="__codelineno-0-239"></a><span class="s2">    renderSelectedSymbols();</span>
</span><span id="__span-0-240"><a id="__codelineno-0-240" name="__codelineno-0-240"></a><span class="s2">    updateDateRange();</span>
</span><span id="__span-0-241"><a id="__codelineno-0-241" name="__codelineno-0-241"></a><span class="s2">    if (!name) return;</span>
</span><span id="__span-0-242"><a id="__codelineno-0-242" name="__codelineno-0-242"></a><span class="s2">    const url = rtype</span>
</span><span id="__span-0-243"><a id="__codelineno-0-243" name="__codelineno-0-243"></a><span class="s2">        ? `/api/secmaster/publishers/${encodeURIComponent(name)}/datasets?rtype=$</span><span class="si">{rtype}</span><span class="s2">`</span>
</span><span id="__span-0-244"><a id="__codelineno-0-244" name="__codelineno-0-244"></a><span class="s2">        : `/api/secmaster/publishers/${encodeURIComponent(name)}/datasets`;</span>
</span><span id="__span-0-245"><a id="__codelineno-0-245" name="__codelineno-0-245"></a><span class="s2">    const res = await fetch(url);</span>
</span><span id="__span-0-246"><a id="__codelineno-0-246" name="__codelineno-0-246"></a><span class="s2">    const data = await res.json();</span>
</span><span id="__span-0-247"><a id="__codelineno-0-247" name="__codelineno-0-247"></a><span class="s2">    datasets = data.datasets || [];</span>
</span><span id="__span-0-248"><a id="__codelineno-0-248" name="__codelineno-0-248"></a><span class="s2">    datasets.forEach(d =&gt; datasetSel.innerHTML += `&lt;option value=&quot;$</span><span class="si">{d.publisher_id}</span><span class="s2">&quot;&gt;$</span><span class="si">{d.dataset}</span><span class="s2">&lt;/option&gt;`);</span>
</span><span id="__span-0-249"><a id="__codelineno-0-249" name="__codelineno-0-249"></a><span class="s2">}</span>
</span><span id="__span-0-250"><a id="__codelineno-0-250" name="__codelineno-0-250"></a>
</span><span id="__span-0-251"><a id="__codelineno-0-251" name="__codelineno-0-251"></a><span class="s2">async function onDatasetChange() {</span>
</span><span id="__span-0-252"><a id="__codelineno-0-252" name="__codelineno-0-252"></a><span class="s2">    if (isLoadingPreset) return;</span>
</span><span id="__span-0-253"><a id="__codelineno-0-253" name="__codelineno-0-253"></a><span class="s2">    document.getElementById(&#39;preset-select&#39;).value = &#39;&#39;;</span>
</span><span id="__span-0-254"><a id="__codelineno-0-254" name="__codelineno-0-254"></a><span class="s2">    const pubId = document.getElementById(&#39;publisher-dataset&#39;).value;</span>
</span><span id="__span-0-255"><a id="__codelineno-0-255" name="__codelineno-0-255"></a><span class="s2">    selectedPublisherId = pubId ? parseInt(pubId) : null;</span>
</span><span id="__span-0-256"><a id="__codelineno-0-256" name="__codelineno-0-256"></a><span class="s2">    selectedSymbols = [];</span>
</span><span id="__span-0-257"><a id="__codelineno-0-257" name="__codelineno-0-257"></a><span class="s2">    renderSelectedSymbols();</span>
</span><span id="__span-0-258"><a id="__codelineno-0-258" name="__codelineno-0-258"></a><span class="s2">    updateDateRange();</span>
</span><span id="__span-0-259"><a id="__codelineno-0-259" name="__codelineno-0-259"></a><span class="s2">    document.getElementById(&#39;symbol-search&#39;).value = &#39;&#39;;</span>
</span><span id="__span-0-260"><a id="__codelineno-0-260" name="__codelineno-0-260"></a><span class="s2">    document.getElementById(&#39;search-results&#39;).innerHTML = &#39;&#39;;</span>
</span><span id="__span-0-261"><a id="__codelineno-0-261" name="__codelineno-0-261"></a><span class="s2">    if (selectedPublisherId) {</span>
</span><span id="__span-0-262"><a id="__codelineno-0-262" name="__codelineno-0-262"></a><span class="s2">        await loadCoverageForPublisher(selectedPublisherId);</span>
</span><span id="__span-0-263"><a id="__codelineno-0-263" name="__codelineno-0-263"></a><span class="s2">        document.getElementById(&#39;symbol-selection&#39;).style.display = &#39;block&#39;;</span>
</span><span id="__span-0-264"><a id="__codelineno-0-264" name="__codelineno-0-264"></a><span class="s2">    } else {</span>
</span><span id="__span-0-265"><a id="__codelineno-0-265" name="__codelineno-0-265"></a><span class="s2">        document.getElementById(&#39;symbol-selection&#39;).style.display = &#39;none&#39;;</span>
</span><span id="__span-0-266"><a id="__codelineno-0-266" name="__codelineno-0-266"></a><span class="s2">    }</span>
</span><span id="__span-0-267"><a id="__codelineno-0-267" name="__codelineno-0-267"></a><span class="s2">}</span>
</span><span id="__span-0-268"><a id="__codelineno-0-268" name="__codelineno-0-268"></a>
</span><span id="__span-0-269"><a id="__codelineno-0-269" name="__codelineno-0-269"></a><span class="s2">async function loadCoverageForPublisher(publisherId) {</span>
</span><span id="__span-0-270"><a id="__codelineno-0-270" name="__codelineno-0-270"></a><span class="s2">    const rtype = getSelectedRtype();</span>
</span><span id="__span-0-271"><a id="__codelineno-0-271" name="__codelineno-0-271"></a><span class="s2">    const url = `/api/secmaster/symbols_coverage?publisher_id=$</span><span class="si">{publisherId}</span><span class="s2">&amp;rtype=$</span><span class="si">{rtype}</span><span class="s2">`;</span>
</span><span id="__span-0-272"><a id="__codelineno-0-272" name="__codelineno-0-272"></a><span class="s2">    const res = await fetch(url);</span>
</span><span id="__span-0-273"><a id="__codelineno-0-273" name="__codelineno-0-273"></a><span class="s2">    const data = await res.json();</span>
</span><span id="__span-0-274"><a id="__codelineno-0-274" name="__codelineno-0-274"></a><span class="s2">    coverageData = data.symbols || [];</span>
</span><span id="__span-0-275"><a id="__codelineno-0-275" name="__codelineno-0-275"></a><span class="s2">    symbolsForRtype = </span><span class="si">{}</span><span class="s2">;</span>
</span><span id="__span-0-276"><a id="__codelineno-0-276" name="__codelineno-0-276"></a><span class="s2">    symbolCoverageForRtype = </span><span class="si">{}</span><span class="s2">;</span>
</span><span id="__span-0-277"><a id="__codelineno-0-277" name="__codelineno-0-277"></a><span class="s2">    coverageData.forEach(row =&gt; {</span>
</span><span id="__span-0-278"><a id="__codelineno-0-278" name="__codelineno-0-278"></a><span class="s2">        if (!symbolsForRtype[row.rtype]) {</span>
</span><span id="__span-0-279"><a id="__codelineno-0-279" name="__codelineno-0-279"></a><span class="s2">            symbolsForRtype[row.rtype] = [];</span>
</span><span id="__span-0-280"><a id="__codelineno-0-280" name="__codelineno-0-280"></a><span class="s2">            symbolCoverageForRtype[row.rtype] = </span><span class="si">{}</span><span class="s2">;</span>
</span><span id="__span-0-281"><a id="__codelineno-0-281" name="__codelineno-0-281"></a><span class="s2">        }</span>
</span><span id="__span-0-282"><a id="__codelineno-0-282" name="__codelineno-0-282"></a><span class="s2">        symbolsForRtype[row.rtype].push(row.symbol);</span>
</span><span id="__span-0-283"><a id="__codelineno-0-283" name="__codelineno-0-283"></a><span class="s2">        symbolCoverageForRtype[row.rtype][row.symbol] = {min_ts: row.min_ts, max_ts: row.max_ts};</span>
</span><span id="__span-0-284"><a id="__codelineno-0-284" name="__codelineno-0-284"></a><span class="s2">    });</span>
</span><span id="__span-0-285"><a id="__codelineno-0-285" name="__codelineno-0-285"></a><span class="s2">}</span>
</span><span id="__span-0-286"><a id="__codelineno-0-286" name="__codelineno-0-286"></a>
</span><span id="__span-0-287"><a id="__codelineno-0-287" name="__codelineno-0-287"></a><span class="s2">async function loadPresets() {</span>
</span><span id="__span-0-288"><a id="__codelineno-0-288" name="__codelineno-0-288"></a><span class="s2">    const res = await fetch(&#39;/api/presets&#39;);</span>
</span><span id="__span-0-289"><a id="__codelineno-0-289" name="__codelineno-0-289"></a><span class="s2">    const data = await res.json();</span>
</span><span id="__span-0-290"><a id="__codelineno-0-290" name="__codelineno-0-290"></a><span class="s2">    presets = data.presets || [];</span>
</span><span id="__span-0-291"><a id="__codelineno-0-291" name="__codelineno-0-291"></a><span class="s2">    renderPresetDropdown();</span>
</span><span id="__span-0-292"><a id="__codelineno-0-292" name="__codelineno-0-292"></a><span class="s2">}</span>
</span><span id="__span-0-293"><a id="__codelineno-0-293" name="__codelineno-0-293"></a>
</span><span id="__span-0-294"><a id="__codelineno-0-294" name="__codelineno-0-294"></a><span class="s2">function renderPresetDropdown() {</span>
</span><span id="__span-0-295"><a id="__codelineno-0-295" name="__codelineno-0-295"></a><span class="s2">    const sel = document.getElementById(&#39;preset-select&#39;);</span>
</span><span id="__span-0-296"><a id="__codelineno-0-296" name="__codelineno-0-296"></a><span class="s2">    sel.innerHTML = &#39;&lt;option value=&quot;&quot;&gt;-- Select Preset --&lt;/option&gt;&#39;;</span>
</span><span id="__span-0-297"><a id="__codelineno-0-297" name="__codelineno-0-297"></a><span class="s2">    presets.forEach(p =&gt; {</span>
</span><span id="__span-0-298"><a id="__codelineno-0-298" name="__codelineno-0-298"></a><span class="s2">        sel.innerHTML += `&lt;option value=&quot;$</span><span class="si">{p.name}</span><span class="s2">&quot;&gt;$</span><span class="si">{p.name}</span><span class="s2">&lt;/option&gt;`;</span>
</span><span id="__span-0-299"><a id="__codelineno-0-299" name="__codelineno-0-299"></a><span class="s2">    });</span>
</span><span id="__span-0-300"><a id="__codelineno-0-300" name="__codelineno-0-300"></a><span class="s2">    updateButtonStates();</span>
</span><span id="__span-0-301"><a id="__codelineno-0-301" name="__codelineno-0-301"></a><span class="s2">}</span>
</span><span id="__span-0-302"><a id="__codelineno-0-302" name="__codelineno-0-302"></a>
</span><span id="__span-0-303"><a id="__codelineno-0-303" name="__codelineno-0-303"></a><span class="s2">async function loadPreset() {</span>
</span><span id="__span-0-304"><a id="__codelineno-0-304" name="__codelineno-0-304"></a><span class="s2">    const name = document.getElementById(&#39;preset-select&#39;).value;</span>
</span><span id="__span-0-305"><a id="__codelineno-0-305" name="__codelineno-0-305"></a><span class="s2">    updateButtonStates();</span>
</span><span id="__span-0-306"><a id="__codelineno-0-306" name="__codelineno-0-306"></a><span class="s2">    if (!name) return;</span>
</span><span id="__span-0-307"><a id="__codelineno-0-307" name="__codelineno-0-307"></a><span class="s2">    const preset = presets.find(p =&gt; p.name === name);</span>
</span><span id="__span-0-308"><a id="__codelineno-0-308" name="__codelineno-0-308"></a><span class="s2">    if (!preset) return;</span>
</span><span id="__span-0-309"><a id="__codelineno-0-309" name="__codelineno-0-309"></a><span class="s2">    await applyPreset(preset);</span>
</span><span id="__span-0-310"><a id="__codelineno-0-310" name="__codelineno-0-310"></a><span class="s2">}</span>
</span><span id="__span-0-311"><a id="__codelineno-0-311" name="__codelineno-0-311"></a>
</span><span id="__span-0-312"><a id="__codelineno-0-312" name="__codelineno-0-312"></a><span class="s2">async function applyPreset(preset) {</span>
</span><span id="__span-0-313"><a id="__codelineno-0-313" name="__codelineno-0-313"></a><span class="s2">    isLoadingPreset = true;</span>
</span><span id="__span-0-314"><a id="__codelineno-0-314" name="__codelineno-0-314"></a><span class="s2">    try {</span>
</span><span id="__span-0-315"><a id="__codelineno-0-315" name="__codelineno-0-315"></a><span class="s2">        // 1. Set bar period and show symbols section</span>
</span><span id="__span-0-316"><a id="__codelineno-0-316" name="__codelineno-0-316"></a><span class="s2">        const barPeriodEl = document.getElementById(&#39;bar-period&#39;);</span>
</span><span id="__span-0-317"><a id="__codelineno-0-317" name="__codelineno-0-317"></a><span class="s2">        barPeriodEl.value = String(preset.rtype);</span>
</span><span id="__span-0-318"><a id="__codelineno-0-318" name="__codelineno-0-318"></a><span class="s2">        const section = document.getElementById(&#39;symbols-section&#39;);</span>
</span><span id="__span-0-319"><a id="__codelineno-0-319" name="__codelineno-0-319"></a><span class="s2">        section.style.display = &#39;block&#39;;</span>
</span><span id="__span-0-320"><a id="__codelineno-0-320" name="__codelineno-0-320"></a>
</span><span id="__span-0-321"><a id="__codelineno-0-321" name="__codelineno-0-321"></a><span class="s2">        // Load publishers for this rtype</span>
</span><span id="__span-0-322"><a id="__codelineno-0-322" name="__codelineno-0-322"></a><span class="s2">        await loadPublishers();</span>
</span><span id="__span-0-323"><a id="__codelineno-0-323" name="__codelineno-0-323"></a>
</span><span id="__span-0-324"><a id="__codelineno-0-324" name="__codelineno-0-324"></a><span class="s2">        // 2. Set publisher and load datasets</span>
</span><span id="__span-0-325"><a id="__codelineno-0-325" name="__codelineno-0-325"></a><span class="s2">        const pubNameEl = document.getElementById(&#39;publisher-name&#39;);</span>
</span><span id="__span-0-326"><a id="__codelineno-0-326" name="__codelineno-0-326"></a><span class="s2">        pubNameEl.value = preset.publisher_name;</span>
</span><span id="__span-0-327"><a id="__codelineno-0-327" name="__codelineno-0-327"></a>
</span><span id="__span-0-328"><a id="__codelineno-0-328" name="__codelineno-0-328"></a><span class="s2">        const rtype = preset.rtype;</span>
</span><span id="__span-0-329"><a id="__codelineno-0-329" name="__codelineno-0-329"></a><span class="s2">        const url = `/api/secmaster/publishers/${encodeURIComponent(preset.publisher_name)}/datasets?rtype=$</span><span class="si">{rtype}</span><span class="s2">`;</span>
</span><span id="__span-0-330"><a id="__codelineno-0-330" name="__codelineno-0-330"></a><span class="s2">        const res = await fetch(url);</span>
</span><span id="__span-0-331"><a id="__codelineno-0-331" name="__codelineno-0-331"></a><span class="s2">        const data = await res.json();</span>
</span><span id="__span-0-332"><a id="__codelineno-0-332" name="__codelineno-0-332"></a><span class="s2">        datasets = data.datasets || [];</span>
</span><span id="__span-0-333"><a id="__codelineno-0-333" name="__codelineno-0-333"></a><span class="s2">        const datasetSel = document.getElementById(&#39;publisher-dataset&#39;);</span>
</span><span id="__span-0-334"><a id="__codelineno-0-334" name="__codelineno-0-334"></a><span class="s2">        datasetSel.innerHTML = &#39;&lt;option value=&quot;&quot;&gt;-- Select Dataset --&lt;/option&gt;&#39;;</span>
</span><span id="__span-0-335"><a id="__codelineno-0-335" name="__codelineno-0-335"></a><span class="s2">        datasets.forEach(d =&gt; datasetSel.innerHTML += `&lt;option value=&quot;$</span><span class="si">{d.publisher_id}</span><span class="s2">&quot;&gt;$</span><span class="si">{d.dataset}</span><span class="s2">&lt;/option&gt;`);</span>
</span><span id="__span-0-336"><a id="__codelineno-0-336" name="__codelineno-0-336"></a>
</span><span id="__span-0-337"><a id="__codelineno-0-337" name="__codelineno-0-337"></a><span class="s2">        // 3. Set dataset</span>
</span><span id="__span-0-338"><a id="__codelineno-0-338" name="__codelineno-0-338"></a><span class="s2">        datasetSel.value = String(preset.publisher_id);</span>
</span><span id="__span-0-339"><a id="__codelineno-0-339" name="__codelineno-0-339"></a><span class="s2">        selectedPublisherId = preset.publisher_id;</span>
</span><span id="__span-0-340"><a id="__codelineno-0-340" name="__codelineno-0-340"></a>
</span><span id="__span-0-341"><a id="__codelineno-0-341" name="__codelineno-0-341"></a><span class="s2">        // 4. Load coverage and show symbol selection</span>
</span><span id="__span-0-342"><a id="__codelineno-0-342" name="__codelineno-0-342"></a><span class="s2">        await loadCoverageForPublisher(selectedPublisherId);</span>
</span><span id="__span-0-343"><a id="__codelineno-0-343" name="__codelineno-0-343"></a><span class="s2">        document.getElementById(&#39;symbol-selection&#39;).style.display = &#39;block&#39;;</span>
</span><span id="__span-0-344"><a id="__codelineno-0-344" name="__codelineno-0-344"></a><span class="s2">        document.getElementById(&#39;symbol-search&#39;).value = &#39;&#39;;</span>
</span><span id="__span-0-345"><a id="__codelineno-0-345" name="__codelineno-0-345"></a><span class="s2">        document.getElementById(&#39;search-results&#39;).innerHTML = &#39;&#39;;</span>
</span><span id="__span-0-346"><a id="__codelineno-0-346" name="__codelineno-0-346"></a>
</span><span id="__span-0-347"><a id="__codelineno-0-347" name="__codelineno-0-347"></a><span class="s2">        // 5. Set symbols (filtered to available)</span>
</span><span id="__span-0-348"><a id="__codelineno-0-348" name="__codelineno-0-348"></a><span class="s2">        const availableSymbols = symbolsForRtype[rtype] || [];</span>
</span><span id="__span-0-349"><a id="__codelineno-0-349" name="__codelineno-0-349"></a><span class="s2">        selectedSymbols = preset.symbols.filter(s =&gt; availableSymbols.includes(s));</span>
</span><span id="__span-0-350"><a id="__codelineno-0-350" name="__codelineno-0-350"></a><span class="s2">        renderSelectedSymbolsKeepPreset();</span>
</span><span id="__span-0-351"><a id="__codelineno-0-351" name="__codelineno-0-351"></a><span class="s2">        updateDateRange();</span>
</span><span id="__span-0-352"><a id="__codelineno-0-352" name="__codelineno-0-352"></a><span class="s2">    } finally {</span>
</span><span id="__span-0-353"><a id="__codelineno-0-353" name="__codelineno-0-353"></a><span class="s2">        isLoadingPreset = false;</span>
</span><span id="__span-0-354"><a id="__codelineno-0-354" name="__codelineno-0-354"></a><span class="s2">    }</span>
</span><span id="__span-0-355"><a id="__codelineno-0-355" name="__codelineno-0-355"></a><span class="s2">}</span>
</span><span id="__span-0-356"><a id="__codelineno-0-356" name="__codelineno-0-356"></a>
</span><span id="__span-0-357"><a id="__codelineno-0-357" name="__codelineno-0-357"></a><span class="s2">async function savePreset() {</span>
</span><span id="__span-0-358"><a id="__codelineno-0-358" name="__codelineno-0-358"></a><span class="s2">    const nameInput = document.getElementById(&#39;preset-name&#39;);</span>
</span><span id="__span-0-359"><a id="__codelineno-0-359" name="__codelineno-0-359"></a><span class="s2">    const name = nameInput.value.trim();</span>
</span><span id="__span-0-360"><a id="__codelineno-0-360" name="__codelineno-0-360"></a><span class="s2">    if (!name) { alert(&#39;Enter a preset name&#39;); return; }</span>
</span><span id="__span-0-361"><a id="__codelineno-0-361" name="__codelineno-0-361"></a><span class="s2">    const rtype = getSelectedRtype();</span>
</span><span id="__span-0-362"><a id="__codelineno-0-362" name="__codelineno-0-362"></a><span class="s2">    if (!rtype) { alert(&#39;Select a bar period first&#39;); return; }</span>
</span><span id="__span-0-363"><a id="__codelineno-0-363" name="__codelineno-0-363"></a><span class="s2">    if (!selectedPublisherId) { alert(&#39;Select a publisher and dataset first&#39;); return; }</span>
</span><span id="__span-0-364"><a id="__codelineno-0-364" name="__codelineno-0-364"></a><span class="s2">    if (selectedSymbols.length === 0) { alert(&#39;Select at least one symbol&#39;); return; }</span>
</span><span id="__span-0-365"><a id="__codelineno-0-365" name="__codelineno-0-365"></a><span class="s2">    const publisherName = document.getElementById(&#39;publisher-name&#39;).value;</span>
</span><span id="__span-0-366"><a id="__codelineno-0-366" name="__codelineno-0-366"></a><span class="s2">    const exists = presets.some(p =&gt; p.name === name);</span>
</span><span id="__span-0-367"><a id="__codelineno-0-367" name="__codelineno-0-367"></a><span class="s2">    const method = exists ? &#39;PUT&#39; : &#39;POST&#39;;</span>
</span><span id="__span-0-368"><a id="__codelineno-0-368" name="__codelineno-0-368"></a><span class="s2">    const apiUrl = exists ? `/api/presets/${encodeURIComponent(name)}` : &#39;/api/presets&#39;;</span>
</span><span id="__span-0-369"><a id="__codelineno-0-369" name="__codelineno-0-369"></a><span class="s2">    await fetch(apiUrl, {</span>
</span><span id="__span-0-370"><a id="__codelineno-0-370" name="__codelineno-0-370"></a><span class="s2">        method, headers: {&#39;Content-Type&#39;: &#39;application/json&#39;},</span>
</span><span id="__span-0-371"><a id="__codelineno-0-371" name="__codelineno-0-371"></a><span class="s2">        body: JSON.stringify({</span>
</span><span id="__span-0-372"><a id="__codelineno-0-372" name="__codelineno-0-372"></a><span class="s2">            name,</span>
</span><span id="__span-0-373"><a id="__codelineno-0-373" name="__codelineno-0-373"></a><span class="s2">            rtype,</span>
</span><span id="__span-0-374"><a id="__codelineno-0-374" name="__codelineno-0-374"></a><span class="s2">            publisher_name: publisherName,</span>
</span><span id="__span-0-375"><a id="__codelineno-0-375" name="__codelineno-0-375"></a><span class="s2">            publisher_id: selectedPublisherId,</span>
</span><span id="__span-0-376"><a id="__codelineno-0-376" name="__codelineno-0-376"></a><span class="s2">            symbols: selectedSymbols</span>
</span><span id="__span-0-377"><a id="__codelineno-0-377" name="__codelineno-0-377"></a><span class="s2">        })</span>
</span><span id="__span-0-378"><a id="__codelineno-0-378" name="__codelineno-0-378"></a><span class="s2">    });</span>
</span><span id="__span-0-379"><a id="__codelineno-0-379" name="__codelineno-0-379"></a><span class="s2">    nameInput.value = &#39;&#39;;</span>
</span><span id="__span-0-380"><a id="__codelineno-0-380" name="__codelineno-0-380"></a><span class="s2">    await loadPresets();</span>
</span><span id="__span-0-381"><a id="__codelineno-0-381" name="__codelineno-0-381"></a><span class="s2">    document.getElementById(&#39;preset-select&#39;).value = name;</span>
</span><span id="__span-0-382"><a id="__codelineno-0-382" name="__codelineno-0-382"></a><span class="s2">    updateButtonStates();</span>
</span><span id="__span-0-383"><a id="__codelineno-0-383" name="__codelineno-0-383"></a><span class="s2">}</span>
</span><span id="__span-0-384"><a id="__codelineno-0-384" name="__codelineno-0-384"></a>
</span><span id="__span-0-385"><a id="__codelineno-0-385" name="__codelineno-0-385"></a><span class="s2">async function deletePreset() {</span>
</span><span id="__span-0-386"><a id="__codelineno-0-386" name="__codelineno-0-386"></a><span class="s2">    const name = document.getElementById(&#39;preset-select&#39;).value;</span>
</span><span id="__span-0-387"><a id="__codelineno-0-387" name="__codelineno-0-387"></a><span class="s2">    if (!name) { alert(&#39;Select a preset to delete&#39;); return; }</span>
</span><span id="__span-0-388"><a id="__codelineno-0-388" name="__codelineno-0-388"></a><span class="s2">    if (!confirm(`Delete preset &quot;$</span><span class="si">{name}</span><span class="s2">&quot;?`)) return;</span>
</span><span id="__span-0-389"><a id="__codelineno-0-389" name="__codelineno-0-389"></a><span class="s2">    await fetch(`/api/presets/${encodeURIComponent(name)}`, {method: &#39;DELETE&#39;});</span>
</span><span id="__span-0-390"><a id="__codelineno-0-390" name="__codelineno-0-390"></a><span class="s2">    await loadPresets();</span>
</span><span id="__span-0-391"><a id="__codelineno-0-391" name="__codelineno-0-391"></a><span class="s2">    selectedSymbols = [];</span>
</span><span id="__span-0-392"><a id="__codelineno-0-392" name="__codelineno-0-392"></a><span class="s2">    renderSelectedSymbols();</span>
</span><span id="__span-0-393"><a id="__codelineno-0-393" name="__codelineno-0-393"></a><span class="s2">    updateDateRange();</span>
</span><span id="__span-0-394"><a id="__codelineno-0-394" name="__codelineno-0-394"></a><span class="s2">}</span>
</span><span id="__span-0-395"><a id="__codelineno-0-395" name="__codelineno-0-395"></a>
</span><span id="__span-0-396"><a id="__codelineno-0-396" name="__codelineno-0-396"></a><span class="s2">function updateButtonStates() {</span>
</span><span id="__span-0-397"><a id="__codelineno-0-397" name="__codelineno-0-397"></a><span class="s2">    const runBtn = document.getElementById(&#39;run-btn&#39;);</span>
</span><span id="__span-0-398"><a id="__codelineno-0-398" name="__codelineno-0-398"></a><span class="s2">    const saveBtn = document.getElementById(&#39;preset-save-btn&#39;);</span>
</span><span id="__span-0-399"><a id="__codelineno-0-399" name="__codelineno-0-399"></a><span class="s2">    const deleteBtn = document.getElementById(&#39;preset-delete-btn&#39;);</span>
</span><span id="__span-0-400"><a id="__codelineno-0-400" name="__codelineno-0-400"></a><span class="s2">    const presetSelect = document.getElementById(&#39;preset-select&#39;);</span>
</span><span id="__span-0-401"><a id="__codelineno-0-401" name="__codelineno-0-401"></a><span class="s2">    const presetNameInput = document.getElementById(&#39;preset-name&#39;);</span>
</span><span id="__span-0-402"><a id="__codelineno-0-402" name="__codelineno-0-402"></a><span class="s2">    const strategyEl = document.getElementById(&#39;strategy&#39;);</span>
</span><span id="__span-0-403"><a id="__codelineno-0-403" name="__codelineno-0-403"></a><span class="s2">    const barPeriodEl = document.getElementById(&#39;bar-period&#39;);</span>
</span><span id="__span-0-404"><a id="__codelineno-0-404" name="__codelineno-0-404"></a><span class="s2">    if (!runBtn) return;</span>
</span><span id="__span-0-405"><a id="__codelineno-0-405" name="__codelineno-0-405"></a><span class="s2">    const rtype = barPeriodEl ? parseInt(barPeriodEl.value) || null : null;</span>
</span><span id="__span-0-406"><a id="__codelineno-0-406" name="__codelineno-0-406"></a><span class="s2">    const strategy = strategyEl ? strategyEl.value : &#39;&#39;;</span>
</span><span id="__span-0-407"><a id="__codelineno-0-407" name="__codelineno-0-407"></a><span class="s2">    const canRun = strategy &amp;&amp; rtype &amp;&amp; selectedPublisherId &amp;&amp; selectedSymbols.length &gt; 0;</span>
</span><span id="__span-0-408"><a id="__codelineno-0-408" name="__codelineno-0-408"></a><span class="s2">    runBtn.disabled = !canRun;</span>
</span><span id="__span-0-409"><a id="__codelineno-0-409" name="__codelineno-0-409"></a><span class="s2">    const hasPresetSelected = !!(presetSelect &amp;&amp; presetSelect.value);</span>
</span><span id="__span-0-410"><a id="__codelineno-0-410" name="__codelineno-0-410"></a><span class="s2">    const hasPresetName = !!(presetNameInput &amp;&amp; presetNameInput.value.trim().length &gt; 0);</span>
</span><span id="__span-0-411"><a id="__codelineno-0-411" name="__codelineno-0-411"></a><span class="s2">    const canSave = hasPresetName &amp;&amp; rtype &amp;&amp; selectedPublisherId &amp;&amp; selectedSymbols.length &gt; 0;</span>
</span><span id="__span-0-412"><a id="__codelineno-0-412" name="__codelineno-0-412"></a><span class="s2">    if (saveBtn) {</span>
</span><span id="__span-0-413"><a id="__codelineno-0-413" name="__codelineno-0-413"></a><span class="s2">        saveBtn.classList.toggle(&#39;active&#39;, canSave);</span>
</span><span id="__span-0-414"><a id="__codelineno-0-414" name="__codelineno-0-414"></a><span class="s2">    }</span>
</span><span id="__span-0-415"><a id="__codelineno-0-415" name="__codelineno-0-415"></a><span class="s2">    if (deleteBtn) {</span>
</span><span id="__span-0-416"><a id="__codelineno-0-416" name="__codelineno-0-416"></a><span class="s2">        deleteBtn.classList.toggle(&#39;active&#39;, hasPresetSelected);</span>
</span><span id="__span-0-417"><a id="__codelineno-0-417" name="__codelineno-0-417"></a><span class="s2">    }</span>
</span><span id="__span-0-418"><a id="__codelineno-0-418" name="__codelineno-0-418"></a><span class="s2">}</span>
</span><span id="__span-0-419"><a id="__codelineno-0-419" name="__codelineno-0-419"></a>
</span><span id="__span-0-420"><a id="__codelineno-0-420" name="__codelineno-0-420"></a><span class="s2">async function loadStrategies() {</span>
</span><span id="__span-0-421"><a id="__codelineno-0-421" name="__codelineno-0-421"></a><span class="s2">    const res = await fetch(&#39;/api/strategies&#39;);</span>
</span><span id="__span-0-422"><a id="__codelineno-0-422" name="__codelineno-0-422"></a><span class="s2">    const data = await res.json();</span>
</span><span id="__span-0-423"><a id="__codelineno-0-423" name="__codelineno-0-423"></a><span class="s2">    const sel = document.getElementById(&#39;strategy&#39;);</span>
</span><span id="__span-0-424"><a id="__codelineno-0-424" name="__codelineno-0-424"></a><span class="s2">    sel.innerHTML = &#39;&#39;;</span>
</span><span id="__span-0-425"><a id="__codelineno-0-425" name="__codelineno-0-425"></a><span class="s2">    data.strategies.forEach(s =&gt; sel.innerHTML += `&lt;option value=&quot;$</span><span class="si">{s.id}</span><span class="s2">&quot;&gt;$</span><span class="si">{s.name}</span><span class="s2">&lt;/option&gt;`);</span>
</span><span id="__span-0-426"><a id="__codelineno-0-426" name="__codelineno-0-426"></a><span class="s2">    if (data.strategies.length &gt; 0) {</span>
</span><span id="__span-0-427"><a id="__codelineno-0-427" name="__codelineno-0-427"></a><span class="s2">        sel.value = data.strategies[0].id;</span>
</span><span id="__span-0-428"><a id="__codelineno-0-428" name="__codelineno-0-428"></a><span class="s2">        loadStrategyParams();</span>
</span><span id="__span-0-429"><a id="__codelineno-0-429" name="__codelineno-0-429"></a><span class="s2">    }</span>
</span><span id="__span-0-430"><a id="__codelineno-0-430" name="__codelineno-0-430"></a><span class="s2">}</span>
</span><span id="__span-0-431"><a id="__codelineno-0-431" name="__codelineno-0-431"></a>
</span><span id="__span-0-432"><a id="__codelineno-0-432" name="__codelineno-0-432"></a><span class="s2">async function loadStrategyParams() {</span>
</span><span id="__span-0-433"><a id="__codelineno-0-433" name="__codelineno-0-433"></a><span class="s2">    const name = document.getElementById(&#39;strategy&#39;).value;</span>
</span><span id="__span-0-434"><a id="__codelineno-0-434" name="__codelineno-0-434"></a><span class="s2">    if (!name) return;</span>
</span><span id="__span-0-435"><a id="__codelineno-0-435" name="__codelineno-0-435"></a><span class="s2">    const res = await fetch(`/api/strategies/$</span><span class="si">{name}</span><span class="s2">`);</span>
</span><span id="__span-0-436"><a id="__codelineno-0-436" name="__codelineno-0-436"></a><span class="s2">    const data = await res.json();</span>
</span><span id="__span-0-437"><a id="__codelineno-0-437" name="__codelineno-0-437"></a><span class="s2">    strategyParams = data.parameters || [];</span>
</span><span id="__span-0-438"><a id="__codelineno-0-438" name="__codelineno-0-438"></a><span class="s2">    renderParams();</span>
</span><span id="__span-0-439"><a id="__codelineno-0-439" name="__codelineno-0-439"></a><span class="s2">}</span>
</span><span id="__span-0-440"><a id="__codelineno-0-440" name="__codelineno-0-440"></a>
</span><span id="__span-0-441"><a id="__codelineno-0-441" name="__codelineno-0-441"></a><span class="s2">function formatParamName(name) {</span>
</span><span id="__span-0-442"><a id="__codelineno-0-442" name="__codelineno-0-442"></a><span class="s2">    let result = name.replace(/_/g, &#39; &#39;);</span>
</span><span id="__span-0-443"><a id="__codelineno-0-443" name="__codelineno-0-443"></a><span class="s2">    result = result.replace(/([A-Z]+)([A-Z][a-z])/g, &#39;$1 $2&#39;);</span>
</span><span id="__span-0-444"><a id="__codelineno-0-444" name="__codelineno-0-444"></a><span class="s2">    result = result.replace(/([a-z])([A-Z])/g, &#39;$1 $2&#39;);</span>
</span><span id="__span-0-445"><a id="__codelineno-0-445" name="__codelineno-0-445"></a><span class="s2">    return result.split(&#39; &#39;).map(word =&gt; {</span>
</span><span id="__span-0-446"><a id="__codelineno-0-446" name="__codelineno-0-446"></a><span class="s2">        if (word === word.toUpperCase() &amp;&amp; word.length &gt; 1) return word;</span>
</span><span id="__span-0-447"><a id="__codelineno-0-447" name="__codelineno-0-447"></a><span class="s2">        return word.charAt(0).toUpperCase() + word.slice(1);</span>
</span><span id="__span-0-448"><a id="__codelineno-0-448" name="__codelineno-0-448"></a><span class="s2">    }).join(&#39; &#39;);</span>
</span><span id="__span-0-449"><a id="__codelineno-0-449" name="__codelineno-0-449"></a><span class="s2">}</span>
</span><span id="__span-0-450"><a id="__codelineno-0-450" name="__codelineno-0-450"></a>
</span><span id="__span-0-451"><a id="__codelineno-0-451" name="__codelineno-0-451"></a><span class="s2">function renderParams() {</span>
</span><span id="__span-0-452"><a id="__codelineno-0-452" name="__codelineno-0-452"></a><span class="s2">    const container = document.getElementById(&#39;strategy-params&#39;);</span>
</span><span id="__span-0-453"><a id="__codelineno-0-453" name="__codelineno-0-453"></a><span class="s2">    const filtered = strategyParams.filter(p =&gt; p.name !== &#39;bar_period&#39;);</span>
</span><span id="__span-0-454"><a id="__codelineno-0-454" name="__codelineno-0-454"></a><span class="s2">    if (filtered.length === 0) {</span>
</span><span id="__span-0-455"><a id="__codelineno-0-455" name="__codelineno-0-455"></a><span class="s2">        container.innerHTML = &#39;&lt;div style=&quot;color: #8b949e; font-size: 13px;&quot;&gt;No parameters&lt;/div&gt;&#39;;</span>
</span><span id="__span-0-456"><a id="__codelineno-0-456" name="__codelineno-0-456"></a><span class="s2">        return;</span>
</span><span id="__span-0-457"><a id="__codelineno-0-457" name="__codelineno-0-457"></a><span class="s2">    }</span>
</span><span id="__span-0-458"><a id="__codelineno-0-458" name="__codelineno-0-458"></a><span class="s2">    container.innerHTML = filtered.map(p =&gt; {</span>
</span><span id="__span-0-459"><a id="__codelineno-0-459" name="__codelineno-0-459"></a><span class="s2">        const label = formatParamName(p.name);</span>
</span><span id="__span-0-460"><a id="__codelineno-0-460" name="__codelineno-0-460"></a><span class="s2">        if (p.choices &amp;&amp; p.choices.length &gt; 0) {</span>
</span><span id="__span-0-461"><a id="__codelineno-0-461" name="__codelineno-0-461"></a><span class="s2">            const opts = p.choices.map(c =&gt; `&lt;option value=&quot;$</span><span class="si">{c}</span><span class="s2">&quot; ${c === p.default ? &#39;selected&#39; : &#39;&#39;}&gt;$</span><span class="si">{c}</span><span class="s2">&lt;/option&gt;`).join(&#39;&#39;);</span>
</span><span id="__span-0-462"><a id="__codelineno-0-462" name="__codelineno-0-462"></a><span class="s2">            return `&lt;div class=&quot;param-row&quot;&gt;&lt;label&gt;$</span><span class="si">{label}</span><span class="s2">&lt;/label&gt;&lt;select id=&quot;sp_$</span><span class="si">{p.name}</span><span class="s2">&quot;&gt;$</span><span class="si">{opts}</span><span class="s2">&lt;/select&gt;&lt;/div&gt;`;</span>
</span><span id="__span-0-463"><a id="__codelineno-0-463" name="__codelineno-0-463"></a><span class="s2">        }</span>
</span><span id="__span-0-464"><a id="__codelineno-0-464" name="__codelineno-0-464"></a><span class="s2">        const inputType = p.type === &#39;bool&#39; ? &#39;checkbox&#39; : (p.type === &#39;float&#39; || p.type === &#39;int&#39; ? &#39;number&#39; : &#39;text&#39;);</span>
</span><span id="__span-0-465"><a id="__codelineno-0-465" name="__codelineno-0-465"></a><span class="s2">        const step = p.step || (p.type === &#39;float&#39; ? &#39;0.01&#39; : &#39;1&#39;);</span>
</span><span id="__span-0-466"><a id="__codelineno-0-466" name="__codelineno-0-466"></a><span class="s2">        const checked = p.type === &#39;bool&#39; &amp;&amp; p.default ? &#39;checked&#39; : &#39;&#39;;</span>
</span><span id="__span-0-467"><a id="__codelineno-0-467" name="__codelineno-0-467"></a><span class="s2">        return `&lt;div class=&quot;param-row&quot;&gt;&lt;label&gt;$</span><span class="si">{label}</span><span class="s2">&lt;/label&gt;&lt;input type=&quot;$</span><span class="si">{inputType}</span><span class="s2">&quot; id=&quot;sp_$</span><span class="si">{p.name}</span><span class="s2">&quot; value=&quot;$</span><span class="si">{p.default}</span><span class="s2">&quot; step=&quot;$</span><span class="si">{step}</span><span class="s2">&quot; ${p.min !== undefined ? `min=&quot;$</span><span class="si">{p.min}</span><span class="s2">&quot;` : &#39;&#39;} ${p.max !== undefined ? `max=&quot;$</span><span class="si">{p.max}</span><span class="s2">&quot;` : &#39;&#39;} $</span><span class="si">{checked}</span><span class="s2">&gt;&lt;/div&gt;`;</span>
</span><span id="__span-0-468"><a id="__codelineno-0-468" name="__codelineno-0-468"></a><span class="s2">    }).join(&#39;&#39;);</span>
</span><span id="__span-0-469"><a id="__codelineno-0-469" name="__codelineno-0-469"></a><span class="s2">}</span>
</span><span id="__span-0-470"><a id="__codelineno-0-470" name="__codelineno-0-470"></a>
</span><span id="__span-0-471"><a id="__codelineno-0-471" name="__codelineno-0-471"></a><span class="s2">function tsToDate(ts) {</span>
</span><span id="__span-0-472"><a id="__codelineno-0-472" name="__codelineno-0-472"></a><span class="s2">    const ms = Math.floor(ts / 1000000);</span>
</span><span id="__span-0-473"><a id="__codelineno-0-473" name="__codelineno-0-473"></a><span class="s2">    const d = new Date(ms);</span>
</span><span id="__span-0-474"><a id="__codelineno-0-474" name="__codelineno-0-474"></a><span class="s2">    return d.toISOString().split(&#39;T&#39;)[0];</span>
</span><span id="__span-0-475"><a id="__codelineno-0-475" name="__codelineno-0-475"></a><span class="s2">}</span>
</span><span id="__span-0-476"><a id="__codelineno-0-476" name="__codelineno-0-476"></a>
</span><span id="__span-0-477"><a id="__codelineno-0-477" name="__codelineno-0-477"></a><span class="s2">async function loadCoverage() {</span>
</span><span id="__span-0-478"><a id="__codelineno-0-478" name="__codelineno-0-478"></a><span class="s2">    const res = await fetch(&#39;/api/secmaster/symbols_coverage&#39;);</span>
</span><span id="__span-0-479"><a id="__codelineno-0-479" name="__codelineno-0-479"></a><span class="s2">    const data = await res.json();</span>
</span><span id="__span-0-480"><a id="__codelineno-0-480" name="__codelineno-0-480"></a><span class="s2">    coverageData = data.symbols || [];</span>
</span><span id="__span-0-481"><a id="__codelineno-0-481" name="__codelineno-0-481"></a><span class="s2">    const rtypeSet = new Set();</span>
</span><span id="__span-0-482"><a id="__codelineno-0-482" name="__codelineno-0-482"></a><span class="s2">    coverageData.forEach(row =&gt; rtypeSet.add(row.rtype));</span>
</span><span id="__span-0-483"><a id="__codelineno-0-483" name="__codelineno-0-483"></a><span class="s2">    availableRtypes = Array.from(rtypeSet).sort((a, b) =&gt; a - b);</span>
</span><span id="__span-0-484"><a id="__codelineno-0-484" name="__codelineno-0-484"></a><span class="s2">    populateBarPeriodDropdown();</span>
</span><span id="__span-0-485"><a id="__codelineno-0-485" name="__codelineno-0-485"></a><span class="s2">}</span>
</span><span id="__span-0-486"><a id="__codelineno-0-486" name="__codelineno-0-486"></a>
</span><span id="__span-0-487"><a id="__codelineno-0-487" name="__codelineno-0-487"></a><span class="s2">function populateBarPeriodDropdown() {</span>
</span><span id="__span-0-488"><a id="__codelineno-0-488" name="__codelineno-0-488"></a><span class="s2">    const sel = document.getElementById(&#39;bar-period&#39;);</span>
</span><span id="__span-0-489"><a id="__codelineno-0-489" name="__codelineno-0-489"></a><span class="s2">    sel.innerHTML = &#39;&lt;option value=&quot;&quot;&gt;-- Select bar period --&lt;/option&gt;&#39;;</span>
</span><span id="__span-0-490"><a id="__codelineno-0-490" name="__codelineno-0-490"></a><span class="s2">    availableRtypes.forEach(rt =&gt; {</span>
</span><span id="__span-0-491"><a id="__codelineno-0-491" name="__codelineno-0-491"></a><span class="s2">        const label = RTYPE_LABELS[rt] || `rtype $</span><span class="si">{rt}</span><span class="s2">`;</span>
</span><span id="__span-0-492"><a id="__codelineno-0-492" name="__codelineno-0-492"></a><span class="s2">        sel.innerHTML += `&lt;option value=&quot;$</span><span class="si">{rt}</span><span class="s2">&quot;&gt;$</span><span class="si">{label}</span><span class="s2">&lt;/option&gt;`;</span>
</span><span id="__span-0-493"><a id="__codelineno-0-493" name="__codelineno-0-493"></a><span class="s2">    });</span>
</span><span id="__span-0-494"><a id="__codelineno-0-494" name="__codelineno-0-494"></a><span class="s2">}</span>
</span><span id="__span-0-495"><a id="__codelineno-0-495" name="__codelineno-0-495"></a>
</span><span id="__span-0-496"><a id="__codelineno-0-496" name="__codelineno-0-496"></a><span class="s2">function onBarPeriodChange() {</span>
</span><span id="__span-0-497"><a id="__codelineno-0-497" name="__codelineno-0-497"></a><span class="s2">    if (isLoadingPreset) return;</span>
</span><span id="__span-0-498"><a id="__codelineno-0-498" name="__codelineno-0-498"></a><span class="s2">    document.getElementById(&#39;preset-select&#39;).value = &#39;&#39;;</span>
</span><span id="__span-0-499"><a id="__codelineno-0-499" name="__codelineno-0-499"></a><span class="s2">    selectedSymbols = [];</span>
</span><span id="__span-0-500"><a id="__codelineno-0-500" name="__codelineno-0-500"></a><span class="s2">    selectedPublisherId = null;</span>
</span><span id="__span-0-501"><a id="__codelineno-0-501" name="__codelineno-0-501"></a><span class="s2">    symbolsForRtype = </span><span class="si">{}</span><span class="s2">;</span>
</span><span id="__span-0-502"><a id="__codelineno-0-502" name="__codelineno-0-502"></a><span class="s2">    symbolCoverageForRtype = </span><span class="si">{}</span><span class="s2">;</span>
</span><span id="__span-0-503"><a id="__codelineno-0-503" name="__codelineno-0-503"></a><span class="s2">    renderSelectedSymbols();</span>
</span><span id="__span-0-504"><a id="__codelineno-0-504" name="__codelineno-0-504"></a><span class="s2">    updateDateRange();</span>
</span><span id="__span-0-505"><a id="__codelineno-0-505" name="__codelineno-0-505"></a><span class="s2">    const rtype = document.getElementById(&#39;bar-period&#39;).value;</span>
</span><span id="__span-0-506"><a id="__codelineno-0-506" name="__codelineno-0-506"></a><span class="s2">    const section = document.getElementById(&#39;symbols-section&#39;);</span>
</span><span id="__span-0-507"><a id="__codelineno-0-507" name="__codelineno-0-507"></a><span class="s2">    const symbolSelection = document.getElementById(&#39;symbol-selection&#39;);</span>
</span><span id="__span-0-508"><a id="__codelineno-0-508" name="__codelineno-0-508"></a><span class="s2">    document.getElementById(&#39;publisher-name&#39;).value = &#39;&#39;;</span>
</span><span id="__span-0-509"><a id="__codelineno-0-509" name="__codelineno-0-509"></a><span class="s2">    document.getElementById(&#39;publisher-dataset&#39;).innerHTML = &#39;&lt;option value=&quot;&quot;&gt;-- Select Dataset --&lt;/option&gt;&#39;;</span>
</span><span id="__span-0-510"><a id="__codelineno-0-510" name="__codelineno-0-510"></a><span class="s2">    if (rtype) {</span>
</span><span id="__span-0-511"><a id="__codelineno-0-511" name="__codelineno-0-511"></a><span class="s2">        section.style.display = &#39;block&#39;;</span>
</span><span id="__span-0-512"><a id="__codelineno-0-512" name="__codelineno-0-512"></a><span class="s2">        loadPublishers();</span>
</span><span id="__span-0-513"><a id="__codelineno-0-513" name="__codelineno-0-513"></a><span class="s2">    } else {</span>
</span><span id="__span-0-514"><a id="__codelineno-0-514" name="__codelineno-0-514"></a><span class="s2">        section.style.display = &#39;none&#39;;</span>
</span><span id="__span-0-515"><a id="__codelineno-0-515" name="__codelineno-0-515"></a><span class="s2">    }</span>
</span><span id="__span-0-516"><a id="__codelineno-0-516" name="__codelineno-0-516"></a><span class="s2">    symbolSelection.style.display = &#39;none&#39;;</span>
</span><span id="__span-0-517"><a id="__codelineno-0-517" name="__codelineno-0-517"></a><span class="s2">    document.getElementById(&#39;symbol-search&#39;).value = &#39;&#39;;</span>
</span><span id="__span-0-518"><a id="__codelineno-0-518" name="__codelineno-0-518"></a><span class="s2">    document.getElementById(&#39;search-results&#39;).innerHTML = &#39;&#39;;</span>
</span><span id="__span-0-519"><a id="__codelineno-0-519" name="__codelineno-0-519"></a><span class="s2">}</span>
</span><span id="__span-0-520"><a id="__codelineno-0-520" name="__codelineno-0-520"></a>
</span><span id="__span-0-521"><a id="__codelineno-0-521" name="__codelineno-0-521"></a><span class="s2">function getSelectedRtype() {</span>
</span><span id="__span-0-522"><a id="__codelineno-0-522" name="__codelineno-0-522"></a><span class="s2">    return parseInt(document.getElementById(&#39;bar-period&#39;).value) || null;</span>
</span><span id="__span-0-523"><a id="__codelineno-0-523" name="__codelineno-0-523"></a><span class="s2">}</span>
</span><span id="__span-0-524"><a id="__codelineno-0-524" name="__codelineno-0-524"></a>
</span><span id="__span-0-525"><a id="__codelineno-0-525" name="__codelineno-0-525"></a><span class="s2">function searchSymbols() {</span>
</span><span id="__span-0-526"><a id="__codelineno-0-526" name="__codelineno-0-526"></a><span class="s2">    const query = document.getElementById(&#39;symbol-search&#39;).value.toLowerCase();</span>
</span><span id="__span-0-527"><a id="__codelineno-0-527" name="__codelineno-0-527"></a><span class="s2">    const container = document.getElementById(&#39;search-results&#39;);</span>
</span><span id="__span-0-528"><a id="__codelineno-0-528" name="__codelineno-0-528"></a><span class="s2">    const rtype = getSelectedRtype();</span>
</span><span id="__span-0-529"><a id="__codelineno-0-529" name="__codelineno-0-529"></a><span class="s2">    if (!query || !rtype) {</span>
</span><span id="__span-0-530"><a id="__codelineno-0-530" name="__codelineno-0-530"></a><span class="s2">        container.innerHTML = &#39;&#39;;</span>
</span><span id="__span-0-531"><a id="__codelineno-0-531" name="__codelineno-0-531"></a><span class="s2">        return;</span>
</span><span id="__span-0-532"><a id="__codelineno-0-532" name="__codelineno-0-532"></a><span class="s2">    }</span>
</span><span id="__span-0-533"><a id="__codelineno-0-533" name="__codelineno-0-533"></a><span class="s2">    const symbols = symbolsForRtype[rtype] || [];</span>
</span><span id="__span-0-534"><a id="__codelineno-0-534" name="__codelineno-0-534"></a><span class="s2">    const matches = symbols.filter(s =&gt; s.toLowerCase().includes(query) &amp;&amp; !selectedSymbols.includes(s)).slice(0, 20);</span>
</span><span id="__span-0-535"><a id="__codelineno-0-535" name="__codelineno-0-535"></a><span class="s2">    container.innerHTML = matches.map(s =&gt;</span>
</span><span id="__span-0-536"><a id="__codelineno-0-536" name="__codelineno-0-536"></a><span class="s2">        `&lt;div class=&quot;search-result&quot; onclick=&quot;addSymbol(&#39;$</span><span class="si">{s}</span><span class="s2">&#39;)&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;$</span><span class="si">{s}</span><span class="s2">&lt;/span&gt;&lt;/div&gt;`</span>
</span><span id="__span-0-537"><a id="__codelineno-0-537" name="__codelineno-0-537"></a><span class="s2">    ).join(&#39;&#39;);</span>
</span><span id="__span-0-538"><a id="__codelineno-0-538" name="__codelineno-0-538"></a><span class="s2">}</span>
</span><span id="__span-0-539"><a id="__codelineno-0-539" name="__codelineno-0-539"></a>
</span><span id="__span-0-540"><a id="__codelineno-0-540" name="__codelineno-0-540"></a><span class="s2">function addSymbol(symbol) {</span>
</span><span id="__span-0-541"><a id="__codelineno-0-541" name="__codelineno-0-541"></a><span class="s2">    if (!selectedSymbols.includes(symbol)) {</span>
</span><span id="__span-0-542"><a id="__codelineno-0-542" name="__codelineno-0-542"></a><span class="s2">        selectedSymbols.push(symbol);</span>
</span><span id="__span-0-543"><a id="__codelineno-0-543" name="__codelineno-0-543"></a><span class="s2">        document.getElementById(&#39;preset-select&#39;).value = &#39;&#39;;</span>
</span><span id="__span-0-544"><a id="__codelineno-0-544" name="__codelineno-0-544"></a><span class="s2">        renderSelectedSymbols();</span>
</span><span id="__span-0-545"><a id="__codelineno-0-545" name="__codelineno-0-545"></a><span class="s2">        updateDateRange();</span>
</span><span id="__span-0-546"><a id="__codelineno-0-546" name="__codelineno-0-546"></a><span class="s2">    }</span>
</span><span id="__span-0-547"><a id="__codelineno-0-547" name="__codelineno-0-547"></a><span class="s2">    document.getElementById(&#39;symbol-search&#39;).value = &#39;&#39;;</span>
</span><span id="__span-0-548"><a id="__codelineno-0-548" name="__codelineno-0-548"></a><span class="s2">    document.getElementById(&#39;search-results&#39;).innerHTML = &#39;&#39;;</span>
</span><span id="__span-0-549"><a id="__codelineno-0-549" name="__codelineno-0-549"></a><span class="s2">}</span>
</span><span id="__span-0-550"><a id="__codelineno-0-550" name="__codelineno-0-550"></a>
</span><span id="__span-0-551"><a id="__codelineno-0-551" name="__codelineno-0-551"></a><span class="s2">function removeSymbol(symbol) {</span>
</span><span id="__span-0-552"><a id="__codelineno-0-552" name="__codelineno-0-552"></a><span class="s2">    selectedSymbols = selectedSymbols.filter(s =&gt; s !== symbol);</span>
</span><span id="__span-0-553"><a id="__codelineno-0-553" name="__codelineno-0-553"></a><span class="s2">    document.getElementById(&#39;preset-select&#39;).value = &#39;&#39;;</span>
</span><span id="__span-0-554"><a id="__codelineno-0-554" name="__codelineno-0-554"></a><span class="s2">    renderSelectedSymbols();</span>
</span><span id="__span-0-555"><a id="__codelineno-0-555" name="__codelineno-0-555"></a><span class="s2">    updateDateRange();</span>
</span><span id="__span-0-556"><a id="__codelineno-0-556" name="__codelineno-0-556"></a><span class="s2">}</span>
</span><span id="__span-0-557"><a id="__codelineno-0-557" name="__codelineno-0-557"></a>
</span><span id="__span-0-558"><a id="__codelineno-0-558" name="__codelineno-0-558"></a><span class="s2">function renderSelectedSymbols() {</span>
</span><span id="__span-0-559"><a id="__codelineno-0-559" name="__codelineno-0-559"></a><span class="s2">    const container = document.getElementById(&#39;selected-symbols&#39;);</span>
</span><span id="__span-0-560"><a id="__codelineno-0-560" name="__codelineno-0-560"></a><span class="s2">    document.getElementById(&#39;selected-label&#39;).textContent = `Selected ($</span><span class="si">{selectedSymbols.length}</span><span class="s2">):`;</span>
</span><span id="__span-0-561"><a id="__codelineno-0-561" name="__codelineno-0-561"></a><span class="s2">    container.innerHTML = selectedSymbols.map(s =&gt;</span>
</span><span id="__span-0-562"><a id="__codelineno-0-562" name="__codelineno-0-562"></a><span class="s2">        `&lt;span class=&quot;selected-tag&quot;&gt;$</span><span class="si">{s}</span><span class="s2">&lt;span class=&quot;remove&quot; onclick=&quot;removeSymbol(&#39;$</span><span class="si">{s}</span><span class="s2">&#39;)&quot;&gt;&amp;times;&lt;/span&gt;&lt;/span&gt;`</span>
</span><span id="__span-0-563"><a id="__codelineno-0-563" name="__codelineno-0-563"></a><span class="s2">    ).join(&#39;&#39;);</span>
</span><span id="__span-0-564"><a id="__codelineno-0-564" name="__codelineno-0-564"></a><span class="s2">    updateButtonStates();</span>
</span><span id="__span-0-565"><a id="__codelineno-0-565" name="__codelineno-0-565"></a><span class="s2">}</span>
</span><span id="__span-0-566"><a id="__codelineno-0-566" name="__codelineno-0-566"></a>
</span><span id="__span-0-567"><a id="__codelineno-0-567" name="__codelineno-0-567"></a><span class="s2">function renderSelectedSymbolsKeepPreset() {</span>
</span><span id="__span-0-568"><a id="__codelineno-0-568" name="__codelineno-0-568"></a><span class="s2">    const container = document.getElementById(&#39;selected-symbols&#39;);</span>
</span><span id="__span-0-569"><a id="__codelineno-0-569" name="__codelineno-0-569"></a><span class="s2">    document.getElementById(&#39;selected-label&#39;).textContent = `Selected ($</span><span class="si">{selectedSymbols.length}</span><span class="s2">):`;</span>
</span><span id="__span-0-570"><a id="__codelineno-0-570" name="__codelineno-0-570"></a><span class="s2">    container.innerHTML = selectedSymbols.map(s =&gt;</span>
</span><span id="__span-0-571"><a id="__codelineno-0-571" name="__codelineno-0-571"></a><span class="s2">        `&lt;span class=&quot;selected-tag&quot;&gt;$</span><span class="si">{s}</span><span class="s2">&lt;span class=&quot;remove&quot; onclick=&quot;removeSymbol(&#39;$</span><span class="si">{s}</span><span class="s2">&#39;)&quot;&gt;&amp;times;&lt;/span&gt;&lt;/span&gt;`</span>
</span><span id="__span-0-572"><a id="__codelineno-0-572" name="__codelineno-0-572"></a><span class="s2">    ).join(&#39;&#39;);</span>
</span><span id="__span-0-573"><a id="__codelineno-0-573" name="__codelineno-0-573"></a><span class="s2">    updateButtonStates();</span>
</span><span id="__span-0-574"><a id="__codelineno-0-574" name="__codelineno-0-574"></a><span class="s2">}</span>
</span><span id="__span-0-575"><a id="__codelineno-0-575" name="__codelineno-0-575"></a>
</span><span id="__span-0-576"><a id="__codelineno-0-576" name="__codelineno-0-576"></a><span class="s2">function updateDateRange() {</span>
</span><span id="__span-0-577"><a id="__codelineno-0-577" name="__codelineno-0-577"></a><span class="s2">    const startInput = document.getElementById(&#39;start-date&#39;);</span>
</span><span id="__span-0-578"><a id="__codelineno-0-578" name="__codelineno-0-578"></a><span class="s2">    const endInput = document.getElementById(&#39;end-date&#39;);</span>
</span><span id="__span-0-579"><a id="__codelineno-0-579" name="__codelineno-0-579"></a><span class="s2">    const rtype = getSelectedRtype();</span>
</span><span id="__span-0-580"><a id="__codelineno-0-580" name="__codelineno-0-580"></a><span class="s2">    if (selectedSymbols.length === 0 || !rtype) {</span>
</span><span id="__span-0-581"><a id="__codelineno-0-581" name="__codelineno-0-581"></a><span class="s2">        globalMinDate = null;</span>
</span><span id="__span-0-582"><a id="__codelineno-0-582" name="__codelineno-0-582"></a><span class="s2">        globalMaxDate = null;</span>
</span><span id="__span-0-583"><a id="__codelineno-0-583" name="__codelineno-0-583"></a><span class="s2">        startInput.value = &#39;&#39;;</span>
</span><span id="__span-0-584"><a id="__codelineno-0-584" name="__codelineno-0-584"></a><span class="s2">        endInput.value = &#39;&#39;;</span>
</span><span id="__span-0-585"><a id="__codelineno-0-585" name="__codelineno-0-585"></a><span class="s2">        startInput.removeAttribute(&#39;min&#39;);</span>
</span><span id="__span-0-586"><a id="__codelineno-0-586" name="__codelineno-0-586"></a><span class="s2">        startInput.removeAttribute(&#39;max&#39;);</span>
</span><span id="__span-0-587"><a id="__codelineno-0-587" name="__codelineno-0-587"></a><span class="s2">        endInput.removeAttribute(&#39;min&#39;);</span>
</span><span id="__span-0-588"><a id="__codelineno-0-588" name="__codelineno-0-588"></a><span class="s2">        endInput.removeAttribute(&#39;max&#39;);</span>
</span><span id="__span-0-589"><a id="__codelineno-0-589" name="__codelineno-0-589"></a><span class="s2">        return;</span>
</span><span id="__span-0-590"><a id="__codelineno-0-590" name="__codelineno-0-590"></a><span class="s2">    }</span>
</span><span id="__span-0-591"><a id="__codelineno-0-591" name="__codelineno-0-591"></a><span class="s2">    const coverage = symbolCoverageForRtype[rtype] || </span><span class="si">{}</span><span class="s2">;</span>
</span><span id="__span-0-592"><a id="__codelineno-0-592" name="__codelineno-0-592"></a><span class="s2">    let minTs = null, maxTs = null;</span>
</span><span id="__span-0-593"><a id="__codelineno-0-593" name="__codelineno-0-593"></a><span class="s2">    selectedSymbols.forEach(s =&gt; {</span>
</span><span id="__span-0-594"><a id="__codelineno-0-594" name="__codelineno-0-594"></a><span class="s2">        const cov = coverage[s];</span>
</span><span id="__span-0-595"><a id="__codelineno-0-595" name="__codelineno-0-595"></a><span class="s2">        if (cov) {</span>
</span><span id="__span-0-596"><a id="__codelineno-0-596" name="__codelineno-0-596"></a><span class="s2">            if (minTs === null || cov.min_ts &lt; minTs) minTs = cov.min_ts;</span>
</span><span id="__span-0-597"><a id="__codelineno-0-597" name="__codelineno-0-597"></a><span class="s2">            if (maxTs === null || cov.max_ts &gt; maxTs) maxTs = cov.max_ts;</span>
</span><span id="__span-0-598"><a id="__codelineno-0-598" name="__codelineno-0-598"></a><span class="s2">        }</span>
</span><span id="__span-0-599"><a id="__codelineno-0-599" name="__codelineno-0-599"></a><span class="s2">    });</span>
</span><span id="__span-0-600"><a id="__codelineno-0-600" name="__codelineno-0-600"></a><span class="s2">    if (minTs === null) return;</span>
</span><span id="__span-0-601"><a id="__codelineno-0-601" name="__codelineno-0-601"></a><span class="s2">    globalMinDate = tsToDate(minTs);</span>
</span><span id="__span-0-602"><a id="__codelineno-0-602" name="__codelineno-0-602"></a><span class="s2">    globalMaxDate = tsToDate(maxTs);</span>
</span><span id="__span-0-603"><a id="__codelineno-0-603" name="__codelineno-0-603"></a><span class="s2">    startInput.min = globalMinDate;</span>
</span><span id="__span-0-604"><a id="__codelineno-0-604" name="__codelineno-0-604"></a><span class="s2">    startInput.max = globalMaxDate;</span>
</span><span id="__span-0-605"><a id="__codelineno-0-605" name="__codelineno-0-605"></a><span class="s2">    startInput.value = globalMinDate;</span>
</span><span id="__span-0-606"><a id="__codelineno-0-606" name="__codelineno-0-606"></a><span class="s2">    endInput.min = globalMinDate;</span>
</span><span id="__span-0-607"><a id="__codelineno-0-607" name="__codelineno-0-607"></a><span class="s2">    endInput.max = globalMaxDate;</span>
</span><span id="__span-0-608"><a id="__codelineno-0-608" name="__codelineno-0-608"></a><span class="s2">    endInput.value = globalMaxDate;</span>
</span><span id="__span-0-609"><a id="__codelineno-0-609" name="__codelineno-0-609"></a><span class="s2">}</span>
</span><span id="__span-0-610"><a id="__codelineno-0-610" name="__codelineno-0-610"></a>
</span><span id="__span-0-611"><a id="__codelineno-0-611" name="__codelineno-0-611"></a><span class="s2">function clampDate(inputId) {</span>
</span><span id="__span-0-612"><a id="__codelineno-0-612" name="__codelineno-0-612"></a><span class="s2">    if (!globalMinDate || !globalMaxDate) return;</span>
</span><span id="__span-0-613"><a id="__codelineno-0-613" name="__codelineno-0-613"></a><span class="s2">    const input = document.getElementById(inputId);</span>
</span><span id="__span-0-614"><a id="__codelineno-0-614" name="__codelineno-0-614"></a><span class="s2">    if (input.value &lt; globalMinDate) input.value = globalMinDate;</span>
</span><span id="__span-0-615"><a id="__codelineno-0-615" name="__codelineno-0-615"></a><span class="s2">    if (input.value &gt; globalMaxDate) input.value = globalMaxDate;</span>
</span><span id="__span-0-616"><a id="__codelineno-0-616" name="__codelineno-0-616"></a><span class="s2">}</span>
</span><span id="__span-0-617"><a id="__codelineno-0-617" name="__codelineno-0-617"></a>
</span><span id="__span-0-618"><a id="__codelineno-0-618" name="__codelineno-0-618"></a><span class="s2">function collectParams() {</span>
</span><span id="__span-0-619"><a id="__codelineno-0-619" name="__codelineno-0-619"></a><span class="s2">    const result = </span><span class="si">{}</span><span class="s2">;</span>
</span><span id="__span-0-620"><a id="__codelineno-0-620" name="__codelineno-0-620"></a><span class="s2">    strategyParams.forEach(p =&gt; {</span>
</span><span id="__span-0-621"><a id="__codelineno-0-621" name="__codelineno-0-621"></a><span class="s2">        const el = document.getElementById(`sp_$</span><span class="si">{p.name}</span><span class="s2">`);</span>
</span><span id="__span-0-622"><a id="__codelineno-0-622" name="__codelineno-0-622"></a><span class="s2">        if (!el) return;</span>
</span><span id="__span-0-623"><a id="__codelineno-0-623" name="__codelineno-0-623"></a><span class="s2">        if (p.type === &#39;bool&#39;) result[p.name] = el.checked;</span>
</span><span id="__span-0-624"><a id="__codelineno-0-624" name="__codelineno-0-624"></a><span class="s2">        else if (p.type === &#39;int&#39;) result[p.name] = parseInt(el.value);</span>
</span><span id="__span-0-625"><a id="__codelineno-0-625" name="__codelineno-0-625"></a><span class="s2">        else if (p.type === &#39;float&#39;) result[p.name] = parseFloat(el.value);</span>
</span><span id="__span-0-626"><a id="__codelineno-0-626" name="__codelineno-0-626"></a><span class="s2">        else result[p.name] = el.value;</span>
</span><span id="__span-0-627"><a id="__codelineno-0-627" name="__codelineno-0-627"></a><span class="s2">    });</span>
</span><span id="__span-0-628"><a id="__codelineno-0-628" name="__codelineno-0-628"></a><span class="s2">    return result;</span>
</span><span id="__span-0-629"><a id="__codelineno-0-629" name="__codelineno-0-629"></a><span class="s2">}</span>
</span><span id="__span-0-630"><a id="__codelineno-0-630" name="__codelineno-0-630"></a>
</span><span id="__span-0-631"><a id="__codelineno-0-631" name="__codelineno-0-631"></a><span class="s2">async function loadDbRuns() {</span>
</span><span id="__span-0-632"><a id="__codelineno-0-632" name="__codelineno-0-632"></a><span class="s2">    const res = await fetch(&#39;/api/runs&#39;);</span>
</span><span id="__span-0-633"><a id="__codelineno-0-633" name="__codelineno-0-633"></a><span class="s2">    const data = await res.json();</span>
</span><span id="__span-0-634"><a id="__codelineno-0-634" name="__codelineno-0-634"></a><span class="s2">    dbRuns = data.runs || [];</span>
</span><span id="__span-0-635"><a id="__codelineno-0-635" name="__codelineno-0-635"></a><span class="s2">    renderRuns();</span>
</span><span id="__span-0-636"><a id="__codelineno-0-636" name="__codelineno-0-636"></a><span class="s2">}</span>
</span><span id="__span-0-637"><a id="__codelineno-0-637" name="__codelineno-0-637"></a>
</span><span id="__span-0-638"><a id="__codelineno-0-638" name="__codelineno-0-638"></a><span class="s2">function toggleRunSelection(runId) {</span>
</span><span id="__span-0-639"><a id="__codelineno-0-639" name="__codelineno-0-639"></a><span class="s2">    if (selectedRunIds.has(runId)) {</span>
</span><span id="__span-0-640"><a id="__codelineno-0-640" name="__codelineno-0-640"></a><span class="s2">        selectedRunIds.delete(runId);</span>
</span><span id="__span-0-641"><a id="__codelineno-0-641" name="__codelineno-0-641"></a><span class="s2">    } else {</span>
</span><span id="__span-0-642"><a id="__codelineno-0-642" name="__codelineno-0-642"></a><span class="s2">        selectedRunIds.add(runId);</span>
</span><span id="__span-0-643"><a id="__codelineno-0-643" name="__codelineno-0-643"></a><span class="s2">    }</span>
</span><span id="__span-0-644"><a id="__codelineno-0-644" name="__codelineno-0-644"></a><span class="s2">    renderRuns();</span>
</span><span id="__span-0-645"><a id="__codelineno-0-645" name="__codelineno-0-645"></a><span class="s2">}</span>
</span><span id="__span-0-646"><a id="__codelineno-0-646" name="__codelineno-0-646"></a>
</span><span id="__span-0-647"><a id="__codelineno-0-647" name="__codelineno-0-647"></a><span class="s2">function toggleSelectAll() {</span>
</span><span id="__span-0-648"><a id="__codelineno-0-648" name="__codelineno-0-648"></a><span class="s2">    const allDbRunIds = dbRuns.map(r =&gt; r.run_id);</span>
</span><span id="__span-0-649"><a id="__codelineno-0-649" name="__codelineno-0-649"></a><span class="s2">    if (selectedRunIds.size === allDbRunIds.length &amp;&amp; allDbRunIds.length &gt; 0) {</span>
</span><span id="__span-0-650"><a id="__codelineno-0-650" name="__codelineno-0-650"></a><span class="s2">        selectedRunIds.clear();</span>
</span><span id="__span-0-651"><a id="__codelineno-0-651" name="__codelineno-0-651"></a><span class="s2">    } else {</span>
</span><span id="__span-0-652"><a id="__codelineno-0-652" name="__codelineno-0-652"></a><span class="s2">        allDbRunIds.forEach(id =&gt; selectedRunIds.add(id));</span>
</span><span id="__span-0-653"><a id="__codelineno-0-653" name="__codelineno-0-653"></a><span class="s2">    }</span>
</span><span id="__span-0-654"><a id="__codelineno-0-654" name="__codelineno-0-654"></a><span class="s2">    renderRuns();</span>
</span><span id="__span-0-655"><a id="__codelineno-0-655" name="__codelineno-0-655"></a><span class="s2">}</span>
</span><span id="__span-0-656"><a id="__codelineno-0-656" name="__codelineno-0-656"></a>
</span><span id="__span-0-657"><a id="__codelineno-0-657" name="__codelineno-0-657"></a><span class="s2">async function deleteSelectedRuns() {</span>
</span><span id="__span-0-658"><a id="__codelineno-0-658" name="__codelineno-0-658"></a><span class="s2">    if (selectedRunIds.size === 0) return;</span>
</span><span id="__span-0-659"><a id="__codelineno-0-659" name="__codelineno-0-659"></a><span class="s2">    if (!confirm(`Delete $</span><span class="si">{selectedRunIds.size}</span><span class="s2"> run(s)? This cannot be undone.`)) return;</span>
</span><span id="__span-0-660"><a id="__codelineno-0-660" name="__codelineno-0-660"></a><span class="s2">    const res = await fetch(&#39;/api/runs&#39;, {</span>
</span><span id="__span-0-661"><a id="__codelineno-0-661" name="__codelineno-0-661"></a><span class="s2">        method: &#39;DELETE&#39;,</span>
</span><span id="__span-0-662"><a id="__codelineno-0-662" name="__codelineno-0-662"></a><span class="s2">        headers: {&#39;Content-Type&#39;: &#39;application/json&#39;},</span>
</span><span id="__span-0-663"><a id="__codelineno-0-663" name="__codelineno-0-663"></a><span class="s2">        body: JSON.stringify({run_ids: Array.from(selectedRunIds)})</span>
</span><span id="__span-0-664"><a id="__codelineno-0-664" name="__codelineno-0-664"></a><span class="s2">    });</span>
</span><span id="__span-0-665"><a id="__codelineno-0-665" name="__codelineno-0-665"></a><span class="s2">    if (res.ok) {</span>
</span><span id="__span-0-666"><a id="__codelineno-0-666" name="__codelineno-0-666"></a><span class="s2">        selectedRunIds.clear();</span>
</span><span id="__span-0-667"><a id="__codelineno-0-667" name="__codelineno-0-667"></a><span class="s2">        await loadDbRuns();</span>
</span><span id="__span-0-668"><a id="__codelineno-0-668" name="__codelineno-0-668"></a><span class="s2">    } else {</span>
</span><span id="__span-0-669"><a id="__codelineno-0-669" name="__codelineno-0-669"></a><span class="s2">        alert(&#39;Failed to delete runs&#39;);</span>
</span><span id="__span-0-670"><a id="__codelineno-0-670" name="__codelineno-0-670"></a><span class="s2">    }</span>
</span><span id="__span-0-671"><a id="__codelineno-0-671" name="__codelineno-0-671"></a><span class="s2">}</span>
</span><span id="__span-0-672"><a id="__codelineno-0-672" name="__codelineno-0-672"></a>
</span><span id="__span-0-673"><a id="__codelineno-0-673" name="__codelineno-0-673"></a><span class="s2">function renderRuns() {</span>
</span><span id="__span-0-674"><a id="__codelineno-0-674" name="__codelineno-0-674"></a><span class="s2">    const container = document.getElementById(&#39;runs-list&#39;);</span>
</span><span id="__span-0-675"><a id="__codelineno-0-675" name="__codelineno-0-675"></a><span class="s2">    const activeRunIds = Object.keys(activeRuns).filter(id =&gt; activeRuns[id].status === &#39;running&#39;);</span>
</span><span id="__span-0-676"><a id="__codelineno-0-676" name="__codelineno-0-676"></a><span class="s2">    const allDbRunIds = dbRuns.map(r =&gt; r.run_id);</span>
</span><span id="__span-0-677"><a id="__codelineno-0-677" name="__codelineno-0-677"></a><span class="s2">    const allSelected = allDbRunIds.length &gt; 0 &amp;&amp; selectedRunIds.size === allDbRunIds.length;</span>
</span><span id="__span-0-678"><a id="__codelineno-0-678" name="__codelineno-0-678"></a>
</span><span id="__span-0-679"><a id="__codelineno-0-679" name="__codelineno-0-679"></a><span class="s2">    let html = &#39;&#39;;</span>
</span><span id="__span-0-680"><a id="__codelineno-0-680" name="__codelineno-0-680"></a><span class="s2">    if (dbRuns.length &gt; 0 || activeRunIds.length &gt; 0) {</span>
</span><span id="__span-0-681"><a id="__codelineno-0-681" name="__codelineno-0-681"></a><span class="s2">        html += `&lt;div class=&quot;runs-toolbar&quot;&gt;</span>
</span><span id="__span-0-682"><a id="__codelineno-0-682" name="__codelineno-0-682"></a><span class="s2">            &lt;label class=&quot;select-all-label&quot;&gt;</span>
</span><span id="__span-0-683"><a id="__codelineno-0-683" name="__codelineno-0-683"></a><span class="s2">                &lt;input type=&quot;checkbox&quot; ${allSelected ? &#39;checked&#39; : &#39;&#39;} onchange=&quot;toggleSelectAll()&quot;&gt;</span>
</span><span id="__span-0-684"><a id="__codelineno-0-684" name="__codelineno-0-684"></a><span class="s2">                Select all</span>
</span><span id="__span-0-685"><a id="__codelineno-0-685" name="__codelineno-0-685"></a><span class="s2">            &lt;/label&gt;</span>
</span><span id="__span-0-686"><a id="__codelineno-0-686" name="__codelineno-0-686"></a><span class="s2">            &lt;button class=&quot;btn-delete&quot; ${selectedRunIds.size === 0 ? &#39;disabled&#39; : &#39;&#39;} onclick=&quot;deleteSelectedRuns()&quot;&gt;</span>
</span><span id="__span-0-687"><a id="__codelineno-0-687" name="__codelineno-0-687"></a><span class="s2">                Delete ($</span><span class="si">{selectedRunIds.size}</span><span class="s2">)</span>
</span><span id="__span-0-688"><a id="__codelineno-0-688" name="__codelineno-0-688"></a><span class="s2">            &lt;/button&gt;</span>
</span><span id="__span-0-689"><a id="__codelineno-0-689" name="__codelineno-0-689"></a><span class="s2">        &lt;/div&gt;`;</span>
</span><span id="__span-0-690"><a id="__codelineno-0-690" name="__codelineno-0-690"></a><span class="s2">    }</span>
</span><span id="__span-0-691"><a id="__codelineno-0-691" name="__codelineno-0-691"></a>
</span><span id="__span-0-692"><a id="__codelineno-0-692" name="__codelineno-0-692"></a><span class="s2">    activeRunIds.forEach(id =&gt; {</span>
</span><span id="__span-0-693"><a id="__codelineno-0-693" name="__codelineno-0-693"></a><span class="s2">        const run = activeRuns[id];</span>
</span><span id="__span-0-694"><a id="__codelineno-0-694" name="__codelineno-0-694"></a><span class="s2">        const progress = run.progress;</span>
</span><span id="__span-0-695"><a id="__codelineno-0-695" name="__codelineno-0-695"></a><span class="s2">        html += `&lt;div class=&quot;run-item&quot;&gt;</span>
</span><span id="__span-0-696"><a id="__codelineno-0-696" name="__codelineno-0-696"></a><span class="s2">            &lt;div class=&quot;run-content&quot;&gt;</span>
</span><span id="__span-0-697"><a id="__codelineno-0-697" name="__codelineno-0-697"></a><span class="s2">                &lt;div class=&quot;run-header&quot;&gt;</span>
</span><span id="__span-0-698"><a id="__codelineno-0-698" name="__codelineno-0-698"></a><span class="s2">                    &lt;span class=&quot;run-name&quot;&gt;$</span><span class="si">{run.strategy}</span><span class="s2">&lt;/span&gt;</span>
</span><span id="__span-0-699"><a id="__codelineno-0-699" name="__codelineno-0-699"></a><span class="s2">                    &lt;span class=&quot;run-status running&quot;&gt;running&lt;/span&gt;</span>
</span><span id="__span-0-700"><a id="__codelineno-0-700" name="__codelineno-0-700"></a><span class="s2">                &lt;/div&gt;</span>
</span><span id="__span-0-701"><a id="__codelineno-0-701" name="__codelineno-0-701"></a><span class="s2">                &lt;div class=&quot;run-meta with-progress&quot;&gt;$</span><span class="si">{run.symbols.length}</span><span class="s2"> symbol${run.symbols.length !== 1 ? &#39;s&#39; : &#39;&#39;}  ${run.startDate || &#39;all&#39;} to ${run.endDate || &#39;all&#39;}&lt;/div&gt;</span>
</span><span id="__span-0-702"><a id="__codelineno-0-702" name="__codelineno-0-702"></a><span class="s2">                &lt;div class=&quot;progress-bar&quot;&gt;&lt;div class=&quot;progress-fill&quot; style=&quot;width: $</span><span class="si">{progress}</span><span class="s2">%&quot;&gt;&lt;/div&gt;&lt;/div&gt;</span>
</span><span id="__span-0-703"><a id="__codelineno-0-703" name="__codelineno-0-703"></a><span class="s2">            &lt;/div&gt;</span>
</span><span id="__span-0-704"><a id="__codelineno-0-704" name="__codelineno-0-704"></a><span class="s2">        &lt;/div&gt;`;</span>
</span><span id="__span-0-705"><a id="__codelineno-0-705" name="__codelineno-0-705"></a><span class="s2">    });</span>
</span><span id="__span-0-706"><a id="__codelineno-0-706" name="__codelineno-0-706"></a>
</span><span id="__span-0-707"><a id="__codelineno-0-707" name="__codelineno-0-707"></a><span class="s2">    dbRuns.forEach(r =&gt; {</span>
</span><span id="__span-0-708"><a id="__codelineno-0-708" name="__codelineno-0-708"></a><span class="s2">        const config = r.config || </span><span class="si">{}</span><span class="s2">;</span>
</span><span id="__span-0-709"><a id="__codelineno-0-709" name="__codelineno-0-709"></a><span class="s2">        const strategies = config.strategies ? config.strategies.join(&#39;, &#39;) : r.name;</span>
</span><span id="__span-0-710"><a id="__codelineno-0-710" name="__codelineno-0-710"></a><span class="s2">        const symbols = config.symbols || [];</span>
</span><span id="__span-0-711"><a id="__codelineno-0-711" name="__codelineno-0-711"></a><span class="s2">        const symbolCount = symbols.length;</span>
</span><span id="__span-0-712"><a id="__codelineno-0-712" name="__codelineno-0-712"></a><span class="s2">        const startDate = config.start_date || &#39;-&#39;;</span>
</span><span id="__span-0-713"><a id="__codelineno-0-713" name="__codelineno-0-713"></a><span class="s2">        const endDate = config.end_date || &#39;-&#39;;</span>
</span><span id="__span-0-714"><a id="__codelineno-0-714" name="__codelineno-0-714"></a><span class="s2">        const timePart = r.run_id.slice(11, 19).replace(/-/g, &#39;:&#39;);</span>
</span><span id="__span-0-715"><a id="__codelineno-0-715" name="__codelineno-0-715"></a><span class="s2">        const isSelected = selectedRunIds.has(r.run_id);</span>
</span><span id="__span-0-716"><a id="__codelineno-0-716" name="__codelineno-0-716"></a><span class="s2">        const statusClass = r.status;</span>
</span><span id="__span-0-717"><a id="__codelineno-0-717" name="__codelineno-0-717"></a><span class="s2">        const clickable = r.status === &#39;completed&#39; ? `onclick=&quot;goToPerformance(&#39;$</span><span class="si">{r.run_id}</span><span class="s2">&#39;)&quot;` : &#39;&#39;;</span>
</span><span id="__span-0-718"><a id="__codelineno-0-718" name="__codelineno-0-718"></a><span class="s2">        const clickableClass = r.status === &#39;completed&#39; ? &#39;clickable&#39; : &#39;&#39;;</span>
</span><span id="__span-0-719"><a id="__codelineno-0-719" name="__codelineno-0-719"></a><span class="s2">        html += `&lt;div class=&quot;run-item ${isSelected ? &#39;selected&#39; : &#39;&#39;}&quot;&gt;</span>
</span><span id="__span-0-720"><a id="__codelineno-0-720" name="__codelineno-0-720"></a><span class="s2">            &lt;input type=&quot;checkbox&quot; class=&quot;run-checkbox&quot; ${isSelected ? &#39;checked&#39; : &#39;&#39;} onchange=&quot;toggleRunSelection(&#39;$</span><span class="si">{r.run_id}</span><span class="s2">&#39;)&quot;&gt;</span>
</span><span id="__span-0-721"><a id="__codelineno-0-721" name="__codelineno-0-721"></a><span class="s2">            &lt;div class=&quot;run-content $</span><span class="si">{clickableClass}</span><span class="s2">&quot; $</span><span class="si">{clickable}</span><span class="s2">&gt;</span>
</span><span id="__span-0-722"><a id="__codelineno-0-722" name="__codelineno-0-722"></a><span class="s2">                &lt;div class=&quot;run-header&quot;&gt;</span>
</span><span id="__span-0-723"><a id="__codelineno-0-723" name="__codelineno-0-723"></a><span class="s2">                    &lt;span class=&quot;run-name&quot;&gt;$</span><span class="si">{strategies}</span><span class="s2"> &lt;span class=&quot;run-id&quot;&gt;$</span><span class="si">{timePart}</span><span class="s2">&lt;/span&gt;&lt;/span&gt;</span>
</span><span id="__span-0-724"><a id="__codelineno-0-724" name="__codelineno-0-724"></a><span class="s2">                    &lt;span class=&quot;run-status $</span><span class="si">{statusClass}</span><span class="s2">&quot;&gt;$</span><span class="si">{r.status}</span><span class="s2">&lt;/span&gt;</span>
</span><span id="__span-0-725"><a id="__codelineno-0-725" name="__codelineno-0-725"></a><span class="s2">                &lt;/div&gt;</span>
</span><span id="__span-0-726"><a id="__codelineno-0-726" name="__codelineno-0-726"></a><span class="s2">                &lt;div class=&quot;run-meta&quot;&gt;$</span><span class="si">{symbolCount}</span><span class="s2"> symbol${symbolCount !== 1 ? &#39;s&#39; : &#39;&#39;}  $</span><span class="si">{startDate}</span><span class="s2"> to $</span><span class="si">{endDate}</span><span class="s2">&lt;/div&gt;</span>
</span><span id="__span-0-727"><a id="__codelineno-0-727" name="__codelineno-0-727"></a><span class="s2">            &lt;/div&gt;</span>
</span><span id="__span-0-728"><a id="__codelineno-0-728" name="__codelineno-0-728"></a><span class="s2">        &lt;/div&gt;`;</span>
</span><span id="__span-0-729"><a id="__codelineno-0-729" name="__codelineno-0-729"></a><span class="s2">    });</span>
</span><span id="__span-0-730"><a id="__codelineno-0-730" name="__codelineno-0-730"></a>
</span><span id="__span-0-731"><a id="__codelineno-0-731" name="__codelineno-0-731"></a><span class="s2">    if (html === &#39;&#39;) {</span>
</span><span id="__span-0-732"><a id="__codelineno-0-732" name="__codelineno-0-732"></a><span class="s2">        html = &#39;&lt;div class=&quot;empty-runs&quot;&gt;&lt;p&gt;No runs yet&lt;/p&gt;&lt;p&gt;Configure settings and click Run Backtest&lt;/p&gt;&lt;/div&gt;&#39;;</span>
</span><span id="__span-0-733"><a id="__codelineno-0-733" name="__codelineno-0-733"></a><span class="s2">    }</span>
</span><span id="__span-0-734"><a id="__codelineno-0-734" name="__codelineno-0-734"></a><span class="s2">    container.innerHTML = html;</span>
</span><span id="__span-0-735"><a id="__codelineno-0-735" name="__codelineno-0-735"></a><span class="s2">}</span>
</span><span id="__span-0-736"><a id="__codelineno-0-736" name="__codelineno-0-736"></a>
</span><span id="__span-0-737"><a id="__codelineno-0-737" name="__codelineno-0-737"></a><span class="s2">async function pollBacktestStatus(runId, refreshCount) {</span>
</span><span id="__span-0-738"><a id="__codelineno-0-738" name="__codelineno-0-738"></a><span class="s2">    if (refreshCount === undefined) refreshCount = 0;</span>
</span><span id="__span-0-739"><a id="__codelineno-0-739" name="__codelineno-0-739"></a><span class="s2">    try {</span>
</span><span id="__span-0-740"><a id="__codelineno-0-740" name="__codelineno-0-740"></a><span class="s2">        const r = await fetch(`/api/backtest/status/$</span><span class="si">{runId}</span><span class="s2">`);</span>
</span><span id="__span-0-741"><a id="__codelineno-0-741" name="__codelineno-0-741"></a><span class="s2">        const d = await r.json();</span>
</span><span id="__span-0-742"><a id="__codelineno-0-742" name="__codelineno-0-742"></a><span class="s2">        if (d.status === &#39;completed&#39; || d.status.startsWith(&#39;error&#39;)) {</span>
</span><span id="__span-0-743"><a id="__codelineno-0-743" name="__codelineno-0-743"></a><span class="s2">            delete activeRuns[runId];</span>
</span><span id="__span-0-744"><a id="__codelineno-0-744" name="__codelineno-0-744"></a><span class="s2">            renderRuns();</span>
</span><span id="__span-0-745"><a id="__codelineno-0-745" name="__codelineno-0-745"></a><span class="s2">            await loadDbRuns();</span>
</span><span id="__span-0-746"><a id="__codelineno-0-746" name="__codelineno-0-746"></a><span class="s2">            // Keep refreshing DB a few times to ensure status is reflected</span>
</span><span id="__span-0-747"><a id="__codelineno-0-747" name="__codelineno-0-747"></a><span class="s2">            if (refreshCount &lt; 5) {</span>
</span><span id="__span-0-748"><a id="__codelineno-0-748" name="__codelineno-0-748"></a><span class="s2">                setTimeout(() =&gt; pollBacktestStatus(runId, refreshCount + 1), 500);</span>
</span><span id="__span-0-749"><a id="__codelineno-0-749" name="__codelineno-0-749"></a><span class="s2">            }</span>
</span><span id="__span-0-750"><a id="__codelineno-0-750" name="__codelineno-0-750"></a><span class="s2">            return;</span>
</span><span id="__span-0-751"><a id="__codelineno-0-751" name="__codelineno-0-751"></a><span class="s2">        }</span>
</span><span id="__span-0-752"><a id="__codelineno-0-752" name="__codelineno-0-752"></a><span class="s2">        if (activeRuns[runId]) {</span>
</span><span id="__span-0-753"><a id="__codelineno-0-753" name="__codelineno-0-753"></a><span class="s2">            activeRuns[runId].progress = d.progress || 0;</span>
</span><span id="__span-0-754"><a id="__codelineno-0-754" name="__codelineno-0-754"></a><span class="s2">            renderRuns();</span>
</span><span id="__span-0-755"><a id="__codelineno-0-755" name="__codelineno-0-755"></a><span class="s2">        }</span>
</span><span id="__span-0-756"><a id="__codelineno-0-756" name="__codelineno-0-756"></a><span class="s2">    } catch (e) {</span>
</span><span id="__span-0-757"><a id="__codelineno-0-757" name="__codelineno-0-757"></a><span class="s2">        // fetch failed, will retry on next poll</span>
</span><span id="__span-0-758"><a id="__codelineno-0-758" name="__codelineno-0-758"></a><span class="s2">    }</span>
</span><span id="__span-0-759"><a id="__codelineno-0-759" name="__codelineno-0-759"></a><span class="s2">    setTimeout(() =&gt; pollBacktestStatus(runId), 1000);</span>
</span><span id="__span-0-760"><a id="__codelineno-0-760" name="__codelineno-0-760"></a><span class="s2">}</span>
</span><span id="__span-0-761"><a id="__codelineno-0-761" name="__codelineno-0-761"></a>
</span><span id="__span-0-762"><a id="__codelineno-0-762" name="__codelineno-0-762"></a><span class="s2">async function runBacktest() {</span>
</span><span id="__span-0-763"><a id="__codelineno-0-763" name="__codelineno-0-763"></a><span class="s2">    const btn = document.getElementById(&#39;run-btn&#39;);</span>
</span><span id="__span-0-764"><a id="__codelineno-0-764" name="__codelineno-0-764"></a><span class="s2">    const rtype = getSelectedRtype();</span>
</span><span id="__span-0-765"><a id="__codelineno-0-765" name="__codelineno-0-765"></a><span class="s2">    if (!rtype) {</span>
</span><span id="__span-0-766"><a id="__codelineno-0-766" name="__codelineno-0-766"></a><span class="s2">        alert(&#39;Please select a bar period&#39;);</span>
</span><span id="__span-0-767"><a id="__codelineno-0-767" name="__codelineno-0-767"></a><span class="s2">        return;</span>
</span><span id="__span-0-768"><a id="__codelineno-0-768" name="__codelineno-0-768"></a><span class="s2">    }</span>
</span><span id="__span-0-769"><a id="__codelineno-0-769" name="__codelineno-0-769"></a><span class="s2">    if (!selectedPublisherId) {</span>
</span><span id="__span-0-770"><a id="__codelineno-0-770" name="__codelineno-0-770"></a><span class="s2">        alert(&#39;Please select a publisher and dataset&#39;);</span>
</span><span id="__span-0-771"><a id="__codelineno-0-771" name="__codelineno-0-771"></a><span class="s2">        return;</span>
</span><span id="__span-0-772"><a id="__codelineno-0-772" name="__codelineno-0-772"></a><span class="s2">    }</span>
</span><span id="__span-0-773"><a id="__codelineno-0-773" name="__codelineno-0-773"></a><span class="s2">    if (selectedSymbols.length === 0) {</span>
</span><span id="__span-0-774"><a id="__codelineno-0-774" name="__codelineno-0-774"></a><span class="s2">        alert(&#39;Please select at least one symbol&#39;);</span>
</span><span id="__span-0-775"><a id="__codelineno-0-775" name="__codelineno-0-775"></a><span class="s2">        return;</span>
</span><span id="__span-0-776"><a id="__codelineno-0-776" name="__codelineno-0-776"></a><span class="s2">    }</span>
</span><span id="__span-0-777"><a id="__codelineno-0-777" name="__codelineno-0-777"></a><span class="s2">    btn.disabled = true;</span>
</span><span id="__span-0-778"><a id="__codelineno-0-778" name="__codelineno-0-778"></a>
</span><span id="__span-0-779"><a id="__codelineno-0-779" name="__codelineno-0-779"></a><span class="s2">    const strategy = document.getElementById(&#39;strategy&#39;).value;</span>
</span><span id="__span-0-780"><a id="__codelineno-0-780" name="__codelineno-0-780"></a><span class="s2">    const startDate = document.getElementById(&#39;start-date&#39;).value || null;</span>
</span><span id="__span-0-781"><a id="__codelineno-0-781" name="__codelineno-0-781"></a><span class="s2">    const endDate = document.getElementById(&#39;end-date&#39;).value || null;</span>
</span><span id="__span-0-782"><a id="__codelineno-0-782" name="__codelineno-0-782"></a><span class="s2">    const barPeriod = RTYPE_LABELS[rtype] || &#39;Unknown&#39;;</span>
</span><span id="__span-0-783"><a id="__codelineno-0-783" name="__codelineno-0-783"></a>
</span><span id="__span-0-784"><a id="__codelineno-0-784" name="__codelineno-0-784"></a><span class="s2">    const payload = {</span>
</span><span id="__span-0-785"><a id="__codelineno-0-785" name="__codelineno-0-785"></a><span class="s2">        strategy: strategy,</span>
</span><span id="__span-0-786"><a id="__codelineno-0-786" name="__codelineno-0-786"></a><span class="s2">        strategy_params: collectParams(),</span>
</span><span id="__span-0-787"><a id="__codelineno-0-787" name="__codelineno-0-787"></a><span class="s2">        symbols: selectedSymbols,</span>
</span><span id="__span-0-788"><a id="__codelineno-0-788" name="__codelineno-0-788"></a><span class="s2">        rtype: rtype,</span>
</span><span id="__span-0-789"><a id="__codelineno-0-789" name="__codelineno-0-789"></a><span class="s2">        publisher_id: selectedPublisherId,</span>
</span><span id="__span-0-790"><a id="__codelineno-0-790" name="__codelineno-0-790"></a><span class="s2">        start_date: startDate,</span>
</span><span id="__span-0-791"><a id="__codelineno-0-791" name="__codelineno-0-791"></a><span class="s2">        end_date: endDate</span>
</span><span id="__span-0-792"><a id="__codelineno-0-792" name="__codelineno-0-792"></a><span class="s2">    };</span>
</span><span id="__span-0-793"><a id="__codelineno-0-793" name="__codelineno-0-793"></a>
</span><span id="__span-0-794"><a id="__codelineno-0-794" name="__codelineno-0-794"></a><span class="s2">    try {</span>
</span><span id="__span-0-795"><a id="__codelineno-0-795" name="__codelineno-0-795"></a><span class="s2">        const res = await fetch(&#39;/api/backtest/run&#39;, {</span>
</span><span id="__span-0-796"><a id="__codelineno-0-796" name="__codelineno-0-796"></a><span class="s2">            method: &#39;POST&#39;, headers: {&#39;Content-Type&#39;: &#39;application/json&#39;}, body: JSON.stringify(payload)</span>
</span><span id="__span-0-797"><a id="__codelineno-0-797" name="__codelineno-0-797"></a><span class="s2">        });</span>
</span><span id="__span-0-798"><a id="__codelineno-0-798" name="__codelineno-0-798"></a><span class="s2">        const data = await res.json();</span>
</span><span id="__span-0-799"><a id="__codelineno-0-799" name="__codelineno-0-799"></a><span class="s2">        if (!res.ok) throw new Error(data.detail || &#39;Failed to start backtest&#39;);</span>
</span><span id="__span-0-800"><a id="__codelineno-0-800" name="__codelineno-0-800"></a><span class="s2">        const runId = data.run_id;</span>
</span><span id="__span-0-801"><a id="__codelineno-0-801" name="__codelineno-0-801"></a>
</span><span id="__span-0-802"><a id="__codelineno-0-802" name="__codelineno-0-802"></a><span class="s2">        activeRuns[runId] = {</span>
</span><span id="__span-0-803"><a id="__codelineno-0-803" name="__codelineno-0-803"></a><span class="s2">            strategy: strategy,</span>
</span><span id="__span-0-804"><a id="__codelineno-0-804" name="__codelineno-0-804"></a><span class="s2">            symbols: [...selectedSymbols],</span>
</span><span id="__span-0-805"><a id="__codelineno-0-805" name="__codelineno-0-805"></a><span class="s2">            barPeriod: barPeriod,</span>
</span><span id="__span-0-806"><a id="__codelineno-0-806" name="__codelineno-0-806"></a><span class="s2">            startDate: startDate,</span>
</span><span id="__span-0-807"><a id="__codelineno-0-807" name="__codelineno-0-807"></a><span class="s2">            endDate: endDate,</span>
</span><span id="__span-0-808"><a id="__codelineno-0-808" name="__codelineno-0-808"></a><span class="s2">            status: &#39;running&#39;,</span>
</span><span id="__span-0-809"><a id="__codelineno-0-809" name="__codelineno-0-809"></a><span class="s2">            progress: 0</span>
</span><span id="__span-0-810"><a id="__codelineno-0-810" name="__codelineno-0-810"></a><span class="s2">        };</span>
</span><span id="__span-0-811"><a id="__codelineno-0-811" name="__codelineno-0-811"></a><span class="s2">        renderRuns();</span>
</span><span id="__span-0-812"><a id="__codelineno-0-812" name="__codelineno-0-812"></a><span class="s2">        btn.disabled = false;</span>
</span><span id="__span-0-813"><a id="__codelineno-0-813" name="__codelineno-0-813"></a>
</span><span id="__span-0-814"><a id="__codelineno-0-814" name="__codelineno-0-814"></a><span class="s2">        pollBacktestStatus(runId);</span>
</span><span id="__span-0-815"><a id="__codelineno-0-815" name="__codelineno-0-815"></a><span class="s2">    } catch (e) {</span>
</span><span id="__span-0-816"><a id="__codelineno-0-816" name="__codelineno-0-816"></a><span class="s2">        alert(`Error: $</span><span class="si">{e.message}</span><span class="s2">`);</span>
</span><span id="__span-0-817"><a id="__codelineno-0-817" name="__codelineno-0-817"></a><span class="s2">        btn.disabled = false;</span>
</span><span id="__span-0-818"><a id="__codelineno-0-818" name="__codelineno-0-818"></a><span class="s2">    }</span>
</span><span id="__span-0-819"><a id="__codelineno-0-819" name="__codelineno-0-819"></a><span class="s2">}</span>
</span><span id="__span-0-820"><a id="__codelineno-0-820" name="__codelineno-0-820"></a>
</span><span id="__span-0-821"><a id="__codelineno-0-821" name="__codelineno-0-821"></a><span class="s2">function goToPerformance(runId) {</span>
</span><span id="__span-0-822"><a id="__codelineno-0-822" name="__codelineno-0-822"></a><span class="s2">    window.location.href = `/performance?run_id=$</span><span class="si">{runId}</span><span class="s2">`;</span>
</span><span id="__span-0-823"><a id="__codelineno-0-823" name="__codelineno-0-823"></a><span class="s2">}</span>
</span><span id="__span-0-824"><a id="__codelineno-0-824" name="__codelineno-0-824"></a>
</span><span id="__span-0-825"><a id="__codelineno-0-825" name="__codelineno-0-825"></a><span class="s2">async function restoreActiveRuns() {</span>
</span><span id="__span-0-826"><a id="__codelineno-0-826" name="__codelineno-0-826"></a><span class="s2">    const res = await fetch(&#39;/api/backtest/running&#39;);</span>
</span><span id="__span-0-827"><a id="__codelineno-0-827" name="__codelineno-0-827"></a><span class="s2">    const data = await res.json();</span>
</span><span id="__span-0-828"><a id="__codelineno-0-828" name="__codelineno-0-828"></a><span class="s2">    (data.running || []).forEach(r =&gt; {</span>
</span><span id="__span-0-829"><a id="__codelineno-0-829" name="__codelineno-0-829"></a><span class="s2">        activeRuns[r.run_id] = {</span>
</span><span id="__span-0-830"><a id="__codelineno-0-830" name="__codelineno-0-830"></a><span class="s2">            strategy: r.strategy || &#39;Unknown&#39;,</span>
</span><span id="__span-0-831"><a id="__codelineno-0-831" name="__codelineno-0-831"></a><span class="s2">            symbols: r.symbols || [],</span>
</span><span id="__span-0-832"><a id="__codelineno-0-832" name="__codelineno-0-832"></a><span class="s2">            startDate: r.start_date || null,</span>
</span><span id="__span-0-833"><a id="__codelineno-0-833" name="__codelineno-0-833"></a><span class="s2">            endDate: r.end_date || null,</span>
</span><span id="__span-0-834"><a id="__codelineno-0-834" name="__codelineno-0-834"></a><span class="s2">            status: &#39;running&#39;,</span>
</span><span id="__span-0-835"><a id="__codelineno-0-835" name="__codelineno-0-835"></a><span class="s2">            progress: r.progress || 0</span>
</span><span id="__span-0-836"><a id="__codelineno-0-836" name="__codelineno-0-836"></a><span class="s2">        };</span>
</span><span id="__span-0-837"><a id="__codelineno-0-837" name="__codelineno-0-837"></a><span class="s2">        pollBacktestStatus(r.run_id);</span>
</span><span id="__span-0-838"><a id="__codelineno-0-838" name="__codelineno-0-838"></a><span class="s2">    });</span>
</span><span id="__span-0-839"><a id="__codelineno-0-839" name="__codelineno-0-839"></a><span class="s2">    renderRuns();</span>
</span><span id="__span-0-840"><a id="__codelineno-0-840" name="__codelineno-0-840"></a><span class="s2">}</span>
</span><span id="__span-0-841"><a id="__codelineno-0-841" name="__codelineno-0-841"></a>
</span><span id="__span-0-842"><a id="__codelineno-0-842" name="__codelineno-0-842"></a><span class="s2">document.addEventListener(&#39;DOMContentLoaded&#39;, () =&gt; {</span>
</span><span id="__span-0-843"><a id="__codelineno-0-843" name="__codelineno-0-843"></a><span class="s2">    loadStrategies();</span>
</span><span id="__span-0-844"><a id="__codelineno-0-844" name="__codelineno-0-844"></a><span class="s2">    loadCoverage();</span>
</span><span id="__span-0-845"><a id="__codelineno-0-845" name="__codelineno-0-845"></a><span class="s2">    loadPresets();</span>
</span><span id="__span-0-846"><a id="__codelineno-0-846" name="__codelineno-0-846"></a><span class="s2">    loadDbRuns();</span>
</span><span id="__span-0-847"><a id="__codelineno-0-847" name="__codelineno-0-847"></a><span class="s2">    restoreActiveRuns();</span>
</span><span id="__span-0-848"><a id="__codelineno-0-848" name="__codelineno-0-848"></a><span class="s2">});</span>
</span><span id="__span-0-849"><a id="__codelineno-0-849" name="__codelineno-0-849"></a><span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-0-850"><a id="__codelineno-0-850" name="__codelineno-0-850"></a>
</span><span id="__span-0-851"><a id="__codelineno-0-851" name="__codelineno-0-851"></a><span class="n">PERFORMANCE_CSS</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-0-852"><a id="__codelineno-0-852" name="__codelineno-0-852"></a><span class="s2">.container { max-width: none; height: 100vh; padding: 24px; display: flex; flex-direction: column; box-sizing: border-box; }</span>
</span><span id="__span-0-853"><a id="__codelineno-0-853" name="__codelineno-0-853"></a><span class="s2">.performance-layout { display: flex; flex-direction: column; flex: 1; min-height: 0; gap: 16px; }</span>
</span><span id="__span-0-854"><a id="__codelineno-0-854" name="__codelineno-0-854"></a><span class="s2">.settings-card { background: #161b22; border: 1px solid #30363d; border-radius: 8px; padding: 16px; }</span>
</span><span id="__span-0-855"><a id="__codelineno-0-855" name="__codelineno-0-855"></a><span class="s2">.settings-row { display: flex; align-items: center; gap: 24px; flex-wrap: wrap; }</span>
</span><span id="__span-0-856"><a id="__codelineno-0-856" name="__codelineno-0-856"></a><span class="s2">.settings-group { display: flex; align-items: center; gap: 8px; }</span>
</span><span id="__span-0-857"><a id="__codelineno-0-857" name="__codelineno-0-857"></a><span class="s2">.settings-group label { font-size: 13px; color: #8b949e; font-weight: 500; }</span>
</span><span id="__span-0-858"><a id="__codelineno-0-858" name="__codelineno-0-858"></a><span class="s2">.settings-group select { padding: 8px 12px; background: #0d1117; border: 1px solid #30363d; border-radius: 6px; color: #e6edf3; font-size: 13px; cursor: pointer; min-width: 250px; }</span>
</span><span id="__span-0-859"><a id="__codelineno-0-859" name="__codelineno-0-859"></a><span class="s2">.settings-group select:focus { outline: none; border-color: #58a6ff; box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.15); }</span>
</span><span id="__span-0-860"><a id="__codelineno-0-860" name="__codelineno-0-860"></a><span class="s2">.settings-group input { padding: 8px 12px; background: #0d1117; border: 1px solid #30363d; border-radius: 6px; color: #e6edf3; font-size: 13px; min-width: 200px; }</span>
</span><span id="__span-0-861"><a id="__codelineno-0-861" name="__codelineno-0-861"></a><span class="s2">.settings-group input:focus { outline: none; border-color: #58a6ff; box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.15); }</span>
</span><span id="__span-0-862"><a id="__codelineno-0-862" name="__codelineno-0-862"></a><span class="s2">.settings-group input::placeholder { color: #484f58; }</span>
</span><span id="__span-0-863"><a id="__codelineno-0-863" name="__codelineno-0-863"></a><span class="s2">.symbol-suggestions { position: absolute; top: 100%; left: 0; right: 0; background: #161b22; border: 1px solid #30363d; border-radius: 6px; max-height: 200px; overflow-y: auto; z-index: 100; display: none; margin-top: 4px; box-shadow: 0 8px 24px rgba(0,0,0,0.4); }</span>
</span><span id="__span-0-864"><a id="__codelineno-0-864" name="__codelineno-0-864"></a><span class="s2">.symbol-suggestions.show { display: block; }</span>
</span><span id="__span-0-865"><a id="__codelineno-0-865" name="__codelineno-0-865"></a><span class="s2">.symbol-suggestion { padding: 8px 12px; cursor: pointer; font-size: 13px; color: #e6edf3; }</span>
</span><span id="__span-0-866"><a id="__codelineno-0-866" name="__codelineno-0-866"></a><span class="s2">.symbol-suggestion:hover { background: #21262d; }</span>
</span><span id="__span-0-867"><a id="__codelineno-0-867" name="__codelineno-0-867"></a><span class="s2">.symbol-suggestion.selected { background: #388bfd33; color: #58a6ff; }</span>
</span><span id="__span-0-868"><a id="__codelineno-0-868" name="__codelineno-0-868"></a><span class="s2">.symbol-input-wrapper { position: relative; }</span>
</span><span id="__span-0-869"><a id="__codelineno-0-869" name="__codelineno-0-869"></a><span class="s2">.charts-row { display: flex; gap: 16px; flex: 1; min-height: 0; }</span>
</span><span id="__span-0-870"><a id="__codelineno-0-870" name="__codelineno-0-870"></a><span class="s2">.chart-card { flex: 1; background: #161b22; border: 1px solid #30363d; border-radius: 8px; padding: 16px; display: flex; flex-direction: column; min-width: 0; }</span>
</span><span id="__span-0-871"><a id="__codelineno-0-871" name="__codelineno-0-871"></a><span class="s2">.chart-card h3 { margin: 0 0 12px 0; font-size: 14px; font-weight: 500; color: #8b949e; }</span>
</span><span id="__span-0-872"><a id="__codelineno-0-872" name="__codelineno-0-872"></a><span class="s2">.chart-card .chart-content { flex: 1; display: flex; align-items: center; justify-content: center; min-height: 300px; }</span>
</span><span id="__span-0-873"><a id="__codelineno-0-873" name="__codelineno-0-873"></a><span class="s2">.chart-card img { max-width: 100%; max-height: 100%; height: auto; border-radius: 4px; background: #fff; }</span>
</span><span id="__span-0-874"><a id="__codelineno-0-874" name="__codelineno-0-874"></a><span class="s2">.chart-loading { color: #484f58; font-size: 13px; }</span>
</span><span id="__span-0-875"><a id="__codelineno-0-875" name="__codelineno-0-875"></a><span class="s2">.empty-message { text-align: center; padding: 48px 24px; color: #484f58; font-size: 14px; }</span>
</span><span id="__span-0-876"><a id="__codelineno-0-876" name="__codelineno-0-876"></a><span class="s2">@media (max-width: 900px) { .charts-row { flex-direction: column; } }</span>
</span><span id="__span-0-877"><a id="__codelineno-0-877" name="__codelineno-0-877"></a><span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-0-878"><a id="__codelineno-0-878" name="__codelineno-0-878"></a>
</span><span id="__span-0-879"><a id="__codelineno-0-879" name="__codelineno-0-879"></a><span class="n">PERFORMANCE_JS</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-0-880"><a id="__codelineno-0-880" name="__codelineno-0-880"></a><span class="s2">let runs = [];</span>
</span><span id="__span-0-881"><a id="__codelineno-0-881" name="__codelineno-0-881"></a><span class="s2">let selectedRunId = null;</span>
</span><span id="__span-0-882"><a id="__codelineno-0-882" name="__codelineno-0-882"></a><span class="s2">let selectedSymbol = null;</span>
</span><span id="__span-0-883"><a id="__codelineno-0-883" name="__codelineno-0-883"></a><span class="s2">let symbols = [];</span>
</span><span id="__span-0-884"><a id="__codelineno-0-884" name="__codelineno-0-884"></a><span class="s2">let suggestionIndex = -1;</span>
</span><span id="__span-0-885"><a id="__codelineno-0-885" name="__codelineno-0-885"></a>
</span><span id="__span-0-886"><a id="__codelineno-0-886" name="__codelineno-0-886"></a><span class="s2">function getUrlRunId() {</span>
</span><span id="__span-0-887"><a id="__codelineno-0-887" name="__codelineno-0-887"></a><span class="s2">    const params = new URLSearchParams(window.location.search);</span>
</span><span id="__span-0-888"><a id="__codelineno-0-888" name="__codelineno-0-888"></a><span class="s2">    return params.get(&#39;run_id&#39;);</span>
</span><span id="__span-0-889"><a id="__codelineno-0-889" name="__codelineno-0-889"></a><span class="s2">}</span>
</span><span id="__span-0-890"><a id="__codelineno-0-890" name="__codelineno-0-890"></a>
</span><span id="__span-0-891"><a id="__codelineno-0-891" name="__codelineno-0-891"></a><span class="s2">async function loadRuns() {</span>
</span><span id="__span-0-892"><a id="__codelineno-0-892" name="__codelineno-0-892"></a><span class="s2">    const res = await fetch(&#39;/api/runs&#39;);</span>
</span><span id="__span-0-893"><a id="__codelineno-0-893" name="__codelineno-0-893"></a><span class="s2">    const data = await res.json();</span>
</span><span id="__span-0-894"><a id="__codelineno-0-894" name="__codelineno-0-894"></a><span class="s2">    runs = (data.runs || []).filter(r =&gt; r.status === &#39;completed&#39;);</span>
</span><span id="__span-0-895"><a id="__codelineno-0-895" name="__codelineno-0-895"></a><span class="s2">    renderSettings();</span>
</span><span id="__span-0-896"><a id="__codelineno-0-896" name="__codelineno-0-896"></a><span class="s2">    renderCharts();</span>
</span><span id="__span-0-897"><a id="__codelineno-0-897" name="__codelineno-0-897"></a><span class="s2">    const urlRunId = getUrlRunId();</span>
</span><span id="__span-0-898"><a id="__codelineno-0-898" name="__codelineno-0-898"></a><span class="s2">    if (urlRunId &amp;&amp; runs.some(r =&gt; r.run_id === urlRunId)) {</span>
</span><span id="__span-0-899"><a id="__codelineno-0-899" name="__codelineno-0-899"></a><span class="s2">        selectRun(urlRunId);</span>
</span><span id="__span-0-900"><a id="__codelineno-0-900" name="__codelineno-0-900"></a><span class="s2">    }</span>
</span><span id="__span-0-901"><a id="__codelineno-0-901" name="__codelineno-0-901"></a><span class="s2">}</span>
</span><span id="__span-0-902"><a id="__codelineno-0-902" name="__codelineno-0-902"></a>
</span><span id="__span-0-903"><a id="__codelineno-0-903" name="__codelineno-0-903"></a><span class="s2">function onRunChange() {</span>
</span><span id="__span-0-904"><a id="__codelineno-0-904" name="__codelineno-0-904"></a><span class="s2">    const select = document.getElementById(&#39;run-select&#39;);</span>
</span><span id="__span-0-905"><a id="__codelineno-0-905" name="__codelineno-0-905"></a><span class="s2">    const runId = select.value;</span>
</span><span id="__span-0-906"><a id="__codelineno-0-906" name="__codelineno-0-906"></a><span class="s2">    if (runId) {</span>
</span><span id="__span-0-907"><a id="__codelineno-0-907" name="__codelineno-0-907"></a><span class="s2">        selectRun(runId);</span>
</span><span id="__span-0-908"><a id="__codelineno-0-908" name="__codelineno-0-908"></a><span class="s2">    }</span>
</span><span id="__span-0-909"><a id="__codelineno-0-909" name="__codelineno-0-909"></a><span class="s2">}</span>
</span><span id="__span-0-910"><a id="__codelineno-0-910" name="__codelineno-0-910"></a>
</span><span id="__span-0-911"><a id="__codelineno-0-911" name="__codelineno-0-911"></a><span class="s2">function selectRun(runId) {</span>
</span><span id="__span-0-912"><a id="__codelineno-0-912" name="__codelineno-0-912"></a><span class="s2">    selectedRunId = runId;</span>
</span><span id="__span-0-913"><a id="__codelineno-0-913" name="__codelineno-0-913"></a><span class="s2">    selectedSymbol = null;</span>
</span><span id="__span-0-914"><a id="__codelineno-0-914" name="__codelineno-0-914"></a><span class="s2">    const url = new URL(window.location);</span>
</span><span id="__span-0-915"><a id="__codelineno-0-915" name="__codelineno-0-915"></a><span class="s2">    url.searchParams.set(&#39;run_id&#39;, runId);</span>
</span><span id="__span-0-916"><a id="__codelineno-0-916" name="__codelineno-0-916"></a><span class="s2">    window.history.replaceState(</span><span class="si">{}</span><span class="s2">, &#39;&#39;, url);</span>
</span><span id="__span-0-917"><a id="__codelineno-0-917" name="__codelineno-0-917"></a><span class="s2">    const select = document.getElementById(&#39;run-select&#39;);</span>
</span><span id="__span-0-918"><a id="__codelineno-0-918" name="__codelineno-0-918"></a><span class="s2">    if (select &amp;&amp; select.value !== runId) {</span>
</span><span id="__span-0-919"><a id="__codelineno-0-919" name="__codelineno-0-919"></a><span class="s2">        select.value = runId;</span>
</span><span id="__span-0-920"><a id="__codelineno-0-920" name="__codelineno-0-920"></a><span class="s2">    }</span>
</span><span id="__span-0-921"><a id="__codelineno-0-921" name="__codelineno-0-921"></a><span class="s2">    loadSymbols(runId);</span>
</span><span id="__span-0-922"><a id="__codelineno-0-922" name="__codelineno-0-922"></a><span class="s2">}</span>
</span><span id="__span-0-923"><a id="__codelineno-0-923" name="__codelineno-0-923"></a>
</span><span id="__span-0-924"><a id="__codelineno-0-924" name="__codelineno-0-924"></a><span class="s2">async function loadSymbols(runId) {</span>
</span><span id="__span-0-925"><a id="__codelineno-0-925" name="__codelineno-0-925"></a><span class="s2">    renderCharts();</span>
</span><span id="__span-0-926"><a id="__codelineno-0-926" name="__codelineno-0-926"></a><span class="s2">    const res = await fetch(`/api/runs/$</span><span class="si">{runId}</span><span class="s2">/roundtrips`);</span>
</span><span id="__span-0-927"><a id="__codelineno-0-927" name="__codelineno-0-927"></a><span class="s2">    const data = await res.json();</span>
</span><span id="__span-0-928"><a id="__codelineno-0-928" name="__codelineno-0-928"></a><span class="s2">    const roundtrips = data.roundtrips || [];</span>
</span><span id="__span-0-929"><a id="__codelineno-0-929" name="__codelineno-0-929"></a><span class="s2">    symbols = [...new Set(roundtrips.map(rt =&gt; rt.symbol))].sort();</span>
</span><span id="__span-0-930"><a id="__codelineno-0-930" name="__codelineno-0-930"></a><span class="s2">    renderSettings();</span>
</span><span id="__span-0-931"><a id="__codelineno-0-931" name="__codelineno-0-931"></a><span class="s2">    renderCharts();</span>
</span><span id="__span-0-932"><a id="__codelineno-0-932" name="__codelineno-0-932"></a><span class="s2">}</span>
</span><span id="__span-0-933"><a id="__codelineno-0-933" name="__codelineno-0-933"></a>
</span><span id="__span-0-934"><a id="__codelineno-0-934" name="__codelineno-0-934"></a><span class="s2">function onSymbolInput() {</span>
</span><span id="__span-0-935"><a id="__codelineno-0-935" name="__codelineno-0-935"></a><span class="s2">    const input = document.getElementById(&#39;symbol-input&#39;);</span>
</span><span id="__span-0-936"><a id="__codelineno-0-936" name="__codelineno-0-936"></a><span class="s2">    const query = input.value.trim().toUpperCase();</span>
</span><span id="__span-0-937"><a id="__codelineno-0-937" name="__codelineno-0-937"></a><span class="s2">    const suggestions = document.getElementById(&#39;symbol-suggestions&#39;);</span>
</span><span id="__span-0-938"><a id="__codelineno-0-938" name="__codelineno-0-938"></a><span class="s2">    suggestionIndex = -1;</span>
</span><span id="__span-0-939"><a id="__codelineno-0-939" name="__codelineno-0-939"></a><span class="s2">    if (!query) {</span>
</span><span id="__span-0-940"><a id="__codelineno-0-940" name="__codelineno-0-940"></a><span class="s2">        suggestions.classList.remove(&#39;show&#39;);</span>
</span><span id="__span-0-941"><a id="__codelineno-0-941" name="__codelineno-0-941"></a><span class="s2">        selectedSymbol = null;</span>
</span><span id="__span-0-942"><a id="__codelineno-0-942" name="__codelineno-0-942"></a><span class="s2">        renderCharts();</span>
</span><span id="__span-0-943"><a id="__codelineno-0-943" name="__codelineno-0-943"></a><span class="s2">        return;</span>
</span><span id="__span-0-944"><a id="__codelineno-0-944" name="__codelineno-0-944"></a><span class="s2">    }</span>
</span><span id="__span-0-945"><a id="__codelineno-0-945" name="__codelineno-0-945"></a><span class="s2">    const matches = symbols.filter(s =&gt; s.toUpperCase().includes(query));</span>
</span><span id="__span-0-946"><a id="__codelineno-0-946" name="__codelineno-0-946"></a><span class="s2">    if (matches.length === 0) {</span>
</span><span id="__span-0-947"><a id="__codelineno-0-947" name="__codelineno-0-947"></a><span class="s2">        suggestions.classList.remove(&#39;show&#39;);</span>
</span><span id="__span-0-948"><a id="__codelineno-0-948" name="__codelineno-0-948"></a><span class="s2">        return;</span>
</span><span id="__span-0-949"><a id="__codelineno-0-949" name="__codelineno-0-949"></a><span class="s2">    }</span>
</span><span id="__span-0-950"><a id="__codelineno-0-950" name="__codelineno-0-950"></a><span class="s2">    suggestions.innerHTML = matches.map((s, i) =&gt; `&lt;div class=&quot;symbol-suggestion&quot; data-symbol=&quot;$</span><span class="si">{s}</span><span class="s2">&quot; onclick=&quot;selectSymbol(&#39;$</span><span class="si">{s}</span><span class="s2">&#39;)&quot;&gt;$</span><span class="si">{s}</span><span class="s2">&lt;/div&gt;`).join(&#39;&#39;);</span>
</span><span id="__span-0-951"><a id="__codelineno-0-951" name="__codelineno-0-951"></a><span class="s2">    suggestions.classList.add(&#39;show&#39;);</span>
</span><span id="__span-0-952"><a id="__codelineno-0-952" name="__codelineno-0-952"></a><span class="s2">}</span>
</span><span id="__span-0-953"><a id="__codelineno-0-953" name="__codelineno-0-953"></a>
</span><span id="__span-0-954"><a id="__codelineno-0-954" name="__codelineno-0-954"></a><span class="s2">function onSymbolKeydown(e) {</span>
</span><span id="__span-0-955"><a id="__codelineno-0-955" name="__codelineno-0-955"></a><span class="s2">    const suggestions = document.getElementById(&#39;symbol-suggestions&#39;);</span>
</span><span id="__span-0-956"><a id="__codelineno-0-956" name="__codelineno-0-956"></a><span class="s2">    const items = suggestions.querySelectorAll(&#39;.symbol-suggestion&#39;);</span>
</span><span id="__span-0-957"><a id="__codelineno-0-957" name="__codelineno-0-957"></a><span class="s2">    if (!suggestions.classList.contains(&#39;show&#39;) || items.length === 0) return;</span>
</span><span id="__span-0-958"><a id="__codelineno-0-958" name="__codelineno-0-958"></a><span class="s2">    if (e.key === &#39;ArrowDown&#39;) {</span>
</span><span id="__span-0-959"><a id="__codelineno-0-959" name="__codelineno-0-959"></a><span class="s2">        e.preventDefault();</span>
</span><span id="__span-0-960"><a id="__codelineno-0-960" name="__codelineno-0-960"></a><span class="s2">        suggestionIndex = Math.min(suggestionIndex + 1, items.length - 1);</span>
</span><span id="__span-0-961"><a id="__codelineno-0-961" name="__codelineno-0-961"></a><span class="s2">        updateSuggestionHighlight(items);</span>
</span><span id="__span-0-962"><a id="__codelineno-0-962" name="__codelineno-0-962"></a><span class="s2">    } else if (e.key === &#39;ArrowUp&#39;) {</span>
</span><span id="__span-0-963"><a id="__codelineno-0-963" name="__codelineno-0-963"></a><span class="s2">        e.preventDefault();</span>
</span><span id="__span-0-964"><a id="__codelineno-0-964" name="__codelineno-0-964"></a><span class="s2">        suggestionIndex = Math.max(suggestionIndex - 1, 0);</span>
</span><span id="__span-0-965"><a id="__codelineno-0-965" name="__codelineno-0-965"></a><span class="s2">        updateSuggestionHighlight(items);</span>
</span><span id="__span-0-966"><a id="__codelineno-0-966" name="__codelineno-0-966"></a><span class="s2">    } else if (e.key === &#39;Enter&#39;) {</span>
</span><span id="__span-0-967"><a id="__codelineno-0-967" name="__codelineno-0-967"></a><span class="s2">        e.preventDefault();</span>
</span><span id="__span-0-968"><a id="__codelineno-0-968" name="__codelineno-0-968"></a><span class="s2">        if (suggestionIndex &gt;= 0 &amp;&amp; suggestionIndex &lt; items.length) {</span>
</span><span id="__span-0-969"><a id="__codelineno-0-969" name="__codelineno-0-969"></a><span class="s2">            selectSymbol(items[suggestionIndex].dataset.symbol);</span>
</span><span id="__span-0-970"><a id="__codelineno-0-970" name="__codelineno-0-970"></a><span class="s2">        }</span>
</span><span id="__span-0-971"><a id="__codelineno-0-971" name="__codelineno-0-971"></a><span class="s2">    } else if (e.key === &#39;Escape&#39;) {</span>
</span><span id="__span-0-972"><a id="__codelineno-0-972" name="__codelineno-0-972"></a><span class="s2">        suggestions.classList.remove(&#39;show&#39;);</span>
</span><span id="__span-0-973"><a id="__codelineno-0-973" name="__codelineno-0-973"></a><span class="s2">    }</span>
</span><span id="__span-0-974"><a id="__codelineno-0-974" name="__codelineno-0-974"></a><span class="s2">}</span>
</span><span id="__span-0-975"><a id="__codelineno-0-975" name="__codelineno-0-975"></a>
</span><span id="__span-0-976"><a id="__codelineno-0-976" name="__codelineno-0-976"></a><span class="s2">function updateSuggestionHighlight(items) {</span>
</span><span id="__span-0-977"><a id="__codelineno-0-977" name="__codelineno-0-977"></a><span class="s2">    items.forEach((item, i) =&gt; {</span>
</span><span id="__span-0-978"><a id="__codelineno-0-978" name="__codelineno-0-978"></a><span class="s2">        item.classList.toggle(&#39;selected&#39;, i === suggestionIndex);</span>
</span><span id="__span-0-979"><a id="__codelineno-0-979" name="__codelineno-0-979"></a><span class="s2">    });</span>
</span><span id="__span-0-980"><a id="__codelineno-0-980" name="__codelineno-0-980"></a><span class="s2">}</span>
</span><span id="__span-0-981"><a id="__codelineno-0-981" name="__codelineno-0-981"></a>
</span><span id="__span-0-982"><a id="__codelineno-0-982" name="__codelineno-0-982"></a><span class="s2">function selectSymbol(symbol) {</span>
</span><span id="__span-0-983"><a id="__codelineno-0-983" name="__codelineno-0-983"></a><span class="s2">    selectedSymbol = symbol;</span>
</span><span id="__span-0-984"><a id="__codelineno-0-984" name="__codelineno-0-984"></a><span class="s2">    const input = document.getElementById(&#39;symbol-input&#39;);</span>
</span><span id="__span-0-985"><a id="__codelineno-0-985" name="__codelineno-0-985"></a><span class="s2">    if (input) input.value = symbol;</span>
</span><span id="__span-0-986"><a id="__codelineno-0-986" name="__codelineno-0-986"></a><span class="s2">    const suggestions = document.getElementById(&#39;symbol-suggestions&#39;);</span>
</span><span id="__span-0-987"><a id="__codelineno-0-987" name="__codelineno-0-987"></a><span class="s2">    if (suggestions) suggestions.classList.remove(&#39;show&#39;);</span>
</span><span id="__span-0-988"><a id="__codelineno-0-988" name="__codelineno-0-988"></a><span class="s2">    renderCharts();</span>
</span><span id="__span-0-989"><a id="__codelineno-0-989" name="__codelineno-0-989"></a><span class="s2">}</span>
</span><span id="__span-0-990"><a id="__codelineno-0-990" name="__codelineno-0-990"></a>
</span><span id="__span-0-991"><a id="__codelineno-0-991" name="__codelineno-0-991"></a><span class="s2">function renderSettings() {</span>
</span><span id="__span-0-992"><a id="__codelineno-0-992" name="__codelineno-0-992"></a><span class="s2">    const container = document.getElementById(&#39;settings-panel&#39;);</span>
</span><span id="__span-0-993"><a id="__codelineno-0-993" name="__codelineno-0-993"></a><span class="s2">    if (!container) return;</span>
</span><span id="__span-0-994"><a id="__codelineno-0-994" name="__codelineno-0-994"></a><span class="s2">    const runOptions = runs.length === 0</span>
</span><span id="__span-0-995"><a id="__codelineno-0-995" name="__codelineno-0-995"></a><span class="s2">        ? &#39;&lt;option value=&quot;&quot;&gt;No completed runs&lt;/option&gt;&#39;</span>
</span><span id="__span-0-996"><a id="__codelineno-0-996" name="__codelineno-0-996"></a><span class="s2">        : &#39;&lt;option value=&quot;&quot;&gt;Select a run...&lt;/option&gt;&#39; + runs.map(r =&gt; {</span>
</span><span id="__span-0-997"><a id="__codelineno-0-997" name="__codelineno-0-997"></a><span class="s2">            const config = r.config || </span><span class="si">{}</span><span class="s2">;</span>
</span><span id="__span-0-998"><a id="__codelineno-0-998" name="__codelineno-0-998"></a><span class="s2">            const strategies = config.strategies ? config.strategies.join(&#39;, &#39;) : r.name;</span>
</span><span id="__span-0-999"><a id="__codelineno-0-999" name="__codelineno-0-999"></a><span class="s2">            const timePart = r.run_id.slice(11, 19).replace(/-/g, &#39;:&#39;);</span>
</span><span id="__span-0-1000"><a id="__codelineno-0-1000" name="__codelineno-0-1000"></a><span class="s2">            const selected = r.run_id === selectedRunId ? &#39;selected&#39; : &#39;&#39;;</span>
</span><span id="__span-0-1001"><a id="__codelineno-0-1001" name="__codelineno-0-1001"></a><span class="s2">            return `&lt;option value=&quot;$</span><span class="si">{r.run_id}</span><span class="s2">&quot; $</span><span class="si">{selected}</span><span class="s2">&gt;$</span><span class="si">{strategies}</span><span class="s2"> ($</span><span class="si">{timePart}</span><span class="s2">)&lt;/option&gt;`;</span>
</span><span id="__span-0-1002"><a id="__codelineno-0-1002" name="__codelineno-0-1002"></a><span class="s2">        }).join(&#39;&#39;);</span>
</span><span id="__span-0-1003"><a id="__codelineno-0-1003" name="__codelineno-0-1003"></a><span class="s2">    const symbolValue = selectedSymbol || &#39;&#39;;</span>
</span><span id="__span-0-1004"><a id="__codelineno-0-1004" name="__codelineno-0-1004"></a><span class="s2">    const symbolDisabled = symbols.length === 0 ? &#39;disabled&#39; : &#39;&#39;;</span>
</span><span id="__span-0-1005"><a id="__codelineno-0-1005" name="__codelineno-0-1005"></a><span class="s2">    const symbolPlaceholder = symbols.length === 0 ? &#39;Select a run first...&#39; : &#39;Search symbol...&#39;;</span>
</span><span id="__span-0-1006"><a id="__codelineno-0-1006" name="__codelineno-0-1006"></a><span class="s2">    container.innerHTML = `</span>
</span><span id="__span-0-1007"><a id="__codelineno-0-1007" name="__codelineno-0-1007"></a><span class="s2">        &lt;div class=&quot;settings-row&quot;&gt;</span>
</span><span id="__span-0-1008"><a id="__codelineno-0-1008" name="__codelineno-0-1008"></a><span class="s2">            &lt;div class=&quot;settings-group&quot;&gt;</span>
</span><span id="__span-0-1009"><a id="__codelineno-0-1009" name="__codelineno-0-1009"></a><span class="s2">                &lt;label&gt;Run:&lt;/label&gt;</span>
</span><span id="__span-0-1010"><a id="__codelineno-0-1010" name="__codelineno-0-1010"></a><span class="s2">                &lt;select id=&quot;run-select&quot; onchange=&quot;onRunChange()&quot;&gt;$</span><span class="si">{runOptions}</span><span class="s2">&lt;/select&gt;</span>
</span><span id="__span-0-1011"><a id="__codelineno-0-1011" name="__codelineno-0-1011"></a><span class="s2">            &lt;/div&gt;</span>
</span><span id="__span-0-1012"><a id="__codelineno-0-1012" name="__codelineno-0-1012"></a><span class="s2">            &lt;div class=&quot;settings-group&quot;&gt;</span>
</span><span id="__span-0-1013"><a id="__codelineno-0-1013" name="__codelineno-0-1013"></a><span class="s2">                &lt;label&gt;Symbol:&lt;/label&gt;</span>
</span><span id="__span-0-1014"><a id="__codelineno-0-1014" name="__codelineno-0-1014"></a><span class="s2">                &lt;div class=&quot;symbol-input-wrapper&quot;&gt;</span>
</span><span id="__span-0-1015"><a id="__codelineno-0-1015" name="__codelineno-0-1015"></a><span class="s2">                    &lt;input type=&quot;text&quot; id=&quot;symbol-input&quot; value=&quot;$</span><span class="si">{symbolValue}</span><span class="s2">&quot; placeholder=&quot;$</span><span class="si">{symbolPlaceholder}</span><span class="s2">&quot; $</span><span class="si">{symbolDisabled}</span><span class="s2"> oninput=&quot;onSymbolInput()&quot; onkeydown=&quot;onSymbolKeydown(event)&quot; onfocus=&quot;onSymbolInput()&quot; autocomplete=&quot;off&quot;&gt;</span>
</span><span id="__span-0-1016"><a id="__codelineno-0-1016" name="__codelineno-0-1016"></a><span class="s2">                    &lt;div id=&quot;symbol-suggestions&quot; class=&quot;symbol-suggestions&quot;&gt;&lt;/div&gt;</span>
</span><span id="__span-0-1017"><a id="__codelineno-0-1017" name="__codelineno-0-1017"></a><span class="s2">                &lt;/div&gt;</span>
</span><span id="__span-0-1018"><a id="__codelineno-0-1018" name="__codelineno-0-1018"></a><span class="s2">            &lt;/div&gt;</span>
</span><span id="__span-0-1019"><a id="__codelineno-0-1019" name="__codelineno-0-1019"></a><span class="s2">        &lt;/div&gt;</span>
</span><span id="__span-0-1020"><a id="__codelineno-0-1020" name="__codelineno-0-1020"></a><span class="s2">    `;</span>
</span><span id="__span-0-1021"><a id="__codelineno-0-1021" name="__codelineno-0-1021"></a><span class="s2">}</span>
</span><span id="__span-0-1022"><a id="__codelineno-0-1022" name="__codelineno-0-1022"></a>
</span><span id="__span-0-1023"><a id="__codelineno-0-1023" name="__codelineno-0-1023"></a><span class="s2">function renderCharts() {</span>
</span><span id="__span-0-1024"><a id="__codelineno-0-1024" name="__codelineno-0-1024"></a><span class="s2">    const container = document.getElementById(&#39;charts-row&#39;);</span>
</span><span id="__span-0-1025"><a id="__codelineno-0-1025" name="__codelineno-0-1025"></a><span class="s2">    if (!container) return;</span>
</span><span id="__span-0-1026"><a id="__codelineno-0-1026" name="__codelineno-0-1026"></a><span class="s2">    const emptyPnl = !selectedRunId || !selectedSymbol ? &#39;&lt;div class=&quot;empty-message&quot;&gt;Select a run and symbol&lt;/div&gt;&#39; : &#39;&lt;div class=&quot;chart-loading&quot;&gt;Loading...&lt;/div&gt;&#39;;</span>
</span><span id="__span-0-1027"><a id="__codelineno-0-1027" name="__codelineno-0-1027"></a><span class="s2">    const emptyJourney = !selectedRunId || !selectedSymbol ? &#39;&lt;div class=&quot;empty-message&quot;&gt;Select a run and symbol&lt;/div&gt;&#39; : &#39;&lt;div class=&quot;chart-loading&quot;&gt;Loading...&lt;/div&gt;&#39;;</span>
</span><span id="__span-0-1028"><a id="__codelineno-0-1028" name="__codelineno-0-1028"></a><span class="s2">    container.innerHTML = `</span>
</span><span id="__span-0-1029"><a id="__codelineno-0-1029" name="__codelineno-0-1029"></a><span class="s2">        &lt;div class=&quot;chart-card&quot;&gt;&lt;h3&gt;PnL Summary&lt;/h3&gt;&lt;div class=&quot;chart-content&quot; id=&quot;pnl-container&quot;&gt;$</span><span class="si">{emptyPnl}</span><span class="s2">&lt;/div&gt;&lt;/div&gt;</span>
</span><span id="__span-0-1030"><a id="__codelineno-0-1030" name="__codelineno-0-1030"></a><span class="s2">        &lt;div class=&quot;chart-card&quot;&gt;&lt;h3&gt;Trade Journey&lt;/h3&gt;&lt;div class=&quot;chart-content&quot; id=&quot;journey-container&quot;&gt;$</span><span class="si">{emptyJourney}</span><span class="s2">&lt;/div&gt;&lt;/div&gt;</span>
</span><span id="__span-0-1031"><a id="__codelineno-0-1031" name="__codelineno-0-1031"></a><span class="s2">    `;</span>
</span><span id="__span-0-1032"><a id="__codelineno-0-1032" name="__codelineno-0-1032"></a><span class="s2">    if (selectedRunId &amp;&amp; selectedSymbol) {</span>
</span><span id="__span-0-1033"><a id="__codelineno-0-1033" name="__codelineno-0-1033"></a><span class="s2">        loadChartImage(&#39;pnl-container&#39;, `/api/runs/$</span><span class="si">{selectedRunId}</span><span class="s2">/pnl-summary.png?symbol=${encodeURIComponent(selectedSymbol)}`);</span>
</span><span id="__span-0-1034"><a id="__codelineno-0-1034" name="__codelineno-0-1034"></a><span class="s2">        loadChartImage(&#39;journey-container&#39;, `/api/runs/$</span><span class="si">{selectedRunId}</span><span class="s2">/trade-journey.png?symbol=${encodeURIComponent(selectedSymbol)}`);</span>
</span><span id="__span-0-1035"><a id="__codelineno-0-1035" name="__codelineno-0-1035"></a><span class="s2">    }</span>
</span><span id="__span-0-1036"><a id="__codelineno-0-1036" name="__codelineno-0-1036"></a><span class="s2">}</span>
</span><span id="__span-0-1037"><a id="__codelineno-0-1037" name="__codelineno-0-1037"></a>
</span><span id="__span-0-1038"><a id="__codelineno-0-1038" name="__codelineno-0-1038"></a><span class="s2">function loadChartImage(containerId, url) {</span>
</span><span id="__span-0-1039"><a id="__codelineno-0-1039" name="__codelineno-0-1039"></a><span class="s2">    const container = document.getElementById(containerId);</span>
</span><span id="__span-0-1040"><a id="__codelineno-0-1040" name="__codelineno-0-1040"></a><span class="s2">    const img = new Image();</span>
</span><span id="__span-0-1041"><a id="__codelineno-0-1041" name="__codelineno-0-1041"></a><span class="s2">    img.onload = () =&gt; { container.innerHTML = &#39;&#39;; container.appendChild(img); };</span>
</span><span id="__span-0-1042"><a id="__codelineno-0-1042" name="__codelineno-0-1042"></a><span class="s2">    img.onerror = () =&gt; { container.innerHTML = &#39;&lt;div class=&quot;chart-loading&quot;&gt;Failed to load chart&lt;/div&gt;&#39;; };</span>
</span><span id="__span-0-1043"><a id="__codelineno-0-1043" name="__codelineno-0-1043"></a><span class="s2">    img.src = url;</span>
</span><span id="__span-0-1044"><a id="__codelineno-0-1044" name="__codelineno-0-1044"></a><span class="s2">    img.alt = &#39;Chart&#39;;</span>
</span><span id="__span-0-1045"><a id="__codelineno-0-1045" name="__codelineno-0-1045"></a><span class="s2">}</span>
</span><span id="__span-0-1046"><a id="__codelineno-0-1046" name="__codelineno-0-1046"></a>
</span><span id="__span-0-1047"><a id="__codelineno-0-1047" name="__codelineno-0-1047"></a><span class="s2">document.addEventListener(&#39;click&#39;, (e) =&gt; {</span>
</span><span id="__span-0-1048"><a id="__codelineno-0-1048" name="__codelineno-0-1048"></a><span class="s2">    const suggestions = document.getElementById(&#39;symbol-suggestions&#39;);</span>
</span><span id="__span-0-1049"><a id="__codelineno-0-1049" name="__codelineno-0-1049"></a><span class="s2">    const input = document.getElementById(&#39;symbol-input&#39;);</span>
</span><span id="__span-0-1050"><a id="__codelineno-0-1050" name="__codelineno-0-1050"></a><span class="s2">    if (suggestions &amp;&amp; input &amp;&amp; !input.contains(e.target) &amp;&amp; !suggestions.contains(e.target)) {</span>
</span><span id="__span-0-1051"><a id="__codelineno-0-1051" name="__codelineno-0-1051"></a><span class="s2">        suggestions.classList.remove(&#39;show&#39;);</span>
</span><span id="__span-0-1052"><a id="__codelineno-0-1052" name="__codelineno-0-1052"></a><span class="s2">    }</span>
</span><span id="__span-0-1053"><a id="__codelineno-0-1053" name="__codelineno-0-1053"></a><span class="s2">});</span>
</span><span id="__span-0-1054"><a id="__codelineno-0-1054" name="__codelineno-0-1054"></a>
</span><span id="__span-0-1055"><a id="__codelineno-0-1055" name="__codelineno-0-1055"></a><span class="s2">document.addEventListener(&#39;DOMContentLoaded&#39;, () =&gt; {</span>
</span><span id="__span-0-1056"><a id="__codelineno-0-1056" name="__codelineno-0-1056"></a><span class="s2">    loadRuns();</span>
</span><span id="__span-0-1057"><a id="__codelineno-0-1057" name="__codelineno-0-1057"></a><span class="s2">});</span>
</span><span id="__span-0-1058"><a id="__codelineno-0-1058" name="__codelineno-0-1058"></a><span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-0-1059"><a id="__codelineno-0-1059" name="__codelineno-0-1059"></a>
</span><span id="__span-0-1060"><a id="__codelineno-0-1060" name="__codelineno-0-1060"></a><span class="n">CHART_CSS</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-0-1061"><a id="__codelineno-0-1061" name="__codelineno-0-1061"></a><span class="s2">.container { max-width: none; height: 100vh; padding: 24px; display: flex; flex-direction: column; box-sizing: border-box; }</span>
</span><span id="__span-0-1062"><a id="__codelineno-0-1062" name="__codelineno-0-1062"></a><span class="s2">.chart-layout { display: flex; flex-direction: column; flex: 1; min-height: 0; }</span>
</span><span id="__span-0-1063"><a id="__codelineno-0-1063" name="__codelineno-0-1063"></a><span class="s2">.chart-layout &gt; .card { flex: 1; display: flex; flex-direction: column; margin-bottom: 0; min-height: 0; overflow-y: auto; }</span>
</span><span id="__span-0-1064"><a id="__codelineno-0-1064" name="__codelineno-0-1064"></a><span class="s2">.empty-content { text-align: center; padding: 48px 24px; color: #8b949e; }</span>
</span><span id="__span-0-1065"><a id="__codelineno-0-1065" name="__codelineno-0-1065"></a><span class="s2">.empty-content p { font-size: 14px; }</span>
</span><span id="__span-0-1066"><a id="__codelineno-0-1066" name="__codelineno-0-1066"></a><span class="s2">.settings-panel { background: #0d1117; border: 1px solid #30363d; border-radius: 6px; padding: 16px; margin-bottom: 16px; }</span>
</span><span id="__span-0-1067"><a id="__codelineno-0-1067" name="__codelineno-0-1067"></a><span class="s2">.settings-row { display: flex; align-items: center; gap: 24px; flex-wrap: wrap; }</span>
</span><span id="__span-0-1068"><a id="__codelineno-0-1068" name="__codelineno-0-1068"></a><span class="s2">.settings-group { display: flex; align-items: center; gap: 8px; }</span>
</span><span id="__span-0-1069"><a id="__codelineno-0-1069" name="__codelineno-0-1069"></a><span class="s2">.settings-group label { font-size: 13px; color: #8b949e; }</span>
</span><span id="__span-0-1070"><a id="__codelineno-0-1070" name="__codelineno-0-1070"></a><span class="s2">.settings-group input[type=&quot;radio&quot;] { margin: 0; cursor: pointer; }</span>
</span><span id="__span-0-1071"><a id="__codelineno-0-1071" name="__codelineno-0-1071"></a><span class="s2">.settings-group input[type=&quot;number&quot;] { width: 80px; padding: 6px 10px; background: #161b22; border: 1px solid #30363d; border-radius: 4px; color: #e6edf3; font-size: 13px; }</span>
</span><span id="__span-0-1072"><a id="__codelineno-0-1072" name="__codelineno-0-1072"></a><span class="s2">.settings-group input[type=&quot;number&quot;]:focus { outline: none; border-color: #58a6ff; }</span>
</span><span id="__span-0-1073"><a id="__codelineno-0-1073" name="__codelineno-0-1073"></a><span class="s2">.settings-group select { padding: 6px 10px; background: #161b22; border: 1px solid #30363d; border-radius: 4px; color: #e6edf3; font-size: 13px; cursor: pointer; }</span>
</span><span id="__span-0-1074"><a id="__codelineno-0-1074" name="__codelineno-0-1074"></a><span class="s2">.settings-group select:focus { outline: none; border-color: #58a6ff; }</span>
</span><span id="__span-0-1075"><a id="__codelineno-0-1075" name="__codelineno-0-1075"></a><span class="s2">.settings-group select#run-select { min-width: 250px; }</span>
</span><span id="__span-0-1076"><a id="__codelineno-0-1076" name="__codelineno-0-1076"></a><span class="s2">.settings-group input#symbol-filter { width: 180px; padding: 6px 10px; background: #161b22; border: 1px solid #30363d; border-radius: 4px; color: #e6edf3; font-size: 13px; }</span>
</span><span id="__span-0-1077"><a id="__codelineno-0-1077" name="__codelineno-0-1077"></a><span class="s2">.settings-group input#symbol-filter:focus { outline: none; border-color: #58a6ff; }</span>
</span><span id="__span-0-1078"><a id="__codelineno-0-1078" name="__codelineno-0-1078"></a><span class="s2">.settings-group input#symbol-filter::placeholder { color: #8b949e; }</span>
</span><span id="__span-0-1079"><a id="__codelineno-0-1079" name="__codelineno-0-1079"></a><span class="s2">.settings-divider { width: 1px; height: 24px; background: #30363d; }</span>
</span><span id="__span-0-1080"><a id="__codelineno-0-1080" name="__codelineno-0-1080"></a><span class="s2">.segments-table-container { }</span>
</span><span id="__span-0-1081"><a id="__codelineno-0-1081" name="__codelineno-0-1081"></a><span class="s2">.segments-table { width: 100%; border-collapse: collapse; font-size: 13px; }</span>
</span><span id="__span-0-1082"><a id="__codelineno-0-1082" name="__codelineno-0-1082"></a><span class="s2">.segments-table th { position: sticky; top: 0; background: #161b22; padding: 10px 12px; text-align: left; color: #8b949e; font-weight: 500; border-bottom: 1px solid #30363d; cursor: pointer; user-select: none; white-space: nowrap; }</span>
</span><span id="__span-0-1083"><a id="__codelineno-0-1083" name="__codelineno-0-1083"></a><span class="s2">.segments-table th:hover { color: #e6edf3; }</span>
</span><span id="__span-0-1084"><a id="__codelineno-0-1084" name="__codelineno-0-1084"></a><span class="s2">.segments-table th .sort-icon { margin-left: 4px; opacity: 0.5; }</span>
</span><span id="__span-0-1085"><a id="__codelineno-0-1085" name="__codelineno-0-1085"></a><span class="s2">.segments-table th.sorted .sort-icon { opacity: 1; }</span>
</span><span id="__span-0-1086"><a id="__codelineno-0-1086" name="__codelineno-0-1086"></a><span class="s2">.segments-table td { padding: 10px 12px; border-bottom: 1px solid #21262d; color: #e6edf3; white-space: nowrap; }</span>
</span><span id="__span-0-1087"><a id="__codelineno-0-1087" name="__codelineno-0-1087"></a><span class="s2">.segments-table tr:hover td { background: #21262d; }</span>
</span><span id="__span-0-1088"><a id="__codelineno-0-1088" name="__codelineno-0-1088"></a><span class="s2">.segments-table .symbol { font-family: monospace; }</span>
</span><span id="__span-0-1089"><a id="__codelineno-0-1089" name="__codelineno-0-1089"></a><span class="s2">.segments-table .number { font-family: monospace; text-align: right; }</span>
</span><span id="__span-0-1090"><a id="__codelineno-0-1090" name="__codelineno-0-1090"></a><span class="s2">.empty-table { text-align: center; padding: 48px 24px; color: #8b949e; }</span>
</span><span id="__span-0-1091"><a id="__codelineno-0-1091" name="__codelineno-0-1091"></a><span class="s2">.segments-table tr.data-row { cursor: pointer; }</span>
</span><span id="__span-0-1092"><a id="__codelineno-0-1092" name="__codelineno-0-1092"></a><span class="s2">.segments-table tr.chart-row { display: none; }</span>
</span><span id="__span-0-1093"><a id="__codelineno-0-1093" name="__codelineno-0-1093"></a><span class="s2">.segments-table tr.chart-row.expanded { display: table-row; }</span>
</span><span id="__span-0-1094"><a id="__codelineno-0-1094" name="__codelineno-0-1094"></a><span class="s2">.segments-table tr.chart-row td { padding: 16px; background: #0d1117; }</span>
</span><span id="__span-0-1095"><a id="__codelineno-0-1095" name="__codelineno-0-1095"></a><span class="s2">.chart-container { position: relative; text-align: center; }</span>
</span><span id="__span-0-1096"><a id="__codelineno-0-1096" name="__codelineno-0-1096"></a><span class="s2">.chart-container img { max-width: 100%; height: auto; border-radius: 4px; }</span>
</span><span id="__span-0-1097"><a id="__codelineno-0-1097" name="__codelineno-0-1097"></a><span class="s2">.chart-loading { color: #8b949e; padding: 48px; }</span>
</span><span id="__span-0-1098"><a id="__codelineno-0-1098" name="__codelineno-0-1098"></a><span class="s2">.trades-table-container { }</span>
</span><span id="__span-0-1099"><a id="__codelineno-0-1099" name="__codelineno-0-1099"></a><span class="s2">.trades-table { width: 100%; border-collapse: collapse; font-size: 13px; }</span>
</span><span id="__span-0-1100"><a id="__codelineno-0-1100" name="__codelineno-0-1100"></a><span class="s2">.trades-table th { position: sticky; top: 0; background: #161b22; padding: 10px 12px; text-align: left; color: #8b949e; font-weight: 500; border-bottom: 1px solid #30363d; cursor: pointer; user-select: none; white-space: nowrap; }</span>
</span><span id="__span-0-1101"><a id="__codelineno-0-1101" name="__codelineno-0-1101"></a><span class="s2">.trades-table th:hover { color: #e6edf3; }</span>
</span><span id="__span-0-1102"><a id="__codelineno-0-1102" name="__codelineno-0-1102"></a><span class="s2">.trades-table th .sort-icon { margin-left: 4px; opacity: 0.5; }</span>
</span><span id="__span-0-1103"><a id="__codelineno-0-1103" name="__codelineno-0-1103"></a><span class="s2">.trades-table th.sorted .sort-icon { opacity: 1; }</span>
</span><span id="__span-0-1104"><a id="__codelineno-0-1104" name="__codelineno-0-1104"></a><span class="s2">.trades-table td { padding: 10px 12px; border-bottom: 1px solid #21262d; color: #e6edf3; white-space: nowrap; }</span>
</span><span id="__span-0-1105"><a id="__codelineno-0-1105" name="__codelineno-0-1105"></a><span class="s2">.trades-table tr:hover td { background: #21262d; }</span>
</span><span id="__span-0-1106"><a id="__codelineno-0-1106" name="__codelineno-0-1106"></a><span class="s2">.trades-table .symbol { font-family: monospace; }</span>
</span><span id="__span-0-1107"><a id="__codelineno-0-1107" name="__codelineno-0-1107"></a><span class="s2">.trades-table .number { font-family: monospace; text-align: right; }</span>
</span><span id="__span-0-1108"><a id="__codelineno-0-1108" name="__codelineno-0-1108"></a><span class="s2">.trades-table .direction { font-weight: 500; }</span>
</span><span id="__span-0-1109"><a id="__codelineno-0-1109" name="__codelineno-0-1109"></a><span class="s2">.trades-table .direction.long { color: #3fb950; }</span>
</span><span id="__span-0-1110"><a id="__codelineno-0-1110" name="__codelineno-0-1110"></a><span class="s2">.trades-table .direction.short { color: #f85149; }</span>
</span><span id="__span-0-1111"><a id="__codelineno-0-1111" name="__codelineno-0-1111"></a><span class="s2">.trades-table .pnl { font-weight: 500; font-family: monospace; }</span>
</span><span id="__span-0-1112"><a id="__codelineno-0-1112" name="__codelineno-0-1112"></a><span class="s2">.trades-table .pnl.positive { color: #3fb950; }</span>
</span><span id="__span-0-1113"><a id="__codelineno-0-1113" name="__codelineno-0-1113"></a><span class="s2">.trades-table .pnl.negative { color: #f85149; }</span>
</span><span id="__span-0-1114"><a id="__codelineno-0-1114" name="__codelineno-0-1114"></a><span class="s2">.trades-table tr.data-row { cursor: pointer; }</span>
</span><span id="__span-0-1115"><a id="__codelineno-0-1115" name="__codelineno-0-1115"></a><span class="s2">.trades-table tr.chart-row { display: none; }</span>
</span><span id="__span-0-1116"><a id="__codelineno-0-1116" name="__codelineno-0-1116"></a><span class="s2">.trades-table tr.chart-row.expanded { display: table-row; }</span>
</span><span id="__span-0-1117"><a id="__codelineno-0-1117" name="__codelineno-0-1117"></a><span class="s2">.trades-table tr.chart-row td { padding: 16px; background: #0d1117; }</span>
</span><span id="__span-0-1118"><a id="__codelineno-0-1118" name="__codelineno-0-1118"></a><span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-0-1119"><a id="__codelineno-0-1119" name="__codelineno-0-1119"></a>
</span><span id="__span-0-1120"><a id="__codelineno-0-1120" name="__codelineno-0-1120"></a><span class="n">CHART_JS</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-0-1121"><a id="__codelineno-0-1121" name="__codelineno-0-1121"></a><span class="s2">let runs = [];</span>
</span><span id="__span-0-1122"><a id="__codelineno-0-1122" name="__codelineno-0-1122"></a><span class="s2">let selectedRunId = null;</span>
</span><span id="__span-0-1123"><a id="__codelineno-0-1123" name="__codelineno-0-1123"></a><span class="s2">let segments = [];</span>
</span><span id="__span-0-1124"><a id="__codelineno-0-1124" name="__codelineno-0-1124"></a><span class="s2">let filteredSegments = [];</span>
</span><span id="__span-0-1125"><a id="__codelineno-0-1125" name="__codelineno-0-1125"></a><span class="s2">let roundtrips = [];</span>
</span><span id="__span-0-1126"><a id="__codelineno-0-1126" name="__codelineno-0-1126"></a><span class="s2">let filteredRoundtrips = [];</span>
</span><span id="__span-0-1127"><a id="__codelineno-0-1127" name="__codelineno-0-1127"></a><span class="s2">let sortColumn = &#39;symbol&#39;;</span>
</span><span id="__span-0-1128"><a id="__codelineno-0-1128" name="__codelineno-0-1128"></a><span class="s2">let sortAsc = true;</span>
</span><span id="__span-0-1129"><a id="__codelineno-0-1129" name="__codelineno-0-1129"></a><span class="s2">let barPeriod = null;</span>
</span><span id="__span-0-1130"><a id="__codelineno-0-1130" name="__codelineno-0-1130"></a>
</span><span id="__span-0-1131"><a id="__codelineno-0-1131" name="__codelineno-0-1131"></a><span class="s2">let settings = {</span>
</span><span id="__span-0-1132"><a id="__codelineno-0-1132" name="__codelineno-0-1132"></a><span class="s2">    mode: &#39;bars&#39;,</span>
</span><span id="__span-0-1133"><a id="__codelineno-0-1133" name="__codelineno-0-1133"></a><span class="s2">    barsPerChart: 500,</span>
</span><span id="__span-0-1134"><a id="__codelineno-0-1134" name="__codelineno-0-1134"></a><span class="s2">    overlap: 100,</span>
</span><span id="__span-0-1135"><a id="__codelineno-0-1135" name="__codelineno-0-1135"></a><span class="s2">    timePeriod: &#39;day&#39;,</span>
</span><span id="__span-0-1136"><a id="__codelineno-0-1136" name="__codelineno-0-1136"></a><span class="s2">    chartType: &#39;c_bars&#39;</span>
</span><span id="__span-0-1137"><a id="__codelineno-0-1137" name="__codelineno-0-1137"></a><span class="s2">};</span>
</span><span id="__span-0-1138"><a id="__codelineno-0-1138" name="__codelineno-0-1138"></a>
</span><span id="__span-0-1139"><a id="__codelineno-0-1139" name="__codelineno-0-1139"></a><span class="s2">const CHART_TYPE_OPTIONS = [</span>
</span><span id="__span-0-1140"><a id="__codelineno-0-1140" name="__codelineno-0-1140"></a><span class="s2">    {value: &#39;candlestick&#39;, label: &#39;Candlestick&#39;},</span>
</span><span id="__span-0-1141"><a id="__codelineno-0-1141" name="__codelineno-0-1141"></a><span class="s2">    {value: &#39;oc_bars&#39;, label: &#39;OC Bars&#39;},</span>
</span><span id="__span-0-1142"><a id="__codelineno-0-1142" name="__codelineno-0-1142"></a><span class="s2">    {value: &#39;c_bars&#39;, label: &#39;C Bars&#39;},</span>
</span><span id="__span-0-1143"><a id="__codelineno-0-1143" name="__codelineno-0-1143"></a><span class="s2">    {value: &#39;bars&#39;, label: &#39;Bars&#39;}</span>
</span><span id="__span-0-1144"><a id="__codelineno-0-1144" name="__codelineno-0-1144"></a><span class="s2">];</span>
</span><span id="__span-0-1145"><a id="__codelineno-0-1145" name="__codelineno-0-1145"></a>
</span><span id="__span-0-1146"><a id="__codelineno-0-1146" name="__codelineno-0-1146"></a><span class="s2">const TIME_PERIOD_OPTIONS = {</span>
</span><span id="__span-0-1147"><a id="__codelineno-0-1147" name="__codelineno-0-1147"></a><span class="s2">    DAY: [{value: &#39;year&#39;, label: &#39;Year&#39;}, {value: &#39;quarter&#39;, label: &#39;Quarter&#39;}, {value: &#39;month&#39;, label: &#39;Month&#39;}],</span>
</span><span id="__span-0-1148"><a id="__codelineno-0-1148" name="__codelineno-0-1148"></a><span class="s2">    HOUR: [{value: &#39;month&#39;, label: &#39;Month&#39;}, {value: &#39;week&#39;, label: &#39;Week&#39;}, {value: &#39;day&#39;, label: &#39;Day&#39;}],</span>
</span><span id="__span-0-1149"><a id="__codelineno-0-1149" name="__codelineno-0-1149"></a><span class="s2">    MINUTE: [{value: &#39;day&#39;, label: &#39;Day&#39;}, {value: &#39;4hour&#39;, label: &#39;4 Hours&#39;}, {value: &#39;hour&#39;, label: &#39;Hour&#39;}],</span>
</span><span id="__span-0-1150"><a id="__codelineno-0-1150" name="__codelineno-0-1150"></a><span class="s2">    SECOND: [{value: &#39;15min&#39;, label: &#39;15 Minutes&#39;}, {value: &#39;5min&#39;, label: &#39;5 Minutes&#39;}, {value: &#39;1min&#39;, label: &#39;1 Minute&#39;}]</span>
</span><span id="__span-0-1151"><a id="__codelineno-0-1151" name="__codelineno-0-1151"></a><span class="s2">};</span>
</span><span id="__span-0-1152"><a id="__codelineno-0-1152" name="__codelineno-0-1152"></a>
</span><span id="__span-0-1153"><a id="__codelineno-0-1153" name="__codelineno-0-1153"></a><span class="s2">function loadSettings() {</span>
</span><span id="__span-0-1154"><a id="__codelineno-0-1154" name="__codelineno-0-1154"></a><span class="s2">    const saved = localStorage.getItem(&#39;chartSettings&#39;);</span>
</span><span id="__span-0-1155"><a id="__codelineno-0-1155" name="__codelineno-0-1155"></a><span class="s2">    if (saved) {</span>
</span><span id="__span-0-1156"><a id="__codelineno-0-1156" name="__codelineno-0-1156"></a><span class="s2">        try {</span>
</span><span id="__span-0-1157"><a id="__codelineno-0-1157" name="__codelineno-0-1157"></a><span class="s2">            const parsed = JSON.parse(saved);</span>
</span><span id="__span-0-1158"><a id="__codelineno-0-1158" name="__codelineno-0-1158"></a><span class="s2">            settings = {...settings, ...parsed};</span>
</span><span id="__span-0-1159"><a id="__codelineno-0-1159" name="__codelineno-0-1159"></a><span class="s2">        } catch (e) </span><span class="si">{}</span>
</span><span id="__span-0-1160"><a id="__codelineno-0-1160" name="__codelineno-0-1160"></a><span class="s2">    }</span>
</span><span id="__span-0-1161"><a id="__codelineno-0-1161" name="__codelineno-0-1161"></a><span class="s2">}</span>
</span><span id="__span-0-1162"><a id="__codelineno-0-1162" name="__codelineno-0-1162"></a>
</span><span id="__span-0-1163"><a id="__codelineno-0-1163" name="__codelineno-0-1163"></a><span class="s2">function saveSettings() {</span>
</span><span id="__span-0-1164"><a id="__codelineno-0-1164" name="__codelineno-0-1164"></a><span class="s2">    localStorage.setItem(&#39;chartSettings&#39;, JSON.stringify(settings));</span>
</span><span id="__span-0-1165"><a id="__codelineno-0-1165" name="__codelineno-0-1165"></a><span class="s2">}</span>
</span><span id="__span-0-1166"><a id="__codelineno-0-1166" name="__codelineno-0-1166"></a>
</span><span id="__span-0-1167"><a id="__codelineno-0-1167" name="__codelineno-0-1167"></a><span class="s2">function getUrlRunId() {</span>
</span><span id="__span-0-1168"><a id="__codelineno-0-1168" name="__codelineno-0-1168"></a><span class="s2">    const params = new URLSearchParams(window.location.search);</span>
</span><span id="__span-0-1169"><a id="__codelineno-0-1169" name="__codelineno-0-1169"></a><span class="s2">    return params.get(&#39;run_id&#39;);</span>
</span><span id="__span-0-1170"><a id="__codelineno-0-1170" name="__codelineno-0-1170"></a><span class="s2">}</span>
</span><span id="__span-0-1171"><a id="__codelineno-0-1171" name="__codelineno-0-1171"></a>
</span><span id="__span-0-1172"><a id="__codelineno-0-1172" name="__codelineno-0-1172"></a><span class="s2">async function loadRuns() {</span>
</span><span id="__span-0-1173"><a id="__codelineno-0-1173" name="__codelineno-0-1173"></a><span class="s2">    loadSettings();</span>
</span><span id="__span-0-1174"><a id="__codelineno-0-1174" name="__codelineno-0-1174"></a><span class="s2">    const res = await fetch(&#39;/api/runs&#39;);</span>
</span><span id="__span-0-1175"><a id="__codelineno-0-1175" name="__codelineno-0-1175"></a><span class="s2">    const data = await res.json();</span>
</span><span id="__span-0-1176"><a id="__codelineno-0-1176" name="__codelineno-0-1176"></a><span class="s2">    runs = (data.runs || []).filter(r =&gt; r.status === &#39;completed&#39;);</span>
</span><span id="__span-0-1177"><a id="__codelineno-0-1177" name="__codelineno-0-1177"></a><span class="s2">    renderSettings();</span>
</span><span id="__span-0-1178"><a id="__codelineno-0-1178" name="__codelineno-0-1178"></a><span class="s2">    const urlRunId = getUrlRunId();</span>
</span><span id="__span-0-1179"><a id="__codelineno-0-1179" name="__codelineno-0-1179"></a><span class="s2">    if (urlRunId &amp;&amp; runs.some(r =&gt; r.run_id === urlRunId)) {</span>
</span><span id="__span-0-1180"><a id="__codelineno-0-1180" name="__codelineno-0-1180"></a><span class="s2">        selectRun(urlRunId);</span>
</span><span id="__span-0-1181"><a id="__codelineno-0-1181" name="__codelineno-0-1181"></a><span class="s2">    }</span>
</span><span id="__span-0-1182"><a id="__codelineno-0-1182" name="__codelineno-0-1182"></a><span class="s2">}</span>
</span><span id="__span-0-1183"><a id="__codelineno-0-1183" name="__codelineno-0-1183"></a>
</span><span id="__span-0-1184"><a id="__codelineno-0-1184" name="__codelineno-0-1184"></a><span class="s2">function onRunChange() {</span>
</span><span id="__span-0-1185"><a id="__codelineno-0-1185" name="__codelineno-0-1185"></a><span class="s2">    const runId = document.getElementById(&#39;run-select&#39;).value;</span>
</span><span id="__span-0-1186"><a id="__codelineno-0-1186" name="__codelineno-0-1186"></a><span class="s2">    if (runId) {</span>
</span><span id="__span-0-1187"><a id="__codelineno-0-1187" name="__codelineno-0-1187"></a><span class="s2">        selectRun(runId);</span>
</span><span id="__span-0-1188"><a id="__codelineno-0-1188" name="__codelineno-0-1188"></a><span class="s2">    } else {</span>
</span><span id="__span-0-1189"><a id="__codelineno-0-1189" name="__codelineno-0-1189"></a><span class="s2">        selectedRunId = null;</span>
</span><span id="__span-0-1190"><a id="__codelineno-0-1190" name="__codelineno-0-1190"></a><span class="s2">        document.getElementById(&#39;charts-content&#39;).innerHTML = &#39;&lt;div class=&quot;empty-content&quot;&gt;&lt;p&gt;Select a run to view charts&lt;/p&gt;&lt;/div&gt;&#39;;</span>
</span><span id="__span-0-1191"><a id="__codelineno-0-1191" name="__codelineno-0-1191"></a><span class="s2">    }</span>
</span><span id="__span-0-1192"><a id="__codelineno-0-1192" name="__codelineno-0-1192"></a><span class="s2">}</span>
</span><span id="__span-0-1193"><a id="__codelineno-0-1193" name="__codelineno-0-1193"></a>
</span><span id="__span-0-1194"><a id="__codelineno-0-1194" name="__codelineno-0-1194"></a><span class="s2">function selectRun(runId) {</span>
</span><span id="__span-0-1195"><a id="__codelineno-0-1195" name="__codelineno-0-1195"></a><span class="s2">    selectedRunId = runId;</span>
</span><span id="__span-0-1196"><a id="__codelineno-0-1196" name="__codelineno-0-1196"></a><span class="s2">    const url = new URL(window.location);</span>
</span><span id="__span-0-1197"><a id="__codelineno-0-1197" name="__codelineno-0-1197"></a><span class="s2">    url.searchParams.set(&#39;run_id&#39;, runId);</span>
</span><span id="__span-0-1198"><a id="__codelineno-0-1198" name="__codelineno-0-1198"></a><span class="s2">    window.history.replaceState(</span><span class="si">{}</span><span class="s2">, &#39;&#39;, url);</span>
</span><span id="__span-0-1199"><a id="__codelineno-0-1199" name="__codelineno-0-1199"></a><span class="s2">    const select = document.getElementById(&#39;run-select&#39;);</span>
</span><span id="__span-0-1200"><a id="__codelineno-0-1200" name="__codelineno-0-1200"></a><span class="s2">    if (select &amp;&amp; select.value !== runId) {</span>
</span><span id="__span-0-1201"><a id="__codelineno-0-1201" name="__codelineno-0-1201"></a><span class="s2">        select.value = runId;</span>
</span><span id="__span-0-1202"><a id="__codelineno-0-1202" name="__codelineno-0-1202"></a><span class="s2">    }</span>
</span><span id="__span-0-1203"><a id="__codelineno-0-1203" name="__codelineno-0-1203"></a><span class="s2">    loadData(runId);</span>
</span><span id="__span-0-1204"><a id="__codelineno-0-1204" name="__codelineno-0-1204"></a><span class="s2">}</span>
</span><span id="__span-0-1205"><a id="__codelineno-0-1205" name="__codelineno-0-1205"></a>
</span><span id="__span-0-1206"><a id="__codelineno-0-1206" name="__codelineno-0-1206"></a><span class="s2">function renderSettings() {</span>
</span><span id="__span-0-1207"><a id="__codelineno-0-1207" name="__codelineno-0-1207"></a><span class="s2">    const container = document.getElementById(&#39;settings-panel&#39;);</span>
</span><span id="__span-0-1208"><a id="__codelineno-0-1208" name="__codelineno-0-1208"></a><span class="s2">    if (!container) return;</span>
</span><span id="__span-0-1209"><a id="__codelineno-0-1209" name="__codelineno-0-1209"></a><span class="s2">    const timePeriodOpts = TIME_PERIOD_OPTIONS[barPeriod] || TIME_PERIOD_OPTIONS[&#39;DAY&#39;];</span>
</span><span id="__span-0-1210"><a id="__codelineno-0-1210" name="__codelineno-0-1210"></a><span class="s2">    if (settings.mode === &#39;time&#39; &amp;&amp; !timePeriodOpts.some(o =&gt; o.value === settings.timePeriod)) {</span>
</span><span id="__span-0-1211"><a id="__codelineno-0-1211" name="__codelineno-0-1211"></a><span class="s2">        settings.timePeriod = timePeriodOpts[0].value;</span>
</span><span id="__span-0-1212"><a id="__codelineno-0-1212" name="__codelineno-0-1212"></a><span class="s2">    }</span>
</span><span id="__span-0-1213"><a id="__codelineno-0-1213" name="__codelineno-0-1213"></a><span class="s2">    const barsChecked = settings.mode === &#39;bars&#39; ? &#39;checked&#39; : &#39;&#39;;</span>
</span><span id="__span-0-1214"><a id="__codelineno-0-1214" name="__codelineno-0-1214"></a><span class="s2">    const timeChecked = settings.mode === &#39;time&#39; ? &#39;checked&#39; : &#39;&#39;;</span>
</span><span id="__span-0-1215"><a id="__codelineno-0-1215" name="__codelineno-0-1215"></a><span class="s2">    const tradesChecked = settings.mode === &#39;trades&#39; ? &#39;checked&#39; : &#39;&#39;;</span>
</span><span id="__span-0-1216"><a id="__codelineno-0-1216" name="__codelineno-0-1216"></a><span class="s2">    const barsDisabled = settings.mode !== &#39;bars&#39; ? &#39;disabled&#39; : &#39;&#39;;</span>
</span><span id="__span-0-1217"><a id="__codelineno-0-1217" name="__codelineno-0-1217"></a><span class="s2">    const timeDisabled = settings.mode !== &#39;time&#39; ? &#39;disabled&#39; : &#39;&#39;;</span>
</span><span id="__span-0-1218"><a id="__codelineno-0-1218" name="__codelineno-0-1218"></a><span class="s2">    const overlapDisabled = settings.mode === &#39;trades&#39; ? &#39;disabled&#39; : &#39;&#39;;</span>
</span><span id="__span-0-1219"><a id="__codelineno-0-1219" name="__codelineno-0-1219"></a><span class="s2">    const periodOptions = timePeriodOpts.map(o =&gt;</span>
</span><span id="__span-0-1220"><a id="__codelineno-0-1220" name="__codelineno-0-1220"></a><span class="s2">        `&lt;option value=&quot;$</span><span class="si">{o.value}</span><span class="s2">&quot; ${settings.timePeriod === o.value ? &#39;selected&#39; : &#39;&#39;}&gt;$</span><span class="si">{o.label}</span><span class="s2">&lt;/option&gt;`</span>
</span><span id="__span-0-1221"><a id="__codelineno-0-1221" name="__codelineno-0-1221"></a><span class="s2">    ).join(&#39;&#39;);</span>
</span><span id="__span-0-1222"><a id="__codelineno-0-1222" name="__codelineno-0-1222"></a><span class="s2">    const chartTypeOptions = CHART_TYPE_OPTIONS.map(o =&gt;</span>
</span><span id="__span-0-1223"><a id="__codelineno-0-1223" name="__codelineno-0-1223"></a><span class="s2">        `&lt;option value=&quot;$</span><span class="si">{o.value}</span><span class="s2">&quot; ${settings.chartType === o.value ? &#39;selected&#39; : &#39;&#39;}&gt;$</span><span class="si">{o.label}</span><span class="s2">&lt;/option&gt;`</span>
</span><span id="__span-0-1224"><a id="__codelineno-0-1224" name="__codelineno-0-1224"></a><span class="s2">    ).join(&#39;&#39;);</span>
</span><span id="__span-0-1225"><a id="__codelineno-0-1225" name="__codelineno-0-1225"></a><span class="s2">    const runOptions = runs.length === 0</span>
</span><span id="__span-0-1226"><a id="__codelineno-0-1226" name="__codelineno-0-1226"></a><span class="s2">        ? &#39;&lt;option value=&quot;&quot;&gt;No completed runs&lt;/option&gt;&#39;</span>
</span><span id="__span-0-1227"><a id="__codelineno-0-1227" name="__codelineno-0-1227"></a><span class="s2">        : &#39;&lt;option value=&quot;&quot;&gt;Select a run...&lt;/option&gt;&#39; + runs.map(r =&gt; {</span>
</span><span id="__span-0-1228"><a id="__codelineno-0-1228" name="__codelineno-0-1228"></a><span class="s2">            const config = r.config || </span><span class="si">{}</span><span class="s2">;</span>
</span><span id="__span-0-1229"><a id="__codelineno-0-1229" name="__codelineno-0-1229"></a><span class="s2">            const strategies = config.strategies ? config.strategies.join(&#39;, &#39;) : r.name;</span>
</span><span id="__span-0-1230"><a id="__codelineno-0-1230" name="__codelineno-0-1230"></a><span class="s2">            const timePart = r.run_id.slice(11, 19).replace(/-/g, &#39;:&#39;);</span>
</span><span id="__span-0-1231"><a id="__codelineno-0-1231" name="__codelineno-0-1231"></a><span class="s2">            const selected = r.run_id === selectedRunId ? &#39;selected&#39; : &#39;&#39;;</span>
</span><span id="__span-0-1232"><a id="__codelineno-0-1232" name="__codelineno-0-1232"></a><span class="s2">            return `&lt;option value=&quot;$</span><span class="si">{r.run_id}</span><span class="s2">&quot; $</span><span class="si">{selected}</span><span class="s2">&gt;$</span><span class="si">{strategies}</span><span class="s2"> ($</span><span class="si">{timePart}</span><span class="s2">)&lt;/option&gt;`;</span>
</span><span id="__span-0-1233"><a id="__codelineno-0-1233" name="__codelineno-0-1233"></a><span class="s2">        }).join(&#39;&#39;);</span>
</span><span id="__span-0-1234"><a id="__codelineno-0-1234" name="__codelineno-0-1234"></a><span class="s2">    const symbolFilterValue = settings.symbolFilter || &#39;&#39;;</span>
</span><span id="__span-0-1235"><a id="__codelineno-0-1235" name="__codelineno-0-1235"></a><span class="s2">    container.innerHTML = `</span>
</span><span id="__span-0-1236"><a id="__codelineno-0-1236" name="__codelineno-0-1236"></a><span class="s2">        &lt;div class=&quot;settings-row&quot;&gt;</span>
</span><span id="__span-0-1237"><a id="__codelineno-0-1237" name="__codelineno-0-1237"></a><span class="s2">            &lt;div class=&quot;settings-group&quot;&gt;</span>
</span><span id="__span-0-1238"><a id="__codelineno-0-1238" name="__codelineno-0-1238"></a><span class="s2">                &lt;label&gt;Run:&lt;/label&gt;</span>
</span><span id="__span-0-1239"><a id="__codelineno-0-1239" name="__codelineno-0-1239"></a><span class="s2">                &lt;select id=&quot;run-select&quot; onchange=&quot;onRunChange()&quot;&gt;$</span><span class="si">{runOptions}</span><span class="s2">&lt;/select&gt;</span>
</span><span id="__span-0-1240"><a id="__codelineno-0-1240" name="__codelineno-0-1240"></a><span class="s2">            &lt;/div&gt;</span>
</span><span id="__span-0-1241"><a id="__codelineno-0-1241" name="__codelineno-0-1241"></a><span class="s2">            &lt;div class=&quot;settings-group&quot;&gt;</span>
</span><span id="__span-0-1242"><a id="__codelineno-0-1242" name="__codelineno-0-1242"></a><span class="s2">                &lt;label&gt;Symbol:&lt;/label&gt;</span>
</span><span id="__span-0-1243"><a id="__codelineno-0-1243" name="__codelineno-0-1243"></a><span class="s2">                &lt;input type=&quot;text&quot; id=&quot;symbol-filter&quot; placeholder=&quot;Filter symbols...&quot; value=&quot;$</span><span class="si">{symbolFilterValue}</span><span class="s2">&quot; oninput=&quot;filterData()&quot;&gt;</span>
</span><span id="__span-0-1244"><a id="__codelineno-0-1244" name="__codelineno-0-1244"></a><span class="s2">            &lt;/div&gt;</span>
</span><span id="__span-0-1245"><a id="__codelineno-0-1245" name="__codelineno-0-1245"></a><span class="s2">            &lt;div class=&quot;settings-divider&quot;&gt;&lt;/div&gt;</span>
</span><span id="__span-0-1246"><a id="__codelineno-0-1246" name="__codelineno-0-1246"></a><span class="s2">            &lt;div class=&quot;settings-group&quot;&gt;</span>
</span><span id="__span-0-1247"><a id="__codelineno-0-1247" name="__codelineno-0-1247"></a><span class="s2">                &lt;input type=&quot;radio&quot; id=&quot;mode-bars&quot; name=&quot;split-mode&quot; value=&quot;bars&quot; $</span><span class="si">{barsChecked}</span><span class="s2"> onchange=&quot;onModeChange(&#39;bars&#39;)&quot;&gt;</span>
</span><span id="__span-0-1248"><a id="__codelineno-0-1248" name="__codelineno-0-1248"></a><span class="s2">                &lt;label for=&quot;mode-bars&quot;&gt;By Bars&lt;/label&gt;</span>
</span><span id="__span-0-1249"><a id="__codelineno-0-1249" name="__codelineno-0-1249"></a><span class="s2">            &lt;/div&gt;</span>
</span><span id="__span-0-1250"><a id="__codelineno-0-1250" name="__codelineno-0-1250"></a><span class="s2">            &lt;div class=&quot;settings-group&quot;&gt;</span>
</span><span id="__span-0-1251"><a id="__codelineno-0-1251" name="__codelineno-0-1251"></a><span class="s2">                &lt;label&gt;Bars per chart:&lt;/label&gt;</span>
</span><span id="__span-0-1252"><a id="__codelineno-0-1252" name="__codelineno-0-1252"></a><span class="s2">                &lt;input type=&quot;number&quot; id=&quot;bars-per-chart&quot; value=&quot;$</span><span class="si">{settings.barsPerChart}</span><span class="s2">&quot; min=&quot;10&quot; max=&quot;5000&quot; $</span><span class="si">{barsDisabled}</span><span class="s2"> onchange=&quot;onBarsPerChartChange(this.value)&quot;&gt;</span>
</span><span id="__span-0-1253"><a id="__codelineno-0-1253" name="__codelineno-0-1253"></a><span class="s2">            &lt;/div&gt;</span>
</span><span id="__span-0-1254"><a id="__codelineno-0-1254" name="__codelineno-0-1254"></a><span class="s2">            &lt;div class=&quot;settings-divider&quot;&gt;&lt;/div&gt;</span>
</span><span id="__span-0-1255"><a id="__codelineno-0-1255" name="__codelineno-0-1255"></a><span class="s2">            &lt;div class=&quot;settings-group&quot;&gt;</span>
</span><span id="__span-0-1256"><a id="__codelineno-0-1256" name="__codelineno-0-1256"></a><span class="s2">                &lt;input type=&quot;radio&quot; id=&quot;mode-time&quot; name=&quot;split-mode&quot; value=&quot;time&quot; $</span><span class="si">{timeChecked}</span><span class="s2"> onchange=&quot;onModeChange(&#39;time&#39;)&quot;&gt;</span>
</span><span id="__span-0-1257"><a id="__codelineno-0-1257" name="__codelineno-0-1257"></a><span class="s2">                &lt;label for=&quot;mode-time&quot;&gt;By Time&lt;/label&gt;</span>
</span><span id="__span-0-1258"><a id="__codelineno-0-1258" name="__codelineno-0-1258"></a><span class="s2">            &lt;/div&gt;</span>
</span><span id="__span-0-1259"><a id="__codelineno-0-1259" name="__codelineno-0-1259"></a><span class="s2">            &lt;div class=&quot;settings-group&quot;&gt;</span>
</span><span id="__span-0-1260"><a id="__codelineno-0-1260" name="__codelineno-0-1260"></a><span class="s2">                &lt;label&gt;Period:&lt;/label&gt;</span>
</span><span id="__span-0-1261"><a id="__codelineno-0-1261" name="__codelineno-0-1261"></a><span class="s2">                &lt;select id=&quot;time-period&quot; $</span><span class="si">{timeDisabled}</span><span class="s2"> onchange=&quot;onTimePeriodChange(this.value)&quot;&gt;$</span><span class="si">{periodOptions}</span><span class="s2">&lt;/select&gt;</span>
</span><span id="__span-0-1262"><a id="__codelineno-0-1262" name="__codelineno-0-1262"></a><span class="s2">            &lt;/div&gt;</span>
</span><span id="__span-0-1263"><a id="__codelineno-0-1263" name="__codelineno-0-1263"></a><span class="s2">            &lt;div class=&quot;settings-divider&quot;&gt;&lt;/div&gt;</span>
</span><span id="__span-0-1264"><a id="__codelineno-0-1264" name="__codelineno-0-1264"></a><span class="s2">            &lt;div class=&quot;settings-group&quot;&gt;</span>
</span><span id="__span-0-1265"><a id="__codelineno-0-1265" name="__codelineno-0-1265"></a><span class="s2">                &lt;input type=&quot;radio&quot; id=&quot;mode-trades&quot; name=&quot;split-mode&quot; value=&quot;trades&quot; $</span><span class="si">{tradesChecked}</span><span class="s2"> onchange=&quot;onModeChange(&#39;trades&#39;)&quot;&gt;</span>
</span><span id="__span-0-1266"><a id="__codelineno-0-1266" name="__codelineno-0-1266"></a><span class="s2">                &lt;label for=&quot;mode-trades&quot;&gt;By Trades&lt;/label&gt;</span>
</span><span id="__span-0-1267"><a id="__codelineno-0-1267" name="__codelineno-0-1267"></a><span class="s2">            &lt;/div&gt;</span>
</span><span id="__span-0-1268"><a id="__codelineno-0-1268" name="__codelineno-0-1268"></a><span class="s2">            &lt;div class=&quot;settings-divider&quot;&gt;&lt;/div&gt;</span>
</span><span id="__span-0-1269"><a id="__codelineno-0-1269" name="__codelineno-0-1269"></a><span class="s2">            &lt;div class=&quot;settings-group&quot;&gt;</span>
</span><span id="__span-0-1270"><a id="__codelineno-0-1270" name="__codelineno-0-1270"></a><span class="s2">                &lt;label&gt;Overlap:&lt;/label&gt;</span>
</span><span id="__span-0-1271"><a id="__codelineno-0-1271" name="__codelineno-0-1271"></a><span class="s2">                &lt;input type=&quot;number&quot; id=&quot;overlap&quot; value=&quot;$</span><span class="si">{settings.overlap}</span><span class="s2">&quot; min=&quot;0&quot; max=&quot;1000&quot; $</span><span class="si">{overlapDisabled}</span><span class="s2"> onchange=&quot;onOverlapChange(this.value)&quot;&gt;</span>
</span><span id="__span-0-1272"><a id="__codelineno-0-1272" name="__codelineno-0-1272"></a><span class="s2">            &lt;/div&gt;</span>
</span><span id="__span-0-1273"><a id="__codelineno-0-1273" name="__codelineno-0-1273"></a><span class="s2">            &lt;div class=&quot;settings-divider&quot;&gt;&lt;/div&gt;</span>
</span><span id="__span-0-1274"><a id="__codelineno-0-1274" name="__codelineno-0-1274"></a><span class="s2">            &lt;div class=&quot;settings-group&quot;&gt;</span>
</span><span id="__span-0-1275"><a id="__codelineno-0-1275" name="__codelineno-0-1275"></a><span class="s2">                &lt;label&gt;Chart Type:&lt;/label&gt;</span>
</span><span id="__span-0-1276"><a id="__codelineno-0-1276" name="__codelineno-0-1276"></a><span class="s2">                &lt;select id=&quot;chart-type&quot; onchange=&quot;onChartTypeChange(this.value)&quot;&gt;$</span><span class="si">{chartTypeOptions}</span><span class="s2">&lt;/select&gt;</span>
</span><span id="__span-0-1277"><a id="__codelineno-0-1277" name="__codelineno-0-1277"></a><span class="s2">            &lt;/div&gt;</span>
</span><span id="__span-0-1278"><a id="__codelineno-0-1278" name="__codelineno-0-1278"></a><span class="s2">        &lt;/div&gt;</span>
</span><span id="__span-0-1279"><a id="__codelineno-0-1279" name="__codelineno-0-1279"></a><span class="s2">    `;</span>
</span><span id="__span-0-1280"><a id="__codelineno-0-1280" name="__codelineno-0-1280"></a><span class="s2">}</span>
</span><span id="__span-0-1281"><a id="__codelineno-0-1281" name="__codelineno-0-1281"></a>
</span><span id="__span-0-1282"><a id="__codelineno-0-1282" name="__codelineno-0-1282"></a><span class="s2">function onModeChange(mode) {</span>
</span><span id="__span-0-1283"><a id="__codelineno-0-1283" name="__codelineno-0-1283"></a><span class="s2">    settings.mode = mode;</span>
</span><span id="__span-0-1284"><a id="__codelineno-0-1284" name="__codelineno-0-1284"></a><span class="s2">    saveSettings();</span>
</span><span id="__span-0-1285"><a id="__codelineno-0-1285" name="__codelineno-0-1285"></a><span class="s2">    renderSettings();</span>
</span><span id="__span-0-1286"><a id="__codelineno-0-1286" name="__codelineno-0-1286"></a><span class="s2">    if (selectedRunId) loadData(selectedRunId);</span>
</span><span id="__span-0-1287"><a id="__codelineno-0-1287" name="__codelineno-0-1287"></a><span class="s2">}</span>
</span><span id="__span-0-1288"><a id="__codelineno-0-1288" name="__codelineno-0-1288"></a>
</span><span id="__span-0-1289"><a id="__codelineno-0-1289" name="__codelineno-0-1289"></a><span class="s2">function onBarsPerChartChange(value) {</span>
</span><span id="__span-0-1290"><a id="__codelineno-0-1290" name="__codelineno-0-1290"></a><span class="s2">    settings.barsPerChart = parseInt(value) || 500;</span>
</span><span id="__span-0-1291"><a id="__codelineno-0-1291" name="__codelineno-0-1291"></a><span class="s2">    saveSettings();</span>
</span><span id="__span-0-1292"><a id="__codelineno-0-1292" name="__codelineno-0-1292"></a><span class="s2">    if (selectedRunId) loadData(selectedRunId);</span>
</span><span id="__span-0-1293"><a id="__codelineno-0-1293" name="__codelineno-0-1293"></a><span class="s2">}</span>
</span><span id="__span-0-1294"><a id="__codelineno-0-1294" name="__codelineno-0-1294"></a>
</span><span id="__span-0-1295"><a id="__codelineno-0-1295" name="__codelineno-0-1295"></a><span class="s2">function onTimePeriodChange(value) {</span>
</span><span id="__span-0-1296"><a id="__codelineno-0-1296" name="__codelineno-0-1296"></a><span class="s2">    settings.timePeriod = value;</span>
</span><span id="__span-0-1297"><a id="__codelineno-0-1297" name="__codelineno-0-1297"></a><span class="s2">    saveSettings();</span>
</span><span id="__span-0-1298"><a id="__codelineno-0-1298" name="__codelineno-0-1298"></a><span class="s2">    if (selectedRunId) loadData(selectedRunId);</span>
</span><span id="__span-0-1299"><a id="__codelineno-0-1299" name="__codelineno-0-1299"></a><span class="s2">}</span>
</span><span id="__span-0-1300"><a id="__codelineno-0-1300" name="__codelineno-0-1300"></a>
</span><span id="__span-0-1301"><a id="__codelineno-0-1301" name="__codelineno-0-1301"></a><span class="s2">function onOverlapChange(value) {</span>
</span><span id="__span-0-1302"><a id="__codelineno-0-1302" name="__codelineno-0-1302"></a><span class="s2">    settings.overlap = parseInt(value) || 0;</span>
</span><span id="__span-0-1303"><a id="__codelineno-0-1303" name="__codelineno-0-1303"></a><span class="s2">    saveSettings();</span>
</span><span id="__span-0-1304"><a id="__codelineno-0-1304" name="__codelineno-0-1304"></a><span class="s2">    if (selectedRunId) loadData(selectedRunId);</span>
</span><span id="__span-0-1305"><a id="__codelineno-0-1305" name="__codelineno-0-1305"></a><span class="s2">}</span>
</span><span id="__span-0-1306"><a id="__codelineno-0-1306" name="__codelineno-0-1306"></a>
</span><span id="__span-0-1307"><a id="__codelineno-0-1307" name="__codelineno-0-1307"></a><span class="s2">function onChartTypeChange(value) {</span>
</span><span id="__span-0-1308"><a id="__codelineno-0-1308" name="__codelineno-0-1308"></a><span class="s2">    settings.chartType = value;</span>
</span><span id="__span-0-1309"><a id="__codelineno-0-1309" name="__codelineno-0-1309"></a><span class="s2">    saveSettings();</span>
</span><span id="__span-0-1310"><a id="__codelineno-0-1310" name="__codelineno-0-1310"></a><span class="s2">    if (selectedRunId) loadData(selectedRunId);</span>
</span><span id="__span-0-1311"><a id="__codelineno-0-1311" name="__codelineno-0-1311"></a><span class="s2">}</span>
</span><span id="__span-0-1312"><a id="__codelineno-0-1312" name="__codelineno-0-1312"></a>
</span><span id="__span-0-1313"><a id="__codelineno-0-1313" name="__codelineno-0-1313"></a><span class="s2">async function loadData(runId) {</span>
</span><span id="__span-0-1314"><a id="__codelineno-0-1314" name="__codelineno-0-1314"></a><span class="s2">    const container = document.getElementById(&#39;charts-content&#39;);</span>
</span><span id="__span-0-1315"><a id="__codelineno-0-1315" name="__codelineno-0-1315"></a><span class="s2">    container.innerHTML = &#39;&lt;div class=&quot;empty-content&quot;&gt;&lt;p&gt;Loading...&lt;/p&gt;&lt;/div&gt;&#39;;</span>
</span><span id="__span-0-1316"><a id="__codelineno-0-1316" name="__codelineno-0-1316"></a><span class="s2">    if (settings.mode === &#39;trades&#39;) {</span>
</span><span id="__span-0-1317"><a id="__codelineno-0-1317" name="__codelineno-0-1317"></a><span class="s2">        const res = await fetch(`/api/runs/$</span><span class="si">{runId}</span><span class="s2">/roundtrips`);</span>
</span><span id="__span-0-1318"><a id="__codelineno-0-1318" name="__codelineno-0-1318"></a><span class="s2">        const data = await res.json();</span>
</span><span id="__span-0-1319"><a id="__codelineno-0-1319" name="__codelineno-0-1319"></a><span class="s2">        roundtrips = data.roundtrips || [];</span>
</span><span id="__span-0-1320"><a id="__codelineno-0-1320" name="__codelineno-0-1320"></a><span class="s2">        const tradeNums = </span><span class="si">{}</span><span class="s2">;</span>
</span><span id="__span-0-1321"><a id="__codelineno-0-1321" name="__codelineno-0-1321"></a><span class="s2">        roundtrips.forEach(rt =&gt; {</span>
</span><span id="__span-0-1322"><a id="__codelineno-0-1322" name="__codelineno-0-1322"></a><span class="s2">            tradeNums[rt.symbol] = (tradeNums[rt.symbol] || 0) + 1;</span>
</span><span id="__span-0-1323"><a id="__codelineno-0-1323" name="__codelineno-0-1323"></a><span class="s2">            rt.trade_num = tradeNums[rt.symbol];</span>
</span><span id="__span-0-1324"><a id="__codelineno-0-1324" name="__codelineno-0-1324"></a><span class="s2">        });</span>
</span><span id="__span-0-1325"><a id="__codelineno-0-1325" name="__codelineno-0-1325"></a><span class="s2">        sortColumn = &#39;symbol&#39;;</span>
</span><span id="__span-0-1326"><a id="__codelineno-0-1326" name="__codelineno-0-1326"></a><span class="s2">        sortAsc = true;</span>
</span><span id="__span-0-1327"><a id="__codelineno-0-1327" name="__codelineno-0-1327"></a><span class="s2">        renderSettings();</span>
</span><span id="__span-0-1328"><a id="__codelineno-0-1328" name="__codelineno-0-1328"></a><span class="s2">        filterData();</span>
</span><span id="__span-0-1329"><a id="__codelineno-0-1329" name="__codelineno-0-1329"></a><span class="s2">    } else {</span>
</span><span id="__span-0-1330"><a id="__codelineno-0-1330" name="__codelineno-0-1330"></a><span class="s2">        const params = new URLSearchParams({</span>
</span><span id="__span-0-1331"><a id="__codelineno-0-1331" name="__codelineno-0-1331"></a><span class="s2">            mode: settings.mode,</span>
</span><span id="__span-0-1332"><a id="__codelineno-0-1332" name="__codelineno-0-1332"></a><span class="s2">            bars_per_chart: settings.barsPerChart,</span>
</span><span id="__span-0-1333"><a id="__codelineno-0-1333" name="__codelineno-0-1333"></a><span class="s2">            overlap: settings.overlap,</span>
</span><span id="__span-0-1334"><a id="__codelineno-0-1334" name="__codelineno-0-1334"></a><span class="s2">            time_period: settings.timePeriod</span>
</span><span id="__span-0-1335"><a id="__codelineno-0-1335" name="__codelineno-0-1335"></a><span class="s2">        });</span>
</span><span id="__span-0-1336"><a id="__codelineno-0-1336" name="__codelineno-0-1336"></a><span class="s2">        const res = await fetch(`/api/runs/$</span><span class="si">{runId}</span><span class="s2">/chart-segments?$</span><span class="si">{params}</span><span class="s2">`);</span>
</span><span id="__span-0-1337"><a id="__codelineno-0-1337" name="__codelineno-0-1337"></a><span class="s2">        const data = await res.json();</span>
</span><span id="__span-0-1338"><a id="__codelineno-0-1338" name="__codelineno-0-1338"></a><span class="s2">        segments = data.segments || [];</span>
</span><span id="__span-0-1339"><a id="__codelineno-0-1339" name="__codelineno-0-1339"></a><span class="s2">        barPeriod = data.bar_period;</span>
</span><span id="__span-0-1340"><a id="__codelineno-0-1340" name="__codelineno-0-1340"></a><span class="s2">        sortColumn = &#39;symbol&#39;;</span>
</span><span id="__span-0-1341"><a id="__codelineno-0-1341" name="__codelineno-0-1341"></a><span class="s2">        sortAsc = true;</span>
</span><span id="__span-0-1342"><a id="__codelineno-0-1342" name="__codelineno-0-1342"></a><span class="s2">        renderSettings();</span>
</span><span id="__span-0-1343"><a id="__codelineno-0-1343" name="__codelineno-0-1343"></a><span class="s2">        filterData();</span>
</span><span id="__span-0-1344"><a id="__codelineno-0-1344" name="__codelineno-0-1344"></a><span class="s2">    }</span>
</span><span id="__span-0-1345"><a id="__codelineno-0-1345" name="__codelineno-0-1345"></a><span class="s2">}</span>
</span><span id="__span-0-1346"><a id="__codelineno-0-1346" name="__codelineno-0-1346"></a>
</span><span id="__span-0-1347"><a id="__codelineno-0-1347" name="__codelineno-0-1347"></a><span class="s2">function filterData() {</span>
</span><span id="__span-0-1348"><a id="__codelineno-0-1348" name="__codelineno-0-1348"></a><span class="s2">    const query = document.getElementById(&#39;symbol-filter&#39;).value.toLowerCase().trim();</span>
</span><span id="__span-0-1349"><a id="__codelineno-0-1349" name="__codelineno-0-1349"></a><span class="s2">    settings.symbolFilter = query;</span>
</span><span id="__span-0-1350"><a id="__codelineno-0-1350" name="__codelineno-0-1350"></a><span class="s2">    if (settings.mode === &#39;trades&#39;) {</span>
</span><span id="__span-0-1351"><a id="__codelineno-0-1351" name="__codelineno-0-1351"></a><span class="s2">        if (!query) {</span>
</span><span id="__span-0-1352"><a id="__codelineno-0-1352" name="__codelineno-0-1352"></a><span class="s2">            filteredRoundtrips = [...roundtrips];</span>
</span><span id="__span-0-1353"><a id="__codelineno-0-1353" name="__codelineno-0-1353"></a><span class="s2">        } else {</span>
</span><span id="__span-0-1354"><a id="__codelineno-0-1354" name="__codelineno-0-1354"></a><span class="s2">            const terms = query.split(/[,</span><span class="se">\\</span><span class="s2">s]+/).filter(t =&gt; t.length &gt; 0);</span>
</span><span id="__span-0-1355"><a id="__codelineno-0-1355" name="__codelineno-0-1355"></a><span class="s2">            filteredRoundtrips = roundtrips.filter(rt =&gt;</span>
</span><span id="__span-0-1356"><a id="__codelineno-0-1356" name="__codelineno-0-1356"></a><span class="s2">                terms.some(term =&gt; rt.symbol.toLowerCase().includes(term))</span>
</span><span id="__span-0-1357"><a id="__codelineno-0-1357" name="__codelineno-0-1357"></a><span class="s2">            );</span>
</span><span id="__span-0-1358"><a id="__codelineno-0-1358" name="__codelineno-0-1358"></a><span class="s2">        }</span>
</span><span id="__span-0-1359"><a id="__codelineno-0-1359" name="__codelineno-0-1359"></a><span class="s2">    } else {</span>
</span><span id="__span-0-1360"><a id="__codelineno-0-1360" name="__codelineno-0-1360"></a><span class="s2">        if (!query) {</span>
</span><span id="__span-0-1361"><a id="__codelineno-0-1361" name="__codelineno-0-1361"></a><span class="s2">            filteredSegments = [...segments];</span>
</span><span id="__span-0-1362"><a id="__codelineno-0-1362" name="__codelineno-0-1362"></a><span class="s2">        } else {</span>
</span><span id="__span-0-1363"><a id="__codelineno-0-1363" name="__codelineno-0-1363"></a><span class="s2">            const terms = query.split(/[,</span><span class="se">\\</span><span class="s2">s]+/).filter(t =&gt; t.length &gt; 0);</span>
</span><span id="__span-0-1364"><a id="__codelineno-0-1364" name="__codelineno-0-1364"></a><span class="s2">            filteredSegments = segments.filter(seg =&gt;</span>
</span><span id="__span-0-1365"><a id="__codelineno-0-1365" name="__codelineno-0-1365"></a><span class="s2">                terms.some(term =&gt; seg.symbol.toLowerCase().includes(term))</span>
</span><span id="__span-0-1366"><a id="__codelineno-0-1366" name="__codelineno-0-1366"></a><span class="s2">            );</span>
</span><span id="__span-0-1367"><a id="__codelineno-0-1367" name="__codelineno-0-1367"></a><span class="s2">        }</span>
</span><span id="__span-0-1368"><a id="__codelineno-0-1368" name="__codelineno-0-1368"></a><span class="s2">    }</span>
</span><span id="__span-0-1369"><a id="__codelineno-0-1369" name="__codelineno-0-1369"></a><span class="s2">    sortAndRender();</span>
</span><span id="__span-0-1370"><a id="__codelineno-0-1370" name="__codelineno-0-1370"></a><span class="s2">}</span>
</span><span id="__span-0-1371"><a id="__codelineno-0-1371" name="__codelineno-0-1371"></a>
</span><span id="__span-0-1372"><a id="__codelineno-0-1372" name="__codelineno-0-1372"></a><span class="s2">function sortBy(column) {</span>
</span><span id="__span-0-1373"><a id="__codelineno-0-1373" name="__codelineno-0-1373"></a><span class="s2">    if (sortColumn === column) {</span>
</span><span id="__span-0-1374"><a id="__codelineno-0-1374" name="__codelineno-0-1374"></a><span class="s2">        sortAsc = !sortAsc;</span>
</span><span id="__span-0-1375"><a id="__codelineno-0-1375" name="__codelineno-0-1375"></a><span class="s2">    } else {</span>
</span><span id="__span-0-1376"><a id="__codelineno-0-1376" name="__codelineno-0-1376"></a><span class="s2">        sortColumn = column;</span>
</span><span id="__span-0-1377"><a id="__codelineno-0-1377" name="__codelineno-0-1377"></a><span class="s2">        sortAsc = true;</span>
</span><span id="__span-0-1378"><a id="__codelineno-0-1378" name="__codelineno-0-1378"></a><span class="s2">    }</span>
</span><span id="__span-0-1379"><a id="__codelineno-0-1379" name="__codelineno-0-1379"></a><span class="s2">    sortAndRender();</span>
</span><span id="__span-0-1380"><a id="__codelineno-0-1380" name="__codelineno-0-1380"></a><span class="s2">}</span>
</span><span id="__span-0-1381"><a id="__codelineno-0-1381" name="__codelineno-0-1381"></a>
</span><span id="__span-0-1382"><a id="__codelineno-0-1382" name="__codelineno-0-1382"></a><span class="s2">function sortAndRender() {</span>
</span><span id="__span-0-1383"><a id="__codelineno-0-1383" name="__codelineno-0-1383"></a><span class="s2">    if (settings.mode === &#39;trades&#39;) {</span>
</span><span id="__span-0-1384"><a id="__codelineno-0-1384" name="__codelineno-0-1384"></a><span class="s2">        filteredRoundtrips.sort((a, b) =&gt; {</span>
</span><span id="__span-0-1385"><a id="__codelineno-0-1385" name="__codelineno-0-1385"></a><span class="s2">            let valA = a[sortColumn];</span>
</span><span id="__span-0-1386"><a id="__codelineno-0-1386" name="__codelineno-0-1386"></a><span class="s2">            let valB = b[sortColumn];</span>
</span><span id="__span-0-1387"><a id="__codelineno-0-1387" name="__codelineno-0-1387"></a><span class="s2">            if (typeof valA === &#39;string&#39;) {</span>
</span><span id="__span-0-1388"><a id="__codelineno-0-1388" name="__codelineno-0-1388"></a><span class="s2">                valA = valA.toLowerCase();</span>
</span><span id="__span-0-1389"><a id="__codelineno-0-1389" name="__codelineno-0-1389"></a><span class="s2">                valB = valB.toLowerCase();</span>
</span><span id="__span-0-1390"><a id="__codelineno-0-1390" name="__codelineno-0-1390"></a><span class="s2">            }</span>
</span><span id="__span-0-1391"><a id="__codelineno-0-1391" name="__codelineno-0-1391"></a><span class="s2">            if (valA &lt; valB) return sortAsc ? -1 : 1;</span>
</span><span id="__span-0-1392"><a id="__codelineno-0-1392" name="__codelineno-0-1392"></a><span class="s2">            if (valA &gt; valB) return sortAsc ? 1 : -1;</span>
</span><span id="__span-0-1393"><a id="__codelineno-0-1393" name="__codelineno-0-1393"></a><span class="s2">            return 0;</span>
</span><span id="__span-0-1394"><a id="__codelineno-0-1394" name="__codelineno-0-1394"></a><span class="s2">        });</span>
</span><span id="__span-0-1395"><a id="__codelineno-0-1395" name="__codelineno-0-1395"></a><span class="s2">        renderTradesTable();</span>
</span><span id="__span-0-1396"><a id="__codelineno-0-1396" name="__codelineno-0-1396"></a><span class="s2">    } else {</span>
</span><span id="__span-0-1397"><a id="__codelineno-0-1397" name="__codelineno-0-1397"></a><span class="s2">        filteredSegments.sort((a, b) =&gt; {</span>
</span><span id="__span-0-1398"><a id="__codelineno-0-1398" name="__codelineno-0-1398"></a><span class="s2">            let valA = a[sortColumn];</span>
</span><span id="__span-0-1399"><a id="__codelineno-0-1399" name="__codelineno-0-1399"></a><span class="s2">            let valB = b[sortColumn];</span>
</span><span id="__span-0-1400"><a id="__codelineno-0-1400" name="__codelineno-0-1400"></a><span class="s2">            if (typeof valA === &#39;string&#39;) {</span>
</span><span id="__span-0-1401"><a id="__codelineno-0-1401" name="__codelineno-0-1401"></a><span class="s2">                valA = valA.toLowerCase();</span>
</span><span id="__span-0-1402"><a id="__codelineno-0-1402" name="__codelineno-0-1402"></a><span class="s2">                valB = valB.toLowerCase();</span>
</span><span id="__span-0-1403"><a id="__codelineno-0-1403" name="__codelineno-0-1403"></a><span class="s2">            }</span>
</span><span id="__span-0-1404"><a id="__codelineno-0-1404" name="__codelineno-0-1404"></a><span class="s2">            if (valA &lt; valB) return sortAsc ? -1 : 1;</span>
</span><span id="__span-0-1405"><a id="__codelineno-0-1405" name="__codelineno-0-1405"></a><span class="s2">            if (valA &gt; valB) return sortAsc ? 1 : -1;</span>
</span><span id="__span-0-1406"><a id="__codelineno-0-1406" name="__codelineno-0-1406"></a><span class="s2">            return 0;</span>
</span><span id="__span-0-1407"><a id="__codelineno-0-1407" name="__codelineno-0-1407"></a><span class="s2">        });</span>
</span><span id="__span-0-1408"><a id="__codelineno-0-1408" name="__codelineno-0-1408"></a><span class="s2">        renderSegmentsTable();</span>
</span><span id="__span-0-1409"><a id="__codelineno-0-1409" name="__codelineno-0-1409"></a><span class="s2">    }</span>
</span><span id="__span-0-1410"><a id="__codelineno-0-1410" name="__codelineno-0-1410"></a><span class="s2">}</span>
</span><span id="__span-0-1411"><a id="__codelineno-0-1411" name="__codelineno-0-1411"></a>
</span><span id="__span-0-1412"><a id="__codelineno-0-1412" name="__codelineno-0-1412"></a><span class="s2">function formatTimestamp(ns) {</span>
</span><span id="__span-0-1413"><a id="__codelineno-0-1413" name="__codelineno-0-1413"></a><span class="s2">    const ms = BigInt(ns) / BigInt(1000000);</span>
</span><span id="__span-0-1414"><a id="__codelineno-0-1414" name="__codelineno-0-1414"></a><span class="s2">    const date = new Date(Number(ms));</span>
</span><span id="__span-0-1415"><a id="__codelineno-0-1415" name="__codelineno-0-1415"></a><span class="s2">    return date.toISOString().slice(0, 16).replace(&#39;T&#39;, &#39; &#39;);</span>
</span><span id="__span-0-1416"><a id="__codelineno-0-1416" name="__codelineno-0-1416"></a><span class="s2">}</span>
</span><span id="__span-0-1417"><a id="__codelineno-0-1417" name="__codelineno-0-1417"></a>
</span><span id="__span-0-1418"><a id="__codelineno-0-1418" name="__codelineno-0-1418"></a><span class="s2">function renderSegmentsTable() {</span>
</span><span id="__span-0-1419"><a id="__codelineno-0-1419" name="__codelineno-0-1419"></a><span class="s2">    const container = document.getElementById(&#39;charts-content&#39;);</span>
</span><span id="__span-0-1420"><a id="__codelineno-0-1420" name="__codelineno-0-1420"></a><span class="s2">    if (segments.length === 0) {</span>
</span><span id="__span-0-1421"><a id="__codelineno-0-1421" name="__codelineno-0-1421"></a><span class="s2">        container.innerHTML = &#39;&lt;div class=&quot;empty-table&quot;&gt;&lt;p&gt;No chart segments found&lt;/p&gt;&lt;/div&gt;&#39;;</span>
</span><span id="__span-0-1422"><a id="__codelineno-0-1422" name="__codelineno-0-1422"></a><span class="s2">        return;</span>
</span><span id="__span-0-1423"><a id="__codelineno-0-1423" name="__codelineno-0-1423"></a><span class="s2">    }</span>
</span><span id="__span-0-1424"><a id="__codelineno-0-1424" name="__codelineno-0-1424"></a><span class="s2">    const columns = [</span>
</span><span id="__span-0-1425"><a id="__codelineno-0-1425" name="__codelineno-0-1425"></a><span class="s2">        {key: &#39;symbol&#39;, label: &#39;Symbol&#39;},</span>
</span><span id="__span-0-1426"><a id="__codelineno-0-1426" name="__codelineno-0-1426"></a><span class="s2">        {key: &#39;segment_num&#39;, label: &#39;Segment&#39;},</span>
</span><span id="__span-0-1427"><a id="__codelineno-0-1427" name="__codelineno-0-1427"></a><span class="s2">        {key: &#39;start_ts&#39;, label: &#39;Start&#39;},</span>
</span><span id="__span-0-1428"><a id="__codelineno-0-1428" name="__codelineno-0-1428"></a><span class="s2">        {key: &#39;end_ts&#39;, label: &#39;End&#39;},</span>
</span><span id="__span-0-1429"><a id="__codelineno-0-1429" name="__codelineno-0-1429"></a><span class="s2">        {key: &#39;bar_count&#39;, label: &#39;Bars&#39;},</span>
</span><span id="__span-0-1430"><a id="__codelineno-0-1430" name="__codelineno-0-1430"></a><span class="s2">    ];</span>
</span><span id="__span-0-1431"><a id="__codelineno-0-1431" name="__codelineno-0-1431"></a><span class="s2">    const headerHtml = columns.map(c =&gt; {</span>
</span><span id="__span-0-1432"><a id="__codelineno-0-1432" name="__codelineno-0-1432"></a><span class="s2">        const isSorted = sortColumn === c.key;</span>
</span><span id="__span-0-1433"><a id="__codelineno-0-1433" name="__codelineno-0-1433"></a><span class="s2">        const arrow = isSorted ? (sortAsc ? &#39;&#39; : &#39;&#39;) : &#39;&#39;;</span>
</span><span id="__span-0-1434"><a id="__codelineno-0-1434" name="__codelineno-0-1434"></a><span class="s2">        return `&lt;th class=&quot;${isSorted ? &#39;sorted&#39; : &#39;&#39;}&quot; onclick=&quot;sortBy(&#39;$</span><span class="si">{c.key}</span><span class="s2">&#39;)&quot;&gt;$</span><span class="si">{c.label}</span><span class="s2">&lt;span class=&quot;sort-icon&quot;&gt;$</span><span class="si">{arrow}</span><span class="s2">&lt;/span&gt;&lt;/th&gt;`;</span>
</span><span id="__span-0-1435"><a id="__codelineno-0-1435" name="__codelineno-0-1435"></a><span class="s2">    }).join(&#39;&#39;);</span>
</span><span id="__span-0-1436"><a id="__codelineno-0-1436" name="__codelineno-0-1436"></a><span class="s2">    const rowsHtml = filteredSegments.map((seg, idx) =&gt; {</span>
</span><span id="__span-0-1437"><a id="__codelineno-0-1437" name="__codelineno-0-1437"></a><span class="s2">        const displayStart = seg.period_start_ns || seg.start_ts;</span>
</span><span id="__span-0-1438"><a id="__codelineno-0-1438" name="__codelineno-0-1438"></a><span class="s2">        const displayEnd = seg.period_end_ns || seg.end_ts;</span>
</span><span id="__span-0-1439"><a id="__codelineno-0-1439" name="__codelineno-0-1439"></a><span class="s2">        return `&lt;tr class=&quot;data-row&quot; onclick=&quot;toggleChart($</span><span class="si">{idx}</span><span class="s2">)&quot;&gt;</span>
</span><span id="__span-0-1440"><a id="__codelineno-0-1440" name="__codelineno-0-1440"></a><span class="s2">            &lt;td class=&quot;symbol&quot;&gt;$</span><span class="si">{seg.symbol}</span><span class="s2">&lt;/td&gt;</span>
</span><span id="__span-0-1441"><a id="__codelineno-0-1441" name="__codelineno-0-1441"></a><span class="s2">            &lt;td class=&quot;number&quot;&gt;$</span><span class="si">{seg.segment_num}</span><span class="s2">&lt;/td&gt;</span>
</span><span id="__span-0-1442"><a id="__codelineno-0-1442" name="__codelineno-0-1442"></a><span class="s2">            &lt;td&gt;${formatTimestamp(displayStart)}&lt;/td&gt;</span>
</span><span id="__span-0-1443"><a id="__codelineno-0-1443" name="__codelineno-0-1443"></a><span class="s2">            &lt;td&gt;${formatTimestamp(displayEnd)}&lt;/td&gt;</span>
</span><span id="__span-0-1444"><a id="__codelineno-0-1444" name="__codelineno-0-1444"></a><span class="s2">            &lt;td class=&quot;number&quot;&gt;$</span><span class="si">{seg.bar_count}</span><span class="s2">&lt;/td&gt;</span>
</span><span id="__span-0-1445"><a id="__codelineno-0-1445" name="__codelineno-0-1445"></a><span class="s2">        &lt;/tr&gt;</span>
</span><span id="__span-0-1446"><a id="__codelineno-0-1446" name="__codelineno-0-1446"></a><span class="s2">        &lt;tr class=&quot;chart-row&quot; id=&quot;chart-row-$</span><span class="si">{idx}</span><span class="s2">&quot;&gt;</span>
</span><span id="__span-0-1447"><a id="__codelineno-0-1447" name="__codelineno-0-1447"></a><span class="s2">            &lt;td colspan=&quot;5&quot;&gt;</span>
</span><span id="__span-0-1448"><a id="__codelineno-0-1448" name="__codelineno-0-1448"></a><span class="s2">                &lt;div class=&quot;chart-container&quot; id=&quot;chart-container-$</span><span class="si">{idx}</span><span class="s2">&quot;&gt;</span>
</span><span id="__span-0-1449"><a id="__codelineno-0-1449" name="__codelineno-0-1449"></a><span class="s2">                    &lt;div class=&quot;chart-loading&quot;&gt;Loading chart...&lt;/div&gt;</span>
</span><span id="__span-0-1450"><a id="__codelineno-0-1450" name="__codelineno-0-1450"></a><span class="s2">                &lt;/div&gt;</span>
</span><span id="__span-0-1451"><a id="__codelineno-0-1451" name="__codelineno-0-1451"></a><span class="s2">            &lt;/td&gt;</span>
</span><span id="__span-0-1452"><a id="__codelineno-0-1452" name="__codelineno-0-1452"></a><span class="s2">        &lt;/tr&gt;`;</span>
</span><span id="__span-0-1453"><a id="__codelineno-0-1453" name="__codelineno-0-1453"></a><span class="s2">    }).join(&#39;&#39;);</span>
</span><span id="__span-0-1454"><a id="__codelineno-0-1454" name="__codelineno-0-1454"></a><span class="s2">    container.innerHTML = `</span>
</span><span id="__span-0-1455"><a id="__codelineno-0-1455" name="__codelineno-0-1455"></a><span class="s2">        &lt;div class=&quot;segments-table-container&quot;&gt;</span>
</span><span id="__span-0-1456"><a id="__codelineno-0-1456" name="__codelineno-0-1456"></a><span class="s2">            &lt;table class=&quot;segments-table&quot;&gt;</span>
</span><span id="__span-0-1457"><a id="__codelineno-0-1457" name="__codelineno-0-1457"></a><span class="s2">                &lt;thead&gt;&lt;tr&gt;$</span><span class="si">{headerHtml}</span><span class="s2">&lt;/tr&gt;&lt;/thead&gt;</span>
</span><span id="__span-0-1458"><a id="__codelineno-0-1458" name="__codelineno-0-1458"></a><span class="s2">                &lt;tbody&gt;$</span><span class="si">{rowsHtml}</span><span class="s2">&lt;/tbody&gt;</span>
</span><span id="__span-0-1459"><a id="__codelineno-0-1459" name="__codelineno-0-1459"></a><span class="s2">            &lt;/table&gt;</span>
</span><span id="__span-0-1460"><a id="__codelineno-0-1460" name="__codelineno-0-1460"></a><span class="s2">        &lt;/div&gt;</span>
</span><span id="__span-0-1461"><a id="__codelineno-0-1461" name="__codelineno-0-1461"></a><span class="s2">    `;</span>
</span><span id="__span-0-1462"><a id="__codelineno-0-1462" name="__codelineno-0-1462"></a><span class="s2">}</span>
</span><span id="__span-0-1463"><a id="__codelineno-0-1463" name="__codelineno-0-1463"></a>
</span><span id="__span-0-1464"><a id="__codelineno-0-1464" name="__codelineno-0-1464"></a><span class="s2">function renderTradesTable() {</span>
</span><span id="__span-0-1465"><a id="__codelineno-0-1465" name="__codelineno-0-1465"></a><span class="s2">    const container = document.getElementById(&#39;charts-content&#39;);</span>
</span><span id="__span-0-1466"><a id="__codelineno-0-1466" name="__codelineno-0-1466"></a><span class="s2">    if (roundtrips.length === 0) {</span>
</span><span id="__span-0-1467"><a id="__codelineno-0-1467" name="__codelineno-0-1467"></a><span class="s2">        container.innerHTML = &#39;&lt;div class=&quot;empty-table&quot;&gt;&lt;p&gt;No round-trip trades found&lt;/p&gt;&lt;/div&gt;&#39;;</span>
</span><span id="__span-0-1468"><a id="__codelineno-0-1468" name="__codelineno-0-1468"></a><span class="s2">        return;</span>
</span><span id="__span-0-1469"><a id="__codelineno-0-1469" name="__codelineno-0-1469"></a><span class="s2">    }</span>
</span><span id="__span-0-1470"><a id="__codelineno-0-1470" name="__codelineno-0-1470"></a><span class="s2">    const columns = [</span>
</span><span id="__span-0-1471"><a id="__codelineno-0-1471" name="__codelineno-0-1471"></a><span class="s2">        {key: &#39;symbol&#39;, label: &#39;Symbol&#39;},</span>
</span><span id="__span-0-1472"><a id="__codelineno-0-1472" name="__codelineno-0-1472"></a><span class="s2">        {key: &#39;trade_num&#39;, label: &#39;#&#39;},</span>
</span><span id="__span-0-1473"><a id="__codelineno-0-1473" name="__codelineno-0-1473"></a><span class="s2">        {key: &#39;direction&#39;, label: &#39;Direction&#39;},</span>
</span><span id="__span-0-1474"><a id="__codelineno-0-1474" name="__codelineno-0-1474"></a><span class="s2">        {key: &#39;duration_bars&#39;, label: &#39;Bars&#39;},</span>
</span><span id="__span-0-1475"><a id="__codelineno-0-1475" name="__codelineno-0-1475"></a><span class="s2">        {key: &#39;max_position&#39;, label: &#39;Max Position&#39;},</span>
</span><span id="__span-0-1476"><a id="__codelineno-0-1476" name="__codelineno-0-1476"></a><span class="s2">        {key: &#39;high_watermark&#39;, label: &#39;High Watermark&#39;},</span>
</span><span id="__span-0-1477"><a id="__codelineno-0-1477" name="__codelineno-0-1477"></a><span class="s2">        {key: &#39;low_watermark&#39;, label: &#39;Low Watermark&#39;},</span>
</span><span id="__span-0-1478"><a id="__codelineno-0-1478" name="__codelineno-0-1478"></a><span class="s2">        {key: &#39;max_drawdown&#39;, label: &#39;Max Drawdown&#39;},</span>
</span><span id="__span-0-1479"><a id="__codelineno-0-1479" name="__codelineno-0-1479"></a><span class="s2">        {key: &#39;pnl_before_commission&#39;, label: &#39;PnL (Gross)&#39;},</span>
</span><span id="__span-0-1480"><a id="__codelineno-0-1480" name="__codelineno-0-1480"></a><span class="s2">        {key: &#39;pnl_after_commission&#39;, label: &#39;PnL (Net)&#39;},</span>
</span><span id="__span-0-1481"><a id="__codelineno-0-1481" name="__codelineno-0-1481"></a><span class="s2">    ];</span>
</span><span id="__span-0-1482"><a id="__codelineno-0-1482" name="__codelineno-0-1482"></a><span class="s2">    const headerHtml = columns.map(c =&gt; {</span>
</span><span id="__span-0-1483"><a id="__codelineno-0-1483" name="__codelineno-0-1483"></a><span class="s2">        const isSorted = sortColumn === c.key;</span>
</span><span id="__span-0-1484"><a id="__codelineno-0-1484" name="__codelineno-0-1484"></a><span class="s2">        const arrow = isSorted ? (sortAsc ? &#39;&#39; : &#39;&#39;) : &#39;&#39;;</span>
</span><span id="__span-0-1485"><a id="__codelineno-0-1485" name="__codelineno-0-1485"></a><span class="s2">        return `&lt;th class=&quot;${isSorted ? &#39;sorted&#39; : &#39;&#39;}&quot; onclick=&quot;sortBy(&#39;$</span><span class="si">{c.key}</span><span class="s2">&#39;)&quot;&gt;$</span><span class="si">{c.label}</span><span class="s2">&lt;span class=&quot;sort-icon&quot;&gt;$</span><span class="si">{arrow}</span><span class="s2">&lt;/span&gt;&lt;/th&gt;`;</span>
</span><span id="__span-0-1486"><a id="__codelineno-0-1486" name="__codelineno-0-1486"></a><span class="s2">    }).join(&#39;&#39;);</span>
</span><span id="__span-0-1487"><a id="__codelineno-0-1487" name="__codelineno-0-1487"></a><span class="s2">    const rowsHtml = filteredRoundtrips.map((rt, idx) =&gt; {</span>
</span><span id="__span-0-1488"><a id="__codelineno-0-1488" name="__codelineno-0-1488"></a><span class="s2">        const dirClass = rt.direction.toLowerCase();</span>
</span><span id="__span-0-1489"><a id="__codelineno-0-1489" name="__codelineno-0-1489"></a><span class="s2">        const pnlGrossClass = rt.pnl_before_commission &gt;= 0 ? &#39;positive&#39; : &#39;negative&#39;;</span>
</span><span id="__span-0-1490"><a id="__codelineno-0-1490" name="__codelineno-0-1490"></a><span class="s2">        const pnlNetClass = rt.pnl_after_commission &gt;= 0 ? &#39;positive&#39; : &#39;negative&#39;;</span>
</span><span id="__span-0-1491"><a id="__codelineno-0-1491" name="__codelineno-0-1491"></a><span class="s2">        const pnlGrossSign = rt.pnl_before_commission &gt;= 0 ? &#39;+&#39; : &#39;&#39;;</span>
</span><span id="__span-0-1492"><a id="__codelineno-0-1492" name="__codelineno-0-1492"></a><span class="s2">        const pnlNetSign = rt.pnl_after_commission &gt;= 0 ? &#39;+&#39; : &#39;&#39;;</span>
</span><span id="__span-0-1493"><a id="__codelineno-0-1493" name="__codelineno-0-1493"></a><span class="s2">        const hwmClass = rt.high_watermark &gt;= 0 ? &#39;positive&#39; : &#39;negative&#39;;</span>
</span><span id="__span-0-1494"><a id="__codelineno-0-1494" name="__codelineno-0-1494"></a><span class="s2">        const hwmSign = rt.high_watermark &gt;= 0 ? &#39;+&#39; : &#39;&#39;;</span>
</span><span id="__span-0-1495"><a id="__codelineno-0-1495" name="__codelineno-0-1495"></a><span class="s2">        const lwmClass = rt.low_watermark &gt;= 0 ? &#39;positive&#39; : &#39;negative&#39;;</span>
</span><span id="__span-0-1496"><a id="__codelineno-0-1496" name="__codelineno-0-1496"></a><span class="s2">        const lwmSign = rt.low_watermark &gt;= 0 ? &#39;+&#39; : &#39;&#39;;</span>
</span><span id="__span-0-1497"><a id="__codelineno-0-1497" name="__codelineno-0-1497"></a><span class="s2">        const mddClass = rt.max_drawdown &gt; 0 ? &#39;negative&#39; : &#39;&#39;;</span>
</span><span id="__span-0-1498"><a id="__codelineno-0-1498" name="__codelineno-0-1498"></a><span class="s2">        return `&lt;tr class=&quot;data-row&quot; onclick=&quot;toggleChart($</span><span class="si">{idx}</span><span class="s2">)&quot;&gt;</span>
</span><span id="__span-0-1499"><a id="__codelineno-0-1499" name="__codelineno-0-1499"></a><span class="s2">            &lt;td class=&quot;symbol&quot;&gt;$</span><span class="si">{rt.symbol}</span><span class="s2">&lt;/td&gt;</span>
</span><span id="__span-0-1500"><a id="__codelineno-0-1500" name="__codelineno-0-1500"></a><span class="s2">            &lt;td&gt;$</span><span class="si">{rt.trade_num}</span><span class="s2">&lt;/td&gt;</span>
</span><span id="__span-0-1501"><a id="__codelineno-0-1501" name="__codelineno-0-1501"></a><span class="s2">            &lt;td class=&quot;direction $</span><span class="si">{dirClass}</span><span class="s2">&quot;&gt;$</span><span class="si">{rt.direction}</span><span class="s2">&lt;/td&gt;</span>
</span><span id="__span-0-1502"><a id="__codelineno-0-1502" name="__codelineno-0-1502"></a><span class="s2">            &lt;td&gt;$</span><span class="si">{rt.duration_bars}</span><span class="s2">&lt;/td&gt;</span>
</span><span id="__span-0-1503"><a id="__codelineno-0-1503" name="__codelineno-0-1503"></a><span class="s2">            &lt;td&gt;$</span><span class="si">{rt.max_position}</span><span class="s2">&lt;/td&gt;</span>
</span><span id="__span-0-1504"><a id="__codelineno-0-1504" name="__codelineno-0-1504"></a><span class="s2">            &lt;td class=&quot;pnl $</span><span class="si">{hwmClass}</span><span class="s2">&quot;&gt;$</span><span class="si">{hwmSign}</span><span class="s2">${rt.high_watermark.toFixed(2)}&lt;/td&gt;</span>
</span><span id="__span-0-1505"><a id="__codelineno-0-1505" name="__codelineno-0-1505"></a><span class="s2">            &lt;td class=&quot;pnl $</span><span class="si">{lwmClass}</span><span class="s2">&quot;&gt;$</span><span class="si">{lwmSign}</span><span class="s2">${rt.low_watermark.toFixed(2)}&lt;/td&gt;</span>
</span><span id="__span-0-1506"><a id="__codelineno-0-1506" name="__codelineno-0-1506"></a><span class="s2">            &lt;td class=&quot;pnl $</span><span class="si">{mddClass}</span><span class="s2">&quot;&gt;${rt.max_drawdown &gt; 0 ? &#39;-&#39; : &#39;&#39;}${rt.max_drawdown.toFixed(2)}&lt;/td&gt;</span>
</span><span id="__span-0-1507"><a id="__codelineno-0-1507" name="__codelineno-0-1507"></a><span class="s2">            &lt;td class=&quot;pnl $</span><span class="si">{pnlGrossClass}</span><span class="s2">&quot;&gt;$</span><span class="si">{pnlGrossSign}</span><span class="s2">${rt.pnl_before_commission.toFixed(2)}&lt;/td&gt;</span>
</span><span id="__span-0-1508"><a id="__codelineno-0-1508" name="__codelineno-0-1508"></a><span class="s2">            &lt;td class=&quot;pnl $</span><span class="si">{pnlNetClass}</span><span class="s2">&quot;&gt;$</span><span class="si">{pnlNetSign}</span><span class="s2">${rt.pnl_after_commission.toFixed(2)}&lt;/td&gt;</span>
</span><span id="__span-0-1509"><a id="__codelineno-0-1509" name="__codelineno-0-1509"></a><span class="s2">        &lt;/tr&gt;</span>
</span><span id="__span-0-1510"><a id="__codelineno-0-1510" name="__codelineno-0-1510"></a><span class="s2">        &lt;tr class=&quot;chart-row&quot; id=&quot;chart-row-$</span><span class="si">{idx}</span><span class="s2">&quot;&gt;</span>
</span><span id="__span-0-1511"><a id="__codelineno-0-1511" name="__codelineno-0-1511"></a><span class="s2">            &lt;td colspan=&quot;10&quot;&gt;</span>
</span><span id="__span-0-1512"><a id="__codelineno-0-1512" name="__codelineno-0-1512"></a><span class="s2">                &lt;div class=&quot;chart-container&quot; id=&quot;chart-container-$</span><span class="si">{idx}</span><span class="s2">&quot;&gt;</span>
</span><span id="__span-0-1513"><a id="__codelineno-0-1513" name="__codelineno-0-1513"></a><span class="s2">                    &lt;div class=&quot;chart-loading&quot;&gt;Loading chart...&lt;/div&gt;</span>
</span><span id="__span-0-1514"><a id="__codelineno-0-1514" name="__codelineno-0-1514"></a><span class="s2">                &lt;/div&gt;</span>
</span><span id="__span-0-1515"><a id="__codelineno-0-1515" name="__codelineno-0-1515"></a><span class="s2">            &lt;/td&gt;</span>
</span><span id="__span-0-1516"><a id="__codelineno-0-1516" name="__codelineno-0-1516"></a><span class="s2">        &lt;/tr&gt;`;</span>
</span><span id="__span-0-1517"><a id="__codelineno-0-1517" name="__codelineno-0-1517"></a><span class="s2">    }).join(&#39;&#39;);</span>
</span><span id="__span-0-1518"><a id="__codelineno-0-1518" name="__codelineno-0-1518"></a><span class="s2">    container.innerHTML = `</span>
</span><span id="__span-0-1519"><a id="__codelineno-0-1519" name="__codelineno-0-1519"></a><span class="s2">        &lt;div class=&quot;trades-table-container&quot;&gt;</span>
</span><span id="__span-0-1520"><a id="__codelineno-0-1520" name="__codelineno-0-1520"></a><span class="s2">            &lt;table class=&quot;trades-table&quot;&gt;</span>
</span><span id="__span-0-1521"><a id="__codelineno-0-1521" name="__codelineno-0-1521"></a><span class="s2">                &lt;thead&gt;&lt;tr&gt;$</span><span class="si">{headerHtml}</span><span class="s2">&lt;/tr&gt;&lt;/thead&gt;</span>
</span><span id="__span-0-1522"><a id="__codelineno-0-1522" name="__codelineno-0-1522"></a><span class="s2">                &lt;tbody&gt;$</span><span class="si">{rowsHtml}</span><span class="s2">&lt;/tbody&gt;</span>
</span><span id="__span-0-1523"><a id="__codelineno-0-1523" name="__codelineno-0-1523"></a><span class="s2">            &lt;/table&gt;</span>
</span><span id="__span-0-1524"><a id="__codelineno-0-1524" name="__codelineno-0-1524"></a><span class="s2">        &lt;/div&gt;</span>
</span><span id="__span-0-1525"><a id="__codelineno-0-1525" name="__codelineno-0-1525"></a><span class="s2">    `;</span>
</span><span id="__span-0-1526"><a id="__codelineno-0-1526" name="__codelineno-0-1526"></a><span class="s2">}</span>
</span><span id="__span-0-1527"><a id="__codelineno-0-1527" name="__codelineno-0-1527"></a>
</span><span id="__span-0-1528"><a id="__codelineno-0-1528" name="__codelineno-0-1528"></a><span class="s2">const chartCache = </span><span class="si">{}</span><span class="s2">;</span>
</span><span id="__span-0-1529"><a id="__codelineno-0-1529" name="__codelineno-0-1529"></a>
</span><span id="__span-0-1530"><a id="__codelineno-0-1530" name="__codelineno-0-1530"></a><span class="s2">function toggleChart(idx) {</span>
</span><span id="__span-0-1531"><a id="__codelineno-0-1531" name="__codelineno-0-1531"></a><span class="s2">    const chartRow = document.getElementById(`chart-row-$</span><span class="si">{idx}</span><span class="s2">`);</span>
</span><span id="__span-0-1532"><a id="__codelineno-0-1532" name="__codelineno-0-1532"></a><span class="s2">    if (chartRow.classList.contains(&#39;expanded&#39;)) {</span>
</span><span id="__span-0-1533"><a id="__codelineno-0-1533" name="__codelineno-0-1533"></a><span class="s2">        chartRow.classList.remove(&#39;expanded&#39;);</span>
</span><span id="__span-0-1534"><a id="__codelineno-0-1534" name="__codelineno-0-1534"></a><span class="s2">        return;</span>
</span><span id="__span-0-1535"><a id="__codelineno-0-1535" name="__codelineno-0-1535"></a><span class="s2">    }</span>
</span><span id="__span-0-1536"><a id="__codelineno-0-1536" name="__codelineno-0-1536"></a><span class="s2">    chartRow.classList.add(&#39;expanded&#39;);</span>
</span><span id="__span-0-1537"><a id="__codelineno-0-1537" name="__codelineno-0-1537"></a><span class="s2">    const container = document.getElementById(`chart-container-$</span><span class="si">{idx}</span><span class="s2">`);</span>
</span><span id="__span-0-1538"><a id="__codelineno-0-1538" name="__codelineno-0-1538"></a><span class="s2">    let url, cacheKey;</span>
</span><span id="__span-0-1539"><a id="__codelineno-0-1539" name="__codelineno-0-1539"></a><span class="s2">    if (settings.mode === &#39;trades&#39;) {</span>
</span><span id="__span-0-1540"><a id="__codelineno-0-1540" name="__codelineno-0-1540"></a><span class="s2">        const rt = filteredRoundtrips[idx];</span>
</span><span id="__span-0-1541"><a id="__codelineno-0-1541" name="__codelineno-0-1541"></a><span class="s2">        cacheKey = `$</span><span class="si">{selectedRunId}</span><span class="s2">_trade_$</span><span class="si">{rt.symbol}</span><span class="s2">_$</span><span class="si">{rt.entry_ts}</span><span class="s2">_$</span><span class="si">{rt.exit_ts}</span><span class="s2">_$</span><span class="si">{settings.chartType}</span><span class="s2">`;</span>
</span><span id="__span-0-1542"><a id="__codelineno-0-1542" name="__codelineno-0-1542"></a><span class="s2">        if (chartCache[cacheKey]) {</span>
</span><span id="__span-0-1543"><a id="__codelineno-0-1543" name="__codelineno-0-1543"></a><span class="s2">            container.innerHTML = `&lt;img src=&quot;$</span><span class="si">{chartCache[cacheKey]}</span><span class="s2">&quot; alt=&quot;Chart&quot;&gt;`;</span>
</span><span id="__span-0-1544"><a id="__codelineno-0-1544" name="__codelineno-0-1544"></a><span class="s2">            return;</span>
</span><span id="__span-0-1545"><a id="__codelineno-0-1545" name="__codelineno-0-1545"></a><span class="s2">        }</span>
</span><span id="__span-0-1546"><a id="__codelineno-0-1546" name="__codelineno-0-1546"></a><span class="s2">        container.innerHTML = &#39;&lt;div class=&quot;chart-loading&quot;&gt;Loading chart...&lt;/div&gt;&#39;;</span>
</span><span id="__span-0-1547"><a id="__codelineno-0-1547" name="__codelineno-0-1547"></a><span class="s2">        url = `/api/runs/$</span><span class="si">{selectedRunId}</span><span class="s2">/chart.png?symbol=${encodeURIComponent(rt.symbol)}&amp;start_ns=$</span><span class="si">{rt.entry_ts}</span><span class="s2">&amp;end_ns=$</span><span class="si">{rt.exit_ts}</span><span class="s2">&amp;direction=$</span><span class="si">{rt.direction}</span><span class="s2">&amp;pnl=$</span><span class="si">{rt.pnl_after_commission}</span><span class="s2">&amp;chart_type=$</span><span class="si">{settings.chartType}</span><span class="s2">`;</span>
</span><span id="__span-0-1548"><a id="__codelineno-0-1548" name="__codelineno-0-1548"></a><span class="s2">    } else {</span>
</span><span id="__span-0-1549"><a id="__codelineno-0-1549" name="__codelineno-0-1549"></a><span class="s2">        const seg = filteredSegments[idx];</span>
</span><span id="__span-0-1550"><a id="__codelineno-0-1550" name="__codelineno-0-1550"></a><span class="s2">        cacheKey = `$</span><span class="si">{selectedRunId}</span><span class="s2">_$</span><span class="si">{seg.symbol}</span><span class="s2">_$</span><span class="si">{seg.start_ts}</span><span class="s2">_$</span><span class="si">{seg.end_ts}</span><span class="s2">_$</span><span class="si">{settings.chartType}</span><span class="s2">`;</span>
</span><span id="__span-0-1551"><a id="__codelineno-0-1551" name="__codelineno-0-1551"></a><span class="s2">        if (chartCache[cacheKey]) {</span>
</span><span id="__span-0-1552"><a id="__codelineno-0-1552" name="__codelineno-0-1552"></a><span class="s2">            container.innerHTML = `&lt;img src=&quot;$</span><span class="si">{chartCache[cacheKey]}</span><span class="s2">&quot; alt=&quot;Chart&quot;&gt;`;</span>
</span><span id="__span-0-1553"><a id="__codelineno-0-1553" name="__codelineno-0-1553"></a><span class="s2">            return;</span>
</span><span id="__span-0-1554"><a id="__codelineno-0-1554" name="__codelineno-0-1554"></a><span class="s2">        }</span>
</span><span id="__span-0-1555"><a id="__codelineno-0-1555" name="__codelineno-0-1555"></a><span class="s2">        container.innerHTML = &#39;&lt;div class=&quot;chart-loading&quot;&gt;Loading chart...&lt;/div&gt;&#39;;</span>
</span><span id="__span-0-1556"><a id="__codelineno-0-1556" name="__codelineno-0-1556"></a><span class="s2">        url = `/api/runs/$</span><span class="si">{selectedRunId}</span><span class="s2">/segment-chart.png?symbol=${encodeURIComponent(seg.symbol)}&amp;start_ns=$</span><span class="si">{seg.start_ts}</span><span class="s2">&amp;end_ns=$</span><span class="si">{seg.end_ts}</span><span class="s2">&amp;chart_type=$</span><span class="si">{settings.chartType}</span><span class="s2">`;</span>
</span><span id="__span-0-1557"><a id="__codelineno-0-1557" name="__codelineno-0-1557"></a><span class="s2">        if (seg.period_start_ns &amp;&amp; seg.period_end_ns) {</span>
</span><span id="__span-0-1558"><a id="__codelineno-0-1558" name="__codelineno-0-1558"></a><span class="s2">            url += `&amp;period_start_ns=$</span><span class="si">{seg.period_start_ns}</span><span class="s2">&amp;period_end_ns=$</span><span class="si">{seg.period_end_ns}</span><span class="s2">`;</span>
</span><span id="__span-0-1559"><a id="__codelineno-0-1559" name="__codelineno-0-1559"></a><span class="s2">        }</span>
</span><span id="__span-0-1560"><a id="__codelineno-0-1560" name="__codelineno-0-1560"></a><span class="s2">    }</span>
</span><span id="__span-0-1561"><a id="__codelineno-0-1561" name="__codelineno-0-1561"></a><span class="s2">    const img = new Image();</span>
</span><span id="__span-0-1562"><a id="__codelineno-0-1562" name="__codelineno-0-1562"></a><span class="s2">    img.onload = () =&gt; {</span>
</span><span id="__span-0-1563"><a id="__codelineno-0-1563" name="__codelineno-0-1563"></a><span class="s2">        chartCache[cacheKey] = url;</span>
</span><span id="__span-0-1564"><a id="__codelineno-0-1564" name="__codelineno-0-1564"></a><span class="s2">        container.innerHTML = &#39;&#39;;</span>
</span><span id="__span-0-1565"><a id="__codelineno-0-1565" name="__codelineno-0-1565"></a><span class="s2">        container.appendChild(img);</span>
</span><span id="__span-0-1566"><a id="__codelineno-0-1566" name="__codelineno-0-1566"></a><span class="s2">    };</span>
</span><span id="__span-0-1567"><a id="__codelineno-0-1567" name="__codelineno-0-1567"></a><span class="s2">    img.onerror = () =&gt; {</span>
</span><span id="__span-0-1568"><a id="__codelineno-0-1568" name="__codelineno-0-1568"></a><span class="s2">        container.innerHTML = &#39;&lt;div class=&quot;chart-loading&quot;&gt;Failed to load chart&lt;/div&gt;&#39;;</span>
</span><span id="__span-0-1569"><a id="__codelineno-0-1569" name="__codelineno-0-1569"></a><span class="s2">    };</span>
</span><span id="__span-0-1570"><a id="__codelineno-0-1570" name="__codelineno-0-1570"></a><span class="s2">    img.src = url;</span>
</span><span id="__span-0-1571"><a id="__codelineno-0-1571" name="__codelineno-0-1571"></a><span class="s2">    img.alt = &#39;Chart&#39;;</span>
</span><span id="__span-0-1572"><a id="__codelineno-0-1572" name="__codelineno-0-1572"></a><span class="s2">}</span>
</span><span id="__span-0-1573"><a id="__codelineno-0-1573" name="__codelineno-0-1573"></a>
</span><span id="__span-0-1574"><a id="__codelineno-0-1574" name="__codelineno-0-1574"></a><span class="s2">document.addEventListener(&#39;DOMContentLoaded&#39;, () =&gt; {</span>
</span><span id="__span-0-1575"><a id="__codelineno-0-1575" name="__codelineno-0-1575"></a><span class="s2">    loadRuns();</span>
</span><span id="__span-0-1576"><a id="__codelineno-0-1576" name="__codelineno-0-1576"></a><span class="s2">});</span>
</span><span id="__span-0-1577"><a id="__codelineno-0-1577" name="__codelineno-0-1577"></a><span class="s2">&quot;&quot;&quot;</span>
</span></code></pre></div></td></tr></table></div>
</details>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright  2024-2025 Nils Kujath.<br><br>
<div style='text-align: justify; font-size: 0.8em;'>THE INFORMATION PROVIDED IS FOR EDUCATIONAL AND INFORMATIONAL PURPOSES ONLY. IT DOES NOT CONSTITUTE FINANCIAL, INVESTMENT, OR TRADING ADVICE. TRADING INVOLVES SUBSTANTIAL RISK, AND YOU MAY LOSE MORE THAN YOUR INITIAL INVESTMENT.<br><br>
THIS SOFTWARE AND ITS DOCUMENTATION PAGES ARE PROVIDED "AS IS," WITHOUT ANY WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. THE AUTHORS AND COPYRIGHT HOLDERS ASSUME NO LIABILITY FOR ANY CLAIMS, DAMAGES, OR OTHER LIABILITIES ARISING FROM THE USE OR DISTRIBUTION OF THIS SOFTWARE OR DOCUMENTATION PAGES. USE AT YOUR OWN RISK. ONESECONDTRADER AND ITS DOCUMENTATION PAGES ARE LICENSED UNDER THE <a href='https://www.gnu.org/licenses/gpl-3.0.html'>GNU GENERAL PUBLIC LICENSE V3.0 (GPL-3.0)</a>. SEE THE GPL-3.0 FOR DETAILS.</div>
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.top", "content.code.copy", "content.code.select", "content.code.annotate", "content.footnote.tooltips", "content.tabs.linked"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.50899def.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="../../../javascripts/source_open.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>