{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"The Trading Infrastructure Toolkit for Python  <p>   Research, simulate, and deploy algorithmic strategies \u2014 all in one place. </p> <p>Under Construction</p> <p>This package is under construction! OneSecondTrader is still a work in progress, but don\u2019t worry \u2013 a pre-release version is just around the corner. Grab a coffee and hang tight!</p>"},{"location":"#quickstart","title":"Quickstart","text":"pippoetry <pre><code>pip install onesecondtrader \n</code></pre> <pre><code>poetry add onesecondtrader\n</code></pre>"},{"location":"quickstart/","title":"\u2192 Quickstart","text":""},{"location":"quickstart/#redirecting","title":"Redirecting...","text":"<p>If you are not redirected automatically, click here.</p>"},{"location":"api-reference/overview/","title":"API Reference","text":"<ul> <li> <p>Analyst </p> <p>Contains:</p> <p><code>charting.py</code></p> <p> View <code>analyst/</code> package API</p> </li> <li> <p>Components </p> <p>Contains:</p> <p><code>broker_base.py</code>, <code>datafeed_base.py</code>, <code>indicator_base.py</code>, <code>strategy_base.py</code></p> <p> View <code>components/</code> package API</p> </li> <li> <p>Connectors </p> <p>Contains:</p> <p><code>ib.py</code>, <code>mt5.py</code>, <code>simulated.py</code></p> <p> View <code>connectors/</code> package API</p> </li> <li> <p>Core </p> <p>Contains:</p> <p><code>domain_models.py</code>, <code>event_bus.py</code>, <code>event_messages.py</code>, <code>event_publisher.py</code>, <code>event_subscriber.py</code></p> <p> View <code>core/</code> package API</p> </li> <li> <p>Libraries </p> <p>Contains:</p> <p><code>indicators.py</code>, <code>strategies.py</code></p> <p> View <code>libraries/</code> package API</p> </li> <li> <p>Observers </p> <p>Contains:</p> <p><code>csvbookkeeper.py</code></p> <p> View <code>observers/</code> package API</p> </li> </ul>"},{"location":"api-reference/analyst/charting/","title":"Charting","text":"Source code in <code>charting.py</code> <pre><code>\n</code></pre>"},{"location":"api-reference/components/broker_base/","title":"Broker Base","text":"Source code in <code>broker_base.py</code> <pre><code>\n</code></pre>"},{"location":"api-reference/components/datafeed_base/","title":"Datafeed Base","text":"Source code in <code>datafeed_base.py</code> <pre><code>\n</code></pre>"},{"location":"api-reference/components/indicator_base/","title":"Indicator Base","text":"Source code in <code>indicator_base.py</code> <pre><code>\n</code></pre>"},{"location":"api-reference/components/strategy_base/","title":"Strategy Base","text":"Source code in <code>strategy_base.py</code> <pre><code>\n</code></pre>"},{"location":"api-reference/connectors/ib/","title":"IB","text":"Source code in <code>ib.py</code> <pre><code>\n</code></pre>"},{"location":"api-reference/connectors/mt5/","title":"MT5","text":"Source code in <code>mt5.py</code> <pre><code>\n</code></pre>"},{"location":"api-reference/connectors/simulated/","title":"Simulated","text":"Source code in <code>simulated.py</code> <pre><code>\n</code></pre>"},{"location":"api-reference/core/domain_models/","title":"Domain Models","text":"<p>This module defines the core domain models used throughout the system.</p> <p>Domain models are enumerations that define the shared vocabulary of the trading system. They provide a fixed set of valid values for core concepts and are used across all system components to ensure consistency and type safety.</p>"},{"location":"api-reference/core/domain_models/#onesecondtrader.core.domain_models.OrderType","title":"<code>OrderType</code>","text":"<p>               Bases: <code>Enum</code></p> Source code in <code>src/onesecondtrader/core/domain_models.py</code> <pre><code>class OrderType(enum.Enum):\n    LIMIT = enum.auto()\n    MARKET = enum.auto()\n    STOP = enum.auto()\n    STOP_LIMIT = enum.auto()\n</code></pre>"},{"location":"api-reference/core/domain_models/#onesecondtrader.core.domain_models.OrderSide","title":"<code>OrderSide</code>","text":"<p>               Bases: <code>Enum</code></p> Source code in <code>src/onesecondtrader/core/domain_models.py</code> <pre><code>class OrderSide(enum.Enum):\n    BUY = enum.auto()\n    SELL = enum.auto()\n</code></pre>"},{"location":"api-reference/core/domain_models/#onesecondtrader.core.domain_models.BarPeriod","title":"<code>BarPeriod</code>","text":"<p>               Bases: <code>Enum</code></p> Source code in <code>src/onesecondtrader/core/domain_models.py</code> <pre><code>class BarPeriod(enum.Enum):\n    SECOND = 32\n    MINUTE = 33\n    HOUR = 34\n    DAY = 35\n</code></pre>"},{"location":"api-reference/core/event_bus/","title":"Event Bus","text":"<p>Read first: Event Messages.</p> <p>This module defines the central event bus for publish-subscribe communication.</p> <p>EventBus is the core messaging infrastructure that routes events between system components. Subscribers register interest in specific event types and receive events when publishers dispatch them. Event routing uses exact type matching, so subscribing to a base class will not receive events of derived types.</p>"},{"location":"api-reference/core/event_bus/#onesecondtrader.core.event_bus.EventSubscriberLike","title":"<code>EventSubscriberLike</code>","text":"<p>               Bases: <code>Protocol</code></p> Source code in <code>src/onesecondtrader/core/event_bus.py</code> <pre><code>@typing.runtime_checkable\nclass EventSubscriberLike(typing.Protocol):\n    def receive(self, event: EventBase) -&gt; None: ...\n    def wait_until_idle(self) -&gt; None: ...\n</code></pre>"},{"location":"api-reference/core/event_bus/#onesecondtrader.core.event_bus.EventBus","title":"<code>EventBus</code>","text":""},{"location":"api-reference/core/event_bus/#onesecondtrader.core.event_bus.EventBus.__init__","title":"<code>__init__()</code>","text":"Source code in <code>src/onesecondtrader/core/event_bus.py</code> <pre><code>def __init__(self) -&gt; None:\n    self._per_event_subscriptions: collections.defaultdict[\n        type[EventBase], set[EventSubscriberLike]\n    ] = collections.defaultdict(set)\n    self._subscribers: set[EventSubscriberLike] = set()\n    self._lock: threading.Lock = threading.Lock()\n</code></pre>"},{"location":"api-reference/core/event_bus/#onesecondtrader.core.event_bus.EventBus.subscribe","title":"<code>subscribe(subscriber, event_type)</code>","text":"Source code in <code>src/onesecondtrader/core/event_bus.py</code> <pre><code>def subscribe(\n    self, subscriber: EventSubscriberLike, event_type: type[EventBase]\n) -&gt; None:\n    with self._lock:\n        self._subscribers.add(subscriber)\n        self._per_event_subscriptions[event_type].add(subscriber)\n</code></pre>"},{"location":"api-reference/core/event_bus/#onesecondtrader.core.event_bus.EventBus.unsubscribe","title":"<code>unsubscribe(subscriber)</code>","text":"Source code in <code>src/onesecondtrader/core/event_bus.py</code> <pre><code>def unsubscribe(self, subscriber: EventSubscriberLike) -&gt; None:\n    with self._lock:\n        for set_of_event_subscribers in self._per_event_subscriptions.values():\n            set_of_event_subscribers.discard(subscriber)\n        self._subscribers.discard(subscriber)\n</code></pre>"},{"location":"api-reference/core/event_bus/#onesecondtrader.core.event_bus.EventBus.publish","title":"<code>publish(event)</code>","text":"Source code in <code>src/onesecondtrader/core/event_bus.py</code> <pre><code>def publish(self, event: EventBase) -&gt; None:\n    with self._lock:\n        subscribers = self._per_event_subscriptions[type(event)].copy()\n    for subscriber in subscribers:\n        subscriber.receive(event)\n</code></pre>"},{"location":"api-reference/core/event_bus/#onesecondtrader.core.event_bus.EventBus.wait_until_system_idle","title":"<code>wait_until_system_idle()</code>","text":"Source code in <code>src/onesecondtrader/core/event_bus.py</code> <pre><code>def wait_until_system_idle(self) -&gt; None:\n    with self._lock:\n        subscribers = self._subscribers.copy()\n    for subscriber in subscribers:\n        subscriber.wait_until_idle()\n</code></pre>"},{"location":"api-reference/core/event_messages/","title":"Event Messages","text":"<p>Read first: Domain Models.</p> <p>This module defines the event messages used throughout the system.</p> <p>Event messages are immutable dataclasses used for communication between system components They are semantically grouped into market, broker request, and broker response events via inheritance from dedicated base classes.</p>"},{"location":"api-reference/core/event_messages/#onesecondtrader.core.event_messages.EventBase","title":"<code>EventBase</code>  <code>dataclass</code>","text":"Source code in <code>src/onesecondtrader/core/event_messages.py</code> <pre><code>@dataclasses.dataclass(kw_only=True, frozen=True)\nclass EventBase:\n    ts_event: pd.Timestamp\n    ts_created: pd.Timestamp = dataclasses.field(\n        default_factory=lambda: pd.Timestamp.now(tz=\"UTC\")\n    )\n</code></pre>"},{"location":"api-reference/core/event_messages/#onesecondtrader.core.event_messages.MarketEventBase","title":"<code>MarketEventBase</code>  <code>dataclass</code>","text":"<p>               Bases: <code>EventBase</code></p> Source code in <code>src/onesecondtrader/core/event_messages.py</code> <pre><code>@dataclasses.dataclass(kw_only=True, frozen=True)\nclass MarketEventBase(EventBase):\n    pass\n</code></pre>"},{"location":"api-reference/core/event_messages/#onesecondtrader.core.event_messages.BrokerRequestEventBase","title":"<code>BrokerRequestEventBase</code>  <code>dataclass</code>","text":"<p>               Bases: <code>EventBase</code></p> Source code in <code>src/onesecondtrader/core/event_messages.py</code> <pre><code>@dataclasses.dataclass(kw_only=True, frozen=True)\nclass BrokerRequestEventBase(EventBase):\n    pass\n</code></pre>"},{"location":"api-reference/core/event_messages/#onesecondtrader.core.event_messages.BrokerResponseEventBase","title":"<code>BrokerResponseEventBase</code>  <code>dataclass</code>","text":"<p>               Bases: <code>EventBase</code></p> Source code in <code>src/onesecondtrader/core/event_messages.py</code> <pre><code>@dataclasses.dataclass(kw_only=True, frozen=True)\nclass BrokerResponseEventBase(EventBase):\n    ts_broker: pd.Timestamp\n</code></pre>"},{"location":"api-reference/core/event_messages/#onesecondtrader.core.event_messages.NewBar","title":"<code>NewBar</code>  <code>dataclass</code>","text":"<p>               Bases: <code>MarketEventBase</code></p> Source code in <code>src/onesecondtrader/core/event_messages.py</code> <pre><code>@dataclasses.dataclass(kw_only=True, frozen=True)\nclass NewBar(MarketEventBase):\n    symbol: str\n    bar_period: BarPeriod\n    open: float\n    high: float\n    low: float\n    close: float\n    volume: int | None = None\n</code></pre>"},{"location":"api-reference/core/event_messages/#onesecondtrader.core.event_messages.RequestOrderSubmission","title":"<code>RequestOrderSubmission</code>  <code>dataclass</code>","text":"<p>               Bases: <code>BrokerRequestEventBase</code></p> Source code in <code>src/onesecondtrader/core/event_messages.py</code> <pre><code>@dataclasses.dataclass(kw_only=True, frozen=True)\nclass RequestOrderSubmission(BrokerRequestEventBase):\n    order_id: uuid.UUID = dataclasses.field(default_factory=uuid.uuid4)\n    symbol: str\n    order_type: OrderType\n    side: OrderSide\n    quantity: float\n    limit_price: float | None = None\n    stop_price: float | None = None\n</code></pre>"},{"location":"api-reference/core/event_messages/#onesecondtrader.core.event_messages.RequestOrderCancellation","title":"<code>RequestOrderCancellation</code>  <code>dataclass</code>","text":"<p>               Bases: <code>BrokerRequestEventBase</code></p> Source code in <code>src/onesecondtrader/core/event_messages.py</code> <pre><code>@dataclasses.dataclass(kw_only=True, frozen=True)\nclass RequestOrderCancellation(BrokerRequestEventBase):\n    symbol: str\n    order_id: uuid.UUID\n</code></pre>"},{"location":"api-reference/core/event_messages/#onesecondtrader.core.event_messages.RequestOrderModification","title":"<code>RequestOrderModification</code>  <code>dataclass</code>","text":"<p>               Bases: <code>BrokerRequestEventBase</code></p> Source code in <code>src/onesecondtrader/core/event_messages.py</code> <pre><code>@dataclasses.dataclass(kw_only=True, frozen=True)\nclass RequestOrderModification(BrokerRequestEventBase):\n    symbol: str\n    order_id: uuid.UUID\n    quantity: float | None = None\n    limit_price: float | None = None\n    stop_price: float | None = None\n</code></pre>"},{"location":"api-reference/core/event_messages/#onesecondtrader.core.event_messages.AcceptedOrderSubmission","title":"<code>AcceptedOrderSubmission</code>  <code>dataclass</code>","text":"<p>               Bases: <code>BrokerResponseEventBase</code></p> Source code in <code>src/onesecondtrader/core/event_messages.py</code> <pre><code>@dataclasses.dataclass(kw_only=True, frozen=True)\nclass AcceptedOrderSubmission(BrokerResponseEventBase):\n    order_id: uuid.UUID\n    broker_order_id: str | None = None\n</code></pre>"},{"location":"api-reference/core/event_messages/#onesecondtrader.core.event_messages.AcceptedOrderModification","title":"<code>AcceptedOrderModification</code>  <code>dataclass</code>","text":"<p>               Bases: <code>BrokerResponseEventBase</code></p> Source code in <code>src/onesecondtrader/core/event_messages.py</code> <pre><code>@dataclasses.dataclass(kw_only=True, frozen=True)\nclass AcceptedOrderModification(BrokerResponseEventBase):\n    order_id: uuid.UUID\n    broker_order_id: str | None = None\n</code></pre>"},{"location":"api-reference/core/event_messages/#onesecondtrader.core.event_messages.AcceptedOrderCancellation","title":"<code>AcceptedOrderCancellation</code>  <code>dataclass</code>","text":"<p>               Bases: <code>BrokerResponseEventBase</code></p> Source code in <code>src/onesecondtrader/core/event_messages.py</code> <pre><code>@dataclasses.dataclass(kw_only=True, frozen=True)\nclass AcceptedOrderCancellation(BrokerResponseEventBase):\n    order_id: uuid.UUID\n</code></pre>"},{"location":"api-reference/core/event_messages/#onesecondtrader.core.event_messages.RejectedOrderSubmission","title":"<code>RejectedOrderSubmission</code>  <code>dataclass</code>","text":"<p>               Bases: <code>BrokerResponseEventBase</code></p> Source code in <code>src/onesecondtrader/core/event_messages.py</code> <pre><code>@dataclasses.dataclass(kw_only=True, frozen=True)\nclass RejectedOrderSubmission(BrokerResponseEventBase):\n    order_id: uuid.UUID\n</code></pre>"},{"location":"api-reference/core/event_messages/#onesecondtrader.core.event_messages.RejectedOrderModification","title":"<code>RejectedOrderModification</code>  <code>dataclass</code>","text":"<p>               Bases: <code>BrokerResponseEventBase</code></p> Source code in <code>src/onesecondtrader/core/event_messages.py</code> <pre><code>@dataclasses.dataclass(kw_only=True, frozen=True)\nclass RejectedOrderModification(BrokerResponseEventBase):\n    order_id: uuid.UUID\n</code></pre>"},{"location":"api-reference/core/event_messages/#onesecondtrader.core.event_messages.RejectedOrderCancellation","title":"<code>RejectedOrderCancellation</code>  <code>dataclass</code>","text":"<p>               Bases: <code>BrokerResponseEventBase</code></p> Source code in <code>src/onesecondtrader/core/event_messages.py</code> <pre><code>@dataclasses.dataclass(kw_only=True, frozen=True)\nclass RejectedOrderCancellation(BrokerResponseEventBase):\n    order_id: uuid.UUID\n</code></pre>"},{"location":"api-reference/core/event_messages/#onesecondtrader.core.event_messages.ConfirmedOrderFilled","title":"<code>ConfirmedOrderFilled</code>  <code>dataclass</code>","text":"<p>               Bases: <code>BrokerResponseEventBase</code></p> Source code in <code>src/onesecondtrader/core/event_messages.py</code> <pre><code>@dataclasses.dataclass(kw_only=True, frozen=True)\nclass ConfirmedOrderFilled(BrokerResponseEventBase):\n    fill_id: uuid.UUID = dataclasses.field(default_factory=uuid.uuid4)\n    broker_fill_id: str | None = None\n    associated_order_id: uuid.UUID\n    symbol: str\n    side: OrderSide\n    quantity_filled: float\n    fill_price: float\n    commission: float\n    exchange: str = \"SIMULATED\"\n</code></pre>"},{"location":"api-reference/core/event_messages/#onesecondtrader.core.event_messages.ConfirmedOrderExpired","title":"<code>ConfirmedOrderExpired</code>  <code>dataclass</code>","text":"<p>               Bases: <code>BrokerResponseEventBase</code></p> Source code in <code>src/onesecondtrader/core/event_messages.py</code> <pre><code>@dataclasses.dataclass(kw_only=True, frozen=True)\nclass ConfirmedOrderExpired(BrokerResponseEventBase):\n    order_id: uuid.UUID\n</code></pre>"},{"location":"api-reference/core/event_publisher/","title":"Event Publisher","text":"<p>Read first: Event Bus, Event Messages.</p> <p>This module defines the base class for components that publish events.</p> <p>EventPublisher provides a minimal interface for publishing events to the event bus. Components that only publish events inherit from this class directly. Components that both subscribe and publish inherit from both EventSubscriber and EventPublisher.</p>"},{"location":"api-reference/core/event_publisher/#onesecondtrader.core.event_publisher.EventPublisher","title":"<code>EventPublisher</code>","text":""},{"location":"api-reference/core/event_publisher/#onesecondtrader.core.event_publisher.EventPublisher.__init__","title":"<code>__init__(event_bus)</code>","text":"Source code in <code>src/onesecondtrader/core/event_publisher.py</code> <pre><code>def __init__(self, event_bus: EventBus) -&gt; None:\n    self._event_bus = event_bus\n</code></pre>"},{"location":"api-reference/core/event_publisher/#onesecondtrader.core.event_publisher.EventPublisher._publish","title":"<code>_publish(event)</code>","text":"Source code in <code>src/onesecondtrader/core/event_publisher.py</code> <pre><code>def _publish(self, event: EventBase) -&gt; None:\n    self._event_bus.publish(event)\n</code></pre>"},{"location":"api-reference/core/event_subscriber/","title":"Event Subscriber","text":"<p>Read first: Event Bus, Event Messages.</p> <p>This module defines the base class for components that subscribe to events.</p> <p>EventSubscriber provides a threaded event loop that receives events from the event bus. Each subscriber runs in its own thread and processes events from its internal queue. Components that only subscribe inherit from this class directly. Components that both subscribe and publish inherit from both EventSubscriber and EventPublisher.</p>"},{"location":"api-reference/core/event_subscriber/#onesecondtrader.core.event_subscriber.EventSubscriber","title":"<code>EventSubscriber</code>","text":"<p>               Bases: <code>ABC</code></p>"},{"location":"api-reference/core/event_subscriber/#onesecondtrader.core.event_subscriber.EventSubscriber.__init__","title":"<code>__init__(event_bus)</code>","text":"Source code in <code>src/onesecondtrader/core/event_subscriber.py</code> <pre><code>def __init__(self, event_bus: EventBus) -&gt; None:\n    self._event_bus = event_bus\n    self._queue: queue.Queue[EventBase | None] = queue.Queue()\n    self._running = True\n    self._thread = threading.Thread(\n        target=self._event_loop, name=self.__class__.__name__\n    )\n    self._thread.start()\n</code></pre>"},{"location":"api-reference/core/event_subscriber/#onesecondtrader.core.event_subscriber.EventSubscriber.receive","title":"<code>receive(event)</code>","text":"Source code in <code>src/onesecondtrader/core/event_subscriber.py</code> <pre><code>def receive(self, event: EventBase) -&gt; None:\n    if self._running:\n        self._queue.put(event)\n</code></pre>"},{"location":"api-reference/core/event_subscriber/#onesecondtrader.core.event_subscriber.EventSubscriber.wait_until_idle","title":"<code>wait_until_idle()</code>","text":"Source code in <code>src/onesecondtrader/core/event_subscriber.py</code> <pre><code>def wait_until_idle(self) -&gt; None:\n    if not self._running:\n        return\n    self._queue.join()\n</code></pre>"},{"location":"api-reference/core/event_subscriber/#onesecondtrader.core.event_subscriber.EventSubscriber.shutdown","title":"<code>shutdown()</code>","text":"Source code in <code>src/onesecondtrader/core/event_subscriber.py</code> <pre><code>def shutdown(self) -&gt; None:\n    if not self._running:\n        return\n    self._running = False\n    self._event_bus.unsubscribe(self)\n    self._queue.put(None)\n    if threading.current_thread() is not self._thread:\n        self._thread.join()\n</code></pre>"},{"location":"api-reference/core/event_subscriber/#onesecondtrader.core.event_subscriber.EventSubscriber._subscribe","title":"<code>_subscribe(*event_types)</code>","text":"Source code in <code>src/onesecondtrader/core/event_subscriber.py</code> <pre><code>def _subscribe(self, *event_types: type[EventBase]) -&gt; None:\n    for event_type in event_types:\n        self._event_bus.subscribe(self, event_type)\n</code></pre>"},{"location":"api-reference/core/event_subscriber/#onesecondtrader.core.event_subscriber.EventSubscriber._event_loop","title":"<code>_event_loop()</code>","text":"Source code in <code>src/onesecondtrader/core/event_subscriber.py</code> <pre><code>def _event_loop(self) -&gt; None:\n    while True:\n        event = self._queue.get()\n        if event is None:\n            self._queue.task_done()\n            break\n        try:\n            self._on_event(event)\n        except Exception:\n            self._on_exception()\n        finally:\n            self._queue.task_done()\n    self._cleanup()\n</code></pre>"},{"location":"api-reference/core/event_subscriber/#onesecondtrader.core.event_subscriber.EventSubscriber._on_exception","title":"<code>_on_exception()</code>","text":"Source code in <code>src/onesecondtrader/core/event_subscriber.py</code> <pre><code>def _on_exception(self) -&gt; None:\n    pass\n</code></pre>"},{"location":"api-reference/core/event_subscriber/#onesecondtrader.core.event_subscriber.EventSubscriber._cleanup","title":"<code>_cleanup()</code>","text":"Source code in <code>src/onesecondtrader/core/event_subscriber.py</code> <pre><code>def _cleanup(self) -&gt; None:\n    pass\n</code></pre>"},{"location":"api-reference/core/event_subscriber/#onesecondtrader.core.event_subscriber.EventSubscriber._on_event","title":"<code>_on_event(event)</code>  <code>abstractmethod</code>","text":"Source code in <code>src/onesecondtrader/core/event_subscriber.py</code> <pre><code>@abc.abstractmethod\ndef _on_event(self, event: EventBase) -&gt; None: ...\n</code></pre>"},{"location":"api-reference/libraries/indicators/","title":"Indicators","text":"Source code in <code>indicators.py</code> <pre><code>\n</code></pre>"},{"location":"api-reference/libraries/strategies/","title":"Strategies","text":"Source code in <code>strategies.py</code> <pre><code>\n</code></pre>"},{"location":"api-reference/observers/csvbookkeeper/","title":"CSVbookkeeper","text":"Source code in <code>csvbookkeeper.py</code> <pre><code>\n</code></pre>"}]}